(function(){(function(e){function l(a){for(var a=a.split("."),b=this,c=a[0]==="window"?1:0;c<a.length;c++)b=b[a[c]]||(b[a[c]]={});return b}var h=l(e.split(".")[0]),d;d=h.Features={};if(!(d.load&&typeof d.load==="function")){var c=function(){return!0},g={},b={},f=function(){for(var a in b)b.hasOwnProperty(a)&&b[a]&&!b[a].cancelled&&b[a].load()},r=function(a,b){for(var c=g[a],f=c?c.length:0;f--;)if(c[f].name===b)return c[f];throw"InvalidArgument: Feature implementation [$1] does not exist in the registry.".replace("$1",
a+":"+b);},a=function(a,b){var c;if(!b||b==="auto")a:{for(var f=(c=g[a])?c.length:0,d=0;d<f;d++)if(c[d].readyState==="complete"||c[d].readyState==="loading"){c=c[d];break a}for(d=0;d<f;d++)if(c[d].detector()){c=c[d];break a}c=null}else c=b==="none"?null:r(a,b);return c},q=function(a){var a=a||c,b={},f,d,e;for(d in g)if(g.hasOwnProperty(d)){f=[];for(e=0;e<g[d].length;e++)a(g[d][e])&&f.push(g[d][e].name);f.length>0&&(b[d]=f)}return b},k,p=0,m=function(a,b,f,d,e,g,k){this.featureName=a;this.name=b;this.loadPath=
f;this.detector=d||c;this.dependencies=e;this.overrides=g;this.charset=k||"UTF-8";this.readyState="uninitialized"};m.prototype={onWrite:function(a){this.readyState="loading";a&&f()},onLoad:function(a){a&&this.onWrite(a);this.readyState="complete";f()},canLoad:function(b,c){for(var f=this.dependencies,d=f?f.length:0,e;d--;){if(b[f[d]]==="none")throw"InvalidState: Feature [$1] requires [$2] but it has been explicitly set to 'none'. Aborting loader.".replace("$1",this.featureName).replace("$2",f[d]);
e=a(f[d],b[f[d]]||"auto");if(!e)throw"InvalidArgument: Feature implementation [$1] does not exist in the registry.".replace("$1",f[d]);if(e.readyState==="uninitialized"||!c&&e.readyState==="loading")return!1}return!0},writeSync:function(a){this.readyState="loading";a.write('<script type="text/javascript" charset="$ENC$" src="$SRC$"><\/script>'.replace("$SRC$",this.loadPath).replace("$ENC$",this.charset));this.onLoad(!0)},writeAsync:function(a,b,c){this.readyState="loading";var f=this,d=a.createElement("script");
b&&(d.async=!1);d.type="text/javascript";d.charset=this.charset;d.onload=d.onreadystatechange=function(){var c=d.readyState;if(!c||/^(?:loaded|complete)$/i.test(c))d.onload=d.onreadystatechange=null,f.onLoadCallback&&f.onLoadCallback(a),f.onLoad(b)};d.onerror=function(a){c(a)};d.src=this.loadPath;a.getElementsByTagName("head")[0].appendChild(d);this.onWrite(b)}};m.prototype.featureName=null;m.prototype.onLoadCallback=m.prototype.onLoadCallback;m.prototype.readyState=null;var y=function(a){this.matrix=
a};y.prototype={resolve:function(a,b){var c={},f,d=this.matrix,e=a.length,k,m,h;if(b)for(f in b)c[f]=b[f];for(;e--;)for(k=(f=d[a[e]])?f.length:0;k--;)h=f[k]&&f[k].split("="),m=h[0],g[m]&&this.addToMap(h[0],h.length===2?h[1]:null,c);return c},addToMap:function(a,b,c){!b&&!c[a]?c[a]="auto":!c[a]||c[a]=="auto"?c[a]=b:this.doesOverride(a,b,c[a])&&(c[a]=b)},doesOverride:function(a,b,c){if(!b)return!1;var f=(a=r(a,b).overrides)&&a.length;if(!a)throw"InvalidState: Cannot resolve package conflict between [$1] and [$2]. There is no override specification.".replace("$1",
b).replace("$2",c);for(;f--;)if(a[f]===c)return!0;return!1}};var s=function(a,f,d,e,g){e=e||document;this.requested=a;this.onSuccess=f||c;this.onError=d||function(a){throw a;};this.doc=e;this.detectLanguage();g===void 0?(this.inHead=e.readyState!=="complete",this.writeSync=k==null?k=e.createElement("script").async:k):this.inHead=this.writeSync=g;this.id=p++;b[this.id]=this};s.prototype={onFinished:function(a){delete b[this.id];if(a)this.onError(a);else this.onSuccess()},load:function(){var b=this.requested,
f,d,e=!0,k=this;try{for(d in b)g[d]&&(f=a(d,b[d]))&&this.loadSingle(f,b,this.inHead,this.writeSync,function(a){k.onFinished(a)})&&(e=!1);e&&this.onDone()}catch(m){this.onFinished(m),this.onFinished=c}},detectLanguage:function(){var a=this.requested.language;if(a)this.requested.language=h.Language.detect(a)},onDone:function(){if(!this.done){var a=this;this.inHead||window.setTimeout(function(){a.onFinished()},1);this.done=!0}},loadSingle:function(b,c,f,d,e){if(b.readyState==="complete")return!1;else if(b.readyState===
"loading")return!0;var g,k;if(b.canLoad(c,d))f?b.writeSync(this.doc,this.id,e):b.writeAsync(this.doc,d,e);else{b=b.dependencies;for(g=b.length;g--;)k=a(b[g],c[b[g]]||"auto"),this.loadSingle(k,c,f,d,e)}return!0}};s.prototype.onFinished=s.prototype.onFinished;s.prototype.id=null;s.prototype.doc=null;d.loaders=b;d.features=g;d._detectors={};d.get=a;d.add=function(a,b,c,f,d,e,k){if(!a||!b||!c)throw"InvalidArgument: A feature implementation must have at least a feature name, name and a loadPath.";(g[a]||
(g[a]=[])).push(new m(a,b,c,f,d,e,k))};d.isLoaded=function(a,b){return r(a,b).readyState==="complete"};d.load=function(a,b,c,f,d){(new s(a,b,c,f,d)).load()};d.getFeatureMap=function(){return q(function(a){return a.featureName!="base"})};d.getLoadedMap=function(){return q(function(a){return a.featureName!="base"&&a.readyState==="complete"})};d.setFeatureMatrix=function(a){d.featureMatrix=new y(a)};d.getFeaturesFromMatrix=function(a,b){return d.featureMatrix.resolve(a,b)};l("nokia.maps").Features=d}})("nokia.maps",
this);
(function(e,l){var h=e.split(".")[0],d=e.split(".")[1],c,g=l.navigator,b=g.userLanguage||g.language,g=function(a){var b={},c;for(c=a.length;c--;){var f=a[c].split(" "),d=f[0],e={};e.key=d;e.iso639_1=d.substr(0,2);e.marc=f[1];e.locale=f[2];b[d]=e}return b}(["al ALB","ar ARA ar-SA","be BEL","bg BUL bg-BG","bn BEN","bs BOS","ca CAT","cs CZE cs-CZ","cy WEL","da DAN da-DK","de GER de-DE","el GRE el-GR","en ENG en-GB","en-us ENG en-US","es SPA es-ES","eu BAQ","et EST et-EE","fa IRN fa-IR","fi FIN fi-FI","fr FRE fr-FR",
"ga GLE","gl GLG","hi IND hi-IN","he HBR","hr SCR hr-HR","hu HUN hu-HU","id IND id-ID","id-id IND id-ID","in-id IND id-ID","is ICE is-IS","it ITA it-IT","ja JPN","km KHM","ko KOR ko-KR","ky KIR","lt LIT lt-LT","lv LAV lv-LV","me MNE","mi MAO","mk MAC","mn MON","mo MOL","ms MAY ms-MY","nl DUT nl-NL","no NOR no-NO","pl POL pl-PL","pt POR pt-PT","pt-br BRA pt-BR","py PYN","ro RUM ro-RO","ru RUS ru-RU","sk SLO sk-SK","sl SLV","sr SRB sr-RS","sv SWE sv-SE","sw SWA","ta TAM","th THA th-TH","tl PHL tl-PH",
"tr TUR tr-TR","uk UKR uk-UA","ur PAK ur-PK","vi VNM vi-VN","zh CHI zh-CN"]),f,r;l[h]||(l[h]={});c=l[h];c.Language={definitions:g,detect:function(a){var b=c.Features&&c.Features.getFeatureMap().language||["en-US"],d=b?b.length:0,e,g={},h=[];if(!f){for(r=b&&b.length>0?b[0]:"en-US";d--;)if(e=b[d].toLowerCase(),(e=this.getDefinition(e))&&e.locale&&!g[e.key])g[e.key]=e,h.push(e.locale);f=g}return a==="none"?"en-US":this.autoDetect(a)},autoDetect:function(a){var c=r,a=this.getDefinition(!a||a==="auto"?
b||c:a,f);if(!a||!a.locale)a=this.getDefinition(c,f);return a.locale},getDefinition:function(a,b){var b=b||this.definitions,c=a.toLowerCase();return c.length>=2?b[c]||b[c.substr(0,2)]:null},Ws:function(){nokia.maps.resources={};nokia.maps.resources.ui={};nokia.maps.resources.ui.i18n={}},setTranslations:function(a){var a=this.getDefinition(a),b=a.locale,c=b.substr(0,2).toLowerCase(),b=b.substr(3,2).toUpperCase(),f;nokia.maps.resources||this.Ws();f=nokia.maps.resources.ui.i18n;if(f[c]&&f[c][b])this.translations=
(new Function("return "+f[c][b].translation.json+";"))(),this.language=a}};d?(c[d]=c[d]||{},c[d].language={},c[d].language.Info=c.Language):(c.language={},c.language.Info=c.Language)})("nokia.maps",this);(function(){var e=[0.1];e.pop();e.push("");if(e[0]!==""){var l=function(e,d){var c=e[d];e[d]=function(){this.length||(this[0]="")||(this.length=0);return c.apply(this,arguments)}},e=Array.prototype;l(e,"push");l(e,"splice")}})();
(function(e,l){function h(a){var b=q[a];return function(a){c.Settings.set(b,a)}}var d=e.split(".")[0],c,g={},b,f,r=!1,a,q={appId:"app_id",authenticationToken:"app_code",app_id:"appId",app_code:"authenticationToken"};l[d]||(l[d]={});c=l[d];f=c.Features;b=c.Language;c.Settings=d={addObserver:function(a,b,c){(g[a]?g[a]:g[a]=[]).push({callback:b,context:c})},removeObserver:function(a,b,c){var a=g[a],f,d=0;if(a)for(f=a.length;d<f;)a[d]===b&&a[d+1]===c&&a.splice(d,2),d+=2},set:function(a,b,c){var f=this[a];
this[a]=this[a+"Setter"]?this[a+"Setter"](b):b;this.mu(a,b,f,c)},mu:function(a,b,c,f){if((a=g[a])&&(c!==b||f))for(f=a.length;c=a[--f];)c.callback.call(c.context||null,b)},lockLanguage:function(){r=!0},defaultLanguageSetter:function(a){var c;if(r)throw Error("Illegal: defaultLanguage cannot be set after a display was initialized");a=nokia.maps.config&&nokia.maps.config["language.overrideDetection"]?a==="auto"?b.detect(a):a:b.detect(a)||"en-US";try{c=f&&!f.isLoaded("language",a)}catch(d){c=!0}c?(c=
f.getLoadedMap(),f.load({language:a},null,null,null,!c.language||c.language.length===0?void 0:!1)):b.setTranslations(a);return a},languageLoaded:function(a){var c=r;c&&(r=!1);b.setTranslations(a);this.set("defaultLanguage",a,!0);c&&(r=!0)},defaultLanguage:"",appId:"",authenticationToken:"",app_id:"",app_code:""};for(a in q)q.hasOwnProperty(a)&&d.addObserver(a,h(a))})("nokia.maps",this);this.nokia.maps=this.nokia.maps||{};this.nokia.maps.build="nokiamapsapi-2.5.4-Oberon-20140128-w4-rafcdd7ab6ccf2903d9d49773eff296b23b9e943a";
(function(e){var l=e.config||{};l.reporter={full:"http://mapcreator.nokia.com/mapfeedback/widget/1.1.6/"};l.packages=l.packages||{routing:[{name:"nlp",dependencies:["map"]}],positioning:[{name:"w3c"}],map:[{name:"render-display",dependencies:["gfx","language"]}],behavior:[{name:"all"},{name:"touch"}],gfx:[{name:"canvas"},{name:"svg"},{name:"vml"}],ui:[{name:"nokia_generic",dependencies:["gfx","map"]},{name:"ovi_web",dependencies:["map"]}],language:[{name:"en-US"},{name:"en-GB"},{name:"de-DE"},{name:"es-ES"},
{name:"zh-CN"},{name:"fr-FR"},{name:"ru-RU"},{name:"it-IT"}],kml:[{name:"kml"}],heatmap:[{name:"heatmap",dependencies:["map"]}],clustering:[{name:"clustering",dependencies:["map"]}]};(function(){try{var e=document.createElement("canvas");return!(!window.WebGLRenderingContext||!e.getContext("webgl")&&!e.getContext("experimental-webgl"))}catch(d){return!1}})();l.excludePackaging={advsearch:1,advertising:1,advrouting:1,search:1};l.externalPackages=l.externalPackages||{places:[{name:"dataonly",url:l.places?
l.places.devPath:null,fileName:"jsPlacesDataAPI.js",detector:function(){return!nokia.places},overrides:[]},{name:"withui",url:l.places?l.places.devPath:null,fileName:"jsPlacesAPI.js",detector:function(){return!(nokia.places&&nokia.places.ui)},overrides:["dataonly"]}]};l.featureMatrix=l.featureMatrix||{maps:["gfx","behavior","map","positioning","ui","places","language"],positions:["gfx","behavior","map","positioning","ui","places","language"],places:["places=withui"],placesdata:["places=dataonly"],
directions:["gfx","behavior","map","positioning","routing","ui","places","language"],datarendering:["gfx","behavior","map","ui","places","kml","heatmap","clustering","language"],all:["gfx","behavior","map","ui","positioning","routing","places=withui","kml","heatmap","clustering","language"]};l.advertisement=l.advertisement||{endpoint:"http://onboard.lcpapi.lpaweb.net/nmg/",properties:{os:"js",device:"desktop",pub:"grouptest",app:"nokiamaps",output:"json"}};l.routing=l.routing||{baseUrl:"http://route{serviceMode}.api.here.com/routing/7.2/",
"secure.baseUrl":"http://route{serviceMode}.api.here.com/routing/7.2/",protocol:"nokia.maps.routing.navteq.protocolV72"};l.assetsPath=l.assetsPath||"assets/ovi/mapsapi";l.adbarCss=l.adbarCss||"adbar.css";l.tileProviders=l.tileProviders||"nokia.maps.map.js.nlpTileProviders";l.copyrightsInclude=l.copyrightsInclude||"nokia.maps.map._Copyright";l.copyrights=l.copyrights||"http://1.base.maps{serviceMode}.api.here.com/maptile/2.1/copyright/newest";l["language.warnOnMissingTranslation"]=l["language.warnOnMissingTranslation"]||
!1;l.includePlaces=!0;e.config=l})(this.nokia.maps);})();
(function(){(function(){if(!this.ovi||!this.ovi.win){var e={},l=l||this.oviConfig||{},l={win:l.win||this,doc:l.doc||this.document,modulePaths:l.modulePaths||{},version:"1.0.0.$REPOSITORY_REVISION$",buildNS:function(d){var a;for(var d=d.split("."),c=0,g=ovi.win,b;b=d[c++];)a=g[b]=g[b]||{isNs:!0},g=a;return g},provide:function(d){e[d]=1;return ovi.buildNS(d)},isLoaded:function(d){return e[d]},require:function(d,c){if(e[d])return this;var g=ovi.getLoadPath(d);try{ovi.zt(g)}catch(b){throw Error("Could not load "+
d+", reason: "+b.message);}if(!e[d]){if(c!==!1)throw Error("Namespace "+d+" was not provided by "+g);e[d]=1}return this},Fk:function(){return ovi.win.ActiveXObject?new ActiveXObject("Microsoft.XMLHTTP"):new XMLHttpRequest},$xhr:function(){return this.Fk()},sj:function(d){d=d.status;try{return!d&&location.protocol==="file:"||d>=200&&d<300||d===304||d===1223||d===0}catch(c){}return!1},$isXHRSuccess:function(d){return this.sj(d)},zt:function(d){var c=ovi.Fk();c.open("GET",d,!1);c.send(null);if(!ovi.sj(c))throw Error("Unable to load "+
d+" status: "+c.status);return ovi.win.eval(c.responseText+"\n//@ sourceURL="+d+"\n")},getLoadPath:function(d,c){var g=ovi.modulePaths[d];if(!g)for(var b=d.split("."),f=b.pop(),r=[];b.length;){g=b.join(".");if(g=ovi.modulePaths[g]){g+=r.join("/");g+=g.charAt(g.length-1)!=="/"?"/"+f:f;break}r.splice(0,0,b.pop())}g+="."+(c||"js");return g}};if(this.ovi)for(var h in l)l.hasOwnProperty(h)&&(this.ovi[h]=l[h]);else this.ovi=ovi=l;ovi.modulePaths.ovi=ovi.modulePaths.ovi||function(){for(var d=document.getElementsByTagName("script"),
c=0,g=/(^|\/|\\)ovi[\.\w]*?\.js$/i,b="",f,r,a;f=d[c++];)if(f=f.ie8_src||f.src||"",r=f.match(g)){if(f.indexOf("://")===-1){b=ovi.win.location.href;a=b.indexOf("#");var q=b.indexOf("?");a=a>q&&q>-1?q:a;b=a>-1?b.substring(0,a):b;b=b.substring(0,b.lastIndexOf("/")+1)}a=b+f.substring(0,r.index);a=a.charAt(a.length-1)==="/"?a:a+"/"}return a}();ovi.basePath=""}}).call(this);ovi.provide("ovi.browser");var Pa=ovi,Za=navigator,Cb=Za.userAgent.toLowerCase(),Rb=Za.appVersion;
Pa.platform={windows:/Windows/.test(Rb),mac:/MacIntel/.test(Za.platform),linux:/X11/.test(Rb)&&!/tablet/.test(Cb)&&!/armv7/.test(Cb),maemo:/apple/.test(Cb)&&/linux/.test(Cb)&&/armv7/.test(Za.platform),s60_v3:/Series60\/3/.test(Rb),s60_v5_touch:/Nokia5800|NokiaN97/.test(Rb)||/browserng/.test(Cb)};var Sb=Pa.platform;
Pa.browser={version:(Cb.match(/.+(?:rv|it|ra|ie)[\/: ]([\d.]+)/)||[])[1],chrome:/chrome/.test(Cb),safari:/Apple/.test(navigator.vendor)&&!/browserng/.test(Cb),opera:/opera/.test(Cb),mozilla:/firefox/.test(Cb)&&!/Apple/.test(navigator.vendor),s60:/series60/.test(Cb),cp:/browserng/.test(Cb),s60_v3:Sb.s60_v3,snc:Sb.s60_v3||Sb.s60_v5_snc,touch:Sb.maemo||Sb.s60_v5_touch,web:!(Sb.s60_v3||Sb.s60_v5_snc||Sb.maemo||Sb.s60_v5_touch),language:Za.language||Za.userLanguage};ovi.browser.msie=eval("/*@cc_on!@*/!1");
ovi.provide("ovi.lang");
(function(e){e.bind=function(a,f){if(arguments.length>2){var b=[].slice.call(arguments,2);return function(){return f.apply(a,b.concat(e.splat(arguments)))}}else return function(){return f.apply(a,arguments)}};e.each=function(a,f){if(a){var b=0,c=a.length,m;if(typeof c!=="number"||Object.prototype.toString.call(a)==="[object Object]"&&!(c-1 in a))for(m in a){if(a.hasOwnProperty(m)&&f.call(a,a[m],m,a)===!1)break}else for(m=a[0];b<c&&f.call(a,m,b,a)!==!1;m=a[++b]);}};e.extend=function(){var a="constructor toString valueOf toLocaleString isPrototypeOf propertyIsEnumerable hasOwnProperty unique".split(" "),
f,b={constructor:function(){}},c;for(f in b)c=null;c===void 0&&(c=function(f,b){for(var k=a.length,c;k--;)if(b.hasOwnProperty(c=a[k]))f[c]=b[c]});e.extend=function(a,f){for(var b=Array.prototype.slice.call(arguments,1),k=0,q=b.length;k<q;k++){var f=b[k],r;for(r in f)f.hasOwnProperty(r)&&(a[r]=f[r]);c&&f&&c(a,f,1)}return a};return e.extend.apply(null,arguments)};e.splat=function(a){var f=e.type(a);return f==="undefined"?[]:f==="arguments"?Array.prototype.slice.call(a):f==="array"?a:[a]};for(var l=
Object.prototype.toString,h={},d={1:"element",3:"textnode",9:"document",11:"fragment"},c="Arguments Array Boolean Date Document Element Error Fragment Function NodeList Null Number Object RegExp String TextNode Undefined Window".split(" "),g=0,b,f;b=c[g++];)if(f=e.win[b])try{h[l.call(new f)]=b.toLowerCase()}catch(r){}e.type=function(a){return a===null&&"null"||a===void 0&&"undefined"||a.nodeType&&d[a.nodeType]||a.length!==void 0&&(typeof a.length=="number"||a.length.tagName)&&(a.callee&&"arguments"||
a.alert&&"window"||a.item&&"nodelist")||h[l.call(a)]}})(ovi);ovi.provide("ovi.Class");
(function(e){function l(c){function d(){var b=this.wk;this.wk=d;var f;try{f=this instanceof d?new c(arguments):c.apply(this,arguments)}finally{this.wk=b}return f}return d}function h(){var c=this.wk;delete this.wk;return c.Tn.apply(this,arguments)}function d(){}e.Class=function(c){function g(){this.ij&&this.ij();return this.initialize?this.initialize.apply(this,arguments):this}c=c||{};if(!(this instanceof e.Class))return new e.Class(c);var b;if(c.Mixins){var f=[].concat(c.Mixins),r=[],a=0,q;for(delete c.Mixins;q=
f[a++];)for(b in q=q.prototype||q)typeof q[b]==="function"&&(b!=="initialize"?c[b]||(c[b]=q[b]):r.push(q.initialize));if(r.length>0)c.ij=function(){k.ij.Tn&&k.ij.Tn.call(this);for(var a=0,f;f=r[a++];)f.call(this)}}f=c.Extends;delete c.Extends;a=c.Statics;delete c.Statics;var k;if(typeof f==="function"){d.prototype=f.prototype;k=new d;for(b in c)if(c.hasOwnProperty(b)){if(typeof k[b]==="function"&&typeof c[b]==="function")c[b]=l(c[b]),c[b].Tn=k[b];k[b]=c[b]}k._super=h;k.Dw=f}else k=c;if(c.Name)k.className=
c.Name,g.Name=k.className;delete k.Name;g.constructor=e.Class;g.prototype=k;g.prototype.constructor=g;a&&e.extend(g,a);return g}})(ovi);ovi.provide("ovi.Array");
(function(e){var l="forEach indexOf lastIndexOf map filter every some reduce reduceRight".split(" "),h=/^\s*function\s+\w+\s*\(\s*\)\s*\{\s*\[\s*native\s+code\s*\]\s*\}\s*$/,d={forEach:function(f,b,a){for(var c=f.length>>>0,k=0;k<c;k++)k in f&&b.call(a,f[k],k,f)},map:function(f,b,a){var c,k,p,m;if(f==null)throw new TypeError(" array is null or not defined");k=Object(f);p=k.length>>>0;if({}.toString.call(b)!="[object Function]")throw new TypeError(b+" is not a function");f=Array(p);for(c=0;c<p;)c in
k&&(m=k[c],m=b.call(a,m,c,k),f[c]=m),c++;return f},lastIndexOf:function(f,b,a){return this.Hp(f,b,a,-1)},Hp:function(f,b,a,c){var c=c||1,k=f.length>>>0;isNaN(a)?a=c>0?0:k-1:(a=Math[a<0?"ceil":"floor"](a),a<0?a+=k:c<0&&a>=k&&(a=k-1));for(;a>-1&&a<k;a+=c)if(a in f&&f[a]===b)return a;return-1}},c={isOviArray:1},g=l.length;for(d.indexOf=d.Hp;g--;){var b=l[g];typeof l[b]==="function"&&h.test(l[b])&&(!l[b].toString||h.test(l[b].toString))?(l.splice(g,1),d[b]=Array[b]||new Function("var ap = Array.prototype; return ap."+
b+".apply(arguments[0], ap.slice.call(arguments, 1));")):c[b]=new Function("return ovi.Array."+b+".apply(ovi.Array, [this].concat(ovi.splat(arguments)));")}e.Array=l.length?function(f){return(f=arguments.length?f:[]).isOviArray?f:e.extend(f,c)}:function(f){return arguments.length?f:[]};e.extend(e.Array,d)})(ovi);ovi.provide("nokia.maps.capturing._packaging.base");ovi.provide("nokia.maps.clustering._packaging.base");ovi.provide("nokia.maps.heatmap._packaging.base");ovi.provide("nokia.maps.util.ResourceLoader");
(function(e){var l=nokia.maps.util.d,h={css:function(d){/###RESOURCE_START###/im.test(d)&&(d=d.replace(/[\s\S]*###RESOURCE_START###\*\//im,""),d=d.replace(/\/\*###RESOURCE_END###[\s\S]*/im,""));return d},html:function(d){/###RESOURCE_START###/im.test(d)&&(d=d.replace(/[\s\S]*###RESOURCE_START###--\>/im,""),d=d.replace(/<\!--###RESOURCE_END###[\s\S]*/im,""));return d}};e.requireString=function(d){var c=d.split("."),d=c.pop(),g=c.join("."),b=ovi.getLoadPath(g,d),c=ovi.Fk();c.open("GET",b,!1);c.send(null);
ovi.sj(c)?(g=ovi.provide(""+g),c=c.responseText,c.replace(/\n/g,""),h[d]&&(c=h[d](c)),g[d]=c):l("Unable to load "+this.Lt+" status: "+c.status)};e.requireI18n=function(d){for(var c=e.config.packages.language,g=c.length,b=d||"nokia.maps";g--;)d=c[g].split("-"),e.requireString(b+".resources.ui.i18n."+(d.length===2?d[0]+"."+d[1]:d[0])+".translation.json")}})(nokia.maps);ovi.provide("nokia.maps.util");
(function(e){function l(a){return function(f){return p.call(f)===a}}function h(a){return this[a]}function d(a){this.message=a;this.name="ParserError"}var c={},g=Math,b=g.min,f=g.max,r=Function(),g=document,a=g.createElement("p"),q=a.appendChild(g.createTextNode("")),k,g=function(){for(var a=window,f,b,m,c=" moz webkit ms o".split(" "),p=5;p--&&!f;)f=c[p],f=(b=a[f+(f?"R":"r")+"equestAnimationFrame"])&&!isNaN(b.call(window,r))&&(m=a[f+(f?"C":"c")+"ancelAnimationFrame"]);k=f?function(f){return b.call(a,
f)}:function(f){return a.setTimeout(f,25)};return f?function(f){return m.call(a,f)}:function(f){return a.clearTimeout(f)}}(),p={}.toString,m="Array Boolean Date Error Function Number Object RegExp String".split(" "),y=m.length;for(e.isArguments=l(p.call(arguments));y--;)e["is"+m[y]]=l(p.call(new this[m[y]]));ovi.extend(e,{hc:function(a,f){var b;arguments.length>1&&f!==c?(b=Error(a+": "+f),b.type=a):b=Error(a);throw b;},d:function(a){e.hc("IllegalArgument",arguments.length?a:c)},If:function(a){e.hc("IllegalState",
arguments.length?a:c)},Zn:function(a){e.hc("UnsupportedOperation",arguments.length?a:c)},Kv:function(a){e.hc("InternalError",arguments.length?a:c)},requestAnimationFrame:k,cancelAnimationFrame:g,un:function(a,f){var a=(""+a).split("."),b=a.length,k=0;for(arguments.length<2&&(f=window);k<b&&f!==void 0&&f!==null;k++)f=f[a[k]];return f},now:Date.now||function(){return+new Date},flatMerge:function(a,f,b,k){var m,c;for(m in f)if(c=f[m],f.hasOwnProperty(m)&&(b||!a.hasOwnProperty(m))&&(!k||k(m,c)))a[m]=
c;return a},Bg:function(a){return e.lm(a).map(h,a).join("")},lm:Object.keys||function(){var a=Object.prototype.hasOwnProperty,f=!{toString:0}.propertyIsEnumerable("toString"),b=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],k=b.length;return function(m){var c=typeof m,p;(c!=="object"&&c!=="function"||m===null)&&e.d();c=ovi.Array([]);for(p in m)a.call(m,p)&&c.push(p);if(f)for(p=0;p<k;p++)a.call(m,b[p])&&c.push(b[p]);return c}}(),getRootNameSpace:function(a){return ovi.win[a.split(".")[0]]},
A:r,cs:function(){e.hc("Unimplemented abstract method.",c)},qf:function(a,f){return(a%f+f)%f},Ia:function(a,k,m){return b(f(+a,+k),+m)},Ik:function(a){return function(f){return a&&a[f]||null}},ht:self.XPathResult?function(a,f,b){a=(a.ownerDocument||a).evaluate(f,a,new nokia.maps.util.Ik(b),XPathResult.ORDERED_NODE_ITERATOR_TYPE,null);for(f=[];b=a.iterateNext();)f.push(b);return f||[]}:function(a,f,b){var k=a.ownerDocument||a,m=k.getProperty("SelectionLanguage"),c=k.getProperty("SelectionNamespaces"),
p,q="";for(p in b)b.hasOwnProperty(p)&&(q+="xmlns:"+p+'="'+b[p]+'" ');k.setProperty("SelectionLanguage","XPath");k.setProperty("SelectionNamespaces",q);a=a.selectNodes(f);k.setProperty("SelectionLanguage",m);k.setProperty("SelectionNamespaces",c);return a},vf:function(a){var f,b;if(window.ActiveXObject)f=new ActiveXObject("Microsoft.XMLDOM"),f.async=!1,f.resolveExternals=!1,f.validateOnParse=!1,f.loadXML(a),f.parseError.errorCode&&(b="error on line ".concat(f.parseError.line,": ",f.parseError.reason));
else if(self.DOMParser&&(f=new DOMParser,f=f.parseFromString(a,"text/xml"),ovi.Array.indexOf([f.documentElement.nodeName,(f.documentElement.firstChild||{}).nodeName],"parsererror")>=0))a=f.getElementsByTagName("parsererror")[0],b=(a.childNodes[0].nodeType===3?a.childNodes[0].nodeValue+"\n":"")+a.childNodes[1].firstChild.nodeValue;if(b)throw new d(b);return f||null},getConstructor:function(a){try{return!a.isNs?a:null}catch(f){return null}},sanitizeText:function(f){q.nodeValue=f;return a.innerHTML},
ys:function(){var a=document.createElement("div"),f="";a.innerHTML="<svg></svg>";if(!a.firstChild)return!0;f=a.firstChild.toString();return this.il||(this.il=!(!window.SVGSVGElement||!(f==="[object HTMLElement]"||f==="[object SVGSVGElement]")))},Yc:function(a,f){for(var b=(a=a.split(" ")).length,k={};b--;)k[a[b]]=f;return k},isWebGl:function(){var a=null,f=["webgl","experimental-webgl","moz-webgl","webkit-3d"],b=document.createElement("canvas"),k=f.length,m;try{for(m=0;m<k&&window.WebGLRenderingContext&&
!(a=b.getContext(f[m]));m++);}catch(c){return!1}return a!==null}})})(nokia.maps.util);ovi.provide("nokia.maps.util.services");
(function(e){function l(a){this.eo=a||1/0;for(var a=[],f=36,b;f--;)b=Math.floor(Math.random()*16),a[f]="0123456789ABCDEF"[f===14?4:f===19?b&3|8:b];a[8]=a[13]=a[18]=a[23]="-";this.id=a.join("");this.init()}var e=nokia.maps,h=e.config,d=e.util,e=d.services,c=d.now,g=encodeURIComponent,b,f=d.getRootNameSpace("nokia.maps").Settings,r;l.prototype={isAlive:function(){return c()<this.cm+this.eo},init:function(){this.cm=c()}};l.getSessionId=function(){if(!b||!b.isAlive())b=new l(h.sessionTTL);b.init();return b.id};
r="&xnlp=CL_JSMv"+g("2.5.4");ovi.extend(e,{getBaseURL:function(a,f,b,c){var m=a.get("secureConnection"),r=h&&h.isChina,d=null,g=null,e=c&&r?".china":"",l=a.get(f+"."+b+e+".baseUrl")||a.get(f+e+".baseUrl"),e=a.get(f+"."+b+e+".secure.baseUrl")||a.get(f+e+".secure.baseUrl"),w=a.get(f+"."+b+".secure.interface")||z,z=a.get(f+"."+b+".interface")||a.get(f+".interface");if(m=="force")return e&&(d=e,g=w||z,d+=g?g+"?":""),d;m=="prefer"&&(d=e,g=w);d||(d=l);g||(g=z||"");g!=""&&(g+="?");d+=g;c&&!r&&(d+="int=true&");
return d},addNlpParams:function(a,b){return a.concat(/[\?&]$/.test(a)?"":/[\?&]/.test(a)?"&":"?","app_id=",g(f.app_id),b?"&token=":"&app_code=",g(f.app_code),r,f.noSID?"":",SID_"+g(l.getSessionId()))}});d.Session=l})();ovi.provide("nokia.maps.util.animation.easeFunctions");
(function(e){e.animation.easeFunctions={LINEAR:function(e){return e},EASE_IN_QUAD:function(e){return e*e},EASE_OUT_QUAD:function(e){return-e*(e-2)},EASE_IN_OUT_QUINT:function(e){e*=2;if(e<1)return e*e*e*e*e/2;e-=2;return e*e*e*e*e/2+1},EASE_OUT_CIRC:function(e){return Math.sqrt(2*e-e*e)}}})(nokia.maps.util);ovi&&ovi.provide("nokia.maps.Detector");nokia.maps=nokia.maps||{};
(function(e){function l(e,d){for(var c=d.length,g=null;c--;)if(d[c][0]===e){g=d[c];break}return g}e.Detector=function(e,d){this.definitions=e;this.omitted=d};e.Detector.prototype={detect:function(e){switch(e){case void 0:return this.detect(this.omitted);case "auto":return this.autoDetect();case "none":return null;default:return l(e,this.definitions)===null?null:e}},autoDetect:function(){for(var e=this.definitions,d=e.length,c=0;c<d;c++)if(this.isCapable(e[c][0]))return e[c][0]},isCapable:function(e){return(e=
l(e,this.definitions))&&e[1]()}}})(nokia.maps);ovi.provide("nokia.maps.util.LinkedList");
(function(e){var l=nokia.maps.util.d,h=!h,d=!h,l=nokia.maps.util.d,c=e.LinkedList=Function(),g=e.LinkedList.Element=function(b){this.data=b};ovi.extend(c.prototype,{k:null,l:null,length:0,first:function(){return this.k},last:function(){return this.l},elementOf:function(b,f){for(var c=f||this.k;c&&c.data!==b;)c=c.next;return c||null},lastElementOf:function(b,f){for(var c=f||this.l;c&&c.data!==b;)c=c.prev;return c||null},toArray:function(b){for(var f=this.k,c=[];f;)b?c.push(f):c.push(f.data),f=f.next;
return c},indexOf:function(b){var f=b instanceof g,c=0,a=this.k;if(this.length>0)for(;a;){if(f){if(a===b)return c}else if(a.data===b)return c;c++;a=a.next}return-1},lastIndexOf:function(b){var f=b instanceof g,c=this.length-1,a=this.l;if(this.length>0)for(;a;){if(f){if(a===b)return c}else if(a.data===b)return c;c--;a=a.prev}return-1},get:function(b){var f=this.k;if(b instanceof g)return b;if((b=+b)<0)for(f=this.l;f&&++b;)f=f.prev;else for(;f&&b--;)f=f.next;return f},set:function(b,f){var c=this.k;
if(b instanceof g)c=b,c.list!==this&&l("Invalid index!");else if((b=+b)<0){for(c=this.l;c&&++b;)c=c.prev;if(!c)return this.unshift(f)}else if(b!==b)l("Invalid index!");else{for(;c&&b--;)c=c.next;if(!c)return this.push(f)}if(f instanceof g)return this.splice(b,1,f)&&this;c.data=f;return this},remove:function(b){var f,c;b instanceof g||(b=this.elementOf(b));if(!b||b.list!==this)return d;if(--this.length===0)this.k=this.l=null;else if(this.k===b){if(this.k=b.next)this.k.prev=null}else if(this.l===b){if(this.l=
b.prev)this.l.next=null}else f=b.prev,c=b.next,f.next=c,c.prev=f;b.list=b.prev=b.next=null;return h},sort:function(b,f){var c=this.k,a;if(!c)return this;this.k=this.l=null;for(this.length=0;c;)a=c.next,c.list=c.prev=c.next=null,this.addSorted(b,f,c),c=a;return this},addSorted:function(b,f){for(var c=arguments,a=c.length,f=f||this,q=1,k,p,m;++q<a;)if(p=c[q],p instanceof g?p.list&&p.list.remove(p):p=new g(p),p.list=this,m=this.k,++this.length===1)this.k=this.l=p;else{for(;m;){k=b.call(f,p.data,m.data,
p,m);if(k<=0){p.next=m;m===this.k?this.k=m.prev=p:(p.prev=m.prev,p.prev.next=p,m.prev=p);break}m=m.next}if(k>0)p.prev=this.l,this.l=this.l.next=p}return this},shift:function(){var b;if(this.length<=0)return null;this.length--;b=this.k;if(this.k.next){if(this.k=this.k.next)this.k.prev=null}else this.k=this.l=null;b.list=b.prev=b.next=null;return b},unshift:function(){for(var b=arguments,f=b.length,c,a=-1;++a<f;)c=b[a],c instanceof g?c.list&&c.list.remove(c):c=new g(c),c.list=this,++this.length===1?
this.k=this.l=c:(this.k.prev=c,c.next=this.k,this.k=c);return this.length},next:function(b){b!==void 0&&b!==null&&!(b instanceof g)&&(b=this.elementOf(b));if(!b)return this.k;return b.next},prev:function(b){b!==void 0&&b!==null&&!(b instanceof g)&&(b=this.elementOf(b));if(!b)return this.l;return b.prev},push:function(){for(var b=arguments,f=b.length,c,a=-1;++a<f;)c=b[a],c instanceof g?c.list&&c.list.remove(c):c=new g(c),c.list=this,++this.length===1?this.k=this.l=c:(this.l.next=c,c.prev=this.l,this.l=
c);return this.length},pop:function(){var b=this.l;if(!b)return null;--this.length===0?this.k=this.l=null:(this.l=this.l.prev,this.l.next=null);b.list=b.prev=b.list=null;return b},splice:function(b,f){var c=arguments,a=c.length,q=1,k=this.k,p,m=[],d;if(ovi.type(b)!=="number")b instanceof g?(k=b,!k.list===this&&l("Invalid index given to LinkedList.splice!")):(k=this.elementOf(b))||l("Invalid index given to LinkedList.splice!");else if(b>=0)for(;--b>=0&&k;)k=k.next;else{for(k=this.l;++b<0&&k;)k=k.prev;
if(!k)k=this.k}if(k)for(;--f>=0&&k;){p=k.next;m[m.length]=k;if(--this.length===0)this.k=this.l=k.list=null;else if(k===this.k){if(this.k=k.next)this.k.prev=null;k.next=k.list=null}else k===this.l?(this.l=k.prev,this.l.next=k.prev=k.list=null):(d=k.prev,d.next=k.next,d.next.prev=d,k.prev=k.next=k.list=null);k=p}else k=this.l;if(!k)k=this.l;for(;++q<a;)(d=c[q])instanceof g?d.list&&d.list.remove(d):d=new g(d),++this.length===1?k=this.k=this.l=d:k===this.l?(k.next=d,d.prev=k,k=this.l=d):(d.next=k.next,
d.next.prev=d,d.prev=k,k=k.next=d);return m}});ovi.extend(g.prototype,{list:null,next:null,prev:null})})(nokia.maps.util);ovi.provide("nokia.maps.util.OList");
(function(e){var l=e.d;e.OList=new ovi.Class({initialize:function(e){this.ha=ovi.Array(e||[])},L:function(h,d,c){this.ha.splice(d,0,h);if(h=this.ya("add",h,d,c))return c&&e.If(),this.bc(d,h),h},add:function(e,d){if(arguments.length<2)d=this.ha.length;d!==+d&&l();this.L(e,d);return this},addAll:function(e,d){var c=e.length,g=this.ha.length,b=0,f=Math;arguments.length<2&&(d=g);d!==+d&&l();for(g=d<0?f.max(0,g+d):f.min(g,d);b<c;b++)this.L(e[b],g+b);return this},remove:function(e){e=this.indexOf(e);return e<
0?null:this.removeAt(e)},removeAll:function(e){for(var d=e.length,c=0;c<d;c++)this.remove(e[c]);return this},bc:function(h,d){var c=this.ha.splice(h,1)[0],g;if(g=this.ya("remove",c,h,d))return d&&e.If(),this.L(c,h,g),g},removeAt:function(e){var d=this.get(e);return this.bc(e)?null:d},clear:function(){for(var e=this.ha.length;e--;)this.bc(e)},set:function(e,d){var c;c=this.get(d);if(!this.bc(d))if(this.L(e,d))this.L(c,d);else return c},indexOf:function(e){return this.ha.indexOf(e)},get:function(e){var d=
this.ha;(e!==+e>>>0||e>=d.length)&&l();return d[e]},getLength:function(){return this.ha.length},asArray:function(){return[].concat(this.ha)},ya:function(e,d,c,g){var b=this.pa,f,r;g||(g=1/0);if(b)for(r=0;r in b&&r<g;)if(b[r++].call(b[r++],this,e,d,c)){f=r;break}return f},addObserver:function(h,d){!e.isFunction(h)&&l("callback");var c=this.pa||(this.pa=[]),g=c.length;c[g++]=h;d&&(c[g]=d);c.length=++g},removeObserver:function(e,d){var c,g=0,b;if(c=this.pa)for(b=c.length;g<b;)c[g]===e&&c[g+1]===d&&(c.splice(g,
2),b===2&&delete this.pa),g+=2;return this}})})(nokia.maps.util);ovi.provide("nokia.maps.util.OObject");
(function(e){var l={},h=0;e.OObject=new ovi.Class({initialize:function(d){for(var c in d)this.set(c,d[c])},set:function(d,c,g){var b;if(c===void 0&&g===void 0&&typeof d!=="string")for(b in d)this.Df(b,d[b]);else this.Df(d,c,g);return this},Df:function(d,c,g){if(d!="__proto__"){var b=this[d],f=this[l[d]||++h&&(l[d]=d+"Setter")];h>5E3&&(l={},h=0);if(g||c!==b)f&&(c=f.call(this,c)),b!==c&&this.ed(d,this[d]=c,b)}},get:function(d){return this[d]},remove:function(d){var c=this[d];this.hasOwnProperty(d)&&
(delete this[d],c!==this[d]&&this.ed(d,this[d],c))},ed:function(d,c,g){var b=this.re,f,r,a=1,q;if(b){q=b["*"];do if(q){q=q.slice(0);f=q.length;for(r=0;r<f;)if(q[r++].call(q[r++],this,d,c,g),this[d]!==c)return}while(a--&&(q=b[d]))}},addObserver:function(d,c,g){var b=this.re||(this.re={});(b[d]||(b[d]=[])).push(c,g);return this},removeObserver:function(d,c,g){var b=this.re,f,r,a=0;if(b&&(f=b[d]))for(r=f.length;a<r;)f[a]===c&&f[a+1]===g&&(f.splice(a,2),r===2&&delete b[d]),a+=2;return this},observersSetter:function(d){for(var c in d)this.addObserver(c,
d[c])}})})(nokia.maps.util);ovi.provide("nokia.maps.util.Point");
(function(e){function l(a,f,b,k){k||(k=0);return f-k<=a&&b+k>=a||f+k>=a&&b-k<=a}var h=Math,d=h.abs,c=h.sqrt,g=h.pow,b=h.round,f=h.floor,r=h.ceil,a=h.min,q=h.max,k=e.d,p=e.Point=function(a,f){this.x=+a;this.y=+f};ovi.extend(p.prototype,{validate:function(){return this.x===+this.x&&this.y===+this.y},equals:function(a){return a?this===a||this.x===a.x&&this.y===a.y:!1},clone:function(){return new p(this.x,this.y)},toString:function(){return this.x+", "+this.y},add:function(a){return new p(this.x+a.x,
this.y+a.y)},sub:function(a){return new p(this.x-a.x,this.y-a.y)},multiply:function(a){return new p(this.x*a,this.y*a)},divide:function(a){a===0&&k("divisor can not be Zero");return new p(this.x/a,this.y/a)},modulo:function(a){a===0&&k("divisor can not be Zero");return new p(this.x%a,this.y%a)},round:function(){return new p(b(this.x),b(this.y))},floor:function(){return new p(f(this.x),f(this.y))},ceil:function(){return new p(r(this.x),r(this.y))},len:function(){return c(this.x*this.x+this.y*this.y)},
min:function(f){return new p(a(this.x,f.x),a(this.y,f.y))},max:function(a){return new p(q(this.x,a.x),q(this.y,a.y))},span:function(a){return new p(d(this.x-a.x),d(this.y-a.y))},distance:function(a){return c(g(this.x-a.x,2)+g(this.y-a.y,2))},getNearest:function(a,f){var b=f.x-a.x,k=f.y-a.y,c;c=a;if(b||k)c=((this.x-a.x)*b+(this.y-a.y)*k)/(b*b+k*k),c=c<=0?a:c>=1?f:new p(a.x+c*b,a.y+c*k);return c},isCoveredBy:function(a,f,b){return p.isCoveredBy(this.x,this.y,a,f,b)}});p.fromObject=function(a){var f,
b;return a instanceof p?a:a&&("x"in a&&"y"in a&&(f=a.x,b=a.y,1)||a.length===2&&(f=a[0],b=a[1],1))?new p(f,b):null};p.isCoveredBy=function(a,f,b,k,p){for(var q=b.length,r=q,d,e,h,A=b[0],C,E=0,M=0,I=k/2||0,K=p?1:3;C!="V"&&r>K;){d=b[--r];k=b[--r];h=b[r?r-1:(q+(r-1))%q];e=b[r?r-2:(q+(r-2))%q];if(k>=a-I&&k<=a+I&&d>=f-I&&d<=f+I||e>=a-I&&e<=a+I&&h>=f-I&&h<=f+I)C="V";else if(!C&&k===a)e===a&&(d<f&&h>f||d>f&&h<f)||(A<=a&&e>a||A>=a&&e<a)&&(d>=f?++E:++M),C=l(f,d,h,I)&&c(g((a-e)*(d-h)-(f-h)*(k-e),2)/(g(k-e,2)+
g(d-h,2)))<=I&&"E";else if(!C&&l(a,k,e,I)){if(k<a&&e>a||k>a&&e<a)A=d+(h-d)*((a-k)/(e-k)),E+=A>f,M+=A<f;C=l(f,d,h,I)&&c(g((a-e)*(d-h)-(f-h)*(k-e),2)/(g(k-e,2)+g(d-h,2)))<=I&&"E"}A=k}return p&&C==="S"&&C||C||p&&M&&E%2&&"S"||!1};p.prototype.toString=function(){return this.x+", "+this.y}})(nokia.maps.util);ovi.provide("nokia.maps.util.Rectangle");
(function(e){var l=Math.max,h=e.Point,d=e.Rectangle=function(c){for(var d=c.length,b=this.topLeft=c[0].clone(),f=this.bottomRight=b.clone(),r,a;--d>=0;){a=(r=c[d]).x;r=r.y;if(a<b.x)b.x=a;else if(a>f.x)f.x=a;if(r<b.y)b.y=r;else if(r>f.y)f.y=r}return this};ovi.extend(d.prototype,{equals:function(c){var d,b,f,r;return!!c&&(d=this.topLeft).x===(f=c.topLeft).x&&d.y===f.y&&(b=this.bottomRight).x===(r=c.bottomRight).x&&b.y===r.y},addPoint:function(c){return new d([this.topLeft,this.bottomRight,c])},addPoints:function(c){return c.length?
new d(c.concat(this.topLeft,this.bottomRight)):this},getCenter:function(){var c=this.topLeft,d=this.bottomRight;return new h((c.x+d.x)/2,(c.y+d.y)/2)},centerTo:function(c){var g=this.bottomRight,b=c.span(this.topLeft),f=c.span(g),g=l(b.x,f.x),b=l(b.y,f.y);return new d([new h(c.x-g,c.y-b),new h(c.x+g,c.y+b)])},intersection:function(c){var g,b;return c&&(g=this.topLeft.max(c.topLeft||c)).x<=(b=this.bottomRight.min(c.bottomRight||c)).x&&g.y<=b.y?new d([g,b]):null},merge:function(c){return c?new d([this.topLeft.min(c.topLeft||
c),this.bottomRight.max(c.bottomRight||c)]):this.clone()},pad:function(c){return c?new d([this.topLeft.sub(new h(c,c)),this.bottomRight.add(new h(c,c))]):this.clone()},getWidth:function(){return this.bottomRight.x-this.topLeft.x},getHeight:function(){return this.bottomRight.y-this.topLeft.y},toString:function(){return"{ "+this.topLeft+", "+this.bottomRight+" }"},contains:function(c){if(c)var d=this.topLeft,b=this.bottomRight,f=f=c.topLeft||c,r=c.bottomRight||c;return!!c&&d.x<=f.x&&d.y<=f.y&&b.x>=
r.x&&b.y>=r.y},clone:function(){return new d([this.topLeft,this.bottomRight])},initialize:d});d.prototype.toString=function(){return"{ "+this.topLeft+", "+this.bottomRight+" }"}})(nokia.maps.util);ovi.provide("nokia.maps.util.RTreeNode");
(function(e){var l=Math.max,h=Math.min;e.RTreeNode=new ovi.Class({initialize:function(d,c){this.Leaf=d;this.ParentNode=c||null;this.Entries=[]},Leaf:null,Root:null,ParentNode:null,ParentEntry:null,Entries:null,X1:0,X2:0,Y1:0,Y2:0,Volume:null,addChild:function(d){this.Entries.push(d);this.Leaf=!1;d.ParentNode=this;d.ParentEntry=this.Entries.length-1;this.updateBoundingBox(d.X1,d.X2,d.Y1,d.Y2)},removeChild:function(d,c){for(var g=this.Entries,b=g.splice(d,1)[0],f=d,r=g.length;f<r;f++)g[f].ParentEntry--;
c&&this.calculateBoundingBox();return b},calculateBoundingBox:function(){var d=this.Entries,c=d.length;this.X1=Infinity;this.X2=-Infinity;this.Y1=Infinity;for(this.Y2=-Infinity;entry=d[--c];){if(entry.X1<this.X1)this.X1=entry.X1;if(entry.Y1<this.Y1)this.Y1=entry.Y1;if(entry.X2>this.X2)this.X2=entry.X2;if(entry.Y2>this.Y2)this.Y2=entry.Y2}this.Volume=(this.X2-this.X1)*(this.Y2-this.Y1)},updateBoundingBox:function(d,c,g,b){this.Volume===null?(this.X1=d,this.X2=c,this.Y1=g,this.Y2=b):(this.X1=h(d,this.X1),
this.X2=l(c,this.X2),this.Y1=h(g,this.Y1),this.Y2=l(b,this.Y2));this.Volume=(this.X2-this.X1)*(this.Y2-this.Y1)},getEnlargement:function(d,c,g,b){return(l(this.X2,c)-h(this.X1,d))*(l(this.Y2,b)-h(this.Y1,g))-this.Volume},overlaps:function(d,c,g,b){return d<this.X2&&c>this.X1&&g<this.Y2&&b>this.Y1}})})(nokia.maps.util);ovi.provide("nokia.maps.util.RTreeRecord");
(function(e){var l=Math.max,h=Math.min;e.RTreeRecord=new ovi.Class({initialize:function(d,c,g,b){var f;d>g&&(f=d,d=g,g=f);c>b&&(f=c,c=b,b=f);this.X1=d||0;this.Y1=c||0;this.X2=g||0;this.Y2=b||0;this.Leaf=!0},Id:null,X1:0,X2:0,Y1:0,Y2:0,Volume:null,Priority:32,getEnlargement:function(d,c,g,b){return(l(this.X2,c)-h(this.X1,d))*(l(this.Y2,b)-h(this.Y1,g))-this.Volume},overlaps:function(d,c,g,b){return d<this.X2&&c>this.X1&&g<this.Y2&&b>this.Y1}})})(nokia.maps.util);ovi.provide("ovi.Logger");
(function(e){function l(c,g){for(var b=d.length-1;b>-1;--b)try{d[b][c].apply(d[b],g)}catch(f){}}var h=!0,d=[];e.Logger={addLogger:function(c){if(c===null||typeof c!=="object"||typeof c.debug!=="function"||typeof c.info!=="function"||typeof c.warn!=="function"||typeof c.error!=="function")throw new TypeError("Illegal logger object");for(var g=d.length-1;g>-1;--g)if(d[g]===c)return l("warn",["The logger is already attached"]),!1;typeof c.initLogger==="function"&&c.initLogger();d.push(c);return!0},removeLogger:function(c){for(var g=
d.length-1;g>-1;--g)if(d[g]===c)return d.splice(g,1),typeof c.cleanupLogger==="function"&&c.cleanupLogger(),!0;l("warn",["The passed logger wasn't attached"]);return!1},removeAllLoggers:function(){var c=d;d=[];for(var g=c.length-1;g>-1;--g)if(typeof c[g].cleanupLogger==="function")try{c[g].cleanupLogger()}catch(b){}},isEnabled:function(){return h},enable:function(){h=!0},disable:function(){h=!1},debug:function(){h&&l("debug",arguments)},info:function(){h&&l("info",arguments)},warn:function(){h&&l("warn",
arguments)},error:function(){h&&l("error",arguments)}};e.debug=function(){e.Logger.debug.apply(this,arguments)};e.info=function(){e.Logger.info.apply(this,arguments)};e.warn=function(){e.Logger.warn.apply(this,arguments)};e.error=function(){e.Logger.error.apply(this,arguments)}})(ovi);ovi.provide("nokia.maps.util.Vector3D");
(function(e){var l=Math,h=e.d,d=l.sqrt,c=l.acos,g=180/Math.PI,b;e.Vector3D=b=function(f,b,a){this.x=+f;this.y=+b;this.z=+a};ovi.extend(b.prototype,{add:function(f){return new b(this.x+f.x,this.y+f.y,this.z+f.z)},subtract:function(f){return new b(this.x-f.x,this.y-f.y,this.z-f.z)},multiply:function(f){f instanceof b||h("Parameter should be an instanceof nokia.maps.util.Vector3D");return new b(this.x*f.x,this.y*f.y,this.z*f.z)},divide:function(f){(f.x===0||f.y===0||f.z===0)&&h("Vectors should not be divided by zero");
return new b(this.x/f.x,this.y/f.y,this.z/f.z)},angle:function(f,b,a,q){f=+f||0;a=a?f-this.x:this.x-f;f=q?f-this.y:this.y-(+b||0);f=!a&&!f?0:c(f/d(a*a+f*f))*g;a<0&&(f=360-f);return f},dot:function(f){f=this.multiply(f);return f.x+f.y+f.z},magnitude:function(){return d(this.dot(this))},normal:function(f){var c=this.x,a=this.y,q=this.z,k=f.x,p=f.y,f=f.z;return new b(a*f-q*p,-(c*f-q*k),c*p-a*k)},normalize:function(){var f=this.magnitude();return new b(this.x/f,this.y/f,this.z/f)}})})(nokia.maps.util);
ovi.provide("nokia.maps.util.Matrix3D");
(function(e){var l=Math,h=l.sqrt,d=l.sin,c=l.cos,g=l.tan,b=e.Point,f=e.Vector3D,r=e.Matrix3D=function(a){this.rows=a||[[1,0,0,0],[0,1,0,0],[0,0,1,0]]};ovi.extend(r.prototype,{ua:function(a){for(var f=this.rows,b,c,m,d=a[0],g=a[1],e=a[2],h=[[],[],[]],l,w=3;w--;)l=h[w],a=f[w],b=a[0],c=a[1],m=a[2],l[0]=b*d[0]+c*g[0]+m*e[0],l[1]=b*d[1]+c*g[1]+m*e[1],l[2]=b*d[2]+c*g[2]+m*e[2],l[3]=b*d[3]+c*g[3]+m*e[3]+a[3];return new r(h)},concat:function(a){return this.ua(a.rows)},scale:function(a,f,b){return this.ua([[a,
0,0,0],[0,f,0,0],[0,0,b,0]])},getScale:function(){var a=this.rows,b;return new f(h((b=a[0])[0]*b[0]+b[1]*b[1]+b[2]*b[2]),h((b=a[1])[0]*b[0]+b[1]*b[1]+b[2]*b[2]),h((b=a[2])[0]*b[0]+b[1]*b[1]+b[2]*b[2]))},translate:function(a,f,b){return this.ua([[1,0,0,a],[0,1,0,f],[0,0,1,b]])},getTranslate:function(){return new f(this.rows[0][3],this.rows[1][3],this.rows[2][3])},rotateX:function(a){var f=d(a),a=c(a);return this.ua([[1,0,0,0],[0,a,-f,0],[0,f,a,0]])},rotateY:function(a){var f=d(a),a=c(a);return this.ua([[a,
0,f,0],[0,1,0,0],[-f,0,a,0]])},rotateZ:function(a){var f=d(a),a=c(a);return this.ua([[a,-f,0,0],[f,a,0,0],[0,0,1,0]])},skewX:function(a){return this.ua([[1,g(a),0,0],[0,1,0,0],[0,0,1,0]])},skewY:function(a){return this.ua([[1,0,0,0],[g(a),1,0,0],[0,0,1,0]])},transformVector:function(a){var b=this.rows,k,c=a.x,m=a.y,a=a.z;return new f((k=b[0])[0]*c+k[1]*m+k[2]*a+k[3],(k=b[1])[0]*c+k[1]*m+k[2]*a+k[3],(k=b[2])[0]*c+k[1]*m+k[2]*a+k[3])},transformPoint:function(a){var f=this.rows,k,c=a.x,a=a.y;return new b((k=
f[0])[0]*c+k[1]*a+k[3],(k=f[1])[0]*c+k[1]*a+k[3])},transformVectors:function(a,f){var b=this.rows,c,m,r,d,g,e=a.length;for(g=0;g<e;)m=+a[g++],r=+a[g++],d=+a[g++],f.push((c=b[0])[0]*m+c[1]*r+c[2]*d+c[3],(c=b[1])[0]*m+c[1]*r+c[2]*d+c[3],(c=b[2])[0]*m+c[1]*r+c[2]*d+c[3])},transformPoints:function(a,f){var b=this.rows,c,m,r,d,g=a.length;for(d=0;d<g;)m=+a[d++],r=+a[d++],f.push((c=b[0])[0]*m+c[1]*r+c[3],(c=b[1])[0]*m+c[1]*r+c[3])},clone:function(){for(var a=this.rows,f=Array(3),b=3;b--;)f[b]=a[b].slice();
return new r(f)},inverse:function(){var a=this.rows,f=a[0],b=a[1],a=a[2],c=f[0],m=f[1],d=f[2],g=b[0],e=b[1],h=b[2],l=a[0],w=a[1],z=a[2],B=c*(e*z-h*w)-m*(z*g-h*l)+d*(g*w-e*l);return B===0?null:new r([[(e*z-h*w)/B,(d*w-m*z)/B,(m*h-d*e)/B,-f[3]],[(h*l-g*z)/B,(c*z-d*l)/B,(d*g-c*h)/B,-b[3]],[(g*w-e*l)/B,(l*m-c*w)/B,(c*e-m*g)/B,-a[3]]])}})})(nokia.maps.util);ovi.provide("nokia.maps.util.math.clipping");
(function(e){function l(a){for(var f,b,c=0,m=a.length;c<m;c++){f=k(a[c].x,a[c].y,b,null,0,0);if(f.next=b)b.prev=f;b=f}return b}function h(a,f,b){for(;f!=b&&f.alpha<a.alpha;)f=f.next;a.next=f;a.prev=f.prev;a.next.prev=a;a.prev.next=a}function d(a,f){var b,m,p=0,q;k(0,a.y,null,null,0,0);m=k(-2147483648,a.y,null,null,0,0);for(b=f;b.next;b=b.next)(q=c(m,a,b,b.next,{}))&&p++;return p%2}function c(a,f,b,k,c){var m,p;p=(f.x-a.x)*(k.y-b.y)-(f.y-a.y)*(k.x-b.x);var q;if(!p&&(a.origx=a.x,a.origy=a.y,a.x+=(y()-
0.5)/1E4,a.y+=(y()-0.5)/1E4,p=(f.x-a.x)*(k.y-b.y)-(f.y-a.y)*(k.x-b.x),!p))return 0;m=((b.x-a.x)*(k.y-b.y)-(b.y-a.y)*(k.x-b.x))/p;p=((f.y-a.y)*(b.x-a.x)-(f.x-a.x)*(b.y-a.y))/p;if(m<0||m>1||p<0||p>1)return 0;g(a,f,b,k,c,m);if(c.alpha_p===0&&(q=c.alpha_q)>=0&&q<=1){if(!a.origx)a.origx=a.x,a.origy=a.y;a.x+=(y()-0.5)/1E4;a.y+=(y()-0.5)/1E4;g(a,f,b,k,c,m)}return 1}function g(a,f,k,c,m,p){var q=a.x+p*(f.x-a.x),p=a.y+p*(f.y-a.y);m.alpha_p=b(a.x,a.y,q,p)/b(a.x,a.y,f.x,f.y);m.alpha_q=b(k.x,k.y,q,p)/b(k.x,k.y,
c.x,c.y);m.xi=1*q;m.yi=1*p}function b(a,f,b,k){return m((a-b)*(a-b)+(f-k)*(f-k))}function f(f){var b=a(f);b.prev.next=f;f.prev=b.prev}function r(a){var f=a;if(f){do f=f.next;while(f!=a&&(!f.intersect||f.intersect&&f.visited))}return f}function a(a){if(a)for(;a.next;)a=a.next;return a}function q(a){for(;a&&a.intersect;)a=a.next;return a}function k(a,f,b,k,c,m){var p={};p.x=a;p.y=f;p.next=b;if(p.prev=k)p.prev.next=p;if(b)p.next.prev=p;p.nextPoly=null;p.neighbor=null;p.intersect=c;p.entry=0;p.visited=
0;p.alpha=m;return p}var e=e.util,p=e.Point,m=Math.sqrt,y=Math.random,s;e.math.clipping={Ds:s=function(a,f,b,k,c,m){var q=a.x,a=-a.y,d=f.x,f=-f.y,r,g,s,b=-b,m=-m;if(q>d){if(d>c||q<k)return;s=q;g=a;q=d;a=f;d=s;f=g;s=1}else if(q>c||d<k)return;if(a>f){if(f>b||a<m)return;r=1;a=-a;f=-f;g=m;m=-b;b=-g}else if(a>b||f<m)return;if(q<k){if((a+=(k-q)*(f-a)/(d-q))>b)return;q=k}if(a<m){if((q+=(m-a)*(d-q)/(f-a))>c)return;a=m}d>c&&(f=a+(c-q)*(f-a)/(d-q),d=c);f>b&&(d=q+(b-a)*(d-q)/(f-a),f=b);r&&(a=-a,f=-f);return s?
[new p(d,-f),new p(q,-a)]:[new p(q,-a),new p(d,-f)]},clipStrips:function(a,f,b,k,c){var m,p,q=a.length,d,r,g,e,y,h,l;if(q){for(m=[];q--;){h=a[q];e=h.length;y=0;for(d=1;d<e;d++)if(l=s(h[d-1],h[d],f,b,k,c))r=l[0],g=l[1],y&&y.equals(r)?p.push(g):m.push(p=l),y=g}e=m.length;e>1&&m[0][0].equals(m[e-1][m[e-1].length-1])&&m[0].splice.apply(m[0],[0,1].concat(m.splice(e-1,1)[0]))}else m=a;return m},INTERSECTION:0,UNION:1,COMPONENT_SHAPE:2,COMPONENT_WINDOW:3,clip:function(b,m,p){var b=l(b),m=l(m),g,s,e,y,A,
C,E;C={};s=g=1;switch(~~(1*p)){case 1:s=g=0;break;case 2:g=0;s=1;break;case 3:g=1,s=0}g={pS:g,pC:s};var p=g.pS,M=g.pC,I,K,Q;if(m&&b){g=a(m);k(m.x,m.y,null,g,0,0);s=a(b);k(b.x,b.y,null,s,0,0);for(g=m;g.next;g=g.next)if(!g.intersect)for(s=b;s.next;s=s.next)if(!s.intersect&&(I=q(g.next),K=q(s.next),e=c(g,I,s,K,C)))e=C.alpha_p,E=C.alpha_q,y=C.xi,A=C.yi,e=k(y,A,null,null,1,e),y=k(y,A,null,null,1,E),e.neighbor=y,y.neighbor=e,h(e,g,I),h(y,s,K);C=d(m,b);p&&(C=1-C);for(g=m;g.next;g=g.next)if(g.intersect)g.entry=
C,C=1-C;C=d(b,m);M&&(C=1-C);for(s=b;s.next;s=s.next)if(s.intersect)s.entry=C,C=1-C;f(m);for(f(b);(b=r(m))!=m;){for(p=null;!b.visited;b=b.neighbor)for(C=b.entry;;)if(p=k(b.x,b.y,p,null,0,0),b.visited=1,b=C?b.next:b.prev,b.intersect){b.visited=1;break}p.nextPoly=Q;Q=p}return Q}}}})(nokia.maps);ovi.provide("nokia.maps.util.IBox");ovi.provide("nokia.maps.gfx.Color");
(function(){var e=Math.round,l=RegExp("^\\s*(maroon|red|orange|yellow|olive|purple|fuchsia|white|lime|green|navy|blue|aqua|teal|black|silver|gray|grey|pink)\\s*$|^\\s*[#]?([0-9a-f]{8,8})\\s*$|^\\s*[#]?([0-9a-f]{6,6})\\s*$|^\\s*[#]?([0-9a-f]{4,4})\\s*$|^\\s*[#]?([0-9a-f]{3,3})\\s*$|^\\s*(rgb[a]?)\\(\\s*(\\d+)\\s*,\\s*(\\d+)\\s*,\\s*(\\d+)\\s*,?\\s*(\\d*[.]{0,1}\\d*)?\\s*\\)\\s*$","i"),h={maroon:"800000",red:"ff0000",orange:"ffa500",yellow:"ffff00",olive:"808000",purple:"800080",fuchsia:"ff00ff",white:"ffffff",
lime:"00ff00",green:"008000",navy:"000080",blue:"0000ff",aqua:"00ffff",teal:"008080",black:"000000",silver:"c0c0c0",gray:"808080",grey:"808080",pink:"ffc0cb"},d=nokia.maps.gfx.Color=new ovi.Class({Statics:{byteOf:function(c){return e(c*255)&255},percentOf:function(c){return c>255?1:c<0?0:c/255},compress:function(c,d,b,f){return(c&255)<<24>>>0|(d&255)<<16|(b&255)<<8|f&255},red:function(c){return c>>>24},green:function(c){return c>>>16&255},blue:function(c){return c>>>8&255},alpha:function(c){return c&
255},parseCss:function(c,g){var b,f,r,a=l.exec(c),q,k;if(a&&a.length>1){b=isNaN(g)?255:g*255&255;f=b.toString(16).toLowerCase();f.length<2&&(f="0"+f);if(a[1])r=h[a[1]]+f;else if(a[2])r=a[2];else if(a[3])r=a[3]+f;else if(q=a[4]||a[5])r=q.replace(/(.)/g,"$1$1"),q.length===3&&(r+=f);else if(a[6])return d.compress(a[7],a[8],a[9],(k=+a[10],isNaN(k)?b:e((k<0?0:k)*255)));if(r&&r.length===8)return parseInt(r,16)>>>0}return null},getCssRGBA:function(c){return d.getCssRGB(c,!0)},getCssRGB:function(c,d){return"rgb"+
(d?"a(":"(")+(c>>>24)+", "+(c>>>16&255)+", "+(c>>>8&255)+(d?(", "+(c&255)/255).substr(0,7)+")":")")},getCssHex:function(c,d,b){c=(c>>>(d?0:8)).toString(16);d=(d?8:6)-c.length;return(b||"#")+(d>0?"0000000".substr(-d)+c:c)}}})})();ovi.provide("nokia.maps.util.Brush");
(function(e){var l=nokia.maps.gfx.Color;e.Brush=new ovi.Class({color:"#05A6",fill:"solid",initialize:function(h,d){var c,g,b=e.d;h&&("color"in h&&(c=l.parseCss(h.color),c===null&&b("Invalid color set!")),"fill"in h&&h.fill!=="solid"&&h.fill!=="none"&&b("Invalid fill set!"));if(d instanceof nokia.maps.util.Brush)for(g in d)this[g]=d[g];for(g in h)this[g]=h[g]},ea:function(){return this.c||(this.c=e.Bg(this))}})})(nokia.maps.util);ovi.provide("ovi.dom.common");
ovi.dom.addEvent=function(e,l,h,d){e.addEventListener?e.addEventListener(l,h,d!==void 0?d:!1):e.attachEvent&&e.attachEvent("on"+l,h)};ovi.dom.removeEvent=function(e,l,h,d){e.removeEventListener?e.removeEventListener(l,h,d!==void 0?d:!1):e.detachEvent&&e.detachEvent("on"+l,h)};ovi.dom.addClass=function(e){for(var l=Array.prototype.slice.call(arguments,1),h=e.className,d=" "+h+" ",c=0,g;g=l[c++];)d.indexOf(" "+g+" ")===-1&&(h+=(h?" ":"")+g);return e.className=h};
ovi.dom.removeClass=function(e){for(var l=Array.prototype.slice.call(arguments,1),h=e.className.split(" "),d=0,c=0,g=h.length,b;b=l[d++];)for(c=g;c--;)b===h[c]&&h.splice(c,1);return e.className=h.join(" ")};ovi.dom.hasClass=function(e){for(var l=Array.prototype.slice.call(arguments,1),h=" "+e.className+" ",d=l.length,c=0,g;d&&(g=l[c++]);)d=h.indexOf(" "+g+" ")>-1;return d};
ovi.dom.toggleClass=function(e){for(var l=Array.prototype.slice.call(arguments,1),h=" "+e.className+" ",d,c=0,g=l.length;c<g;c++)d=l[c],(h.indexOf(" "+d+" ")>-1?ovi.dom.removeClass:ovi.dom.addClass)(e,d)};ovi.dom.offset=function(e,l){var h=e.getBoundingClientRect(),d=e.ownerDocument,c=d.documentElement,g=d.body,d=h.top+(c.scrollTop||g.scrollTop)-c.clientTop,h=h.left+(c.scrollLeft||g.scrollLeft)-c.clientLeft;l&&(c=ovi.dom.offset(l),d-=c.top,h-=c.left);return{top:d,left:h}};
ovi.dom.dimensions=function(e){if("scrollTo"in e&&e.document)return e=e.document.documentElement,{width:e.clientWidth,height:e.clientHeight};return{width:e.offsetWidth,height:e.offsetHeight}};
ovi.dom.getStyle=function(){if(window.getComputedStyle){var e=["moz","ms","webkit"];ovi.dom.getStyle=function(d,c){var g=d.ownerDocument.defaultView;if(!g)return null;var g=g.getComputedStyle(d,null),b=g.getPropertyValue(c);if(b)return b;for(var f=0,r=e.length;f<r;f++)if(b=g.getPropertyValue("-"+e[f]+"-"+c))return b;return null}}else{var l=/-([a-z])/ig,h=function(d,c){return c.toUpperCase()};ovi.dom.getStyle=function(d,c){c=c==="float"?"styleFloat":c.replace(l,h);return d.currentStyle[c]||d.currentStyle["Ms"+
c.charAt(0).toUpperCase()+c.slice(1)]||null}}return ovi.dom.getStyle.apply(null,arguments)};ovi.provide("nokia.maps.map.component.Component");
(function(e){var l=nokia.maps.util.d,h={"2d":"MAP_2D","3d":"GLOBE",panorama:"PANORAMA"},d=e.Component=new ovi.Class({Extends:nokia.maps.util.OObject,getId:function(){if(window)return this.c},getVersion:function(){return this.o},queryReference:function(){this.De++;return this},releaseReference:function(){return this.De!==0?--this.De:0},attach:function(c){this.mapDisplay&&l("Error: A component can only be attached to one display!");this.mapDisplay=c},detach:function(){delete this.mapDisplay},destroy:nokia.maps.util.A,
isCompatible:function(c){return this.t&this[h[c]]},capture:nokia.maps.util.A,MAP_2D:1,PANORAMA:2,GLOBE:4,De:1,t:0});ovi.Array("Overview TypeSelector DistanceMeasurement InfoBubbles ScaleBar ViewControl ZoomBar ZoomRectangle OverlaysSelector ContextMenu Traffic TrafficIncidents Panorama PublicTransport".split(" ")).forEach(function(c){e[c]=function(){ovi.warn("There is no UI defined for the display. Are you missing the UI package?");return new d({c:c+"Dummy",o:"0"})}})})(nokia.maps.map.component);
ovi.provide("nokia.maps.positioning._packaging.base");ovi.provide("ovi.json");
(function(){function e(e,d){if(typeof d==="string"){var c=/^(\d{4})-(\d{2})-(\d{2})T(\d{2}):(\d{2}):(\d{2})(\.(\d{3}))?Z$/.exec(d);if(c)return new Date(Date.UTC(+c[1],+c[2]-1,+c[3],+c[4],+c[5],+c[6],+c[8]||0))}return d}var l=window.JSON||{};window.JSON||function(){function e(a){return a<10?"0"+a:a}function d(f){b.lastIndex=0;return b.test(f)?'"'+f.replace(b,function(f){var b=a[f];return typeof b==="string"?b:"\\u"+("0000"+f.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+f+'"'}function c(a,b){var g,
s,v,l,x=f,w,z=b[a];z&&typeof z==="object"&&(g=Object.prototype.toString.apply(z),g==="[object Date]"?z=z.getUTCFullYear()+"-"+e(z.getUTCMonth()+1)+"-"+e(z.getUTCDate())+"T"+e(z.getUTCHours())+":"+e(z.getUTCMinutes())+":"+e(z.getUTCSeconds())+"Z":k.test(g)&&(z=z.valueOf()));typeof q==="function"&&(z=q.call(b,a,z));switch(typeof z){case "string":return d(z);case "number":return isFinite(z)?String(z):"null";case "boolean":case "null":return String(z);case "object":if(!z)return"null";f+=r;w=[];if(Object.prototype.toString.apply(z)===
"[object Array]"){l=z.length;for(g=0;g<l;g+=1)w[g]=c(g,z)||"null";v=w.length===0?"[]":f?"[\n"+f+w.join(",\n"+f)+"\n"+x+"]":"["+w.join(",")+"]";f=x;return v}if(q&&typeof q==="object"){l=q.length;for(g=0;g<l;g+=1)s=q[g],typeof s==="string"&&(v=c(s,z))&&w.push(d(s)+(f?": ":":")+v)}else for(s in z)Object.hasOwnProperty.call(z,s)&&(v=c(s,z))&&w.push(d(s)+(f?": ":":")+v);v=w.length===0?"{}":f?"{\n"+f+w.join(",\n"+f)+"\n"+x+"}":"{"+w.join(",")+"}";f=x;return v}}var g=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,
b=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,f,r,a={"\u0008":"\\b","\t":"\\t","\n":"\\n","\u000c":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},q,k=/\[object (String|Number|Boolean)\]/;if(typeof l.stringify!=="function")l.stringify=function(a,b,k){var d;r=f="";if(typeof k==="number")for(d=0;d<k;d+=1)r+=" ";else typeof k==="string"&&(r=k);if((q=b)&&typeof b!=="function"&&(typeof b!=="object"||typeof b.length!=="number"))throw Error("JSON.stringify");
return c("",{"":a})};if(typeof l.parse!=="function")l.parse=function(a,f){function b(a,k){var c,p,q=a[k];if(q&&typeof q==="object")for(c in q)Object.hasOwnProperty.call(q,c)&&(p=b(q,c),p!==void 0?q[c]=p:delete q[c]);return f.call(a,k,q)}var k;g.lastIndex=0;g.test(a)&&(a=a.replace(g,function(a){return"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)}));if(/^[\],:{}\s]*$/.test(a.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,
"]").replace(/(?:^|:|,)(?:\s*\[)+/g,"")))return k=eval("("+a+")"),typeof f==="function"?b({"":k},""):k;throw new SyntaxError("JSON.parse");}}();ovi.json={parse:function(h,d){return l.parse(h,d===void 0?e:d)},stringify:l.stringify}})();ovi.provide("nokia.maps.net.IResult");ovi.provide("nokia.maps.behavior._packaging.base");ovi.provide("nokia.maps.map._packaging.base");ovi.provide("nokia.maps.dom.Touch");ovi.provide("nokia.maps.dom");
(function(e){function l(f,b){var a=b.width,c=b.height,k=f.getContext("2d");k.globalCompositeOperation="copy";k.drawImage(b,0,0,a,c,0,0,a,c)}function h(f,b){if("$n$opacity"in b)f.$n$opacity=b.$n$opacity,f.$n$width=b.$n$width,f.$n$height=b.$n$height}var d=null,c=function(){var f=new Image;f.src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7";return f.width!==f.cloneNode(!1).width}(),g=function(){var f=document.createElement("script");f.text="//";return!f.cloneNode(!0).text}(),
b=ovi.browser.msie;ovi.extend(e,{contains:b?function(f,b){var a=ovi.type(f),c=ovi.type(b);return(a=="document"||a=="element")&&(c=="element"||c=="textnode")?f.contains(b):!1}:function(f,b){for(;b;){if(b===f)return!0;b=b.parentNode}return!1},cloneNode:function(f,b){var a,q=f.nodeName;if(q==="IMG")c?(a=f.ownerDocument.createElement("img"),a.src=f.src):a=f.cloneNode(!1);else if(a=f.cloneNode(!!b),q==="CANVAS")l(a,f);else if(g&&(nodeScripts=f.getElementsByTagName("script"),i=nodeScripts.length))for(cloneScripts=
a.getElementsByTagName("script");i--;)cloneScripts[i].text=nodeScripts[i].text;h(a,f);return a},importNode:document.importNode&&document.importNode.toString().indexOf("[native code]")>0&&!b?function(f,b,a){f=f.importNode(b,!!a);b.nodeName==="CANVAS"&&l(f,b);h(f,b);return f}:function(f,b,a){var c,k,p,m,d;if(f!==b.ownerDocument){p=b.attributes;c=f.createElement(b.nodeName);for(k=p.length;k--;)if((m=p[k]).specified)(d=m.name)==="style"?c.style.cssText=b.style.cssText:d==="class"?c.className=b.className:
c.setAttribute(d,m.value);if(a)for(k=b.firstChild;k;)c.appendChild(e.importNode(f,k,a)),k=k.nextSibling}else c=e.cloneNode(b,a);b.nodeName==="CANVAS"&&l(c,b);h(c,b);return c},isQuirksMode:function(f){ovi.type(f)!=="document"&&(f=document);if(!f||typeof f.compatMode!=="string")return!0;return f.compatMode==="BackCompat"||f.compatMode==="QuirksMode"},supportsCanvas:function(){var f=document.createElement("CANVAS"),b;return f&&f.getContext&&(b=f.getContext("2d"))&&typeof b.fillText==="function"}(),getWindowSize:function(f){if(ovi.type(f)!==
"window"&&(f=window,ovi.type(f)!=="window"))return null;var b=document.images&&document.compatMode&&document.compatMode.indexOf("CSS1")>=0,a=f.document;if(f.innerWidth)return{width:f.innerWidth,height:f.innerHeight};if(b)return f=a.body.parentElement,{width:f.clientWidth,height:f.clientHeight};if(a.body&&a.body.clientWidth)return{width:a.body.clientWidth,height:a.body.clientHeight};return null},setStyle:function(f,b){var a={constructor:!0,prototype:!0};if(b&&f&&f.style)for(var c in b)!a[c]&&c in f.style&&
(f.style[c]=b[c]);return f},getStyle:function(f,b){if(document.defaultView&&document.defaultView.getComputedStyle){var a=f.ownerDocument.defaultView.getComputedStyle(f,"");if(!a)return!1;return a[b]}else return f.currentStyle[b]},ownerWindow:function(f){var b=ovi.type(f),a=null;if(!f)return null;if(b==="window")return f;if(b==="document")a=f;else if(f.ownerDocument)a=f.ownerDocument;else return null;return a.parentWindow||a.defaultView},getScrollBarSize:function(){if(d)return d;var f=document,b=0,
a=0,c=0,k=0,p=0,m=0,g=f.createElement("P"),s=f.createElement("P"),e,h;try{e=g.style;h=s.style;e.height="200px";e.width="200px";h.position="absolute";h.top=0;h.left=0;h.visibility="hidden";h.width="100px";h.height="100px";h.overflow="hidden";s.appendChild(g);f.body.appendChild(s);a=s.offsetWidth;p=s.offsetHeight;h.overflow="scroll";c=s.offsetWidth;m=s.offsetHeight;if(a===c)c=s.clientWidth;if(p===m)m=s.clientHeight;f.body.removeChild(s);b=a-c;k=p-m}catch(l){k=b=0}return k!==k||b!==b||k<=0||b<=0?d={width:17,
height:17}:d={width:b,height:k}},gb:function(f,b,a,c){b=f.ownerDocument.createElement(b);if(a)b.className=a;if(c)b.style.cssText=c;f.appendChild(b);return b},Nk:function(f,b){var a=f.styleSheets,c=a.length,k,p,m=f.createElement("style");m.setAttribute("type","text/css");f.getElementsByTagName("head")[0].appendChild(m);k=a[a.length-1];a.length>c?b(k):p=setInterval(function(){for(var f=a.length,k;f--;)k=a[f],k.ownerNode===m&&(b(k),e.Cg.push(k),clearInterval(p))},50)},Cg:[],tp:function(f,c){for(var a=
e.Cg,q=a.length;q--;)if(b&&a[q].owningElement.ownerDocument===f||a[q].ownerNode.ownerDocument===f)break;q<0?e.Nk(f,c):c(a[q])},wo:b?function(f,b,a){return f.rules[f.addRule(b,a)]}:function(f,b,a){b=f.insertRule(b.concat("{",a,"}"),f.cssRules.length);return f.cssRules[b]},Rq:b?function(f,b){for(var a=f.rules,c=a.length;c--;)if(a[c]===b){f.removeRule(c);break}}:function(f,b){for(var a=f.cssRules,c=a.length;c--;)if(a[c]===b){f.deleteRule(c);break}},Fd:b&&document.createElement("p").style.opacity===void 0?
function(f,b){var a=f.style,c=Math.round(b*100);a.MsFilter='"progid:DXImageTransform.Microsoft.Alpha(opacity='+c+')"';a.filter="alpha(opacity="+c+")"}:function(f,b){f.style.opacity=b},Nt:b?function(f){var b=this.Tl(f),a=b.getPropertyValue("background-image"),c,k,p,m=f.ownerDocument,d;if(a.toLowerCase().indexOf(".png")!=-1)c=b.getPropertyValue("background-position-x"),b=b.getPropertyValue("background-position-y"),d=m.createElement("img"),p=m.createElement("div"),p.style.position="absolute",p.style.left=
c,p.style.top=b,k=m.createElement("div"),p.appendChild(k),k.style.position="absolute",f.style.overflow="hidden",d.onload=function(){k.style.filter=["progid:DXImageTransform.Microsoft.AlphaImageLoader(enabled=true, src='",a,"', sizingMethod='scale')"].join("");k.style.width=this.width+"px";k.style.height=this.height+"px";p.style.width=this.width+"px";p.style.height=this.height+"px"},a=a.substr(5,a.length-7),d.src=a,f.insertBefore(p,f.firstChild),f.style.background="",f.opacityWrapper=p}:function(){},
Tl:b&&!window.getComputedStyle?function(f){return new function(f){this.el=f;this.getPropertyValue=function(a){var f=/(\-([a-z]){1})/g;a=="float"&&(a="styleFloat");f.test(a)&&(a=a.replace(f,function(a,f,b){return b.toUpperCase()}));return this.el.currentStyle[a]?this.el.currentStyle[a]:null}}(f)}:window.getComputedStyle,findElement:function(f,b){if(b.querySelectorAll){var a=b.querySelectorAll("."+f);return a.length?a[a.length-1]:null}for(var c=RegExp("(^|\\s)"+f+"($|\\s)"),a=b.getElementsByTagName("*"),
k=a.length;k--;)if(c.test(a[k].className))return a[k];return null},ac:function(f){for(var b;b=f.firstChild;)f.removeChild(b)}})})(nokia.maps.dom);ovi.provide("nokia.maps.dom.TouchList");
window.navigator.msPointerEnabled&&function(e){function l(e){ovi.extend(e,{Qg:function(d){for(var c=this.length,g=-1;c--;)if(this[c].pointerId===d.pointerId){g=c;break}return g},Lk:function(d){for(var c=0,g=d.length;c<g;c++)this.L(d[c])},L:function(d){var c=this.Qg(d);if(c===-1)c=this.length;d.type="MSPointerMove";d.identifier=d.pointerId;d.force=d.pressure;d.radiusX=d.radiusY=1;d.rotationAngle=0;this[c]=d},Y:function(d){d=this.Qg(d);d>=0&&this.splice(d,1)},identifiedTouch:function(d){for(var c=this.length;c--;)if(this[c].identifier===
d)return this[c];return null},item:function(d){return this[d]}})}e.TouchList=function(){function e(){var d=Object.create(Array.prototype),d=Array.apply(d,arguments)||d;l(d);return d}ovi.extend(e,{fromArray:function(d){return e.apply(null,d)},isArray:function(d){return Object.prototype.toString.call(d).toLowerCase()==="[object array]"}});return e}()}(nokia.maps.dom);ovi.provide("nokia.maps.gfx.Image");
(function(){var e=nokia.maps.gfx.Image=new ovi.Class({Statics:{c:0,fromObjectListener:[],fromObject:function(l,h){for(var d=e.fromObjectListener,c,g=d.length,h=h||document;g--;)if(c=d[g](l,h))return c}},width:0,height:0,opacity:1})})();ovi.provide("nokia.maps.gfx.Painter");nokia.maps.gfx.Painter=new ovi.Class({Statics:{defaultPainter:null,Gi:function(e){return(e=+e)!==e||e<0||e>1?1:e}}});ovi.provide("nokia.maps.util.FontHelper");
(function(e){function l(c,d){return c=c.replace(RegExp("(?:((?:x*-)?small(?:er)?(?![-])|medium|(?:x*-)?large(?:r)?|[0-9]*\\.?[0-9]+(?:px|pt|em|ex|%)))(?:/((?:[0-9]*\\.?[0-9]+(?:px|pt|em|ex|%)|normal)))?","gi"),function(b,f,c){if(f&&f!=="")d.size=f;if(c&&c!=="")d.lineHeight=c;return""})}function h(c,d){var b=[],c=c.replace(RegExp("(?:(italic|oblique)|(small-caps)|(bold(?:er)?|lighter|[1-9]00)|(inherit|normal))+","gi"),function(f,c,a,q,k){c&&c!==""?d.style=c:a&&a!==""?d.variant=a:q&&q!==""?d.weight=
q:k&&k!==""&&b.push(k);return""});!d.style&&b.length&&(d.style=b.shift());!d.variant&&b.length&&(d.variant=b.shift());!d.weight&&b.length&&(d.weight=b.shift());return c}var d=e.d;e.FontHelper={parse:function(c){var d={},b=0,f=[],r,c=c.replace(RegExp("'.*'|\".*\"","gi"),function(a){r="_s_"+b;f[b]=a;b++;return r}),c=l(c,d),c=h(c,d),c=c.replace(/_s_([\d]+)/,function(a,b){return f[b]}),c=c.replace(/^[\s]+/,"");if(c!=="")d.family=c;if(typeof d.size==="string")d.size=e.FontHelper.rh(d.size);return d},rh:function(c){var g=
/([0-9]*(\.[0-9]*){0,1}(e[\+\-]{1}[0-9]*){0,1})\s*([a-zA-Z]+)/g,b=g.exec(c);g.exec("");if(b){c=parseFloat(b[1]);switch(b=b[4].toLowerCase()){case "pt":c=c*96/72;break;case "pc":c=c*96/72*12;break;case "mm":c=c*96/25.4;break;case "cm":c=c*96/25.4*10;break;case "in":c*=96;break;case "px":break;case "em":case "ex":d("Unsupported font size unit: "+b);break;default:d("Unknown font size unit: "+b)}return c+"px"}return parseFloat(c)+"px"},toString:function(c){var d=[];c.style&&d.push(c.style);c.variant&&
d.push(c.variant);c.weight&&d.push(c.weight);c.size&&(c.lineHeight?d.push(c.size+"/"+c.lineHeight):d.push(c.size));c.family&&d.push(c.family);return d.join(" ")}}})(nokia.maps.util);ovi.provide("nokia.maps.geo.Coordinate");
(function(e){var l=e.util,h=Math,d=h.abs,c=h.floor,g=h.round,b=h.min,f=h.log,r=h.tan,a=h.sqrt,q=h.pow,k=h.sin,p=h.cos,m=h.asin,y=h.atan2,s=h.PI,v=s/180,u=s/4,x=s/2,w=s*2,z=s*3,B=180/s,D=l.Vector3D,A=e.geo.Coordinate=function(a,f,b,c,k){c||A.isValid(a,f,b,k)||l.d("Coordinate: lat:"+a+", lng:"+f+(b?", alt:"+b:"")+(k?", altMode:"+k:""));this.longitude=+f;this.latitude=+a;b!==void 0&&(this.altitude=+b);if(k!==void 0)this.altMode=k};ovi.extend(A.prototype,{altitude:void 0,distance:function(f,c){if(c)return this.Dl(f);
var d=this.latitude*v,g=f.latitude*v;return 12742E3*m(b(1,a(q(k((d-g)/2),2)+p(d)*p(g)*q(k((this.longitude*v-f.longitude*v)/2),2))))},ni:function(){var a=(this.latitude+90)*v,f=this.longitude*v,b=6371E3+(this.altitude||0),c=k(a);return new D(b*c*p(f),b*c*k(f),b*p(a))},Dl:function(f){var b=this.ni(),f=f.ni();return a(q(b.x-f.x,2)+q(b.y-f.y,2)+q(b.z-f.z,2))},qo:function(a,f){if(f/=6371E3){a*=v;var b=v*this.latitude,c=k(b),d=k(f),q=p(f),g=v*this.longitude,r=p(b),b=m(r*p(a)*d+c*q),c=y(k(a)*r*d,q-c*k(b)),
g=((g+c+s)%(2*s)-s)*B}return f?new A(b*B,(g+540)%360-180):this},walk:function(a,b,c){var m,q,g,e,h;if(c)return this.qo(a,b);a=(a%360+360)%360;if(!((a+90)%180))return a=this.longitude+b/(w*p(this.latitude*v)*6371E3)*(a===270?-360:360),new A(this.latitude,(a+540)%360-180);if(b/=6371E3)a*=v,m=this.latitude*v,q=this.longitude*v,g=m+b*p(a),e=g-m,c=f(r(g/2+u)/r(m/2+u)),c=!isNaN(e/c)?e/c:p(m),h=b*k(a)/c,d(g)>x&&(g=g>0?s-g:-(s-g));return b?new A(g*B,((q+h+z+(d(m+e)>x?s:0))%w-s)*B):this},equals:function(a){return a&&
this.latitude===a.latitude&&this.longitude===a.longitude||!1}});ovi.extend(A,{isValid:function(a,f,b,c){return a!=null&&a===+a&&a>=-90&&a<=90&&f!=null&&f===+f&&f>=-180&&f<=180&&(b===void 0||b===+b&&d(b)!==Infinity)&&(c===void 0||A.altModes.indexOf(c)>-1)},altModes:ovi.Array(["GL","OL","SL","SB","WE","WG"]),fromObject:function(){var a,f,b,c,k;a=arguments;var m=a[0];k=a.length;if(m instanceof A)return m;if(k>1)m=a;else if(m)k=m.length;else return null;a=m[0];f=m[1];b=m[2];c=m[3];if(k===2&&a===+a&&f===
+f)return new A(a,f);if(k===3&&a===+a&&f===+f&&b===+b)return new A(a,f,b);if(k===4&&a===+a&&f===+f&&b===+b&&(c===void 0||A.altModes.indexOf(c)>-1))return new A(a,f,b,!1,c);k=m.lat;a=m.lng;if(k!==void 0&&a!==void 0){if(k===+k&&a===+a)return new A(+k,+a);return null}k=m.latitude;a=m.longitude;if(k!==void 0&&a!==void 0&&k===+k&&a===+a)return new A(+k,+a);return null},dg:function(a,f,b){var k=g(d(a)*3600)/3600,m=c(k),k=(k-m)*3600,p=c(k/60);return m+"\u00b0 "+p+"' "+g(k-p*60)+'" '+(a<0?b:f)},asString:function(a){return A.dg(a.latitude,
"N","S")+", "+A.dg(a.longitude,"E","W")}});A.prototype.toString=function(){return A.asString(this)}})(nokia.maps);ovi.provide("nokia.maps.util.QuadTree");
(function(e){function l(f,b){for(var a,c,k,p,m,d,g,e=0,h,x,w=4,z;w--;){z=w+4;m=[];a=+!(w%3);d=b[w];for(h=(c=f[w]).length;h--;){k=c[h];if(p=k.q)for(x=p.length;x--;)if(((g=p[x][z])>d)-a)d=g;for(x=4;x--;)if(p=k[x])a?p[z]<d&&m.push(p):p[z]>d&&m.push(p)}e+=m.length;b[w]=d;f[w]=m}e&&(b=l(f,b));return b}function h(){e.d("Entry out of tree bounds")}var d=1,c=e.QuadTree=new ovi.Class({initialize:function(f,b,a,c,k){this.Gg=f||10;this.Qh=b||1;this.Rh=a||1;this.kg=c||0;this.mg=k||0;this.flush()},Statics:{MIN_X:"7",
MIN_Y:"4",MAX_X:"5",MAX_Y:"6",MID_X:"8",MID_Y:"9",TL:"0",TR:"1",BL:"2",BR:"3"},getExtremes:function(){var f,b;if(!(b=this.Ib))if(f=this.Nc,f.q||f["0"]||f["1"]||f["2"]||f["3"])b=[f],f=l([b,b,b,b],[f["6"],f["7"],f["4"],f["5"]]),this.Ib=b={},b["4"]=f[0],b["5"]=f[1],b["6"]=f[2],b["7"]=f[3];return b||void 0},flush:function(){this.Nc=this.cc=new g(0,0,this.kg-this.Qh,this.mg-this.Rh,this.kg+this.Qh,this.mg+this.Rh);this.Ib=0},remove:function(b){b.ka.Y(b,this);this.Ib=0},insert:function(b,c,a,d){var k,p=
this.cc;b<a?k=b:(k=a,a=b);c<d?(b=c,c=d):b=d;(k<p["7"]||b<p["4"]||a>p["5"]||c>p["6"])&&h();this.Ib=0;return this.be(this.cc,k,b,a,c,this.Gg)},insertSorted:function(b,c,a,d){var k=this.cc;(b<k["7"]||c<k["4"]||a>k["5"]||d>k["6"])&&h();this.Ib=0;return this.be(this.cc,b,c,a,d,this.Gg)},be:function(b,c,a,d,k,p){var m=b["8"],g=b["9"];return p&&(d<m||d<b["5"]&&c>=m)&&(k<g||k<b["6"]&&a>=g)?this.be(b.Jl((a>=g?2:0)|c>=m),c,a,d,k,p-1):b.L(c,a,d,k)},intersect:function(b,c,a,d,k){var p=[];this.Mb(this.Nc,p,b,
c,a,d,k);return p},Mb:function(b,c,a,d,k,p,m){var g,s,e=b.q;s=b["7"];var h=b["8"],l=b["5"],w=b["4"],z=b["9"],B=b["6"],D;if(e)if(g=e.length,a>s||k<l||d>w||p<B)for(;g--;)s=e[g],l=s["7"],w=s["4"],B=s["5"],D=s["6"],l>k||B<a||w>p||D<d||(m||l>=a&&B<=k&&w<=p&&D>=d)&&c.push(s);else for(;g--;)c.push(e[g]);k>=h&&(d<=z&&b["1"]&&this.Mb(b["1"],c,a,d,k,p,m),p>=z&&b["3"]&&this.Mb(b["3"],c,a,d,k,p,m));a<=h&&(d<=z&&b["0"]&&this.Mb(b["0"],c,a,d,k,p,m),p>=z&&b["2"]&&this.Mb(b["2"],c,a,d,k,p,m))}}),g=c.Quad=function(b,
c,a,d,k,p){if(b)this.ka=b,this.c=c,c&1?(a=b["8"],k=b["5"]):(a=b["7"],k=b["8"]),c&2?(d=b["9"],p=b["6"]):(d=b["4"],p=b["9"]);this["7"]=a;this["4"]=d;this["5"]=k;this["6"]=p;this["8"]=(a+k)/2;this["9"]=(d+p)/2},b=c.Entry=function(b,c,a,q,k){this.id=d++;this.ka=b;this["7"]=c;this["4"]=a;this["5"]=q;this["6"]=k};ovi.extend(g.prototype,{c:"",ka:null,Jl:function(b){return this[b]||(this[b]=new g(this,b))},L:function(f,c,a,d){f=new b(this,f,c,a,d);(this.q||(this.q=[])).push(f);return f},Y:function(b,c){var a=
this.q,d;if(a){for(d=a.length;d--;)if(a[d]===b){a.splice(d,1);delete b.ka;break}a.length||(delete this.q,this.og(c))}},og:function(b){if(this.ka&&!this.q&&!this[0]&&!this[1]&&!this[2]&&!this[3]){delete this.ka[this.c];if(this===b.Nc)b.Nc=this.ka;this.ka.og(b)}}})})(nokia.maps.util);ovi.provide("nokia.maps.util.Strip");
(function(){var e=nokia.maps.util.Strip=function(e,h){var d=(this.names=e||[]).length,c=this.offsets={};for(this.data=h||[];d--;)c[e[d]]=d};ovi.extend(e,{stencil:function(l,h){var d=new e(1,h);d.offsets=l.offsets;d.names=l.names;return d},X_Y:new e(["x","y"]),LAT_LNG:new e(["latitude","longitude"])})})();ovi.provide("nokia.maps.util.Uint32Array");
(function(){var e=typeof Uint32Array!=="undefined",l=ovi.browser.msie?function(e){for(var d=Array(e);e--;)d[e]=0;return d}:e?function(e){return new Uint32Array(e)}:function(e){for(var d=[];d.length<e;)d.push(0);return d};nokia.maps.util.Uint32Array=function(h){var d;if(ovi.type(h)==="array")if(e){d=new Uint32Array(h.length);length=h.length;for(i=0;i<length;i++)d[i]=h[i]}else d=h;else d=e&&typeof h==="object"?new Uint32Array(h):l(arguments.length?+h:0);return d}})();ovi.provide("nokia.maps.geo");
(function(e){function l(c,b,f,d,a,q){var k=0;c<f?k|=1:c>a&&(k|=2);b<d?k|=4:b>q&&(k|=8);return k}var h=0,d=Number.POSITIVE_INFINITY,c;ovi.extend(e.geo,{newProjectionId:function(){return h++},clipLineVsRect:function(c,b,f,d,a,q,k,p,m){m?m.length=0:m=[];for(var e=!1,s,h=l(c,b,a,q,k,p),u=l(f,d,a,q,k,p),e=!1,x,w;;)if(h|u)if(h&u)break;else s=h?h:u,s&8?(x=c+(f-c)*(p-b)/(d-b),w=p):s&4?(x=c+(f-c)*(q-b)/(d-b),w=q):s&2?(w=b+(d-b)*(a-c)/(f-c),x=a):s&1&&(w=b+(d-b)*(k-c)/(f-c),x=k),s==h?(c=x,b=w,h=l(c,b,a,q,k,
p)):(f=x,d=w,u=l(f,d,a,q,k,p));else{e=!0;break}e&&m.push(c,b,f,d);return m},intersectLine:c=function(c,b,f,r){if(!b||b.length<4||!c||c.length<4){if(f)f.length=0;return 0}var r=!r,a=0,q=0,k=0,p=c.length,m,e,s,h,l,x=b[0],w=b[1],z=b[2],B=b[3],D=c[q++],A=c[q++];z<x&&(x^=z,z^=x,x^=z);B<w&&(w^=B,B^=w,w^=B);for(;q<p;){var C=c[q++],E=c[q++],M=(E-A)*(z-x)-(C-D)*(B-w),I=(C-D)*(w-A)-(E-A)*(x-D),K=(E-A)*(z-x)-(C-D)*(B-w),Q=I/M,F=K/M,b=x+Q*(z-x);m=w+Q*(B-w);F=F>=0&&F<=1;r&&(D<C?(e=D,l=C):(e=C,l=D),A<E&&(s=A,h=
E));M===0&&I===0&&K===0?(b=m=d,F=r?(D>=x&&D<=z||C>=x&&C<=z)&&(A>=w&&A<=B||E>=w&&E<=B):!0):F&&r&&(F=Q>=0&&Q<=1&&b>=e&&b<=l&&m>=s&&m<=h);F?(a++,f&&(f[k++]=b,f[k++]=m)):f&&(f[k++]=f[k++]=NaN);D=C;A=E}if(f)f.length=k;return a},clipPolygonVsRect:function(g,b,f,r,a,q){if(!g||g.length<=4)return q&&((q.length=0)||q)||[];for(var q=q||[],k=q.length=0,p=-1,m,e=g.length,s=0,h,l,x=!1,w,z,B=!1,D=[],A=[],C=!1,E,M;++p<4;){h=g[e-2];l=g[e-1];p===0?(x=l>=f,m=[b,f,r,f]):p===1?(x=h<=r,m=[r,f,r,a]):p===2?(x=l<=a,m=[b,
a,r,a]):p===3&&(x=h>=b,m=[b,f,b,a]);for(;s<e;)w=g[s++],z=g[s++],p===0?B=z>=f:p===1?B=w<=r:p===2?B=z<=a:p===3&&(B=w>=b),B?(x||(D[0]=h,D[1]=l,D[2]=w,D[3]=z,c(m,D,A,!0),h=A[0],l=A[1],h===d&&(p===0?(h=w,l=f):p===1?(h=r,l=z):p===2?(h=w,l=a):p===3&&(h=b,l=z)),s!==2?(q[k++]=h,q[k++]=l):(C=!0,E=h,M=l)),q[k++]=w,q[k++]=z):x&&(D[0]=h,D[1]=l,D[2]=w,D[3]=z,c(m,D,A,!0),h=A[0],l=A[1],h===d&&(p===0?(h=w,l=f):p===1?(h=r,l=z):p===2?(h=w,l=a):p===3&&(h=b,l=z)),q[k++]=h,q[k++]=l),h=w,l=z,x=B;C&&(q[k++]=E,q[k++]=M);
C=!1;g=q;q.length=e=k;k=s=0}return q}})})(nokia.maps);ovi.provide("nokia.maps.geo.Corridor");ovi.provide("nokia.maps.geo.IProjection");ovi.provide("nokia.maps.geo.Proximity");ovi.provide("nokia.maps.kml._packaging.base");ovi.provide("ovi._kernel");ovi.provide("nokia.maps.language._packaging.base");ovi.provide("nokia.maps.Config");
(function(e){function l(b,f){return(typeof f==="string"?f.replace(d,"$1."):"")+b}var h={},d=/([^.])$/,c=e.util.getRootNameSpace("nokia.maps").Settings,g=e.Config=new ovi.Class({initialize:function(){this.Aa={}},Statics:{setDefault:function(b,f,c){if(!c||!h[b])f===void 0||f===null?delete h[b]:h[b]=f},setDefaultNS:function(b,f,c,a){g.setDefault(l(f,b),c,a)},setDefaults:function(b,f){var c,a;for(c in b)if(!f||!h[c])a=b[c],a===void 0||a===null?delete h[c]:h[c]=a},setDefaultsNS:function(b,f,c){var a,d,
k;for(a in f)if(k=l(a,b),!c||!h[k])d=f[a],d===void 0||d===null?delete h[k]:h[k]=d},getDefault:function(b){return h[b]},getDefaultNS:function(b,f){return h[l(f,b)]}},get:function(b){return b in this.Aa?this.Aa[b]:h[b]},getNS:function(b,f){f=l(f,b);return f in this.Aa?this.Aa[f]:h[f]},set:function(b,f){this.Aa[b]=f;return this},setNS:function(b,f,c){this.Aa[l(f,b)]=c;return this},reset:function(b){delete this.Aa[b];return this},resetNS:function(b,f){f=l(f,b);delete this.Aa[f];return this}});c&&(c.secureConnection&&
g.setDefault("secureConnection",c.secureConnection),c.addObserver("secureConnection",function(){g.setDefault("secureConnection",c.secureConnection)}))})(nokia.maps);ovi.provide("nokia.maps.util.RTree");
(function(e){var l=Math,h=l.abs,d=l.min,c=l.max,g=l.sqrt,b=e.RTreeRecord,f=e.d,r=e.RTree=new ovi.Class({initialize:function(a,b,c){(typeof b!="number"||b<2)&&f("The given parameter 'max' is not a number, or less than 2! max is "+b);(typeof c!="number"||c>b/2)&&f("The given parameter 'min' is not a number, or is not at least 2 times smaller than max! min is "+c);this.MaxEntriesPerNode=b;this.MinEntriesPerNode=c;switch(a){case e.RTree.QUADRATIC_PARTITIONING:this.splitNode=this.Qn;break;case e.RTree.LINEAR_PARTITIONING:this.splitNode=
this.On;break;case e.RTree.LINEAR_MOD_PARTITIONING:this.splitNode=this.Pn;break;case e.RTree.DUMMY_PARTITIONING:this.splitNode=this.Nn;break;default:f("The given parameter 'partitioningAlgorithm' is not a valid option!")}this.Root=new e.RTreeNode(!0)},Statics:{QUADRATIC_PARTITIONING:0,LINEAR_PARTITIONING:1,LINEAR_MOD_PARTITIONING:2,DUMMY_PARTITIONING:3,Jd:Infinity},MaxEntriesPerNode:null,MinEntriesPerNode:null,Root:null,Fb:1,add:function(a){var b=this.Root,f=1,p=0,m=null,r=null,s=Infinity,h,l;for(a.Volume=
(a.X2-a.X1)*(a.Y2-a.Y1);f<this.Fb;){r=m=null;s=Infinity;p=b.Entries;for(p=p.length;h=b.Entries[--p];)if(l=a.X2==a.X1&&a.Y2==a.Y1?g((h.X1-a.X1)*(h.X1-a.X1)+(h.Y1-a.Y1)*(h.Y1-a.Y1)):(c(h.X2,a.X2)-d(h.X1,a.X1))*(c(h.Y2,a.Y2)-d(h.Y1,a.Y1))-h.Volume,l<s||l==s&&h.BoundingBox<r)m=p,s=l,r=h.Volume;b=b.Entries[m];f++}b.addChild(a,f==1);for(a=b.Entries.length>this.MaxEntriesPerNode?this.splitNode(b):[];b.ParentNode;)f=b.ParentNode,a.length!=2?f.updateBoundingBox(b.X1,b.X2,b.Y1,b.Y2):(f.removeChild(b.ParentEntry),
f.addChild(a[0],!1),f.addChild(a[1],!1),a=f.Entries.length>this.MaxEntriesPerNode?this.splitNode(f):[]),b=b.ParentNode;if(a.length==2)this.Root=new e.RTreeNode(!1),this.Root.addChild(a[0],!0),this.Root.addChild(a[1],!0),this.Fb++},remove:function(a){var c,k=[],p,m=this.MinEntriesPerNode;this.Root||f("Can't remove anything fro already empty tree");(!a||!(a instanceof b)||!a.Leaf||!a.ParentNode)&&f("Invalid node");p=a.ParentNode.Entries;c=p.indexOf(a);if(c!=-1){p.splice(c,1);p.length<m&&(k=p);do a=
a.ParentNode,a.Entries.length<m&&a.ParentNode&&a.ParentNode.removeChild(a.ParentEntry),a.ParentNode&&a.ParentNode.calculateBoundingBox();while(a.ParentNode);for(c=k.length;c--;)this.em(k[c]);if(this.Root.Entries.length==1&&!(this.Root.Entries[0]instanceof b))this.Fb--,this.Root=this.Root.Entries[0],this.Root.ParentNode=null;return!0}},removeAll:function(){this.Root=new e.RTreeNode(!0);this.Fb=1},searchByPriority:function(a,b,f,c){var m,d={},g=[[null,null]],r=this.Root,e=0;m=0;var h;a>b&&(m=a,a=b,
b=m);f>c&&(m=f,f=c,c=m);for(;r!=null;){if(r.Leaf)for(m=0;m<r.Entries.length;m++)r.Entries[m].overlaps(a,b,f,c)&&(typeof d[r.Entries[m].Priority]=="undefined"&&(d[r.Entries[m].Priority]=[]),d[r.Entries[m].Priority][d[r.Entries[m].Priority].length++]=r.Entries[m]);else{if(r.Entries.length>e+1)for(m=e+1;m<r.Entries.length;m++)if(r.Entries[m].overlaps(a,b,f,c)){g[g.length++]=[r,m];break}for(m=h=0;m<r.Entries[e].Entries.length;m++)if(r.Entries[e].Entries[m].overlaps(a,b,f,c)){r=r.Entries[e];e=m;h=1;break}if(h)continue}r=
g[g.length-1][0];e=g[g.length-1][1];g.length--}return d},search:function(a,b,f,c,m){var d=[],m=m||this.Root,g,r=0,e,h=[m];a>b&&(t=a,a=b,b=t);f>c&&(t=f,f=c,c=t);if(!m.overlaps(a,b,f,c))return d;for(;r<h.length;){curNode=h[r];g=curNode.Entries;for(e=g.length;m=g[--e];)m.overlaps(a,b,f,c)&&(m.Leaf?d.push(m):h.push(m));r++}return d},em:function(a,b){var f=this.Root,p=0,m=1,g,r,h,l;if(a){for(;m<b;){r=g=null;h=Infinity;for(p=0;p<f.Entries.length;p++)if(l=f.Entries[p],l=(c(l.X2,a.X2)-d(l.X1,a.X1))*(c(l.Y2,
a.Y2)-d(l.Y1,a.Y1))-l.Volume,l<h||l==h&&f.Entries[p].BoundingBox<r)g=p,h=l,r=f.Entries[p].Volume;f=f.Entries[g];m++}f.addChild(a);for(p=f.Entries.length>this.MaxEntriesPerNode?this.splitNode(f):[];f.ParentNode!=null;)p.length!=2?f.ParentNode.updateBoundingBox(f.X1,f.X2,f.Y1,f.Y2):(f.ParentNode.removeChild(f.ParentEntry),f.ParentNode.addChild(p[0],!1),f.ParentNode.addChild(p[1],!1),p=f.ParentNode.Entries.length>this.MaxEntriesPerNode?this.splitNode(f.ParentNode):[]),f=f.ParentNode;if(p.length==2)this.Root=
new e.RTreeNode(!1),this.Root.addChild(p[0]),this.Root.addChild(p[1]),this.Fb++}},splitNode:null,Qn:function(a){var b=new e.RTreeNode(a.Leaf,a.ParentNode),f=new e.RTreeNode(a.Leaf,a.ParentNode),p=null,m=null,g=-1*r.Jd,s=null,l=null,u,x=a.Entries,w=x.length,z=u=0;for(u=0;u<w;u++){s=x[u];for(z=u+1;z<w;z++)l=x[z],l=(c(s.X2,l.X2)-d(s.X1,l.X1))*(c(s.Y2,l.Y2)-d(s.Y1,l.Y1))-s.Volume-l.Volume,l>g&&(p=u,m=z,g=l)}b.addChild(x.splice(p,1)[0]);for(f.addChild(x.splice(m-1,1)[0]);x.length>0;){w=x.length;if(this.MinEntriesPerNode-
b.Entries.length==w){for(;entry=x[--w];)b.addChild(entry);a.Entries=[];break}else if(this.MinEntriesPerNode-f.Entries.length==w){for(;entry=x[--w];)f.addChild(entry);a.Entries=[];break}p=null;m=-1;for(u=0;u<a.Entries.length;u++)g=a.Entries[u],g=h((c(b.X2,g.X2)-d(b.X1,g.X1))*(c(b.Y2,g.Y2)-d(b.Y1,g.Y1))*b.Volume-(c(f.X2,g.X2)-d(f.X1,g.X1))*(c(f.Y2,g.Y2)-d(f.Y1,g.Y1))*f.Volume),g>m&&(p=u,m=g);u=a.Entries[p];b.getEnlargement(u.X1,u.X2,u.Y1,u.Y2)<f.getEnlargement(u.X1,u.X2,u.Y1,u.Y2)?b.addChild(a.Entries.splice(p,
1)[0]):f.addChild(a.Entries.splice(p,1)[0])}return[b,f]},On:function(a){for(var b=new e.RTreeNode(a.Leaf,a.ParentNode),f=new e.RTreeNode(a.Leaf,a.ParentNode),p=null,m=null,d=-1*r.Jd,g=0,l=0,u=null,x=null,w=a.Entries.length;g<w;g++){u=a.Entries[g];for(l=g+1;l<w;l++)x=a.Entries[l],x=c(c(h(u.X1-x.X1),h(u.X2-x.X2)),c(c(h(u.Y1-x.Y1),h(u.Y2-x.Y2)))),x>d&&(p=g,m=l,d=x)}b.addChild(a.Entries.splice(p,1)[0]);for(f.addChild(a.Entries.splice(m-1,1)[0]);a.Entries.length>0;){if(this.MinEntriesPerNode-b.Entries.length==
a.Entries.length){for(;a.Entries.length>0;)b.addChild(a.Entries.splice(0,1)[0]);break}else if(this.MinEntriesPerNode-f.Entries.length==a.Entries.length){for(;a.Entries.length>0;)f.addChild(a.Entries.splice(0,1)[0]);break}p=a.Entries[0];b.getEnlargement(p.X1,p.X2,p.Y1,p.Y2)-f.getEnlargement(p.X1,p.X2,p.Y1,p.Y2)<0?b.addChild(a.Entries.splice(0,1)[0]):f.addChild(a.Entries.splice(0,1)[0])}return[b,f]},Pn:function(a){for(var b=new e.RTreeNode(a.Leaf,a.ParentNode),f=new e.RTreeNode(a.Leaf,a.ParentNode),
c=null,m=null,d=-1*r.Jd,s=0,h=0,l=null,x=null,w=a.Entries.length;s<w;s++){l=a.Entries[s];for(h=s+1;h<w;h++)x=a.Entries[h],x=g((l.X1-x.X1)*(l.X1-x.X1)+(l.Y1-x.Y1)*(l.Y1-x.Y1)),x>d&&(c=s,m=h,d=x)}b.addChild(a.Entries.splice(c,1)[0]);for(f.addChild(a.Entries.splice(m-1,1)[0]);a.Entries.length>0;){if(this.MinEntriesPerNode-b.Entries.length==a.Entries.length){for(;a.Entries.length>0;)b.addChild(a.Entries.splice(0,1)[0]);break}else if(this.MinEntriesPerNode-f.Entries.length==a.Entries.length){for(;a.Entries.length>
0;)f.addChild(a.Entries.splice(0,1)[0]);break}c=a.Entries[0];b.getEnlargement(c.X1,c.X2,c.Y1,c.Y2)-f.getEnlargement(c.X1,c.X2,c.Y1,c.Y2)<0?b.addChild(a.Entries.splice(0,1)[0]):f.addChild(a.Entries.splice(0,1)[0])}return[b,f]},Nn:function(a){for(var b=new e.RTreeNode(a.Leaf,a.ParentNode),f=new e.RTreeNode(a.Leaf,a.ParentNode),c=a.Entries.length/2,m=0,m=0;m<=c;m++)b.addChild(a.Entries.splice(0,1)[0],!0);for(;a.Entries.length>0;)f.addChild(a.Entries.splice(0,1)[0],!0);return[b,f]}})})(nokia.maps.util);
ovi.provide("ovi.ConsoleLogger");
(function(){try{typeof window.loadFirebugConsole==="function"&&window.loadFirebugConsole()}catch(e){}var l=null;ovi.ConsoleLogger=function(){if(l!==null)return l;if(window&&window.console&&/function/.test(window.console.log+""))for(var e=function(b){b=/function/.test(window.console[b]+"")?b:"log";return typeof window.console[b]==="function"?function(){window.console[b].apply(window.console,arguments)}:function(f,c,a,d,k,p,m,g,s,e,h){window.console[b](f||"",c||"",a||"",d||"",k||"",p||"",m||"",g||"",
s||"",e||"",h?"...":"")}},d=["info","debug","warn","error"],c=0,g;g=d[c];c++)this[g]=e(g);else this.debug=this.info=this.warn=this.error=function(){};return l=this};ovi.Logger&&window&&window.console&&/function/.test(window.console.log+"")&&ovi.Logger.addLogger(new ovi.ConsoleLogger)})(ovi);ovi.provide("nokia.maps.util.Pen");
(function(e){var l=nokia.maps.gfx.Color.parseCss;e.Pen=new ovi.Class({strokeColor:"#05A",lineWidth:1,lineCap:"round",lineJoin:"miter",miterLimit:10,stroke:"solid",initialize:function(h,d){var c,g,b=e.d;if(h){if("lineWidth"in h)!e.isNumber(h.lineWidth)&&b("width must be in range [0..100]"),h.lineWidth=e.Ia(h.lineWidth,0,100);"stroke"in h&&h.stroke!=="solid"&&b("cannot set anything else than stroke=solid");"strokeColor"in h&&(g=l(h.strokeColor),g===null&&b("Invalid color set!"));if("lineJoin"in h)g=
h.lineJoin,g!=="miter"&&g!=="round"&&g!=="bevel"&&b("Invalid lineJoin set!");if("lineCap"in h)g=h.lineCap,g!=="butt"&&g!=="round"&&g!=="square"&&b("Invalid lineCap set!");"miterLimit"in h&&!e.isNumber(h.miterLimit)&&b("miterLimit must be a number")}if(d instanceof nokia.maps.util.Pen)for(c in d)this[c]=d[c];for(c in h)this[c]=h[c]},ea:function(){return this.c||(this.c=e.Bg(this))}})})(nokia.maps.util);ovi.provide("ovi.dom");ovi.provide("nokia.maps.routing._packaging.base");ovi.provide("nokia.maps.net.Request");
(function(e){if(!e.util.getConstructor(e.net.Request))var l=e.net,h=e.util,d=h.d,c=h.A,g=h.isArray,b=h.isObject,f=h.isString,r=0,a=function(){return window.ActiveXObject?function(){return new ActiveXObject("Microsoft.XMLHTTP")}:window.XMLHttpRequest}(),q="withCredentials"in new a?a:typeof XDomainRequest!="undefined"?XDomainRequest:null,k=function(a){a.parentNode&&a.parentNode.removeChild(a)},p=l.Request=new ovi.Class({Extends:e.util.OObject,initialize:function(a,b){var f=this;f.D={};f.wi={};f.he=
++r;p.managerCounter++;f.u=a===p.JSONP||a===p.XHR?a:p.JSONP;f.mi=3E4;f.Nd=!1;f.Od="jsoncallback";f.qa=!1;f.c=null;b&&b.timeout&&(f.mi=b.timeout);b&&b.callbackKey&&(f.Od=b.callbackKey);b&&b.standardJSONP&&(f.qa=b.standardJSONP);b&&b.autoSkip&&(f.Nd=b.autoSkip);a==p.XHR&&b&&b.xDomain&&(f.ro=b.xDomain);f.u==p.JSONP&&f.qa==!1&&(l.Request.callbacks[f.he]=function(a,b){f.jg(a,b)});if(f.u==p.XHR&&(f.nc={},f.Ai=b||{},window.execScript&&window.ActiveXObject)){var c="BinaryToArray"+(new Date).getTime();window.execScript("Function "+
c+"(Binary)\nDim i\nReDim byteArray(LenB(Binary))\nFor i = 1 To LenB(Binary)\n  byteArray(i-1) = ChrW(AscB(MidB(Binary, i, 1)))\nNext\n"+c+" = byteArray\nEnd Function\n","vbscript")}},Statics:{JSONP:1,XHR:2,requestCounter:1,managerCounter:0,callbacks:{},requestParams:{},timeoutCallbacks:{},canceledRequests:{}},destroy:function(){this.cancelAll();this.qa==!1&&(l.Request.callbacks[that.he]=c)},send:function(a,b,f){this.c=++r;p.requestCounter++;this.D[this.c]=f!=void 0?f:this.c;this.wi[this.D[this.c]]=
this.c;this.u==p.JSONP?this.yn(a,b,this.c):this.An(a,b,this.c);return f!=void 0?f:this.c},cancel:function(a){a=a==void 0?this.c:this.wi[a];p.canceledRequests[a]=!0;this.u==p.JSONP?this.si(a):this.Ee(a);this.nb(a)},cancelAll:function(){for(var a in this.D)this.cancel(this.D[a])},Pk:function(a){var b=this;l.Request.callbacks[a]=function(){b.jg(a,arguments)}},yn:function(a,b,f){var c=document.createElement("script"),k=document.getElementsByTagName("head")[0];this.qa&&this.Pk(f);p.requestParams[f]=[a,
b];this.In(c,a,b,f);k.insertBefore(c,k.firstChild);this.fi(a,b,f)},An:function(a,b,f){var c=this.Ai.method||"GET",k,d=this.Ai;d.uri=a;this.Qk(a,b,f);this.fi(a,b,f);try{if(this.nc[f]=k=this.tl(f,d),k.open(c,this.no(c,d,this.hd),!d.sync,d.username,d.password),this.zn(k,c,d,this.hd),d.sync&&ovi.browser.mozilla&&parseFloat(ovi.browser.version)<2)this.onreadystatechange()}catch(g){if(f in this.D)this.hd.error=!0,delete this.D[f],p.callbacks[f](this.hd)}},jg:function(a,b){if(!p.canceledRequests[a]){var f=
p.requestParams[a],c=f[1];this.nb(a);if(!this.Nd||a==this.c)c({response:b.length<=1?b[0]:b,status:200,id:this.D[a],url:f[0],error:!1,timeout:!1});delete this.D[a];delete p.requestParams[a];this.qa&&delete l.Request.callbacks[a]}},Qk:function(a,b,f){var c=this;l.Request.callbacks[f]=function(a){c.nb(f);(!c.Nd||f==c.c)&&b(a);c.Ee(f)}},Ee:function(a){this.nc[a]&&(this.nc[a].abort(),this.nc[a]=null,delete this.nc[a],delete l.Request.callbacks[a])},In:function(a,b,f,c){var d=this,g=b.indexOf("?")<0?"?":
"&";b+=d.qa?g+d.Od+"=nokia.maps.net.Request.callbacks["+c+"]":g+d.Od+encodeURI("=(function(){nokia.maps.net.Request.callbacks["+d.he+"]("+c+",arguments);})");a.setAttribute("src",b);a.setAttribute("charset","UTF-8");a.setAttribute("defer","defer");a.id=c;a.onload=a.onreadystatechange=function(){if(!this.readyState||this.readyState==="complete"||this.readyState==="loaded")d.nb(c),delete p.requestParams[c],d.qa&&delete l.Request.callbacks[c],k(this)};a.onerror=function(){p.canceledRequests[c]||(d.nb(c),
p.requestParams[c]&&(f=p.requestParams[c][1],f({id:d.D[c],url:p.requestParams[c][0],error:!0,timeout:!1})),delete d.D[c],delete p.requestParams[c],d.qa&&delete l.Request.callbacks[c],k(this))}},fi:function(a,b,f){p.timeoutCallbacks[f]=setTimeout(this.sl(a,b,f),this.mi)},sl:function(a,b,f){var c=this;return function(){p.canceledRequests[f]=!0;c.u==p.JSONP?(b=p.requestParams[f][1],a=p.requestParams[f][0],c.si(f)):c.Ee(f);b({status:408,id:c.D[f],url:a,error:!1,timeout:!0});delete c.D[f];c.nb(f)}},si:function(a){var b=
document.getElementById(a);if(b)b.onload=b.onreadystatechange=c,b.onerror=c,b.src="",k(b);delete p.requestParams[a];this.qa&&(l.Request.callbacks[a]=c)},nb:function(a){clearTimeout(p.timeoutCallbacks[a]);delete p.timeoutCallbacks[a]},zn:function(a,b,f){var c="text/plain",k="",p;if(b!=="GET"&&b!=="DELETE")f.json?(c="application/json",k=ovi.json.stringify(f.json)):f.xml?(c="text/xml",XMLSerializer?k=(new XMLSerializer).serializeToString(f.xml):f.xml.xml?k=f.xml.xml:d("error")):f.content&&b!=="GET"?
(c="application/x-www-form-urlencoded",k=this.Ih(f.content)):k=f.body||"";c=f.mimeType||c;f.charset&&(c+="; charset="+f.charset);c={"content-type":c};b=f.headers||{};for(p in b)b.hasOwnProperty(p)&&(c[p.toString().toLowerCase()]=b[p]);if(f.preventCache==="headers"||f.preventCache==="both")c.pragma=c["cache-control"]="no-cache";for(p in c)c.hasOwnProperty(p)&&(p!=="content-type"||f.handleAs==="arraybuffer")&&a.setRequestHeader(p,c[p]);f.handleAs==="binary"&&a.overrideMimeType&&(a.overrideMimeType(c["content-type"]=
"text/text; charset=x-user-defined"),k="",delete c["content-length"]);if(f.handleAs==="arraybuffer")a.responseType="arraybuffer";a.send(k)},no:function(a,b,f){a=b.uri;b.preventCache&&b.preventCache!=="headers"&&(a+=(a.indexOf("?")===-1?"?":"&")+"preventCache="+(new Date).getTime());(b=b.uriParameters)&&(a+=(a.indexOf("?")===-1?"?":"&")+this.Ih(b));return f.url=a},Ih:function(a,f){var c=[],k,d;if(b(a)){for(k in a)d=f?f+"."+k:k,c.push(this.params(a[k],d));return c.join("&")}else if(g(a)){for(k=0;k<
a.length;k++)a[k]=this.params(a[k],f);return a.join("&")}else if(!a)return"";return f?this.bi(f)+"="+this.bi(a):""+a},bi:function(a){return encodeURIComponent(a).replace(/\!/g,"%21").replace(/\*/g,"%2A").replace(/\'/g,"%27").replace(/\(/g,"%28").replace(/\)/g,"%29")},vn:function(a,b){function f(a){this.message=a;this.name="ParserError"}var c=b.handleAs||"text";c==="autodetect"&&(c=a.getResponseHeader("content-type")||"",c=c.match(/[+\/]json/)?"json":c.match(/[+\/]xml/)?"xml":"text");switch(c){case "json":c=
ovi.json.parse(a.responseText);break;case "xml":if(a.responseXML)if((c=a.responseXML.getElementsByTagName("parsererror"))&&c.length>0)throw new f(c.item(0).textContent);else c=a.responseXML;else c=h.vf(a.responseText);break;case "arraybuffer":c=a.response;break;default:c=a.responseText}return c},tl:function(b,c){var k=this,d,g,r={status:417};k.hd=r;c=f(c)?{uri:c}:c;d=c.window||window;try{g=c.xhr||k.ro?new q:new a,k.onreadystatechange=g.onreadystatechange=function(){r.id=k.D[b];r.timeout=!1;r.error=
!1;if(!p.canceledRequests[b]&&g.readyState===4)if(ovi.browser.msie&&(g.status===2||g.status===3))r.status=401;else{r.status=g.status>=300&&g.status!==1223||g.status===0&&!(g.responseType==="arraybuffer"||g.responseType==="blob"?g.response:g.responseText)&&("file:"===d.location.protocol||"widget:"===d.location.protocol)?g.status||404:g.status||200;try{r.response=k.vn(g,c)}catch(a){if(b in k.D)r.error=!0,delete k.D[b],p.callbacks[b](r)}ovi.browser.msie&&(g=null);if(!(r.status>=200&&r.status<300&&!r.error))r.error=
!0;delete k.D[b];p.callbacks[b](r)}},d.location.protocol==="file:"&&d.netscape&&d.netscape.security&&d.netscape.security.PrivilegeManager&&d.netscape.security.PrivilegeManager.enablePrivilege&&d.netscape.security.PrivilegeManager.enablePrivilege("UniversalBrowserRead")}catch(e){if(b in k.D)r.error=!0,delete k.D[b],p.callbacks[b](r)}return g}})})(nokia.maps);ovi.provide("nokia.maps.dom.EventTarget");
(function(e){if(!nokia.maps.util.getConstructor(nokia.maps.dom.EventTarget)){var l=!l,h=!l,d=l,c=e.EventTarget=function(b){var b=b||this,f;if(!b.isEventTarget){for(f in g)f in b||(b[f]=g[f]);b.isDraggable?b.enableDrag():b.disableDrag();if(ovi.type(b)==="element"&&(window.navigator.pointerEnabled||window.navigator.msPointerEnabled))b.style.touchAction="none",b.style.msTouchAction="none"}return b},g={isEventTarget:l,isDraggable:h,enableUserSelect:function(){var b=this.style;if(ovi.type(this)==="element")b.KhtmlUserSelect=
"auto",b.MozUserSelect="auto",b.OUserSelect="auto",b.WebkitUserSelect="auto",b.WebkitTouchCallout="auto";return this},disableUserSelect:function(){var b=this.style;if(ovi.type(this)==="element")b.KhtmlUserSelect="none",b.MozUserSelect="none",b.OUserSelect="none",b.WebkitUserSelect="none",b.WebkitTouchCallout="none";return this},enableDrag:function(){var b=this.style;this.disableUserSelect();if(ovi.type(this)==="element")b.WebkitUserDrag="element",b.KhtmlUserDrag="element";this.isDraggable=l;return this},
disableDrag:function(){var b=this.style;if(this.isDraggable&&ovi.type(this)==="element")b.KhtmlUserDrag="auto",b.WebkitUserDrag="auto";this.isDraggable=h;return this},insertListener:function(b,f,c){return this.addListenerNS(null,b,f,c,l)},addListener:function(b,f,c){return this.addListenerNS(null,b,f,c)},addListeners:function(b){for(var f in b)b.hasOwnProperty(f)&&this.addListenerNS(null,f,b[f][0],b[f][1])},insertListenerNS:function(b,f,c,a){return this.addListenerNS(b,f,c,a,l)},addListenerNS:function(b,
f,c,a,d){var k=this.eventListener||(this.eventListener={}),k=k[f]||(k[f]=[]),a=a||!1,p,m;if(f==="beforeunload")(m=e.Page.eg)[m.length]=c;else if(f==="resize")if((m=e.Page.Ge)[m.length]=p={node:this},(f=ovi.type(this))==="window")p.layoutWidth=(f=e.Page(this)).layoutWidth,p.layoutHeight=f.layoutHeight;else if(f==="element")p.offsetWidth=this.offsetWidth,p.offsetHeight=this.offsetHeight;d?k.unshift(c,a,b):k.push(c,a,b);return this},removeListener:function(b,f,c){return this.removeListenerNS(null,b,
f,c)},removeListenerNS:function(b,f,c,a){var d=this.eventListener,k,p,m,a=a||!1;if(f==="beforeunload"){m=(k=e.Page.eg).length;for(p=-1;++p<m;)if(k[p]===c){k.splice(p,1);p<=k.Q&&--k.Q;break}}else if(f==="resize"){m=(k=e.Page.Ge).length;for(p=-1;++p<m;)if(k[p].node===this){k.splice(p,1);p<=k.Q&&--k.Q;break}}if(d&&d[f]){k=d[f];m=k.length;for(p=0;p<m;p+=3)if(k[p]===c&&k[p+1]===a&&k[p+2]===b){k.splice(p,3);p<=k.Q&&(k.Q-=3);break}k.length===0&&delete d[f]}return this},removeAllListeners:function(){var b,
f,c;if(b=this.eventListener)for(f in b)for(;b[f]&&b[f].length>0;)c=b[f],this.removeListenerNS(c[2],f,c[0],c[1])},dispatch:function(b){return c.dispatchEvent(this,b)},hitTest:function(b,f){var c;if(this.parentNode&&this.ownerDocument&&(c=e.Page(this.ownerDocument).getClientRect(this))&&b>=c.left&&b<=c.right&&f>=c.top&&f<=c.bottom)return l;return h}};ovi.extend(c.prototype,g);c.getDispatchPath=function(b,f,c){for(var a,d=[],k=c&&c.u==="display";b;)f?(a=b.eventListener)&&(a=a[f])&&a.length&&d.push(b):
d.push(b),b=k&&b.u&&b.getParent?b.s:f&&b.parentNodes&&c&&b.parentNodes[c]?b.parentNodes[c]:b.parentNode;return d};c.catchException=function(b){d=b===l};c.dispatchEvent=function(b,f,g){var f=f instanceof e.Event?f:e.Page.parseEvent(f),a=f.type,q=f.namespaceURI,g=g||c.getDispatchPath(b,a,f.display||q),k=g.length,p,m,h,s;if(!a||k===0)return l;f.target=f.target||b;f.eventPhase=1;for(b=f.canSicker?k-1:0;b>=0;b--)if(b===0&&f.eventPhase++,m=g[b],f.currentTarget=m,(s=m.eventListener&&m.eventListener[a])&&
(h=s.length)){for(p=h-3;p>=0;p-=3)if((s[p+1]||b===0)&&!(s[p+2]!==null&&s[p+2]!==q)){if(d)try{s.Q=p,s[p].call(m,f),p=s.Q}catch(v){ovi.warn("Exception in event listener #"+p/3+", capturing phase for event "+a),ovi.error(String(v)==="[object Error]"?v.message:v)}else s.Q=p,s[p].call(m,f),p=s.Q;if(f.propagation===2)return!f.defaultPrevented}if(f.propagation===1)return!f.defaultPrevented}f.eventPhase++;if(f.canBubble)for(b=1;b<k;b++)if(m=g[b],f.currentTarget=m,(s=m.eventListener&&m.eventListener[a])&&
(h=s.length)){for(p=h-3;p>=0;p-=3)if(!s[p+1]&&!(s[p+2]!==null&&s[p+2]!==q)){if(s[p])if(d)try{s.Q=p,s[p].call(m,f),p=s.Q}catch(u){ovi.warn("Exception in event listener #"+p/3+", bubbling phase for event "+a),ovi.error(u)}else s[p].call(m,f);if(f.propagation===2)return!f.defaultPrevented}if(f.propagation===1)break}return!f.defaultPrevented}}})(nokia.maps.dom);ovi.provide("nokia.maps.dom.DataTransfer");
(function(){if(!nokia.maps.util.getConstructor(nokia.maps.dom.DataTransfer)){var e=!e,l={text:"text/plain",url:"text/uri-list"},h={string:e,number:e,"boolean":e},d={uninitialized:{copy:e,move:e,link:e},none:{},copy:{copy:e},copyLink:{copy:e,link:e},copyMove:{copy:e,move:e},all:{copy:e,move:e,link:e},link:{link:e},linkMove:{move:e,link:e},move:{move:e}},c=ovi.Array.indexOf,g=nokia.maps.util.d,b=nokia.maps.dom.DataTransfer=function(b){var c=-1,a,d;this.types=[];this.data={};this.ndt=b||null;if(b&&(d=
b.types)&&(a=b.types.length))for(;++c<a;)this.types=d[c];this.files=b&&b.files||[]};ovi.extend(b.prototype,{lift:e,realTime:!e,cursor:"pointer",dropEffect:"none",effectAllowed:"uninitialized",clearData:function(b){var d=this.ndt,a,q=ovi.type(b),k=this.types;if(b===void 0)return d&&d.clearData(),this.types={},this.data={},this;h[q]||g("Invalid format supplied!");b=l[b=(""+b).toLowerCase()]||b;d&&d.clearData(b);delete this.data[b];(a=c(k,b))>=0&&k.splice(a,1);return this},setData:function(b,d){var a=
this.ndt,q=ovi.type(b),k=ovi.type(d),p=this.types;h[q]||g("Invalid format supplied!");b=l[b=(""+b).toLowerCase()]||b;a&&(k==="string"?a.setData(b,d):a.clearData(b));this.data[b]=d;c(p,b)<0&&(p[p.length]=b);return this},getData:function(b){var c,a=this.ndt,d=ovi.type(b);h[d]||g("Invalid format supplied!");b=l[b=(""+b).toLowerCase()]||b;if(a&&(c=a.getData(b)))return c;return this.data[b]},hasData:function(b){var c=this.ndt,a=ovi.type(b);h[a]||g("Invalid format supplied!");b=l[b=(""+b).toLowerCase()]||
b;if(c&&c.getData(b))return e;return b in this.data},setDragImage:function(){},addElement:function(){},allows:function(b){return d[this.effectAllowed][b]}})}})(nokia.maps);ovi.provide("nokia.maps.geo.mercator");
(function(e){var l=e.util,h=l.Point,d=l.Strip,c=l.Uint32Array,g=l.qf,b=e.geo.Coordinate,l=Math,f=l.min,r=l.max,a=l.log,q=l.tan,k=l.atan,p=l.exp,m=l.floor,y=l.pow,s=l.PI,v=s/4,u=s/2,x=180/s,w=function(){for(var a=31,b={};a--;)b[y(2,a)]=a;return b}();e.geo.mercator={id:0,pointToGeo:function(a){var f=a.x,a=a.y;return new b(a<=0?90:a>=1?-90:x*(2*k(p(s*(1-2*a)))-u),(f===1?1:g(f,1))*360-180,void 0,1)},xyToGeo:function(a,f){return new b(f<=0?90:f>=1?-90:x*(2*k(p(s*(1-2*f)))-u),(a===1?1:g(a,1))*360-180,void 0,
1)},mapXYToGeo:function(a,f){return new b(f<=0?90:f>=1073741823?-90:x*(2*k(p(s*(1-2*f/1073741823)))-u),(a===1073741823?1:g(a/1073741823,1))*360-180)},mapPointsToGeo:function(a,b){for(var b=b||d.stencil(d.LAT_LNG),f=b.data,c=a.length,m=0,q=0,r=b.names.length,e=b.offsets.latitude,h=b.offsets.longitude,l,y;m<c;)f[q+h]=((l=a[m++])===1073741823?1:g(l/1073741823,1))*360-180,f[q+e]=(y=a[m++])<=0?90:y>=1073741823?-90:x*(2*k(p(s*(1-2*y/1073741823)))-u),q+=r;return b},geoToPoint:function(b){return new h(b.longitude/
360+0.5,f(1,r(0,0.5-a(q(v+u*b.latitude/180))/s/2)))},latLngToPoint:function(b,c){return new h(c/360+0.5,f(1,r(0,0.5-a(q(v+u*b/180))/s/2)))},latLngToMapPoint:function(b,c){return new h(m((c/360+0.5)*1073741823),m(f(1,r(0,0.5-a(q(v+u*b/180))/s/2))*1073741823))},geoToMapPoints:function(b,k){var d=b.data,p=d.length,g=0,e=0,h=b.names.length,l=b.offsets.latitude,y=b.offsets.longitude;for(k||(k=new c(p/h*2));e<p;)k[g++]=m((d[e+y]/360+0.5)*1073741823),k[g++]=m(f(1,r(0,0.5-a(q(v+u*d[e+l]/180))/s/2))*1073741823),
e+=h;return k},scaleMapXY:function(a,b,f,c){var k=30-w[f];return c?new h(a>>k,b>>k):(c=(f-=1)>>1,new h((a>>k)+((a&f)>c),(b>>k)+((b&f)>c)))},scaleMapPoints:function(a,b,f,k,d){var m=a.length,p=0,g=0,q=0,r=30-w[b],e,s,h,l;f||(f=new c(m));d=!!d;if(k)if(d)for(;p<m;)f[p]=a[p++]>>r;else{for(;g<m;)if(p=a[g++]>>r,s=a[g++]>>r,h!==p||l!==s)f[q++]=h=p,f[q++]=l=s;f.length=q}else{for(k=(b-=1)>>1;g<m;)if(p=((e=a[g++])>>r)+((e&b)>k),s=((e=a[g++])>>r)+((e&b)>k),d||h!==p||l!==s)f[q++]=h=p,f[q++]=l=s;if(!d)f.length=
q}return f}}})(nokia.maps);ovi.provide("nokia.maps.util.Coroutine");
(function(){function e(){var b=p(),f=b;U=0;h();if(aa)for(var c=p(),b=c+G.AF_MAX_EXEC_TIME;E.length&&c<b;)c=E.shift().data,c=c.run(),h();else{c=p();for(b=c+G.MAX_EXEC_TIME;C.length&&c<b;)L?(c=M.shift(),c||(c=M,M=I,I=c,ea++,c=M.shift()),c=c.data):c=C.shift().data,c=c.run(),h(),L=!L}d(b=p());ba&&a.clearTimeout(ba);ba=a.setTimeout(l,U+75);F+=b-f}function l(){ba&&a.clearTimeout(ba);ba=setTimeout(l,500);p()>U&&e()}function h(){var a,b,f;for(a=a||p();(b=A.k)&&b&&(f=b.data).lc<=a;)G.resume(f)}function d(a){var b;
E.length&&la();C.length?J(0):(b=A.k)?(a=b.data.lc-(a||p()),J(a<0?0:a)):J()}function c(a,b){return b.nice(!0)-a.nice(!0)}function g(a,b){return a.lc-b.lc}function b(a,b){s.call(this);r.prototype=B&&B.scope||z&&z.scope||{};var f=-1,c,k=a&&a.Yk,d=new r(b);if(a&&a.defaults)for(c in a.defaults)this[c]=a.defaults[c];this.id="ctx#"+x++;this.parent=B||z||null;this.name=(this.coroutine=a)&&a.ne;this.P={length:0};this.M={length:0};if(b&&b.length)for(;++f<b.length&&f<k.length;)d[k[f]]=b[f];this.scope=d;this.cd=
new y(this);this.jd=new y(this);this.md=new y(this)}function f(a,b){var f=this,c=f.context;do if(f.has(a))return f[a]=b,this;while((c=c.parent)&&(f=c.scope));z.scope[a]=b;return this}function r(a){this.arguments=a;this.has=this.hasOwn=this.hasOwnProperty;this.set=f}var a=window,q=nokia.maps.util,k={0:{status:"terminated"},1:{status:"running"},2:{status:"blocking"}},p=q.now,m=q.LinkedList,y=m.Element,s=q.OObject,v=Array.prototype.slice,u=ovi.type,x=1,w=!0;b.prototype=new s({status:2,aa:0,Pb:0,xn:0,
dh:-1,pl:0,priority:50,prioritySetter:function(a){if(u(a)!=="number")return this.priority;a<0&&(a=0);a>100&&(a=100);return a},useAnimationFrame:!1,Xc:0,nice:function(a){if(a&&this.Pb<this.timeStamp){this.aa-=(this.timeStamp-this.Pb)/G.SLICE_SIZE/D.length;if(this.aa<0)this.aa=0;if(this.aa>300)this.aa=300;this.Xc=this.priority-this.aa;this.Pb=this.timeStamp;this.realtime&&(this.Xc+=1E3)}return this.Xc},realtime:!1,precede:function(a){a instanceof b&&(this.P[a.id]=a,this.P.length++,a.M[this.id]=this,
a.M.length++,a.P[this.id]&&(delete a.P[this.id],a.P.length--,delete this.M[a.id],this.M.length--));return this},postpone:function(a){a instanceof b&&(this.M[a.id]=a,this.M.length++,a.P[this.id]=this,a.P.length++,a.M[this.id]&&(delete a.M[this.id],a.M.length--,delete this.P[a.id],this.P.length--));return this},clearPrecedence:function(){if(!this.P.length)return null;for(var a=[],b=this.P,f;void 0 in b;)f=b[void 0],delete f.M[this.id],f.M.length--,a.push(f);this.P={length:0};return a},clearPostponement:function(){if(!this.M.length)return null;
for(var a=[],b=this.M,f;void 0 in precedeList;)f=b[void 0],delete f.P[this.id],f.P.length--,a.push(f);this.M={length:0};return a},run:function(b,f){if(!f&&!this.useAnimationFrame&&this.M.length)return p();if(!f&&this.useAnimationFrame&&!aa)return p();var c=this.md,d=this.cd,m=this.jd,g=this.coroutine,q=B,r=this.scope,e,s,h,l=h=p();this.nice(!0);c.list&&c.list.remove(c);d.list&&d.list.remove(d);m.list&&m.list.remove(m);B=this;this.xn++;this.so=b?1.0E20:h+(aa?G.AF_SLICE_SIZE:G.SLICE_SIZE);this.dh=ea;
this.set("status",1);this.timeStamp=this.callTime=h;this.Vd=!0;if(w)try{s=g.Jb.call(r.that,r,this)}catch(y){e=y}else s=g.Jb.call(r.that,r,this);B=q;h=p();this.aa+=(c=h-l)/G.SLICE_SIZE;if(this.aa<0)this.aa=0;if(this.aa>300)this.aa=300;this.Xc=this.priority-this.aa;this.pl+=c;this.Pb=h;K+=c;F-=c;this.clearPrecedence();if(e&&this.onError)try{e=this.onError(r,this,e)}catch(v){}if(e||this.Vd){this.Vd=!1;this.set("returnValue",s);G.kill(this);if(this.onTerminated)this.onTerminated(r,this);e&&(ovi.warn("Coroutine '"+
g.ne+"' aborted abnormally with exception"),ovi.info((e.name?e.name+": ":"")+e.message))}else if(k[this.status]!==s&&!this.Xl&&a.console&&a.console.warn)this.Xl=!0,console.warn("The coroutine with the name '"+this.coroutine.ne+"' returned in a blocked state, but didn't return the Coroutine.BLOCK object.\nThe reason may be a bug that the developer of the coroutine forgot a return, which can lead to errors!");return h}});var z=new b,B=null,D={length:0},A=new m,C=new m,E=new m,M=new m,I=new m,K=0,Q=
p(),F=0,L=!0,ea=0,U=0,aa=!1,la=function(){function b(){f=!1;aa=!0;if(w)try{e()}catch(c){a&&a.console&&a.console.log&&a.console.log(c)}else e();aa=!1}var f=!1;return function(){f||(f=!0,q.requestAnimationFrame(b))}}(),J=function(){function b(){l=null;e()}function f(b){b.source!==a&&b.data==="nm.util.Coroutine#postMessageHack"&&e();if(b.source===a&&b.data==="nm.util.Coroutine#postMessageHack")return b.stopImmediatePropagation?b.stopImmediatePropagation():b.stopPropagation?b.stopPropagation():b.cancelBubble=
!0,!q&&g?(q=g=!1,e()):q=g=!1,!1}function c(){k=null;e()}var k=null,d=a.setImmediate||a.webkitSetImmediate||a.mozSetImmediate||a.oSetImmediate||a.msSetImmediate||function(a){return setTimeout(a,0)},m=a.clearImmediate||a.webkitClearImmediate||a.mozClearImmediate||a.oClearImmediate||a.msClearImmediate||function(a){return clearTimeout(a)},g=!1,q=!1,r,s=function(){var b=navigator,f=b.userAgent.toLowerCase(),c=!1;if(r=b.appName==="Microsoft Internet Explorer")+((((f.match(/(?:version|chrome|firefox|msie)[\/ ]([\d.]+)/)||
[])[1]||"").match(/([\d]+(?:[.][\d]+){0,1})/)||[])[1]||0)>=9&&+a.document.documentMode>=9&&(c=!0);return c}(),h=r&&!s?!1:a.postMessage&&(a.addEventListener||a.attachEvent),l=null;h&&(a.addEventListener?a.addEventListener("message",f,!1):a.attachEvent("onmessage",f));return function(f,r){var r=r||p(),f=+f,e=r+f;if(e!==e||e<U||!U)l&&(a.clearTimeout(l),l=null),k&&(m(k),k=null),q=!0,U=0;if(e===e&&!U)if(U=e,f<16)if(h){if(!g||q)g=!0,q=!1,a.postMessage("nm.util.Coroutine#postMessageHack","*")}else k||(k=
d(c));else l||(l=a.setTimeout(b,f))}}(),ba,G=nokia.maps.util.Coroutine={TERMINATED:0,RUNNING:1,BLOCKING:2,YIELDED:k[1],BLOCKED:k[2],KILLED:k[0],create:function(a,f){function c(){var a=arguments,f,k=new b(c,f=v.call(a,0));D[k.id]=k;D.length++;k.scope.that=this;k.scope.context=k;f.callee=a.callee;f.caller=a.callee.caller;k.Pb=k.createTime=k.timeStamp=k.callTime=p();G.resume(k);return k}c.Yk=v.call(arguments,2);c.ne=a;c.Jb=f;return c},createEx:function(a,b,f){var c=v.call(arguments,0),c=c.splice(2,1)&&
this.create.apply(this,c);f&&(c.defaults=f);return c},forName:function(a){var b,f,c=[];for(b in D)if((f=D[b]).name&&f.name.match(a))c[c.length]=f;return c},all:function(){var a,b=[];for(a in D)b.push(D[a]);return b},forId:function(a){return D[a]},wait:function(a,b,f){var c=a.$blocking||(a.$blocking={});if(f=f||B)return c[f.id]=f,f.Ac=a,G.suspend(f,b)},signal:function(a){var b;if(a=a&&a.$blocking)for(b in a)return G.resume(b=a[b]),b},broadcast:function(a){var b,f=a&&a.$blocking;if(f){for(b in f)G.resume(f[b]);
delete a.$blocking}},shallYield:function(){var a=B;return a&&(a.timeStamp=p())&&a.timeStamp>=a.so},yield:function(a){if(a=a||B)return G.suspend(a,0)},sleep:function(a,b){if(b=b||B)return b.Ac=null,G.suspend(b,a)},kill:function(a){arguments.length===1?a instanceof b||(a=B):a=a||B;if(a){if(a.status===0)return G.KILLED;var f=a.cd,c=a.md,k=a.jd;f.list&&f.list.remove(f);c.list&&c.list.remove(c);k.list&&k.list.remove(k);delete D[a.id];D.length--;G.broadcast(a);a.set("status",0);return G.KILLED}},suspend:function(a,
b){if((a=a||B)&&a.status!==0){if(b===null)b=Number.NaN;b=+b;a.Vd=!1;var f=a.cd,k=a.md,d=a.jd;f.list&&f.list.remove(f);k.list&&k.list.remove(k);d.list&&d.list.remove(d);a.set("timeStamp",p());if(b<=0)return a.set("status",1),a.useAnimationFrame?(a.nice(!0),E.addSorted(c,null,f)):(I.push(d),a.nice(!0),C.addSorted(c,null,f)),G.YIELDED;if(b>0)a.lc=a.timeStamp+b,A.addSorted(g,null,k);a.set("status",2);return G.BLOCKED}},resume:function(a){if(a&&a.status===2){var b=a.cd,f=a.md,k=a.jd,m=p();if(a.Ac)delete a.Ac.$blocking[a.id],
a.Ac=a.lc=null;f.list&&A.remove(f);a.set("timeStamp",m);a.nice(!0);a.useAnimationFrame?E.addSorted(c,null,b):(C.addSorted(c,null,b),a.realtime?M.unshift(k):a.dh<ea?M.push(k):I.push(k));a.set("status",1);d(m)}},MAX_EXEC_TIME:30,AF_MAX_EXEC_TIME:10,SLICE_SIZE:10,AF_SLICE_SIZE:10,count:function(){return D.length},taskCpuTime:function(){return K},schedulerCpuTime:function(){return F},totalCpuTime:function(){return p()-Q},current:function(){return B},scheduler:function(){e()},schedulerNextRuntime:function(){return U},
killAll:function(){for(var a in D)G.kill(D[a],"killAll called!")},scope:function(a){eval("fn = "+a.toString());return a},catchException:function(a){w=!!a}};G.ExecutionContext=b;G.Scope=r;z.scope.global=z.scope;e()})();ovi.provide("nokia.maps.ui._packaging.base");ovi.provide("nokia.maps.net._packaging.base");ovi.provide("nokia.maps.dom.Page");
(function(e){if(!nokia.maps.util.getConstructor(nokia.maps.dom.Page)){var l=nokia.maps.util,h=l.Coroutine,d=l.now,c=Math.pow,g=Math.sqrt,b=ovi.type,f=e.TouchList,r=function(a,b){return b?a===b?!0:r(a,b.parentNode):!1},a=navigator,q=a.userAgent.toLowerCase(),k=a.appVersion,p={windows:/Windows/.test(k),mac:/MacIntel/.test(a.platform),linux:/X11/.test(k)&&!/tablet/.test(q)&&!/armv7/.test(q),maemo:/apple/.test(q)&&/linux/.test(q)&&/armv7/.test(a.platform),iphone:/iphone/.test(q),ipod:/ipod/.test(q),ipad:/ipad/.test(q),
android:/android/.test(q),meego:/meego/.test(q),windowsphone:/windows\ phone/.test(q)},m,y,s={msie:y=a.appName==="Microsoft Internet Explorer"||/Trident/.test(k),chrome:/chrome/.test(q),safari:/apple/i.test(navigator.vendor)&&!/browserng/.test(q),opera:/opera/.test(q),mozilla:/firefox|fennec/.test(q)&&!/apple/.test(navigator.vendor),konqueror:/konqueror/.test(q),camino:/camino/.test(q),cp:/browserng/.test(q),fullVersion:m=(q.match(/(?:version|chrome|firefox|msie|\brv)[\/: ]([\d.]+)/)||[])[1]||"",
version:+((m.match(/([\d]+(?:[.][\d]+){0,1})/)||[])[1]||0),touch:p.android||p.iphone||p.ipad||p.meego||p.maemo,mobile:/android|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od|ad)|iris|kindle|lge |maemo|midp|mmp|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|symbian|treo|up\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino/i.test(q||a.vendor||window.opera)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|e\-|e\/|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(di|rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|xda(\-|2|g)|yas\-|your|zeto|zte\-/i.test((q||
a.vendor||window.opera).substr(0,4)),web:!this.mobile,language:a.language||a.userLanguage,webkit:/webkit/.test(q),gecko:/gecko\//.test(q),engineVersion:(q.match(/.+(?:rv|it|ra|ie)[\/: ]([\d.]+)/)||[])[1],realVersion:y&&q.match(/msie/)&&(window.matchMedia&&10||self.console&&console.profile&&9||document.documentMode!=void 0&&8)||Math.floor(m),dnd:!1},v="onwheel"in document?"wheel":document.onmousewheel!==void 0?"mousewheel":"DOMMouseScroll",u=window.navigator&&(navigator.pointerEnabled||navigator.msPointerEnabled)&&
(navigator.msMaxTouchPoints||navigator.maxTouchPoints),x=window.MSPointerEvent&&MSPointerEvent.MSPOINTER_TYPE_TOUCH||"touch",w=navigator.pointerEnabled?"pointerdown":"MSPointerDown",z=navigator.pointerEnabled?"pointermove":"MSPointerMove",B=navigator.pointerEnabled?"pointerup":"MSPointerUp",D=navigator.pointerEnabled?"pointercancel":"MSPointerCancel",A=s.webkit&&!s.touch?"offsetX":"layerX",C=s.webkit&&!s.touch?"offsetY":"layerY",E=window.MSGesture?new MSGesture:null,M,I=function(a){function k(a){var b;
a.pointerType===x?(b=a.type,b===w?J($(a)):b===z?I($(a)):b===B?y($(a)):b===D?q($(a)):fa(a)):fa(a)}function m(a){H($(a))}function q(a){y.call(this,a);na=[];Qa=Ra=0}function y(b){nb=void 0;for(var f=$(b),c=-1,k,m=f.changedTouches,p,g;++c<m.length;){g=new Sa(m[c]);for(k=0;k<na.length;k++)if(g.id===na[k].id){p=na[k];na.splice(k--,1);break}if(p){p.up=g;p.pressed=!1;if(ha)Y.style.display="none",g.target=a.elementFromPoint(g.pageX,g.pageY),Y.style.display="block";f.target=g.target;f.pageX=g.pageX;f.pageY=
g.pageY;f.targetX=g[A];f.targetY=g[C];H(f);if(!ha&&!f.defaultPrevented&&na.length===0&&p.down.target===g.target&&!p.tapFired)p.tapFired=!0,H(new ja({type:"tap",target:g.target,pageX:g.pageX,pageY:g.pageY,targetX:g.pageX+b[A],targetY:g.pageY+b[C]})),k=d(),ab>0&&k<ab?(ab=0,H(new ja({type:"dbltap",target:g.target,pageX:g.pageX,pageY:g.pageY}))):ab=k+K.DOUBLE_TAP_TIME}}ha&&b.preventDefault();h.resume(pa)}function I(b){for(var f=$(b),c=-1,k,m=f.changedTouches,p=d(),g,q;++c<m.length;){q=new Sa(m[c]);q.timeStamp=
p;for(k=0;k<na.length;k++)if(g=na[k],g.id===q.id){g.current=q;if(ha)Y.style.display="none",q.target=a.elementFromPoint(q.pageX,q.pageY),Y.style.display="block";g.preventMoveDefault&&b.preventDefault()}if(!ha)f.target=q.target,f.pageX=q.pageX,f.pageY=q.pageY,f.targetX=q[A],f.targetY=q[C],H(f)}ha?(Y.style.left=ca.current.pageX+"px",Y.style.top=ca.current.pageY+"px",(N.realTime||!za)&&pa.run()):pa.run();h.schedulerNextRuntime()<p-10&&h.scheduler();(ha||Da)&&b.preventDefault()}function J(a){if(a.changedTouches[0].identifier!==
nb){nb=a.changedTouches[0].identifier;for(var a=$(a),b=-1,f=a.changedTouches,c=a.timeStamp,k,d,m;++b<f.length;){m=new Gb;m.id=(k=new Sa(f[b])).id;m.down=k;m.current=k;m.pressed=!0;if(Da)m.longpressSent=m.tapFired=m.preventDrag=!0;k.timeStamp=c;na.some(function(a){return m.id===a.id})||na.push(m);d=m.down.target;try{for(;d;){if(d&&d.isEventTarget&&d.isDraggable){m.preventMoveDefault=!0;break}d=d.parentNode}}catch(p){}a.target=k.target;a.pageX=k.pageX;a.pageY=k.pageY;a.targetX=k[A];a.targetY=k[C];H(a)}h.resume(pa)}}
function ba(a){var b=$(a),f,c;ga(a);if(!s.msie&&(f=a.relatedTarget)&&f.nodeName==="IFRAME")for(c in ka)if(ka[c].pressed)a=b.clone(),a.target=ta,a.type="mouseup",a.button=c,H(a);h.resume(bb)}function G(a){ga(a)}function R(a){var b,f,c,k=-1,m=d();ga(a);b=$(a);b.target=ta;ha?(Y.style.left=ua+"px",Y.style.top=va+"px",(N.realTime||!za)&&pa.run()):(Ta=b,h.resume(bb),pa.run());if(Aa<=8){for(;++k<ka.length;)if(c=ka[k],c.pressed&&!(a.button&ob[k])&&(c=c.down.target,f=b.clone(),f.type="mouseup",f.button=k,
H(f),!ha&&!f.defaultPrevented))f=b.clone(),f.type="click",f.button=k,f.target=c,H(f);h.schedulerNextRuntime()<m-10&&h.scheduler()}}function Ba(a){var b=$(a),f,c=ka[b.button];if(!s.opera||!(s.version<11&&a.button===2)){ga(a);b.target=ta;if(Aa<=8&&!c.pressed)Ga=!0,f=b.clone(),f.type="mousedown",H(f);if(c.pressed){!ha&&!Da&&pa.run();H(b);if(f&&Ga)a=b.clone(),a.type="click",H(a),f.button!==2&&(Ga=!1);h.resume(pa)}}}function S(a){var b=$(a),f;f=b.target;var c=b.pageX,k=b.pageY,m,p;ga(a);b.target=ta;if(Aa<=
8&&b.button===0&&f&&f.style&&(f.style.overflow==="auto"||f.style.overlfow==="scroll"))if(a=Fb(f),m=a.right-cb.width,p=a.bottom-cb.height,f.clientHeight<f.scrollHeight&&c>=m&&c<=a.right||f.clientWidth<f.scrollWidth&&k>=p&&k<=a.bottom)return;db=b.button===2?!0:!1;H(b);if(s.opera&&s.version<11&&b.button===2)db=!1,b=b.clone(),b.type="mouseup",H(b),f=b.clone(),f.type="click",H(f),(b=d())-Ha<K.DOUBLE_CLICK_TIME?(b=f.clone(),b.type="dblclick",H(b),Ha=0):Ha=b;h.resume(pa)}function sa(a){var b;ga(a);b=$(a);
if(!(s.opera&&a.button===2)){if(s.opera&&a.button===2)(time=d())-Ha<K.DOUBLE_CLICK_TIME?(doubleClickEvent=b.clone(),doubleClickEvent.type="dblclick",H(doubleClickEvent),Ha=0):Ha=time;H(b)}}function fa(a){ga(a);H($(a))}function H(a){var b=a.type,f=a.button,k=a.touches,d=ka[f],m,q=!1;if(p.android){if(b==="gesturechange")return;if(b==="touchstart"&&(Ra++,Qa++,Ra>2))return;b==="touchend"&&(Ra--,Qa--)}if(b==="resizestart"||b==="resize"||b==="resizeend")return Ia(a.target,a);if(d&&(!M||M!==x))if(b==="mousedown"&&
d)d.down=a.clone(),d.up=null,d.pressed=!0,d.preventClick=d.clickFired=d.longpressSent=!1,pb|=1<<f;else if(b==="mouseup"&&d)d.up=a.clone(),d.pressed=!1,pb&=~(1<<f);else if(b==="click"){if(d.clickFired||d.preventClick)q=!0,d.preventClick&&a.preventDefault();d.clickFired=!0}else if(b==="longpress")d.longpressSent=!0;if(!Ua&&(b==="gesturestart"||Ra>=2)){Da=!0;for(m in na)f=na[m],f.tapFired=f.preventDrag=f.longpressSent=!0;if(p.android&&k&&k.length===2)a.type="gesturestart",a.scale=1,qb=g(c(k[0].screenX-
k[0].screenY,2)+c(k[1].screenX-k[1].screenY,2)),rb=a.scale,Ia(a.target,a,!1),Ua=q=!0;h.resume(pa)}else if(Qa>1&&Ua){if(p.android&&k&&k.length===2)Ia(a.target,a,!1),a.type="gesturechange",a.scale=g(c(k[0].screenX-k[0].screenY,2)+c(k[1].screenX-k[1].screenY,2))/qb,rb=a.scale,Ia(a.target,a,!1),q=!0}else if(b==="gestureend"||Qa===1&&Ua){Da=!1;if(p.android)a.type="gestureend",a.scale=k&&k.length===2?Math.sqrt(c(k[0].screenX-k[0].screenY,2)+c(k[1].screenX-k[1].screenY,2))/qb:rb,Ia(a.target,a,!1),q=!0,Ua=
!1;h.resume(pa)}ha&&!Hb[b]&&(q=!0);if(!q&&(a.shiftKey=sb,a.ctrlKey=eb,a.altKey=tb,a.metaKey=ub,a.buttonState=pb,Ia(a.target,a,b==="mouseout"||b=="mouseleave"?a.Kg:!1),b==="click"&&a.defaultPrevented))d.preventClick=!0}function ga(b){if(b){var f=b.target||b.srcElement||null,c=b.type,k="toElement"in b?b.toElement:b.relatedTarget;if(Vb[c])sb=b.shiftKey,eb=b.ctrlKey,tb=b.altKey,ub=b.metaKey||!1;if(Ib[c]){if("pageX"in b&&b.pageX!==void 0&&b.pageX!==null&&b.pageX===b.pageX)ua=b.pageX,va=b.pageY,Ja=b.clientX,
Ka=b.clientY;else if("clientX"in b&&"scrollLeft"in da&&b.clientX!==void 0&&b.clientX!==null&&b.clientX==b.clientX)ua=b.clientX+(a.documentElement.scrollLeft?a.documentElement.scrollLeft:da.scrollLeft),va=b.clientY+(a.documentElement.scrollTop?a.documentElement.scrollTop:da.scrollTop),Ja=b.clientX,Ka=b.clientY;else return;if(ha&&za)Y.style.display="none",f=a.elementFromPoint(b.clientX,b.clientY),Y.style.display="block";if(f&&f.nodeType===3)f=f.parentNode;ta=f||null;c==="mouseout"&&!k&&(ta=null)}}}
function X(a){b(a)==="element"&&Y.appendChild(a)}function ia(a,f,c){for(var k=b(a);xa.childNodes.length;)xa.removeChild(xa.childNodes[0]);if(k==="element")f=b(f)==="number"?f===f?f:0:0,c=b(c)==="number"?c===c?c:0:0,xa.style.left=f+"px",xa.style.top=c+"px",xa.appendChild(a)}function V(){vb[N.effectAllowed]?ya=N.effectAllowed:N.effectAllowed=ya}function $a(){vb[ya]&&vb[ya][N.dropEffect]?oa=N.dropEffect:oa=N.dropEffect="none"}function Db(){if(Y){for(Y.parentNode&&Y.parentNode.removeChild(Y);Y.childNodes.length;)Y.removeChild(Y.childNodes[0]);
for(;xa.childNodes.length;)xa.removeChild(xa.childNodes[0])}}function Eb(){Ea=qa.orientation;wb=a.body.clientWidth;Va=a.body.clientHeight;Wa=qa.innerWidth;fb=qa.innerHeight;xb=qa.outerWidth;yb=qa.outerHeight;if(!p.iphone){if(!s.webkit)wb=null,Wa?Va||(Va=a.documentElement.offsetHeight||null):(Wa=a.body.clientWidth,fb=a.body.clientHeight,Va=null);xb=Wa;yb=fb}Ea?Ea===-90?Ea=90:Ea===90&&(Ea=270):Ea=screen.width>screen.height?90:0;W.width=wb;W.height=Va;W.layoutWidth=Wa;W.layoutHeight=fb;W.viewportWidth=
xb;W.viewportHeight=yb;W.orientation=Ea}function $(b){if(b instanceof ja)return b;var c,k,d,m,p,g;d=(b=b||window.event)&&(b.target||b.srcElement)||null;if((c=gb)&&gb.nativeEvent===b)return c.currentTarget=b.currentTarget,c.bubbles=b.bubbles,c.eventPhase=b.eventPhase,c.defaultPrevented=b.defaultPrevented,c;c=new ja;(c.nativeEvent=b)||l.d("Invalid or no event object supplied!");(!(c.type=b.type)||!c.type.length)&&l.d("Invalid or no type in event!");c.bubbles=b.bubbles===!0||b.bubbles===!1?b.bubbles:
!1;c.cancelable=b.cancelable===!0||b.cancelable===!1?b.cancelable:!0;c.currentTarget=b.currentTarget;c.defaultPrevented=b.defaultPrevented===!0||b.defaultPrevented===!1?b.defaultPrevented:!1;if(c.eventPhase)c.eventPhase=b.eventPhase;c.namespaceURI=b.namespaceURI;c.page=W;k=c.type;if(k==="DOMMouseScroll"||k==="mousewheel"||k==="MozMousePixelScroll")c.type=k="wheel";if(c.target=d){if(c.target.nodeType===3)c.target=c.target.parentNode}else return gb=c;if(Wb[c.type]&&u&&(M=b.pointerType,c.pointerId=b.pointerId,
c.hwTimestamp=b.hwTimestamp,c.isPrimary=b.isPrimary,c.pointerType=b.pointerType,c.pressure=b.pressure,c.rotation=b.rotation,c.tiltX=b.tiltX,c.tiltY=b.tiltY,m=new Sa(b),b.pointerType===x)){if(c.type===w&&(wa.L(b),Xa[c.pointerId]=c.target,c.type=zb[c.type],wa.length>1)){E.target=c.target;for(g=0;g<wa.length;g++)E.addPointer(wa[g].pointerId)}c.target=d=m.target=Xa[c.pointerId];if(c.type===z&&wa.identifiedTouch(c.pointerId))wa.L(b),c.type=zb[c.type];if(c.type===B)wa.Y(b),Xa[c.pointerId]=null,delete Xa[c.pointerId],
c.type=zb[c.type],wa.length<=1&&E.stop();b.touches=new f;b.touches.Lk(wa);b.changedTouches=new f;b.changedTouches.L(m);b.targetTouches=new f;for(g=0;g<wa.length;g++)r(d,Xa[wa[g].identifier])&&b.targetTouches.L(wa[g])}if(Xb[c.type])c.touches=b.touches,c.targetTouches=b.targetTouches,c.changedTouches=b.changedTouches;if(Yb[k]||Jb[k]){if(Jb[k])c.type=Zb[k];c.pageX=b.pageX;c.pageY=b.pageY;c.targetX=b[A];c.targetY=b[C];c.scale=b.scale;c.rotation=b.rotation}c.view=void 0;c.relatedTarget="relatedTarget"in
b?b.relatedTarget:b.fromElement===d?b.toElement:b.fromElement;c.detail=b.detail;if(b.display)c.display=b.display,c.displayX=b.displayX,c.displayY=b.displayY;if(Ib[k]){c.shiftKey=b.shiftKey;c.altKey=b.altKey;c.ctrlKey=b.ctrlKey;c.metaKey=b.metaKey||!1;c.screenX=b.screenX;c.screenY=b.screenY;c.clientX=b.clientX;c.clientY=b.clientY;"pageX"in b?(c.pageX=b.pageX,c.pageY=b.pageY,"layerX"in b?(c.targetX=s.msie&&s.version==9?b.offsetX:b[A],c.targetY=s.msie&&s.version==9?b.offsetY:b[C]):(c.targetX=b.offsetX,
c.targetY=b.offsetY)):(c.pageX=b.clientX+(a.documentElement.scrollLeft||da.scrollLeft),c.pageY=b.clientY+(a.documentElement.scrollTop||da.scrollTop),c.targetX=b.offsetX,c.targetY=b.offsetY);if($b[k]){k==="mousedown"&&(hb=!1);d=b.button;if(Aa<=8&&k==="mousedown")for(g=0;g<ka.length;g++)ka[g].pressed&&(d&=~ob[g]);else if(Aa<=8&&(k==="click"||k==="contextmenu")&&d===0)for(g=p=d=0;g<ka.length;g++)if(m=ka[g],!m.pressed&&m.up&&m.up.timeStamp>p)d=ob[g],p=m.up.timeStamp;c.button=Aa<=8||s.konqueror?ac[d]:
d}if(bc[k])if(v==="wheel")c.deltaX=b.deltaX,c.deltaY=b.deltaY,c.deltaZ=b.deltaZ,c.deltaMode=b.deltaMode;else if(c.deltaMode=b.type==="MozMousePixelScroll"?0:1,c.deltaX=0,c.deltaZ=0,v==="mousewheel"){if(c.deltaY=b.wheelDelta/-40,b.wheelDeltaX)c.deltaX=b.wheelDeltaX/-40}else c.deltaY=b.detail}if(cc[k])c.data=b.data,c.inputMode=c.inputMode;if(dc[k])c.keyIdentifier=b.keyIdentifier,c.keyLocation=b.location===+b.location?b.location:b.keyLocation,c.repeat=b.v,c.ctrlKey=b.ctrlKey,c.shiftKey=b.shiftKey,c.altKey=
b.altKey,c.metaKey=b.metaKey||!1;return gb=c}function Fb(b){if(!b||!b.ownerDocument||!b.parentNode||b.parentNode===b)return null;var f,c=s.gecko&&a.getBoxObjectFor&&b.style.position==="absolute"&&(b.style.top===""||b.style.left==="");f=b.offsetParent;var k=b.offsetLeft,d=b.offsetTop,m,p;if(b.getBoundingClientRect)f=a.documentElement,k=f.pageXOffset?f.pageXOffset:a.body.pageXOffset?a.body.pageXOffset:qa.pageXOffset?qa.pageXOffset:f.scrollLeft,d=f.pageYOffset?f.pageYOffset:a.body.pageYOffset?a.body.pageYOffset:
qa.pageYOffset?qa.pageYOffset:f.scrollTop,c=b.getBoundingClientRect(),c={left:c.left+k-f.clientLeft,top:c.top+d-f.clientTop,right:c.right+k-f.clientLeft,bottom:c.bottom+k-f.clientTop,width:c.width,height:c.height};else if(a.getBoxObjectFor&&!c)c=a.getBoxObjectFor(b),f=a.getBoxObjectFor(viewport),c={left:c.screenX-f.screenX,top:c.screenY-f.screenY},c.right=c.left+b.offsetWidth-1,c.bottom=c.top+b.offsetHeight-1;else{for(;f;){if((m=f.offsetLeft)&&m===m)k+=m;if((p=f.offsetTop)&&p===p)d+=p;if((m=f.clientLeft)&&
m===m)k+=m;if((p=f.clientTop)&&p===p)d+=p;k-=f.scrollLeft;if(!s.opera||f.tagName!=="TR")d-=f.scrollTop;f=f.offsetParent}if(s.safari&&b.style.position==="absolute"||s.opera)d-=da.offsetTop;c={left:k,top:d,right:k+b.offsetWidth-1,bottom:d+b.offsetHeight-1}}if(!c.width)c.width=c.right-c.left+1,c.height=c.bottom-c.top+1;return c}function La(f,c){if(b(f)==="string")return Ab(a.createElement(f),c);f.tagName||l.d("tagName must be string or object with property 'tagName'");var k=a.createElement(f.tagName),
d;for(d in f)ec[d]||k.setAttribute(d,f[d]);(c||(c=f.style))&&Ab(k,c);return k}function Ab(a,b){if(b&&a&&a.style)for(var f in b)!fc[f]&&f in a.style&&(a.style[f]=b[f]);return a}function Gb(){}function Sa(a){if(a)for(var b in a)this[b]=a[b];this.id=this.identifier}function Ya(){this.pressed=this.longpressSent=this.clickFired=this.preventClick=!1;this.down=this.up=null}var qa=a.parentWindow||a.defaultView,Kb=a.documentElement,da=a.getElementsByTagName("BODY")[0],gc=a.getElementsByTagName("HEAD")[0],
W=this,hb=!1,hc=p.mac&&s.webkit,Aa=function(){var b;if(s.msie)b=5,a.documentMode?b=a.documentMode:a.compatMode&&a.compatMode==="CSS1Compat"&&(b=7);return b}(),ja=e.Event,ib=e.EventTarget,ic=e.DataTransfer,Lb=ib.getDispatchPath,Ia=ib.dispatchEvent,O=ovi.dom.addEvent,Mb=ovi.Array.indexOf;Sa.prototype={id:null,identifier:null,target:null,timeStamp:0,pageX:0,pageY:0,screenX:0,screenY:0,clientX:0,clientY:0};Gb.prototype={preventMoveDefault:!1,preventDrag:!1,pressed:!1,longpressSent:!1,tapFired:!1,id:null,
down:null,current:null,up:null};var fc={constructor:!0,prototype:!0},ec={constructor:!0,prototype:!0,tagName:!0,style:!0},Fa=Math.abs,gb=null,zb={MSPointerDown:"touchstart",MSPointerMove:"touchmove",MSPointerUp:"touchend",MSPointerCancel:"touchcancel",pointerdown:"touchstart",pointermove:"touchmove",pointerup:"touchend",pointercancel:"touchcancel"},wa=u?new f:null,Xa={},Wb={MSPointerDown:!0,MSPointerMove:!0,MSPointerUp:!0,MSPointerCancel:!0,pointerup:!0,pointermove:!0,pointerdown:!0,pointercancel:!0},
Jb={MSGestureStart:!0,MSGestureChange:!0,MSGestureEnd:!0},Zb={MSGestureStart:"gesturestart",MSGestureChange:"gesturechange",MSGestureEnd:"gestureend"},Xb={touchstart:!0,touchmove:!0,touchend:!0,touchcancel:!0},Yb={gesturestart:!0,gesturechange:!0,gestureend:!0},Hb={dragstart:!0,drag:!0,dragenter:!0,dragleave:!0,dragover:!0,drop:!0,dragend:!0},Ib=ovi.extend(ovi.extend({},Hb),{mousemove:!0,mouseup:!0,mousedown:!0,mouseover:!0,mouseout:!0,mouseenter:!0,mouseleave:!0,click:!0,dblclick:!0,contextmenu:!0,
wheel:!0}),$b={mousedown:!0,mouseup:!0,contextmenu:!0,click:!0,dblclick:!0},bc={wheel:!0},cc={},dc={keydown:!0,keypress:!0,keyup:!0},ob={0:1,1:4,2:2,3:8,4:16},ac={1:0,4:1,2:2,8:3,16:4},jc=a.compatMode!=="CSS1Compat",wb=0,Va=0,Wa=0,fb=0,xb=0,yb=0,Ea=0,cb=function(){var a=0,b=0,f=0,c=0,k=0,d=0,m=La("P",{height:"200px",width:"200px"}),p=La("P",{position:"absolute",top:0,left:0,visibility:"hidden",width:"100px",height:"100px",overflow:"hidden"});try{p.appendChild(m);da.appendChild(p);b=p.offsetWidth;
k=p.offsetHeight;p.style.overflow="scroll";f=p.offsetWidth;d=p.offsetHeight;if(b===f)f=p.clientWidth;if(k===d)d=p.clientHeight;da.removeChild(p);a=b-f;c=k-d}catch(g){c=a=0}return c!==c||a!==a||c<=0||a<=0?{width:17,height:17}:{width:a,height:c}}(),ua=0,va=0,Ja=0,Ka=0,ta=null,ma=null,Ma=[],ka=[new Ya,new Ya,new Ya,new Ya,new Ya],pb=0,na=[],ab=0,ha=!1,Da=!1,vb={uninitialized:{copy:!0,move:!0,link:!0},none:{},copy:{copy:!0},copyLink:{copy:!0,link:!0},copyMove:{copy:!0,move:!0},all:{copy:!0,move:!0,link:!0},
link:{link:!0},linkMove:{move:!0,link:!0},move:{move:!0}},jb=!1,kb=0,lb=0,ra=null,ca=null,ya=null,za=!0,oa=null,Nb={none:s.msie?"not-allowed":"no-drop",link:s.msie||s.safari?"default":"alias",move:s.msie?"hand":"pointer",copy:s.msie||s.safari?"default":"copy"},Ca=null,Z=null,Na=!1,N=null,Y=null,Oa=null,Ob=null,xa=null,sb=!1,eb=!1,tb=!1,ub=!1,Vb={keydown:!0,keyup:!0,mousedown:!0,mouseup:!0},T=K.browser.mobile,Pb=T?5:150,kc=T?1:25,pa=h.create("nokia.maps.dom.Page#queueCo",function(f,c){var k,d,m=c.callTime,
p=m-K.LONGPRESS_INTERVAL,g=!1,q=m+Pb,r,e,l,y=-1,v,x,z,u,w,C;if(ha){if(ca?(w=(r=ca.current.pageX)-kb,C=(u=ca.current.pageY)-lb,k=ca):(w=(r=ua)-kb,C=(u=va)-lb,k=ka[ra]),kb=r,lb=u,Y.style.left=r+"px",Y.style.top=u+"px",!k.pressed&&k.up||Da||jb){if(za&&!Da&&!jb&&Z&&oa!=="none")k=new ja({type:"drop",target:Z,relatedTarget:Ca,button:ra,pageX:r,pageY:u,deltaX:w,deltaY:C,dataTransfer:N}),H(k),$a(),k.defaultPrevented||(k=N.getData("text/plain"),b(Z)==="element"&&(Z.nodeName==="TEXTAREA"||Z.nodeName==="INPUT"&&
Z.type.toLowerCase()==="text")?oa==="copy"||oa==="move"?k&&k.length&&(Z.value+=k):oa="none":oa="none");else if(!za)N.dropEffect=oa="none",k=new ja({type:"dragleave",target:Z,relatedTarget:Ca,button:ra,cancelable:!1,pageX:r,pageY:u,deltaX:0,deltaY:0,dataTransfer:N}),H(k);N.dropEffect=oa;N.effectAllowed=ya;k=new ja({type:"dragend",target:Ca,relatedTarget:Z,button:ra,pageX:r,pageY:u,deltaX:0,deltaY:0,dataTransfer:N});H(k);pa.realtime=!1;if(s.msie)da.releaseCapture&&da.releaseCapture(),da.style.cursor=
Ob;Db();ha=jb=!1;N=ca=ra=null}}else if(!Da){if(na.length===1&&(k=na[0])&&k.current)if(w=k.current.pageX-k.down.pageX,C=k.current.pageY-k.down.pageY,k.pressed&&!k.preventDrag&&Fa(w)+Fa(C)>8)ca=k,r=k.current.pageX,u=k.current.pageY;if(!ca)for(y in ka)if(k=ka[y],k.down&&(w=ua-k.down.pageX,C=va-k.down.pageY,k.pressed&&Fa(w)+Fa(C)>1)){ra=+y;r=ua;u=va;break}if((ca||ra!==null)&&k){hb=!0;e=k.down.target;try{for(;e;){if(e.isEventTarget&&e.isDraggable)break;e=e.parentNode}}catch(A){e=null}if(e){ca?(w=(r=ca.current.pageX)-
ca.down.pageX,C=(u=ca.current.pageY)-ca.down.pageY,k=ca):(w=(r=ua)-k.down.pageX,C=(u=va)-k.down.pageY,k=ka[ra]);kb=r;lb=u;if(!Y)Y=La("DIV",{position:"absolute",top:k.down.pageX+"px",left:k.down.pageY+"px",zIndex:65535,overflow:"visible",width:0,height:0}),xa=La("DIV",{position:"absolute",top:0,left:0,zIndex:255,overflow:"visible",width:0,height:0}),Oa=La("DIV",{position:"absolute",top:"-25px",left:"-25px",zIndex:65535,overflow:"visible",width:"50px",height:"50px"}),Oa.innerHTML="&nbsp;";Y.appendChild(xa);
!s.msie&&!ca&&Y.appendChild(Oa);Y.style.left=r+"px";Y.style.top=u+"px";Oa.style.cursor="default";da.appendChild(Y);N=new ic;N.setDragImage=ia;N.addElement=X;l=new ja({type:"dragstart",target:e,relatedTarget:null,button:ra,pageX:k.down.pageX,pageY:k.down.pageY,targetX:k.down.targetX,targetY:k.down.targetY,deltaX:0,deltaY:0,dataTransfer:N});H(l);if(l.defaultPrevented)Db(),k.preventDrag=!0,ha=!1,N=ca=ra=null;else if(pa.realtime=N.realtime,Ca=k.down.target=e,ha=!0,za=N.lift!==!1,Z=null,k.longpressSent=
k.tapFired=k.preventClick=!0,Na=!1,V(),N.effectAllowed=ya,N.dropEffect=oa,da.setCapture&&da.setCapture(),s.msie)Ob=da.style.cursor||"auto",da.style.cursor="default"}else ra=ca=null}}if(ha){d=ca?ca.current.target:ta;if(za&&Z&&Z!==d){e=d;try{for(;e;){if(e===Z)break;e=e.parentNode}}catch(B){e=null}if(!e||e===qa||e===a||e===da)k=new ja({type:"dragleave",target:Z,relatedTarget:Ca,button:ra,pageX:r,pageY:u,dataTransfer:N}),H(k),N.effectAllowed=ya,N.dropEffect=oa="none",Z=null,Na=!1}if(za&&!Z&&d){e=d;try{for(;e;){if(e.isEventTarget)break;
e=e.parentNode}}catch(D){e=null}if(e)d=new ja({type:"dragenter",target:Z=e,relatedTarget:Ca,button:ra,pageX:r,pageY:u,dataTransfer:N}),H(d),d.defaultPrevented?(Na=!0,$a(),N.effectAllowed=ya):(Na=!1,N.effectAllowed=ya,N.dropEffect=oa="none")}if(za&&Z&&Na)d=new ja({type:"dragover",target:Z,relatedTarget:Ca,button:ra,pageX:r,pageY:u,deltaX:w,deltaY:C,dataTransfer:N}),H(d),d.defaultPrevented?($a(),N.effectAllowed=ya):(Na=!1,N.effectAllowed=ya,N.dropEffect=oa="none");r=new ja({type:"drag",target:Ca,relatedTarget:Z,
button:ra,pageX:r,pageY:u,deltaX:w,deltaY:C,dataTransfer:N});H(r);r.defaultPrevented&&(jb=!0);if(N)if(V(),N.dropEffect=oa,za){if(Oa.style.cursor=Nb[oa],s.msie)da.style.cursor=Nb[oa]}else s.msie?da.style.cursor=N.cursor==="pointer"?"hand":N.cursor||"hand":Oa.style.cursor=N.cursor==="hand"?"pointer":N.cursor||"pointer";return h.sleep(kc)}for(y in ka)if(k=ka[y],k.pressed&&(d=k.down))if(g=!0,!k.longpressSent&&d.target&&Fa(ua-d.pageX)+Fa(va-d.pageY)<=1&&d.timeStamp<=p){if(k.longpressSent=!0,r=d.clone(),
r.type="longpress",r.nativeEvent=null,H(r),r.defaultPrevented)k.preventClick=!0}else!k.longpressSent&&q>d.timeStamp+K.LONGPRESS_INTERVAL&&(q=d.timeStamp+K.LONGPRESS_INTERVAL);for(x in na)if(k=na[x],k.pressed&&(v=k.down))if(g=!0,!k.longpressSent&&(z=k.current)&&v.target&&Fa(z.pageX-v.pageX)+Fa(z.pageY-z.pageY)<=8&&v.timeStamp<=p){if(k.longpressSent=!0,r=new ja(ovi.extend({type:"longpress"},v)),H(r),r.defaultPrevented)k.tapFired=!0}else!k.longpressSent&&q>v.timeStamp+K.LONGPRESS_INTERVAL&&(q=v.timeStamp+
K.LONGPRESS_INTERVAL);if(ha)return h.sleep(Pb);if(g){if((r=q-m)<0)r=1;return h.sleep(r)}return h.sleep()})(),Ra=0,Qa=0,rb,qb,Ua=!1,db=!1,Ha=0,Ga=!1,Bb=0,Ta=null,mb=0,bb=h.create("nokia.maps.dom.Page#mouseMoveCo",function(b,f){var c,k,d,m;m=ma;var p=f.callTime;p>=mb&&(Ta&&H(Ta),Ta=null,mb=p+K.MOUSEMOVE_THRESHOLD);if(ma&&ma!==ta)d=new ja({type:"mouseout",target:ma,relatedTarget:ta,pageX:ua,pageY:va,clientX:Ja,clientY:Ka,Kg:f.mouseCurrentOverDispatchPath}),f.mouseCurrentOverDispatchPath=null,H(d),ma=
null;for(d=-1;++d<Ma.length;)if(k=Ma[d],(c=Mb(Ma,k))>=0&&(!k.hitTest||!k.hitTest(ua,va)))Ma.splice(c,1),c=new ja({type:"mouseleave",target:k,pageX:ua,pageY:va,clientX:Ja,clientY:Ka,Kg:f.mouseCurrentEnterDispatchPath}),f.mouseCurrentEnterDispatchPath=null,H(c),d--;if(ta&&!ma){ma=ta;if(ma!==qa&&ma!==a&&ma!==da&&ma!==Kb&&Mb(Ma,ma)<0)d=new ja({type:"mouseenter",target:ma,pageX:ua,pageY:va,clientX:Ja,clientY:Ka}),Ma.push(ma),d=$(d),f.mouseCurrentEnterDispatchPath=ib.getDispatchPath(ma,d.type,d.display),
H(d);m=new ja({type:"mouseover",target:ma,relatedTarget:m,pageX:ua,pageY:va,clientX:Ja,clientY:Ka});m=$(m);f.mouseCurrentOverDispatchPath=ib.getDispatchPath(ma,m.type,m.display);H(m)}if(!Ta||mb<=p)return h.sleep();return h.sleep(mb-p)})(),nb,Qb=!1,T=Aa<=8?a:qa,P=Aa<=8?!1:!0;pa.onError=bb.onError=function(){};O(a,"touchstart",J,P);O(a,"touchmove",I,P);O(a,"touchend",y,P);O(a,"touchcancel",q,P);O(T,"gesturestart",m,P);O(T,"gesturechange",m,P);O(T,"gestureend",m,P);O(T,"orientationchange",function(){H($(event));
H(new ja({type:"resize",target:qa}))},P);O(T,"MSPointerDown",k,P);O(T,"MSPointerMove",k,P);O(T,"MSPointerUp",k,P);O(T,"MSPointerCancel",k,P);O(T,"pointerdown",k,P);O(T,"pointermove",k,P);O(T,"pointerup",k,P);O(T,"pointercancel",k,P);O(T,"MSGestureStart",m,P);O(T,"MSGestureChange",m,P);O(T,"MSGestureEnd",m,P);O(T,"resize",function(){h.resume(Q)},P);!p.android&&O(T,"mouseover",G,P);!p.android&&O(T,"mouseout",ba,P);!p.android&&O(T,"click",sa,P);!p.android&&O(T,v,fa,P);v==="DOMMouseScroll"&&O(T,"MozMousePixelScroll",
fa,P);!p.android&&O(T,"dblclick",fa,P);!p.android&&O(T,"mousedown",S,P);!p.android&&O(T,"mouseup",Ba,P);!p.android&&O(T,"mousemove",R,P);O(T,"contextmenu",function(a){var b=$(a),f;ga(a);if(ha)b.preventDefault();else{if(db&&!s.gecko&&!Ga&&(a=b.clone(),a.type="click",H(a),a.button===2&&(s.chrome||s.safari||s.opera||Aa>=9)))(f=d())-Bb<K.DOUBLE_CLICK_TIME?(a=a.clone(),a.type="dblclick",H(a),Bb=0):Bb=f;if(Ga)a=b.clone(),a.type="dblclick",H(a);b.target.isEventTarget&&(ka[2].pressed||ka[0].pressed&&eb&&
hc)?(setTimeout(function(){if(!hb)b.defaultPrevented=!1,H(b)},250),b.preventDefault()):hb?b.preventDefault():H(b);db=Ga=!1}},P);O(T,"keydown",fa,P);O(T,"keypress",fa,P);O(T,"keyup",fa,P);O(T,"focus",fa,P);O(T,"blur",fa,P);O(a,"selectstart",function(a){for(var a=$(a),b=Lb(a.target),f=-1,c=b.length;++f<c;)if(b[f].isDraggable)return a.preventDefault(),!1},P);O(a,"dragstart",function(a){if(!s.dnd)for(var b=Lb(a.target),f=b.length,c=-1;++c<f;)if(b[c].isEventTarget&&b[c].isDraggable)return a.preventDefault?
a.preventDefault():a.returnValue=!1,!1},P);O(a,"drag",function(a){var b=ta;ga(a);ta=b||null},P);O(a,"dragover",function(a){if(a&&a.target&&a.target.droppable)a.preventDefault?a.preventDefault():a.returnValue=!1},P);O(a,"dragenter",function(a){var a=$(a),b;if(Z)b=a.target,a.target=Z,a.type="dragleave",H(a),a.type="dragenter",a.target=b;H(a)},P);O(a,"drop",function(a){H(a=$(a));if(a.defaultPrevented)a.type="dragleave",a.target=Z,H(a);if(Qb)a.type="dragend",a.target=Ca,H(a)},P);O(a,"dragend",function(a){Qb=
!0;!Z&&H($(a))},P);O(qa,"beforeunload",fa,!1);Eb();a.$jslPage=W;W.window=qa;W.document=a;W.html=Kb;W.head=gc;W.body=da;W.documentMode=Aa;W.quirksMode=jc;W.scrollbarsWidth=cb.width;W.scrollbarsHeight=cb.height;W.parseEvent=$;W.update=Eb;W.processEvent=H;W.$=function(a){return this.document.getElementById(a)};W.setStyle=Ab;W.createElement=La;W.getClientRect=Fb;W.destroy=function(){h.kill(Q);h.kill(pa);h.kill(bb)};W.bw=function(a){eval("fn = "+a.toString());return a};W.ctrlKeyDown=function(){return eb};
W.shiftKeyDown=function(){return sb};W.altKeyDown=function(){return tb};W.metaKeyDown=function(){return ub}},K=e.Page=function(a){var f=document,c;if(!a){if(f.$jslPage)return f.$jslPage;return new I(f)}if(a.$jslPage)return a.$jslPage;if((c=b(a))!=="document"){if(c==="window")f=a.document;else if(a.ownerDocument)f=a.ownerDocument;else if(a.parentNode)for(f=null;a&&a.parentNode;){if((c=b(a))==="document"){f=a;break}if(c==="window"){f=a.document;break}if(a.ownerDocument){f=a.ownerDocument;break}a=a.parentNode}f||
l.d("Invalid node given!")}else f=a;if(f.$jslPage)return f.$jslPage;return new I(f)},a={parseEvent:function(a){if(a instanceof e.Event)return event;var b=(a=a||window.event)&&(a.target||a.srcElement)||null,b=b&&b.ownerDocument||document;if(!b)return K().parseEvent(a);if(b.$jslPage)return b.$jslPage.parseEvent(a);return(new I(b)).parseEvent(a)},LONGPRESS_INTERVAL:500,MOUSEMOVE_THRESHOLD:0,DOUBLE_TAP_TIME:500,DOUBLE_CLICK_TIME:300,RESIZE_IDL_TIME:1E3,RESIZE_SLEEP_MIN_TIME:125,RESIZE_SLEEP_MAX_TIME:500,
platform:p,browser:s,eg:[],Ge:[]},Q=h.create("nokia.maps.dom.Page#resizeCo",function(a,f){var c=e.Event,k=K.Ge,d=k.length,m=f.callTime,p,g,q;switch(a.ip){default:a.ip=0;case 0:a.resizeData=[],a.ip++;case 1:a.i=-1,a.resizesRunning=0,a.ip++;case 2:for(;++a.i<d;){d=k[a.i];q=d.node;k=!1;d.mode=d.mode||0;if((p=b(q))==="window"){if(g=K(q),g.update(),g.layoutWidth!==d.layoutWidth||g.layoutHeight!==d.layoutHeight)d.layoutWidth=g.layoutWidth,d.layoutHeight=g.layoutHeight,k=!0}else if(p==="element"&&(g=K(q),
d.offsetWidth!==q.offsetWidth||d.offsetHeight!==q.offsetHeight))d.offsetWidth=q.offsetWidth,d.offsetHeight=q.offsetHeight,k=!0;if(k){if(d.mode===0)d.mode=1,g.processEvent(new c({type:"resizestart",target:q}));d.lastResizeTime=m;g.processEvent(new c({type:"resize",target:q}));a.resizesRunning++}else if(d.mode===1)m>d.lastResizeTime+K.RESIZE_IDL_TIME?(d.mode=0,g.processEvent(new c({type:"resizeend",target:q}))):a.resizesRunning++;return h.yield()}a.ip++;case 3:if(a.ip=1,a.resizesRunning)return h.sleep(K.RESIZE_SLEEP_MIN_TIME)}return h.sleep(K.RESIZE_SLEEP_MAX_TIME)})();
ovi.extend(K,a);Q.onError=function(){};if(p.ipad||p.iphone)h.MAX_EXEC_TIME=10,h.AF_MAX_EXEC_TIME=10,h.SLICE_SIZE=5,h.AF_SLICE_SIZE=5}})(nokia.maps.dom);ovi.provide("nokia.maps.gfx.IDL");
(function(){var e=nokia.maps.dom.Page.browser,l=e.mozilla&&!e.fullVersion.indexOf("3.6"),h=nokia.maps.util.d,d={},c=function(){var a={BEGIN_2D_IMAGE:["-","begin2dImage"],BEGIN_PATH:["@","beginPath"],MOVE_TO:["M","moveTo"],LINE_TO:["L","lineTo"],BEZIER_CURVE_TO:["C","bezierCurveTo"],STROKE_TEXT:["t","strokeText"],FILL_TEXT:["T","fillText"],CLOSE_PATH:["x","closePath"],FILL:["f","fill"],STROKE:["s","stroke"],SAVE:[">","save"],RESTORE:["<","restore"],SET:["#","set"],DRAW_IMAGE:["I","drawImage"],DRAW_IDL:["i",
"drawIDL"],END:["X","end"]},b;for(b in a)a[b]=a[b][0].charCodeAt(0),d[a[b]]=b;return a}(),g=[["strokeColor",255,1],["fillColor",255,2],["lineWidth",1,3],["lineCap","round",4],["lineJoin","miter",5],["miterLimit",10,6],["font","10px sans-serif",7],["textAlign","start",8],["textBaseline","middle",9],["opacity",1,10]],b=nokia.maps.util.Matrix3D,f=function(){for(var a=-1,b=g.length,f=[];++a<b;)f.push(g[a][0]);return f}(),r=nokia.maps.gfx.IDL=new ovi.Class({initialize:function(a){this.data=a&&a.length>
3?a:a=[];this.width=a[1];this.height=a[2];this.description=a[3];this.resetState()},Statics:{attributeToIdentifier:{},identifierToAttribute:{},opcodes:c},resetState:function(){var a=g.length;this.pb=[];for(this.matrix=new b;a--;)this[g[a][0]]=g[a][1]},saveState:function(a){var b=this.pb,c=f.length,d=0;b.push(a);for(b.push(this.matrix.clone());d<c;)b.push(this[f[d++]])},restoreState:function(){var a=this.pb,b=f.length;if(!a.length)return this.resetState();for(;b--;)this[f[b]]=a.pop();this.matrix=a.pop();
return a.pop()},push:function(){for(var a=this.data,b=this.matrix.rows,f=b[0],b=b[1],p,m,g,r,e,u,x,w=-1,z=arguments,B=z.length;++w<B;)p=z[w],p===c.BEGIN_2D_IMAGE?a.push(p,this.width=+z[++w],this.height=+z[++w],this.description=""+z[++w]):p===c.MOVE_TO||p===c.LINE_TO?(u=+z[++w],x=+z[++w],a.push(p,f[0]*u+f[1]*x+f[3],b[0]*u+b[1]*x+b[3])):p===c.STROKE_TEXT||p===c.FILL_TEXT?(m=z[++w],u=+z[++w],x=+z[++w],g=+z[++w],r=+z[++w],a.push(p,m,f[0]*u+f[1]*x+f[3],b[0]*u+b[1]*x+b[3],f[0]*g+f[1]*r+f[3],b[0]*g+b[1]*
r+b[3])):p===c.BEZIER_CURVE_TO?(m=+z[++w],g=+z[++w],r=+z[++w],e=+z[++w],u=+z[++w],x=+z[++w],a.push(p,f[0]*m+f[1]*g+f[3],b[0]*m+b[1]*g+b[3],f[0]*r+f[1]*e+f[3],b[0]*r+b[1]*e+b[3],f[0]*u+f[1]*x+f[3],b[0]*u+b[1]*x+b[3])):p===c.SET?a.push(p,z[++w],z[++w]):p===c.DRAW_IMAGE||p===c.DRAW_IDL?a.push(p,z[++w],z[++w],z[++w],z[++w],z[++w],z[++w],z[++w],z[++w],z[++w],this.matrix.clone()):d[p]?(p===c.CLOSE_PATH&&l&&a.push(p),a.push(p)):h('Invalid opcode "'+p+'" found in IDL')},concat:function(a){var b=new r,f;for(f in this)b[f]=
this[f];b.data=this.data.concat(a.data.slice(4));b.pb=this.pb.slice();return b},append:function(a){this.data=this.data.concat(a.data.slice(4));return this},clone:function(){var a=new r,b;for(b in this)a[b]=this[b];a.data=this.data.slice();a.pb=this.pb.slice();return a}});(function(){for(var a=-1,b=g.length,f,c;++a<b;)f=g[a],c=f[0],f=f[2],r.attributeToIdentifier[c]=f,r.identifierToAttribute[f]=c})()})();ovi.provide("nokia.maps.dom.imgLoader");
(function(){function e(a,b,f,c,d,m,p){k.push(d);delete c.ii;delete f.Oh;a&&a.call(b,f,m,p)}function l(){q=h(self,!0);l=!1}function h(a,b){a=g.gb(a.document.body,"iframe",!1,b?"visibility:hidden;position:absolute;left:-9999px;":!1).contentWindow;g.gb(a.document.head,"base").href=document.baseURI;return a}function d(b){b.onerror?b.onerror.call(b,a,!0):b.onload=b.onerror=null;b.removeAttribute("src")}function c(a,b,f,c){var k,d=!0;a||(a=document.createElemenet("img"));a.onload=a.onerror=function(b,m){a.onload=
a.onerror=null;k=(b||a.ownerDocument.parentWindow.event).type==="load";f&&f.call(c,a,m?void 0:k,m||d)};a.src=b;k===void 0&&(d=!1);return k}var g=nokia.maps.dom,b=g.Page.browser,f=b.msie,r=b.webkit,a={type:"error"},q,k=[],p=g.loadImg=r?function(a,b,f,d){var m,p;l&&l();m=k.pop()||h(q);p=a.Oh=new m.Image;p.ii=m;a.Ie=c(p,b,function(k,p,g){p?a.Ie=c(a,b,function(a,b,c){e(f,d,a,k,m,b,c&&g)}):e(f,d,a,k,m,p,g)});p=a.Ie;delete a.Ie;return p}:c,m=g.cancelImg=r?function(a){if(a=a.Oh)a.ii.stop(),d(a)}:d,y=g.imgLoader=
{maxRequests:b.mobile?6:34,cb:[],Fa:0,request:function(a,b,f,c){y.cb.push([a,b,f,c]);return y.Lh(!1)},cancel:function(a){for(var b,f=y.cb,c,k=0,d=y.cb.length;k<d;k++)if(f[k][0]===a){b=f.splice(k,1)[0];break}b?(c=b[2])&&c.call(b[3],a,void 0,!0):m(a)},Ce:function(){y.Lh(!0)},Lh:function(a){var b=y.maxRequests,c,k=y.cb,d=k.splice(0,b-y.Fa),m=d.length,g;for(g=0;g<m;g++)c=d[g],++y.Fa,c=p(c[0],c[1],function(c,d){return function(m,p,g){--y.Fa<b&&k.length&&(g&&!a?setTimeout(y.Ce,0):f?setTimeout(y.Ce,0):y.Ce());
c&&c.call(d,m,p,g)}}(c[2],c[3]),y);return!a?c:void 0}}})();ovi.provide("nokia.maps.gfx.Graphics");
(function(){var e=ovi.type,l=Math.PI/180,e=ovi.type,h=nokia.maps.gfx,d=nokia.maps.util,c=h.Color.parseCss,g=h.IDL,b=g.opcodes,f=g.attributeToIdentifier;nokia.maps.gfx.Graphics=new ovi.Class({initialize:function(b){if(b instanceof g)this.j=b},beginImage:function(f,a,c){(this.j=new g).push(b.BEGIN_2D_IMAGE,f,a,""+c);return this},getIDL:function(){return this.j},setIDL:function(b){this.j=b instanceof g?b:d.d("idl must be an instance of nokia.maps.gfx.IDL");return this},getWidth:function(){return this.j.width},
getHeight:function(){return this.j.height},getMatrix:function(){return this.j.matrix},getDescription:function(){return this.j.description},save:function(){this.j&&(this.j.push(b.SAVE),this.j.saveState());return this},restore:function(){this.j&&(this.j.push(b.RESTORE),this.j.restoreState());return this},set:function(d,a){var g=this.j;if(d==="width"||d==="height"){if((a=+a)<0)a=0;g[d]=a;this.beginImage(g.width,g.height,g.description)}else if(d==="description")g.data[3]=g.description=a;else{d==="fillStyle"&&
(d="fillColor");d==="strokeStyle"&&(d="strokeColor");if((d==="fillColor"||d==="strokeColor")&&e(a)==="string")a=c(a);g[d]=a;f[d]&&g.data.push(b.SET,f[d],a)}return this},fill:function(){this.j.data.push(b.FILL);return this},stroke:function(){this.j.data.push(b.STROKE);return this},scale:function(b,a){this.j.matrix=this.j.matrix.scale(b,a,1);return this},rotate:function(b){this.j.matrix=this.j.matrix.rotateZ(b*l);return this},translate:function(b,a){this.j.matrix=this.j.matrix.translate(b,a,0);return this},
drawRect:function(f,a,c,k,d,m){var g=this.j,e,h,d=+d||0,m=+m||d;d===0&&m===0?g.push(b.BEGIN_PATH,b.MOVE_TO,f,a,b.LINE_TO,e=f+c,a,b.LINE_TO,e,h=a+k,b.LINE_TO,f,h,b.CLOSE_PATH):(e=0.5522847498*d,h=0.5522847498*m,c=f+c,k=a+k,g.push(b.BEGIN_PATH,b.MOVE_TO,f+d,a,b.LINE_TO,c-d,a,b.BEZIER_CURVE_TO,c-d+e,a,c,a+m-h,c,a+m,b.LINE_TO,c,k-m,b.BEZIER_CURVE_TO,c,k-m+h,c-d+e,k,c-d,k,b.LINE_TO,f+d,k,b.BEZIER_CURVE_TO,f+e,k,f,k-m+h,f,k-m,b.LINE_TO,f,a+m,b.BEZIER_CURVE_TO,f,a+m-h,f+e,a,f+d,a,b.CLOSE_PATH));return this},
drawImage:function(f,a,c,k,d,m,g,e,h){this.j.push(b.DRAW_IMAGE,f,a,c,k,d,m,g,e,h);return this},drawGraphics:function(f,a,c,k,d,m,g,e,h){this.j.push(b.DRAW_IDL,f.getIDL(),a,c,k,d,m,g,e,h);return this},drawEllipse:function(f,a,c,k){var d=this.j,m=f,g=f+c,e=a,h=a+k;c/=2;var l=k/2,x=0.5522847498*c,k=0.5522847498*l;f+=c;a+=l;c=f-x;x=f+x;l=a-k;k=a+k;d.push(b.BEGIN_PATH,b.MOVE_TO,f,h,b.BEZIER_CURVE_TO,x,h,g,k,g,a,b.BEZIER_CURVE_TO,g,l,x,e,f,e,b.BEZIER_CURVE_TO,c,e,m,l,m,a,b.BEZIER_CURVE_TO,m,k,c,h,f,h,b.CLOSE_PATH)},
beginPath:function(){this.j.push(b.BEGIN_PATH);return this},moveTo:function(f,a){this.j.push(b.MOVE_TO,f,a);return this},closePath:function(){this.j.push(b.CLOSE_PATH);return this},lineTo:function(f,a){this.j.push(b.LINE_TO,f,a);return this},polylineTo:function(f){for(var a=f.length,c=0,k=[];c<a;)k.push(b.LINE_TO,f[c++],f[c++]);this.j.push.apply(this.j,k);return this},quadraticCurveTo:function(b,a,f,c){return this.bezierCurveTo(b,a,b,a,f,c)},bezierCurveTo:function(f,a,c,k,d,m){this.j.push(b.BEZIER_CURVE_TO,
f,a,c,k,d,m);return this},fillText:function(f,a,c,k,d){var m=this.j,k=e(k)==="number"?k:a+1,d=e(d)==="number"?d:c;m.push(b.FILL_TEXT,f,a,c,k,d);return this},strokeText:function(f,a,c,k,d){var m=this.j,k=e(k)==="number"?k:a+1,d=e(d)==="number"?d:c;m.push(b.STROKE_TEXT,f,a,c,k,d);return this}})})();ovi.provide("nokia.maps.gfx.SvgParser");
(function(){function e(a){for(var a=a.replace(/[\,]/g," ").replace(/\s+/g," ").replace(/([0-9])(\-|\+)([0-9])/g,"$1 $2$3").replace(/^\s+/g,"").replace(/\s+$/g,"").split(" "),b=0,f=a.length;b<f;b++)a[b]=+a[b];return a}function l(a){a=b.FontHelper.rh(a);return+a.substr(0,a.length-2)}function h(a,b){var f=a.getAttribute(b);return f?l(f):0}function d(a,b,f){for(;a&&a.nodeType===1;){if(a.getAttribute(b))return a.getAttribute(b);a=a.parentNode}return f}var c=Math.PI,g=nokia.maps,b=g.util,f=b.Matrix3D,r=
b.FontHelper.toString,a=nokia.maps.gfx,q=a.Graphics,k=a.Color.parseCss,p=a.IDL.opcodes,a=document.documentElement,m=g.dom.getStyle(a,"fontFamily"),y=g.dom.getStyle(a,"fontSize");nokia.maps.gfx.SvgParser=new ovi.Class({svg:function(a){var b=this.K,c=b&&b.getIDL(),k=c?b.getWidth():h(a,"width"),d=c?b.getHeight():h(a,"height"),m=a.getAttribute("viewBox"),p=m?m.split(" "):[0,0,k,d],m=k/p[2],g=d/p[3],q=-p[0]*m,p=-p[1]*g;c||b.beginImage(k+0,d+0);b.getIDL().matrix=b.getIDL().matrix.concat(new f([[m,0,0,q],
[0,g,0,p],[0,0,1,0]]));this.Mh(a)},rect:function(a){var b=h(a,"x"),f=h(a,"y"),c=h(a,"width"),k=h(a,"height"),d=h(a,"rx"),m=h(a,"ry")||d;this.K.drawRect(b,f,c,k,d,m);this.za(a,!0)},circle:function(a){var b=h(a,"cx"),f=h(a,"cy"),c=h(a,"r");this.K.drawEllipse(b-c,f-c,2*c,2*c);this.za(a,!0)},ellipse:function(a){var b=h(a,"cx"),f=h(a,"cy"),c=h(a,"rx"),k=h(a,"ry");this.K.drawEllipse(b-c,f-k,2*c,2*k);this.za(a,!0)},line:function(a){var b=this.K,f=h(a,"x1"),c=h(a,"y1"),k=h(a,"x2"),d=h(a,"y2");b.beginPath();
b.moveTo(f,c);b.lineTo(k,d);this.za(a,!0)},polyline:function(a){var b=this.K,f=e(a.getAttribute("points")),c=f.length,k=2;b.beginPath();for(b.moveTo(f[0],f[1]);k<c;k+=2)b.lineTo(f[k],f[k+1]);this.za(a,!0)},polygon:function(a){var b=this.K,f=e(a.getAttribute("points")),c=f.length,k=2;b.beginPath();for(b.moveTo(f[0],f[1]);k<c;k+=2)b.lineTo(f[k],f[k+1]);b.closePath();this.za(a,!0)},path:function(a){var b=this.K,f=b.getIDL(),c;c=a.getAttribute("d").replace(/[\,]/g," ").replace(/\s+/g," ").replace(/([0-9])\-/g,
"$1 -").replace(/([0-9])\+/g,"$1 ").replace(/([a-zA-Z])([a-zA-Z])/g,"$1 $2").replace(/([a-df-zA-DF-Z])([0-9]|\.|\-|\+)/g,"$1 $2").replace(/([0-9])([a-df-zA-DF-Z])/g,"$1 $2").replace(/^\s+/g,"").replace(/\s+$/g,"").split(" ");c=c.length===1&&c[0]===""?[]:c;var k=this.za(a,!1),a=k&1;k&=2;var d=0,m=0,g=-1,q,e,r,h,l,y,Q,F,L,ea,U,aa;for(f.push(p.BEGIN_PATH);;){if(!L){F=c[++g];if(!F)break;L=F.toLowerCase();F=F.toUpperCase()===F}ea=L;if(L==="m")U=d=q=+c[++g]+(F?0:d),aa=m=e=+c[++g]+(F?0:m),f.push(p.MOVE_TO,
q,e),L=(Q=+c[g+1])===Q?"l":null;else if(L==="l")d=q=+c[++g]+(F?0:d),m=e=+c[++g]+(F?0:m),f.push(p.LINE_TO,q,e),L=(Q=+c[g+1])===Q?L:null;else if(L==="h")d=q=+c[++g]+(F?0:d),e=m,f.push(p.LINE_TO,q,e),L=(Q=+c[g+1])===Q?L:null;else if(L==="v")q=d,m=e=+c[++g]+(F?0:m),f.push(p.LINE_TO,q,e),L=(Q=+c[g+1])===Q?L:null;else if(L==="z")f.push(p.CLOSE_PATH),L=null,d=U,m=aa;else if(L==="c"||L==="q")r=+c[++g]+(F?0:d),h=+c[++g]+(F?0:m),L==="q"?(l=r,y=h):(l=+c[++g]+(F?0:d),y=+c[++g]+(F?0:m)),d=q=+c[++g]+(F?0:d),m=
e=+c[++g]+(F?0:m),f.push(p.BEZIER_CURVE_TO,r,h,l,y,q,e),L=(Q=+c[g+1])===Q?L:null;else if(L==="s"||L==="t")r==="c"||r==="q"||r==="s"||r==="t"?(l=d-l,y=m-y,r=d+l,h=m+y):(r=d,h=m),L==="t"?(l=r,y=h):(l=+c[++g]+(F?0:d),y=+c[++g]+(F?0:m)),d=q=+c[++g]+(F?0:d),m=e=+c[++g]+(F?0:m),f.push(p.BEZIER_CURVE_TO,r,h,l,y,q,e),L=(Q=+c[g+1])===Q?L:null;else{ovi.warn("SvgParser hit unknown command '"+L+"' at path element!");break}r=ea}a&&b.stroke();k&&b.fill()},text:function(a){var b=this.K;b.getIDL();var f=this.za(a,
!1),c=d(a,"font",null),k,c=c?this.Xm(c):{};c.style=d(a,"font-style",null)||c.style;c.variant=d(a,"font-variant",null)||c.variant;c.weight=d(a,"font-weight",null)||c.weight;c.size=l(d(a,"font-size",null)||c.size||y)+"px";c.family=d(a,"font-family",null)||c.family||m;b.set("font",r(c));b.set("textAlign",d(a,"text-anchor","start").replace("middle","center"));if(f&&(k=a.textContent||a.text))c=h(a,"x"),a=h(a,"y"),f&1&&b.strokeText(k,c,a),f&2&&b.fillText(k,c,a)},image:function(){},linearGradient:function(){},
radialGradient:function(){},use:function(){},g:function(a){this.Mh(a)},Xm:function(a){var f=b.FontHelper.parse;this.Xd||(this.Xd={});var c=this.Xd[a];c||(c=this.Xd[a]=f(a));return c},xe:function(a,f){var c,k=ovi.type(a),d;if(k==="string")c=(d=nokia.maps.util.vf(a)).documentElement;else if(k==="document"&&a.documentElement)c=(d=a).documentElement;ovi.type(c)!=="element"&&b.d("svgMarkup needs to be a valid SVG string or XML document!");this.K=f||new q;this.Nh(c);return d},parseSvg:function(a){this.xe(a);
return this.K.getIDL()},parseSvgInfo:function(a){return(a=this.xe(a))?{width:this.K.getWidth(),height:this.K.getHeight(),document:a}:null},parseSvgToGraphics:function(a,b){this.xe(a,b);return this.K},Nh:function(a){var b,f,c;if(c=this[a.nodeName])(b=this.K).save(),this.ol(a),(f=a.getAttribute("transform"))&&this.Xk(f),c.call(this,a),b.restore()},Mh:function(a){for(a=a.firstChild;a;a=a.nextSibling)a.nodeType===1&&this.Nh(a)},ol:function(a){var b=a.getAttribute("style"),f,c=/([^:\s*]+)\s*:\s*([^;]+?)\s*(;|$)/g;
if(b){for(;f=c.exec(b);)a.setAttribute(f[1],f[2]);a.removeAttribute("style")}},Xk:function(a){for(var b,k=/([a-zA-Z]*)\s*\(([^\)]*)\)/g,d,m=this.K.getIDL(),p=m.matrix;b=k.exec(a);)switch(d=e(b[2]),b[1].toLowerCase()){case "matrix":p=p.concat(new f([[d[0],d[2],0,d[4]],[d[1],d[3],0,d[5]],[0,0,1,0]]));break;case "translate":p=p.translate(d[0],d.length>1?d[1]:0,0);break;case "scale":p=p.scale(d[0],d.length>1?d[1]:d[0],0);break;case "rotate":d.length>1&&(p=p.translate(d[1],d[2],0));p=p.rotateZ(-(d[0]/
180)*c);d.length>1&&(p=p.translate(-d[1],-d[2],0));break;case "skewx":p=p.skewX(d[0]);break;case "skewy":p=p.skewY(d[0])}m.matrix=p},za:function(a,b){var f=this.K,c=f.getIDL().matrix,m=0,p=d(a,"fill","#000"),g=d(a,"stroke","none");f.set("opacity",+d(a,"opacity","1"));p!=="none"&&(m|=2,f.set("fillColor",k(p,+d(a,"fill-opacity","1"))),b&&f.fill());if(g!=="none"){m|=1;var q,c=c.getScale();f.set("strokeColor",k(g,+d(a,"stroke-opacity","1")));(q=d(a,"stroke-width",0))&&f.set("lineWidth",l(q)*0.5*(c.x+
c.y));f.set("lineCap",d(a,"stroke-linecap","flat").replace("flat","butt"));f.set("lineJoin",d(a,"stroke-linejoin","miter"));f.set("miterLimit",+d(a,"stroke-miterlimit",4));b&&f.stroke()}return m}})})();ovi.provide("nokia.maps.geo.Strip");
(function(e){var l=e.geo.Coordinate,h=e.util,d=h.Coroutine,c=h.d,g=e.geo.Strip=new ovi.Class({initialize:function(b,f){this.internalArray=[];this.addAll(b,0,f)},destroy:function(){this.fb&&d.kill(this.fb)},internalArray:null,fb:null,Statics:{fromObject:function(b){if(b instanceof g)return b;if(ovi.type(b)!=="array")return new g;return new g(b.length&&ovi.type(b[0])==="string"?g.convertToArray(b.slice(1),b[0]):g.convertToArray(b,"auto"),"values lat lng alt")},convertToArray:function(b,f){if(!b)return[];
if(b.length===0||f==="unsafe values lat lng alt")return b;if(b instanceof g)return b.asArray();var d=f?f.split(" "):["auto"],a=[],q=!1,k,p,m=d.length,e=0;d[0]==="unsafe"&&(q=!0,d.splice(0,1),m--);for(m>4&&c("convertToArray: i > 4");m--;)k=d[m],(k=this.Wn[k])?(d[m]=k[0],e+=k[1]):c("convertToArray: no member found");(e!==100||!d.length)&&c("convertToArray: counter does not match 100");(p=this.Rd[d[0]])?p.call(this,q,b,a,d.slice(1)):c("convertToArray: function expected");return a},Wn:{lat:["latitude",
1],lng:["longitude",2],alt:["altitude",0],unsafe:["unsafe",0],coords:["coords",100],auto:["auto",100],arrays:["arrays",97],values:["values",97]},nl:{latitude:0,longitude:1,altitude:2},Rd:{auto:function(b,f,c){h.isNumber(f[0])?g.Rd.values(b,f,c,["latitude","longitude"]):g.Rd.coords(b,f,c)},coords:function(b,f,d){var a=f.length,g,k;for(g=0;g<a;g++)b?k=f[g]:(k=l.fromObject(f[g]))||c("coords: expected geo.Coordinate"),d.splice(d.length,0,k.latitude,k.longitude,k.altitude)},values:function(b,f,c,a){g.yg(!1,
b,f,c,a)},arrays:function(b,f,c,a){g.yg(!0,b,f,c,a)}},yg:function(b,f,d,a,q){var k=b?d[0].length:d.length,p=q.length,m=b?d.length:0,e,h;if(b)for(;m--;)d[m].length!==k&&c("_convertValues index out of bound");else k%p&&c("_convertValues members length is incorrect"),k/=p;for(m=0;m<k;m++){h=[m*3,0,void 0,void 0,void 0];for(e=0;e<p;e++)h[g.nl[q[e]]+2]=b?d[e][m]:d[m*p+e];f||l.isValid.apply(this,h.slice(2))?a.splice.apply(a,h):c("_convertValues: expected coords")}}},add:function(b,f){var d=this.getLength(),
b=l.fromObject(b),f=~~(f===0||f>0?f:d);f>d&&c("add: index out of bound");b&&this.ya(this,f,1,this.internalArray.splice(f*3,0,b.latitude,b.longitude,b.altitude))},addAll:function(b,f,d){var a=this.getLength(),f=~~(f===0||f>0?f:a);f>a?c("addAll: index out of bound"):this.splice(f,0,b,d)},addAllAsync:function(b,f,g,a){var q=this,k=q.getLength(),p,m=b[0]instanceof l?1:g?g.match("alt")?3:2:2,f=~~(f===0||f>0?f:k);f>k?c("addAll: index out of bound"):p=d.create("nokia.maps.geo.Strip#addAllAsyncCo",function(a){for(var b,
f,c=a.idx,k=a.coords,m=a.multiplier;(b=k.length)>0;)if(b=k.splice(0,(f=300*m)<b?f:b),q.splice(c,0,b,a.mode),c=a.idx=c+300,d.shallYield())return d.yield();a.callback&&a.callback()},"coords","idx","mode","multiplier","callback");q.fb=p(b,f,g,m,a);q.fb.onTerminated=function(){q.fb=null};q.fb.run()},set:function(b,f){b=+b;(b<0||b>this.getLength()||isNaN(b))&&c("geo.Strip#set: index out of bounds");(f=l.fromObject(f))&&this.ya(this,b=~~b,1,this.internalArray.splice(b*3,3,f.latitude,f.longitude,f.altitude))},
remove:function(b){b=+b;b<0||b>=this.getLength()||isNaN(b)?c("geo.Strip#remove: index out of bound"):this.ya(this,b=~~b,0,this.internalArray.splice(b*3,3))},splice:function(b,f,d,a){(b=+b)>=0&&b<=this.getLength()&&(f=+f)>=0||c("splice: arguments out of bound, idx="+b+", remove="+f);d=g.convertToArray(d,a);if(f||d.length)this.ya(this,b=~~b,d.length/3,this.internalArray.splice.apply(this.internalArray,[b*3,~~f*3].concat(d)))},get:function(b){var f=this.internalArray;!(b>=0&&b<f.length/3)&&c("get: index out of bound");
b=~~b*3;return new l(f[b],f[b+1],f[b+2],1)},getLatLng:function(b,f){var d=[],a,g=0;a=this.getLength();var k,b=+b;k=f<0?a+f:f?f+b>a?a:f+b:b+1;(isNaN(b)||b<0||(k=~~k)<b)&&c("getLatLng: index and count combination out of bounds");for(a=~~b;a<k;a++)d[g++]=this.internalArray[a*3],d[g++]=this.internalArray[a*3+1];return d},getLength:function(){return this.internalArray.length/3>>>0},asArray:function(){return[].concat(this.internalArray)},ya:function(){var b=this.pa,f;if(b)for(f=0;f in b;)b[f++].apply(b[f++],
arguments)},addObserver:function(b,f){typeof b!=="function"&&h.d("addObserver: callback is not a function");var c=this.pa||(this.pa=[]),a=c.length;c[a++]=b;f&&(c[a]=f);c.length=++a},removeObserver:function(b,f){var c,a,d=0;if(c=this.pa)for(a=c.length;d<a;)c[d]===b&&c[d+1]===f&&(c.splice(d,2),a===2&&delete this.pa),d+=2;return this}})})(nokia.maps);ovi.provide("nokia.maps.util._packaging.base");ovi.provide("nokia.maps.dom.Event");
(function(e){if(!nokia.maps.util.getConstructor(nokia.maps.dom.Event)){var l=!l,h=!l,d=nokia.maps.util.now,c=nokia.maps.util.d,g=e.Event=function(b){if(b)for(var f in b)this[f]=b[f];if(!this.timeStamp)this.timeStamp=d()};ovi.extend(g.prototype,{CAPTURING_PHASE:1,AT_TARGET:2,BUBBLING_PHASE:3,bubbles:l,canBubble:l,canSicker:l,cancelable:l,defaultPrevented:h,PROPAGATION_OK:0,PROPAGATION_STOP:1,PROPAGATION_STOP_IMMEDIATE:2,propagation:0,stopPropagation:function(){var b=this.nativeEvent;if(this.propagation===
0&&(this.propagation=1,b))try{b.stopPropagation?b.stopPropagation():b.cancelBubble=l}catch(f){}return this},cancel:function(){return this.stopImmediatePropagation().preventDefault()},stopImmediatePropagation:function(){var b=this.nativeEvent;if(this.propagation!==2&&(this.propagation=2,b))try{b.stopImmediatePropagation?b.stopImmediatePropagation():b.cancelBubble=l}catch(f){}return this},preventDefault:function(){var b=this.nativeEvent;if(!this.defaultPrevented&&(this.defaultPrevented=l,b))try{b.preventDefault?
b.preventDefault():b.returnValue=h}catch(f){}return this},DOM_INPUT_METHOD_UNKNOWN:0,DOM_INPUT_METHOD_KEYBOARD:1,DOM_INPUT_METHOD_PASTE:2,DOM_INPUT_METHOD_DROP:3,DOM_INPUT_METHOD_IME:4,DOM_INPUT_METHOD_OPTION:5,DOM_INPUT_METHOD_HANDWRITING:6,DOM_INPUT_METHOD_VOICE:7,DOM_INPUT_METHOD_MULTIMODAL:8,DOM_INPUT_METHOD_SCRIPT:9,DOM_KEY_LOCATION_STANDARD:0,DOM_KEY_LOCATION_LEFT:1,DOM_KEY_LOCATION_RIGHT:2,DOM_KEY_LOCATION_NUMPAD:3,DOM_KEY_LOCATION_MOBILE:4,DOM_KEY_LOCATION_JOYSTICK:5,getModifierState:function(){c("NOT IMPLEMENTED!")},
DOM_DELTA_PIXEL:0,DOM_DELTA_LINE:1,DOM_DELTA_PAGE:2,deltaMode:0,preventUnload:function(b){if(this.type==="beforeunload")this.nativeEvent.returnValue=b;return this},clone:function(){return new g(this)}})}})(nokia.maps.dom);ovi.provide("nokia.maps.gfx.BitmapImage");
(function(){function e(a,b){return typeof a==="number"?a:b}var l=Math.min,h=ovi.browser.msie&&ovi.browser.version<10,d=ovi.browser.version>=8,c=nokia.maps.gfx,g=nokia.maps.dom,b=g.Page.browser,b=g.Page.browser,f=g.setStyle,r=c.Image,a=nokia.maps.util.d,q=nokia.maps.gfx.BitmapImage=new ovi.Class({Extends:nokia.maps.gfx.Image,Statics:{utilizeCanvas:b.mobile?b.safari:b.chrome||b.mozilla||b.opera},initialize:function(b,f,c,d,g,q){this.c=r.c++;this.width=c||0;this.height=d||0;this.offsetX=e(g);this.offsetY=
e(q);typeof b==="string"?this.src=b:b&&img.nodeName==="IMG"?(this.src=b.src,f||(f=b.ownerDocument)):a("image");this.C=f||document},isBitmap:1,getDocument:function(){return this.C},sh:function(){var a=-1,b=this.Rb,f=b&&b.length||0,c;for(this.Rb=null;++a<f;){c=b[a];try{c[0].apply(c[1],c[2])}catch(d){ovi.warn("Exception in user defined callback within gfx.BitmapImage!"),ovi.debug(d)}}},di:function(a){this.naturalWidth=a.naturalWidth||a.width;this.naturalHeight=a.naturalHeight||a.height;this.width=this.width||
a.naturalWidth||a.width;this.height=this.height||a.naturalHeight||a.height},Pm:function(a,f){var c=-1,d=this.ze,g=d&&d.length||0;this.state=f?1:-1;if(f){this.di(a);b.msie&&this.width===0&&(a.ownerDocument.body.appendChild(a),this.di(a),a.ownerDocument.body.removeChild(a));for(;++c<g;)this.ca(d[c]);this.ze=null}this.sh()},prepare:function(a,b){var f,c,d=!1,q,b=b||this;if(typeof a==="function"){f=this.Rb||(this.Rb=[]);q=[].concat(arguments);q.splice(0,2,this);for(c=f.length;c--;)if(f[c][0]===a&&f[c][1]===
b){d=!0;break}d||f.push([a,b,q])}if(this.state===1)this.sh();else if(this.state!==0)this.state=0,this.zb=this.zb||this.C.createElement("IMG"),g.imgLoader.request(this.zb,this.src,this.Pm,this)},ca:function(a){var b=this.width&&this.height,c,d,g,e;if(typeof this.state!=="number"||this.state<=0)if(this.prepare(),this.state<=0)return a=a||this.C.createElement("DIV"),f(a,{position:"absolute",overflow:"hidden",width:b?this.width+"px":"0",height:b?this.height+"px":"0"}),(this.ze||(this.ze=[])).push(a),
a;b=this.offsetX!==void 0;if(q.utilizeCanvas)c=this.C.createElement("CANVAS"),c.width=this.width,c.height=this.height,d=c.getContext("2d"),b?d.drawImage(this.zb,this.offsetX,this.offsetY,g=l(this.width,this.naturalWidth-this.offsetX),e=l(this.height,this.naturalHeight-this.offsetY),0,0,g,e):d.drawImage(this.zb,0,0,this.width,this.height),this.n=c;else{try{c=this.zb.cloneNode(!1)}catch(r){c=this.C.createElement("IMG"),c.src=this.src}b&&f(c,{position:"absolute",left:-this.offsetX+"px",top:-this.offsetY+
"px"});if(b||h){a=a||this.C.createElement("DIV");f(a,{position:"absolute",overflow:"hidden",width:this.width+"px",height:this.height+"px"});if(h&&(c.style.position="absolute",!b))c.style.width=this.width+"px",c.style.height=this.height+"px";a.appendChild(c);return a}c.style.width=this.width+"px";c.style.height=this.height+"px"}if(a)return a.style.width=this.width+"px",a.style.height=this.height+"px",a.appendChild(c),a;return c},createElement:function(a){var b=this.ca();this.setOpacity(b,a);return b},
setOpacity:function(b,c){var m=typeof c==="number"&&c>=0&&c<=1?c:this.opacity,g=b.ownerDocument,q,e=Math.round(m*100);((m=+m)!==m||m<0||m>1)&&a("opacity!");b.$n$opacity=m;if(h){if(m<1&&!b.$n$opacityHack){for(b.$n$opacityHack=!0;b.firstChild;)b.removeChild(b.firstChild);q=g.createElement("DIV");if(!d)q.style.filter="alpha(opacity="+e+")";f(q,{position:"relative",width:this.width+"px",height:this.height+"px",overflow:"hidden"});b.$n$alphaImageLoader="progid:DXImageTransform.Microsoft.AlphaImageLoader(enabled=true, sizingMethod='scale', src='"+
this.src+"')";g=g.createElement("DIV");g.style.filter=b.$n$alphaImageLoader+(d?"progid:DXImageTransform.Microsoft.Alpha(opacity="+e+")":"");f(g,{position:"absolute",top:(this.offsetX||0)+"px",left:(this.offsetY||0)+"px",width:this.width+"px",height:this.height+"px"});q.appendChild(g);b.appendChild(q)}if(m<1||b.$n$opacityHack)if(b.firstChild.firstChild.style.filter=b.$n$alphaImageLoader+(d?"progid:DXImageTransform.Microsoft.Alpha(opacity="+e+")":""),!d)b.firstChild.style.filter="alpha(opacity="+e+
")"}else b.style.opacity=m;return this},clone:function(a,b,f,c,d){return new q(this.src,a||this.C,b||this.width,f||this.height,e(c,this.offsetX),e(d,this.offsetY))}});r.fromObjectListener.push(function(a,b){return a instanceof q?a:typeof a==="string"&&a.indexOf("<svg")===-1||a&&a.nodeName==="IMG"?new q(a,b):void 0})})();ovi.provide("nokia.maps.gfx.GraphicsImage");
(function(){var e=Array.prototype.slice,l=nokia.maps.gfx,h=nokia.maps.util,d=h.d,c=ovi.type,g=l.IDL,b=l.Painter,f=l.Image,r=l.Graphics,a=new l.SvgParser,d=nokia.maps.util.d,q=nokia.maps.gfx.GraphicsImage=new ovi.Class({Extends:nokia.maps.gfx.Image,initialize:function(a,p,m,q){var s=e.call(arguments,0),l=a,u=a;this.c=f.c++;if(c(a)!=="function")u instanceof r&&(l=u.getIDL()),l instanceof g?(this.j=l,this.width=l.width,this.height=l.height,this.state=1,a=h.A):d("GraphicsImage: Illegal render function or IDL!");
this.C=m||document;this.Jb=a;this.ul=p||this;this.opacity=1;s.splice(0,4,null);this.Zk=s;this.we=q instanceof b?q:new b.defaultPainter},isGraphics:1,getDocument:function(){return this.C},getIDL:function(){return this.j},prepare:function(a,b){var f,d;if(!this.state)f=new r,d=this.Zk,d[0]=f,this.Jb.apply(this.ul,d),this.j=f.getIDL(),this.width=this.j.width,this.height=this.j.height,this.state=1;if(c(a)==="function")this.Rb||(this.Rb=[]),d=[].concat(arguments),d.splice(0,2,this),a.apply(b||this,d)},
createElement:function(a){this.state||this.prepare();return this.we.createElement(this.j,this.C,typeof a==="number"?a:this.opacity)},setOpacity:function(a,b){this.we.setOpacity(a,b);return this},clone:function(a){var b,f;b=new q(this.Jb);for(f in this)b[f]=this[f];if(a)b.C=a;return b}});f.fromObjectListener.unshift(function(b){if(b instanceof q)return b;if(b instanceof g)return new q(g);if(typeof b==="string"&&b.indexOf("<svg")>=0)return new q(a.parseSvg(b))})})();ovi.provide("nokia.maps.geo.BoundingBox");
(function(e){function l(a,b){var f=a+b/2;f-=f>180?360:0;return f}function h(a,b){var f=b-a;f+=f<0?360:0;return f}var d=Math,c=d.min,g=d.max,b=d.abs,f=e.geo,r=e.util.d,a=f.Coordinate,q=f.BoundingBox=function(b,f,c){var b=a.fromObject(b),d;if(!b||f&&!(d=a.fromObject(f)))r(b?"bottomRight":"topLeft");this.topLeft=b;d?c||b.latitude<d.latitude&&r("BoundingBox top latitude < bottom latitude"):d=b;if((this.bottomRight=d)&&b.longitude>d.longitude)this.isCDB=!0};ovi.extend(q.prototype,{isCDB:!1,Pf:void 0,hf:void 0,
Cc:void 0,equals:function(a){return a&&this.topLeft.equals(a.topLeft)&&this.bottomRight.equals(a.bottomRight)},contains:function(b){var f,c;b instanceof a&&(b=new q(b,b));b=this.merge(b);c=b.getCenter();f=this.getCenter();return c.latitude===f.latitude&&c.longitude===f.longitude&&this.getHeight()===b.getHeight()&&this.getWidth()===b.getWidth()},intersects:function(a){var b=this.topLeft,f=this.bottomRight,c=a.topLeft,a=a.bottomRight,d=b.longitude<=f.longitude,g=c.longitude<=a.longitude,q=b.longitude<
a.longitude,e=c.longitude<f.longitude;return f.latitude<=c.latitude&&a.latitude<=b.latitude&&(!d&&(!g||q||e)||!g&&(q||e)||q&&e)},isEmpty:function(){return this.topLeft.longitude===this.bottomRight.longitude&&this.topLeft.latitude===this.bottomRight.latitude},getCenter:function(){var b=this.Cc;if(b===void 0)var b=this.topLeft.longitude,f=this.bottomRight.latitude,b=new a(f+(this.topLeft.latitude-f)/2,l(b,h(b,this.bottomRight.longitude)));return b},getWidth:function(){var a=this.Pf;a===void 0&&(a=h(this.topLeft.longitude,
this.bottomRight.longitude));return a},getHeight:function(){var a=this.hf;a===void 0&&(a=this.topLeft.latitude-this.bottomRight.latitude);return a},resizeToCenter:function(b){b instanceof a||r("Parameter center must be an instance of nokia.maps.geo.Coordinate");var f=this.topLeft.longitude,c=this.topLeft.latitude,d=this.bottomRight.longitude,g=this.bottomRight.latitude,e=l(f,h(f,d)),u=b.latitude-g-(c-g)/2,x=b.longitude-e,x=x>180||x<-180?-(e+b.longitude):x,b=f+(x<0?2*x:0);d+=x>0?2*x:0;d=d>180?d-360:
d;c=u>0?c+2*u:c;c>=90&&(c=90);g=u<0?g+2*u:g;g<=-90&&(g=-90);return new q(new a(c,b<-180?360+b:b),new a(g,d))},merge:function(a){a&&a.push?a.push(this):a=[this,a];return q.merge(a)}});ovi.extend(q,{fromObject:function(b,f){var c;if(b&&(c=b.length)!==void 0){if(c===2&&b[0]instanceof a&&b[1]instanceof a)return new q(b[0],b[1],f);if(c===4)return new q(new a(b[0],b[1],void 0,f),new a(b[2],b[3],void 0,f),f)}return b instanceof q?b:null},coverAll:function(a){(!a||a.length===void 0)&&r("no argument was given, array is expected");
!a.length&&r("empty array was given");for(var b=a[0],f=b.latitude,c=b.longitude,d=[f,c,f,c],g=a.length;--g;)b=a[g],d=q.uc(d,[f=b.latitude,c=b.longitude,f,c]);return q.fromObject(d)},fromPath:function(a,b){!a&&r("no argument was given, geo strip is expected");!(a instanceof f.Strip)&&r("geo strip is expected");var c=null,d,g,e=a.getLength(),h;if(e)if(e===1)d=a.get(0),c=[d.latitude,d.longitude,d.latitude,d.longitude];else if(e===2)d=a.getLatLng(0),d.push(d[0]),d.push(d[1]),g=a.getLatLng(1),g.push(g[0]),
g.push(g[1]),c=q.fromObject(q.uc(d,g),b);else{d=a.getLatLng(0);g=a.getLatLng(1);q.Rg(d=[d[0],d[1],g[0],g[1]]);c=d;for(h=2;h<e;h++)d=a.getLatLng(h-1),g=a.getLatLng(h),q.Rg(d=[d[0],d[1],g[0],g[1]]),c=q.uc(c,d)}return q.fromObject(c,b)},merge:function(a){(!a||!a.length||!(a[0]instanceof q))&&r("array of bounding boxes is expected");for(var b=a[0],f=b.topLeft,c=b.bottomRight,d=[f.latitude,f.longitude,c.latitude,c.longitude],g=a.length;--g;)(b=a[g])instanceof q?d=q.uc(d,[(f=b.topLeft).latitude,f.longitude,
(c=b.bottomRight).latitude,c.longitude]):r("it is possible to merge bounding boxes only");return q.fromObject(d)},uc:function(a,b){var f,d,q=a[1],e=a[3],r=b[1],x=b[3],w,z,B,D,A;f=c(a[2],b[2]);d=g(a[0],b[0]);w=h(q,e);z=l(q,w);B=h(r,x);A=l(r,B)-z;A+=A-1.0E-6<0?360:0;A-1.0E-6<180?(z=q,D=x):(A=360-A,z=r,D=e);A=A+w/2+B/2;A+5.0E-7>=360?(z=-180,D=180):A-5.0E-7<w?(z=q,D=e):A-5.0E-7<B&&(z=r,D=x);return[d,z,f,D]},Rg:function(a){var f=a[1],c=a[3],d=a[0],g=a[2];if(f>c&&c-f>180||f<c&&f-c<-180||c<f&&b(c-f)<180)a[1]=
c,a[3]=f;d<g&&(a[0]=g,a[2]=d)}})})(nokia.maps);ovi.provide("nokia.maps.geo.QuadTree");
(function(e){function l(b,f){var c,a,d,k;if(a=f.length){c=b.length;for(d={};c--;)d[b[c].id]=1;for(;a--;)(k=f[a]).id in d||b.push(k)}}var h=e.geo,d=e.util,c=h.BoundingBox,e=d.QuadTree,g=e.Entry,e=h.QuadTree=new ovi.Class({initialize:function(b){this.J=new d.QuadTree(b,180,90,0,0);this.Bc=ovi.Array()},isCDB:!1,getBoundingBox:function(){var b;if(!this.ba&&!this.isCDB&&(b=this.J.getExtremes()))this.ba=new c([-b["4"],b["7"]],[-b["6"],b["5"]]);return this.ba||null},insertBoundingBox:function(b){var f=b.topLeft,
c=b.bottomRight,a=f.longitude,d=c.longitude,k;this.ba=null;if(b.isCDB)this.Bc.push(k=new g(null,a,-f.latitude,d+360,-c.latitude)),this.isCDB=!0;return k||this.J.insertSorted(a,-f.latitude,d,-c.latitude)},insertCoordinate:function(b){var f=b.longitude,b=-b.latitude;this.ba=null;return this.J.insertSorted(f,b,f,b)},insertLine:function(b,f,c,a){var d,k;this.ba=null;f<a?d=f:(d=a,a=f);b<c?(f=-c,b=-b):(f=-b,b=-c);if(a-d>180)this.Bc.push(k=new g(null,a,f,d+360,b)),this.isCDB=!0;return k||this.J.insertSorted(d,
f,a,b)},insertLineAlt:function(b,f,c,a,d){return this.insertLine(b,f,a,d)},remove:function(b){var f;if(b.ka)this.J.remove(b);else if((b=(f=this.Bc).indexOf(b))>=0)f.splice(b,1),this.isCDB=f.length>0;this.ba=null},ce:function(b,f,c,a,d){for(var k=this.Bc,g=k.length,m,e=[],h=b+360,l=c+360;g--;)m=k[g],this.bh(m,b,f,c,a,d)?e.push(m):this.bh(m,h,f,l,a,d)&&e.push(m);return e},bh:function(b,f,c,a,d,k){var g=b[7],m=b[4],e=b[5],b=b[6];return!(g>a||e<f||m>d||b<c)&&(k||g>=f&&e<=a&&m<=d&&b>=c)},intersectBoundingBox:function(b,
f){var c=this.J,a=b.topLeft,d=b.bottomRight,k=-a.latitude,a=a.longitude,g=-d.latitude,d=d.longitude,m;b.isCDB?(m=c.intersect(-180,k,d,g,f),l(m,c.intersect(a,k,180,g,f)),l(m,this.ce(d,k,a+360,g,f))):(m=c.intersect(a,k,d,g,f),l(m,this.ce(a,k,d,g,f)));return m},intersectCoordinate:function(b){var f=-b.latitude,b=b.longitude,c=this.J.intersect(b,f,b,f,1);l(c,this.ce(b,f,b,f,1));return c}})})(nokia.maps);ovi.provide("nokia.maps.geo.Shape");
(function(e){function l(a,b){return a/b<0&&g(b-a)>180}var h=Math,d=h.min,c=h.max,g=h.abs,b=h.pow,f=h.sqrt,r=h.round,a=e.geo,q=e.util,k=q.Point,p=q.math.clipping.clipStrips,m=q.math.clipping.clip,y=a.Coordinate,s=a.BoundingBox,v=q.Coroutine,u=[],x=!x,w=!x;a.Shape=new ovi.Class({Extends:a.Strip,initialize:function(b,f){this.J=new a.QuadTree(+f||10);this._super(u);this.wb=!!b;this.qi=[];this.xb=0;this.addObserver(this.Rl,this)},Statics:{vo:u,Sg:function(b,f){var c=0,d=b.arr,k,m,g,p,q,e,r,h,s=d.length;
b.shape?(p=+d[b.i-2],h=+d[b.i-1]):(b.shape=new a.Shape(b.closed),b.i=0,s>2&&(p=+d[b.i++],h=+d[b.i++],b.shape.internalArray.push(p,h,0)));m=b.shape;g=m.J;q=m.qi;for(k=m.internalArray;b.i<s;)if(e=+d[b.i++],r=+d[b.i++],k.push(e,r,0),(p=g.insertLine(p,h,e,r)).eb=q.length,q.push(p),m.xb+=l(r,h),p=e,h=r,!(++c&15)&&v.shallYield())return v.yield();if(m.closed&&d.length>=2)e=+d[0],r=+d[1],k.push(e,r,0),(p=g.insertLine(p,h,e,r)).eb=q.length,p.$closing=1,q.push(enty),m.xb+=l(r,h);if(f&&b.callback)return v.kill(f),
b.callback.call(b.ctx,m);return m},fromLatLngArray:function(a,b,f,c){var d;if(q.isFunction(f))return d=v.create("nokia.maps.geo.Shape#fromLatLngArrayCo",this.Sg,"arr","closed","callback","ctx"),this.Tg=d(a,b,f,c||void 0),null;return this.Sg({arr:a,closed:b},null)}},destroy:function(){this.Tg&&v.kill(this.Tg);this._super()},getBoundingBox:function(){var a,b,f=this.ba;if(!f)f=this.J.getBoundingBox()||s.fromPath(this),this.wb&&this.xb&&(a=this.get(0),b=this.get(this.getLength()-1),f=f.merge(s.coverAll([a,
b]))),this.ba=f;return this.ba},op:function(a){var b=this.internalArray;this.internalArray=a.internalArray;this.ya(this,0,a.internalArray.length/3,b)},Rl:function(a,b,f,k){var a=this.wb,m=this.J,g=this.qi,p=g.length,q=k.length/3,k=c(b-1,0),e;this.ba=null;a&&p&&m.remove(g.splice(--p,1)[0]);if(q){p=d(b-1+q,p-1);for(e=k;e<=p;e++)m.remove(g[e]);q=[k,p-k+1]}else p>0&&b<=p&&b>0?(m.remove(g[k]),q=[k,1]):q=[k,0];k=c(b-1,0);p=d(b-1+f,this.getLength()-2);for(e=k;e<=p;e++)q.push(m.insertLineAlt.apply(m,this.internalArray.slice(e*
3,e*3+6)));g.splice.apply(g,q);p=g.length;a&&p&&((g[p++]=m.insertLine.apply(m,this.getLatLng(this.getLength()-1).concat(this.getLatLng(0)))).$closing=1);for(e=p;e--;)g[e].eb=e;this.xb=this.zg(this.internalArray,3)},Ag:function(a,b,f){if(!this.wb)return!1;for(var k=b.length,m=1,g=0,p=b[0],q,e;m<k;m++)q=b[m],e=p.y+(q.y-p.y)*((a.x-p.x)/(q.x-p.x)),d(p.x,q.x)<=a.x&&c(p.x,q.x)>=a.x&&(f?e>a.y:e<a.y)&&g++,p=q;return!!(g%2)},zg:function(a,b){var f=this.wb?0:b,c=0,d=a.length,k=a[f?1:d-b+1],m;for(++f;f<d;f+=
b)c+=l(m=a[f],k),k=m;return c},bm:function(a,b){return a.eb-b.eb},Mc:function(a,b,f,c){function d(a,b){m&&g(m-b)>180&&(b+=m<0?-360:360);m=b;return f.latLngToPixel(a,b+(c?c:0))}var k=[],m,p=a.length,q,e=0;for(q=0;q<p;q+=2)k[e++]=d(a[q],a[q+1]);b&&(k[e]=d(a[0],a[1]));return k},Zh:function(a,b){for(var f=[],c=Infinity,d=-1,k,f=0;f<a.length;f+=2)k=g(a[f+1]-b),k+=k>180?360-k:k,k<c&&(c=k,d=f);if(f>0)return f=a.splice(d,a.length-d),f.concat(a);return a},Ok:function(a){var b=a.length,f,c=0,d,k,m,p=[],q;k=
w;for(f=0;f<b;f+=2)p[c++]=a[f],p[c++]=a[f+1],m=new y(a[f],a[f+1],void 0,x),d=a[f+2]!==void 0?new y(a[f+2],a[f+3],void 0,x):new y(a[0],a[1],void 0,x),m=s.coverAll([m,d]),!k&&g(a[f+1])!==180&&g(d.longitude)!==180&&m.contains(new y(m.topLeft.latitude,180,void 0,x))&&(k=g(d.latitude-a[f]),m=g(d.longitude-a[f+1]),m+=m>180?-360:0,q=g(180-d.longitude),q+=q>180?-360:0,k/=g(m)/g(q),d=d.latitude+(d.latitude>a[f]?-k:k),k=a[f+1]>0?180:-180,p[c++]=d,p[c++]=k,p[c++]=d,p[c++]=-k,k=x);return p.length?p:a},Nl:function(a,
b,f,c){var d=[],k=a.length,m,p,q,e,r,h,l=w;for(m=0;m<k;m+=c)if(p=a[m],q=a[m+1],m==0||((h=g(r-q))>180?360-h:h)>f||g(e-p)>b)!l&&g(q)==180&&(d.push(p),d.push(q),d.push(p),d.push(-q),l=x),d.push(p),d.push(q),e=p,r=q;return d},Xg:function(a){var c=[],d,m=a,g,p;do{g=r((m.origx?m.origx:m.x)*100)/100;p=r((m.origy?m.origy:m.y)*100)/100;if(!d||f(b(d.x-g,2)+b(d.y-p,2))>0.01)d=new k(g,p),c.push(d);m=m.next}while(m&&m!=a);return c},clip:function(b,f,c,d,q,e,r){var h=this.wb,v=this.internalArray,w=f.topLeft,F=
f.bottomRight,L=w.y,ea=F.y,U=w.x,aa=F.x,la=f.getCenter(),f=new k(aa,L),J=new k(U,ea),f=[w,f,F,J],J=b.pixelToGeo(w),F=b.pixelToGeo(F),ba=b.pixelToGeo(la),F=s.fromPath(new a.Strip([J.latitude,J.longitude,J.latitude,ba.longitude,J.latitude,F.longitude,F.latitude,F.longitude,F.latitude,ba.longitude,F.latitude,J.longitude],"unsafe values lat lng")),ba=!1,G=0,R,Ba=-2,J=[],S,G=[],sa,fa,H=0,ga=0,X;R=[];var ia=[],V;if(c)c/=2,ga=la.x,H=la.y,G=b.xyToGeo(ga-c,H-c),R=b.xyToGeo(ga+c,H+c),H=g(G.latitude-R.latitude),
ga=g(G.longitude-R.longitude);if(h){J=[[]];R=this.Nl(v,H,ga,3);V=s.fromPath(new nokia.maps.geo.Strip(R,"unsafe values lat lng"),x);V=V.merge((new s(new y(R[R.length-2],R[R.length-1],void 0,x),void 0,x)).merge(new s(new y(R[0],R[1],void 0,x),void 0,x)));if((G=V.getWidth())<360&&V.topLeft.longitude==-180)V=new s(new y(V.topLeft.latitude,180,void 0,x),V.bottomRight,x);G<360&&V.bottomRight.longitude==180&&(V=new s(V.topLeft,new y(V.bottomRight.latitude,-180,void 0,x),x));S=F;if(G<360&&e>0)S=V.getCenter().longitude,
X=b.geoToPixel(V.topLeft),X.x-=r,X.y-=r,X=b.pixelToGeo(X),e=b.geoToPixel(V.bottomRight),e.x+=r,X.y+=r,e=b.pixelToGeo(e),S=s.fromPath(new a.Strip([X.latitude,X.longitude,X.latitude,S,X.latitude,e.longitude,e.latitude,e.longitude,e.latitude,S,e.latitude,X.longitude],"unsafe values lat lng"),x);R=this.Zh(this.Ok(R),V.topLeft.longitude);J[0]=this.Mc(R,h,b);if(V.getWidth()==360&&this.zg(R,2)%2==1){J[0][1].x>J[0][J[0].length-1].x&&(J[0]=J[0].reverse());ia=[];G=J[0].length-1;for(c=0;c<G;c++)v=J[0][c],ia[c]=
new k(v.x-2*b.w,v.y),ia[c+G]=new k(v.x-b.w,v.y),ia[c+2*G]=new k(v.x,v.y),ia[c+3*G]=new k(v.x+b.w,v.y),ia[c+4*G]=new k(v.x+2*b.w,v.y);J[0]=ia;X=b.latLngToPixel(d?90:-90,0);X.y=d?X.y-51:X.y+51;e=X.clone();X.x=J[0][J[0].length-1].x+1;e.x=J[0][0].x-1;J[0].push(X,e)}ba=this.Ag(w,J[0],d);ia=p(J,L,U,aa,ea);X=ia.length;G=J;V.getWidth()<360&&V.contains(new y(V.topLeft.latitude,180,void 0,x))&&(J=[],R=this.Zh(R,V.bottomRight.longitude),J[0]=this.Mc(R,h,b),ba=!!(ba^this.Ag(w,J[0],d)),ia=p(J,L,U,aa,ea),X+=ia.length,
G=G.concat(J));V.getWidth()<360&&!V.contains(new y(V.topLeft.latitude,180,void 0,x))&&S.contains(new y(V.topLeft.latitude,180,void 0,x))&&(e=V.getCenter().longitude>0?-360:360,S=this.Mc(R,h,b,e),J=[S],ia=p(J,L,U,aa,ea),X+=ia.length,G.push(S))}else{r=this.J.intersectBoundingBox(F,x).sort(this.bm);G=r.length;for(d=0;d<G;d++)if(la=r[d],w=la.eb,R=w*3,Ba+1!==w&&J.push(S=[sa=v[R],fa=v[R+1]]),Ba=w,R=la.$closing?0:R+3,la=v[R],R=v[R+1],!c||d===G-1||r[d+1].eb!==w+1||g(fa-R)>ga||g(sa-la)>H)S.push(sa=la,fa=R);
if(this.xb){w=[];for(d=0;d<J.length;d++)if(S=J[d],G=S.length){v=[];for(c=0;c<G;c+=2)c==0||c>0&&!l(S[c+1],S[c-1])?v.push(S[c],S[c+1]):(v.push(S[c],S[c+1]),w.push(v),v=[],S[c-1]+=S[c-1]<0?360:-360,v.push(S[c-2],S[c-1],S[c],S[c+1]));w.push(v)}J=w}R=[];d=v=0;for(G=J.length;d<G;d++)S=J[d],S.length&&(R[v++]=this.Mc(S,h,b));G=e?p(R,L,U,aa,ea):R}if(!h||!X)if(h)if(ba){if(q)return G=[f],G.fullfilled=1,G;return u}else return[];else return G;if(F.contains(V))return G;J=[];for(d=G.length;d--;)if(b=m(f,G[d])){S=
this.Xg(b);for(J.push(S);b.nextPoly;)b=b.nextPoly,S=this.Xg(b),J.push(S)}return J}})})(nokia.maps);ovi.provide("nokia.maps.dom._packaging.base");ovi.provide("nokia.maps.gfx._packaging.base");ovi.provide("nokia.maps.geo._packaging.base");var Tb=nokia.maps;delete Tb.config.params;Tb.loadPath=Tb.config.baseUrl;Tb.Config.setDefaults(nokia.maps.config);window.nokia.maps=nokia.maps;})();
(function(){ovi.provide("nokia.maps.language._packaging.package-en-US");ovi.provide("nokia.maps.resources.ui.i18n.en.US.translation.json");nokia.maps.resources.ui.i18n.en.US.translation.json="{\r\n    'ovi.service.map._t1':'Customize Nokia Maps',\r\n    'ovi.service.map._t2':'Night Mode',\r\n    'ovi.service.map._t3':'Change the colors to make them more visible in the dark',\r\n    'ovi.service.map._t4':'Landmarks',\r\n    'ovi.service.map._t5':'Bring the landmarks of the world to life in vivid 3D.',\r\n    'ovi.service.map._t6':'Maps in your language',\r\n    'ovi.service.map._t7':'Choose the language in which Nokia Maps is displayed. ',\r\n    'ovi.service.map._t8':'More about Nokia Maps',\r\n    'ovi.service.map._t9':'http://maps.nokia.com',\r\n    'ovi.service.map._t10':'Check if Nokia Maps is available for your handset',\r\n    'ovi.service.map._t11':'http://maps.nokia.com',\r\n    'ovi.service.map._t12':'Install free plugin',\r\n    'ovi.service.map._t13':'Install the plugin to get more features',\r\n    'ovi.service.map._t14':'Available for Firefox 3.5 & 3.6, Internet Explorer 7 & 8 on Windows, Safari 4 and Firefox 3.6 for Mac',\r\n    'ovi.service.map._t15':'More\u2026',\r\n    'ovi.service.map._t16':'Customize Nokia Maps',\r\n    'ovi.service.map._t17':'Map view',\r\n    'ovi.service.map._t18':'Satellite',\r\n    'ovi.service.map._t19':'Terrain',\r\n    'ovi.service.map._t20':'Switch map mode',\r\n    'ovi.service.map._t21':'Hide traffic',\r\n    'ovi.service.map._t22':'Show traffic',\r\n    'ovi.service.map._t23':'ft',\r\n    'ovi.service.map._t24':'mi',\r\n    'ovi.service.map._t25':'m',\r\n    'ovi.service.map._t26':'km',\r\n    'ovi.service.map._t27':'Open ruler',\r\n    'ovi.service.map._t28':'Close ruler',\r\n    'ovi.service.map._t29':'Change to miles',\r\n    'ovi.service.map._t30':'Change to km',\r\n    'ovi.service.map._t31':'Move up',\r\n    'ovi.service.map._t32':'Move down',\r\n    'ovi.service.map._t33':'Move left',\r\n    'ovi.service.map._t34':'Move right',\r\n    'ovi.service.map._t35':'Change to 3D',\r\n    'ovi.service.map._t36':'Change to 2D',\r\n    'ovi.service.map._t37':'3D',\r\n    'ovi.service.map._t38':'2D',\r\n    'ovi.service.map._t39':'Change 3D view angle',\r\n    'ovi.service.map._t40':'Zoom out',\r\n    'ovi.service.map._t41':'Zoom in',\r\n    'ovi.service.map._t42':'Drag to zoom',\r\n    'ovi.service.map._t43':'Country',\r\n    'ovi.service.map._t44':'State',\r\n    'ovi.service.map._t45':'City',\r\n    'ovi.service.map._t46':'Street',\r\n    'ovi.service.map._t47':'N',\r\n    'ovi.service.map._t48':'Align to north',\r\n    'ovi.service.map._t49':'Click and Drag to rotate',\r\n    'ovi.service.map._t50':'Open Minimap',\r\n    'ovi.service.map._t51':'Close Minimap',\r\n    'ovi.service.map._t52':'Nokia \u00a9 2010 All rights reserved',\r\n    'ovi.service.map._t53':'Type a place name or address',\r\n    'ovi.service.map._t54':'Start Search',\r\n    'ovi.service.map._t55':'Weather forecast for the next 24 hours',\r\n    'ovi.service.map._t56':'Today&quit;s weather',\r\n    'ovi.service.map._t57':'Open weather forecast',\r\n    'ovi.service.map._t58':'Close weather forecast',\r\n    'ovi.service.map._t59':'\u00b0C',\r\n    'ovi.service.map._t60':'\u00b0F',\r\n    'ovi.service.map._t61':'Close',\r\n    'ovi.service.map._t62':'ON',\r\n    'ovi.service.map._t63':'OFF',\r\n    'ovi.service.map._t64':'Install the free plugin to get extra features',\r\n    'ovi.service.map._t65':'Please tick the box to confirm you have read and agree to the',\r\n    'ovi.service.map._t66':'Terms of Use',\r\n\t'ovi.service.map._t67':'http://here.com/terms?locale=en-US',\r\n    'ovi.service.map._t68':'Labels',\r\n    'ovi.service.map._t69':'Install Nokia Maps on your computer to see landmarks in 3D. Download maps, favorite places and routes to your mobile.',\r\n    'ovi.service.map._t70':'A new version of Nokia Maps plugin is available for your browser',\r\n    'ovi.service.map._t71':'New plugin available',\r\n    'ovi.service.map._t72':'Positioning',\r\n    'ovi.service.map._t73':'Your browser is not supported yet',\r\n    'ovi.service.map._t74':'Check out the list of the compatible browsers.',\r\n    'ovi.service.map._t75':'http://maps.ovi.com/services/?handshake',\r\n    'ovi.service.map._t76':'Long press to expand',\r\n    'ovi.service.map._t77':'Expand',\r\n    'ovi.service.map._t78':'Minimize',\r\n    'ovi.service.map._t79':'Looking for your position.Tap for more information.',\r\n    'ovi.service.map._t80':'Tap to snap to your position',\r\n    'ovi.service.map._t81':'Tap to use rotational maps',\r\n    'ovi.service.map._t82':'Tap to use fixed north maps',\r\n    'ovi.service.map._t83':'Compass calibrated',\r\n    'ovi.service.map._t84':'To use rotational maps, please calibrate the compass by moving your device in a figure of eight.',\r\n    'ovi.service.map._t85':'GPS signal is weak indoors. Try to get outside or close to a window to help this phone find your position.',\r\n    'ovi.service.map._t86':'Public transport',\r\n    'ovi.service.map._t87':'Your position within',\r\n    'ovi.service.map._t88':'Route overview',\r\n\t'ovi.service.map._t90':'Criticality',\r\n\t'ovi.service.map._t91':'Traffic conditions',\r\n\t'ovi.service.map._t92':'Turn on ruler',\r\n\t'ovi.service.map._t93':'Turn off ruler',\r\n\t'ovi.service.map._t94':'Report Image',\r\n\t'ovi.service.map._t95':'Turn on zoom rectangle',\r\n    'ovi.service.map._t96':'Turn off zoom rectangle',\r\n    'ovi.service.map._t97':'Traffic incidents',\r\n\t'rightClickMenu.setStartWaypoint':'Directions from here',\r\n\t'rightClickMenu.setDestinationWaypoint':'Directions to here',\r\n\t'rightClickMenu.addStopoverToRoute':'Add to route',\r\n\t'rightClickMenu.removeRoutePoint':'Remove route point',\r\n\t'rightClickMenu.printRoute':'Print route',\r\n\t'rightClickMenu.addWaypoint':'Add waypoint',\r\n\t'rightClickMenu.showRouteDetails':'Show route details',\r\n\t'rightClickMenu.shareRoute':'Share route',\r\n\t'rightClickMenu.zoomIn':'Zoom in',\r\n\t'rightClickMenu.zoomOut':'Zoom out',\r\n\t'rightClickMenu.reportProblem':'Report a problem',\r\n\t'rightClickMenu.capture':'Take a Screenshot',\r\n\t'rightClickMenu.captureTitle':'Screenshot',\r\n\t'rightClickMenu.captureSave':'Right-click on the screenshot to save it as an image',\r\n    'routeview.drive._r01':'Drive',\r\n    'routeview.walk._r02':'Walk',\r\n    'routeview.error.sorry._r06':'Sorry',\r\n    'routeview.error.message._r07':'The route calculation has failed, please try again with different settings.',\r\n    'routeview.totalkm._r03':'Total km',\r\n    'routeview.totalmiles':'Total miles',\r\n    'routeview.destination.description':'Your destination ',\r\n    \"routeview.destination.left\" : \" should be on your <span class='emph'>left</span> hand side. \",\r\n    \"routeview.destination.right\" : \" should be on your <span class='emph'>right</span> hand side. \",\r\n    \"routeview.waypoint.description\" : \"Your waypoint\",\r\n    \"routeview.stopover.direction\" : \"Continue <span class='emph'>{{compass}}</span> on <span class='emph'>{{street}}</span>.\",\r\n    \"routeview.stopover.direction.north\" : \"north\",\r\n    \"routeview.stopover.direction.northeast\" : \"north-east\",\r\n    \"routeview.stopover.direction.northwest\" : \"north-west\",\r\n    \"routeview.stopover.direction.south\" : \"south\",\r\n    \"routeview.stopover.direction.southeast\" : \"south-east\",\r\n    \"routeview.stopover.direction.southwest\" : \"south-west\",\r\n    \"routeview.stopover.direction.east\" : \"east\",\r\n    \"routeview.stopover.direction.west\" : \"west\",\r\n    \"routeview.stopover.distance\" : \"Follow for <span class='emph'>{{distance}}</span>.\",\r\n    \"routeview.start.direction\" : \"Head <span class='emph'>{{compass}}</span>.\",\r\n    \"routeview.start.distance.street\" : \"Follow {{street}} for <span class='emph'>{{distance}}</span>\",\r\n    \"routeview.start.distance\" : \"Follow the street for <span class='emph'>{{distance}}</span>\",\r\n    \"routeview.direction.description\" : \"Follow for <span class='emph'>{{distance}}</span>\",\r\n    \"routeview.joiner\" : \"and\",\r\n    \"routeview.turn.noturn.street\" : \"go straight ahead onto\",\r\n    \"routeview.turn.keepmiddle.street\" : \"take the middle lane onto\",\r\n    \"routeview.turn.keepright.street\" : \"keep <span class='emph'>right</span> onto\",\r\n    \"routeview.turn.lightright.street\" : \"turn <span class='emph'>slightly right</span> onto\",\r\n    \"routeview.turn.quiteright.street\" : \"turn <span class='emph'>right</span> onto\",\r\n    \"routeview.turn.heavyright.street\" : \"turn <span class='emph'>sharply right</span> onto\",\r\n    \"routeview.turn.keepleft.street\" : \"keep <span class='emph'>left</span> onto\",\r\n    \"routeview.turn.lightleft.street\" : \"turn <span class='emph'>slightly left</span> onto\",\r\n    \"routeview.turn.quiteleft.street\" : \"turn <span class='emph'>left</span> onto\",\r\n    \"routeview.turn.heavyleft.street\" : \"turn <span class='emph'>sharply left</span> onto\",\r\n    \"routeview.turn.return.street\" : \"return onto\",\r\n    \"routeview.turn.roundabout1.street\" : \"take the first exit onto\",\r\n    \"routeview.turn.roundabout2.street\" : \"take the second exit onto\",\r\n    \"routeview.turn.roundabout3.street\" : \"take the third exit onto\",\r\n    \"routeview.turn.roundabout4.street\" : \"take the fourth exit onto\",\r\n    \"routeview.turn.roundabout5.street\" : \"take the fifth exit onto\",\r\n    \"routeview.turn.roundabout6.street\" : \"take the sixth exit onto\",\r\n    \"routeview.turn.roundabout7.street\" : \"take the seventh exit onto\",\r\n    \"routeview.turn.roundabout8.street\" : \"take the eighth exit onto\",\r\n    \"routeview.turn.roundabout9.street\" : \"take the ninth exit onto\",\r\n    \"routeview.turn.roundabout10.street\" : \"take the tenth exit onto\",\r\n    \"routeview.turn.roundabout11.street\" : \"take the eleventh exit onto\",\r\n    \"routeview.turn.roundabout12.street\" : \"take the twelfth exit onto\",\r\n    \"routeview.turn.undefined\" : \"\",\r\n    \"routeview.turn.noturn\" : \"go straight ahead\",\r\n    \"routeview.turn.keepmiddle\" : \"take the middle lane\",\r\n    \"routeview.turn.keepright\" : \"keep <span class='emph'>right</span>\",\r\n    \"routeview.turn.lightright\" : \"turn <span class='emph'>slightly right</span>\",\r\n    \"routeview.turn.quiteright\" : \"turn <span class='emph'>right</span>\",\r\n    \"routeview.turn.heavyright\" : \"turn <span class='emph'>sharply right</span>\",\r\n    \"routeview.turn.keepleft\" : \"keep <span class='emph'>left</span>\",\r\n    \"routeview.turn.lightleft\" : \"turn <span class='emph'>slightly left</span>\",\r\n    \"routeview.turn.quiteleft\" : \"turn <span class='emph'>left</span>\",\r\n    \"routeview.turn.heavyleft\" : \"turn <span class='emph'>sharply left</span>\",\r\n    \"routeview.turn.return\" : \"return\",\r\n    \"routeview.turn.roundabout1\" : \"take the first exit\",\r\n    \"routeview.turn.roundabout2\" : \"take the second exit\",\r\n    \"routeview.turn.roundabout3\" : \"take the third exit\",\r\n    \"routeview.turn.roundabout4\" : \"take the fourth exit\",\r\n    \"routeview.turn.roundabout5\" : \"take the fifth exit\",\r\n    \"routeview.turn.roundabout6\" : \"take the sixth exit\",\r\n    \"routeview.turn.roundabout7\" : \"take the seventh exit\",\r\n    \"routeview.turn.roundabout8\" : \"take the eighth exit\",\r\n    \"routeview.turn.roundabout9\" : \"take the ninth exit\",\r\n    \"routeview.turn.roundabout10\" : \"take the tenth exit\",\r\n    \"routeview.turn.roundabout11\" : \"take the eleventh exit\",\r\n    \"routeview.turn.roundabout12\" : \"take the twelfth exit\",\r\n    \"routeview.action.undefined.street\" : \"start your journey on\",\r\n    \"routeview.action.noaction.street\" : \"continue on\",\r\n    \"routeview.action.end.street\" : \"you have reached your destination\",\r\n    \"routeview.action.stopover.street\" : \"you have reached a waypoint\",\r\n    \"routeview.action.junction.street\" : \"at the junction\",\r\n    \"routeview.action.roundabout.street\" : \"at the roundabout\",\r\n    \"routeview.action.uturn.street\" : \"make a U-turn on\",\r\n    \"routeview.action.enterhighway.street\" : \"enter the highway\",\r\n    \"routeview.action.enterhighwayfromright.street\" : \"enter the highway {0} from the right\",\r\n    \"routeview.action.enterhighwayfromleft.street\" : \"enter the highway {0} from the left\",\r\n    \"routeview.action.leavehighway.street\" : \"take the exit {1} to {0}\",\r\n    \"routeview.action.changehighway.street\" : \"change the highway\",\r\n    \"routeview.action.continuehighway.street\" : \"follow the highway\",\r\n    \"routeview.action.ferry.street\" : \"enter the ferry\",\r\n    \"routeview.action.undefined\" : \"start your journey\",\r\n    \"routeview.action.noaction\" : \"continue\",\r\n    \"routeview.action.end\" : \"you have reached your destination\",\r\n    \"routeview.action.stopover\" : \"you have reached a waypoint\",\r\n    \"routeview.action.junction\" : \"at the junction\",\r\n    \"routeview.action.roundabout\" : \"at the roundabout\",\r\n    \"routeview.action.uturn\" : \"make a U-turn\",\r\n    \"routeview.action.enterhighway\" : \"enter the highway\",\r\n    \"routeview.action.enterhighwayfromright\" : \"enter the highway from the right\",\r\n    \"routeview.action.enterhighwayfromleft\" : \"enter the highway from the left\",\r\n    \"routeview.action.passjunction\" : \"pass the junction\",\r\n    \"routeview.action.leavehighway\" : \"leave the highway\",\r\n    \"routeview.action.changehighway\" : \"change the highway\",\r\n    \"routeview.action.continuehighway\" : \"follow the highway\",\r\n    \"routeview.action.ferry\" : \"enter the ferry\",\r\n    \"routeview.unit.yard\" : \"yd\",\r\n    \"routeview.unit.milesperhour\" : \"mph\",\r\n    \"routeview.unit.kilometersperhour\" : \"kph\",\r\n    \"routeview.unit.second\" : \"s\",\r\n    \"routeview.unit.minute\" : \"min\",\r\n    \"routeview.unit.hour\" : \"h\",\r\n    \"waypoints.getdirections._r04\" : \"Get Directions\",\r\n    \"waypoints.newroute._r05\" : \"New\",\r\n\t\"typeSelector.globe\": \"Maps 3D\",\r\n\t\"streetlevel.leave\": \"Leave street level\",\r\n\t\"streetlevel.noPanorama\": \"Can\u2019t show you street level here\"\r\n}\r\n";
nokia.maps.util.getRootNameSpace("nokia.maps").Settings.languageLoaded("en-US");})();
this.nokia=this.nokia||{};nokia.places=nokia.places||{comm:{},data:{},utils:{},search:{},widgets:{},ui:{modules:{},templates:{blue:{},general:{},mobileHTML5:{},wordpress:{},st:{}}}};nokia.places.utils.enums={CssUrlModes:{NONE:"none",AGGREGATED:"aggregated",NON_AGGREGATED:"nonAggregated"}};
nokia.places.utils.util=function(){function g(a,d){var e=a,c;for(c in d)d.hasOwnProperty(c)&&(e=e.replace("{"+c+"}",d[c]));return e}function k(a,d){return function(){return a.apply(d,arguments)}}function h(a,d,e){var c=new Date;e&&c.setDate(c.getDate()+e);document.cookie=g("{NAME}={VALUE}{EXPIRES}",{NAME:a,VALUE:encodeURI(d),EXPIRES:e?"":"; expires="+c.toUTCString()})}function i(a){if(document.cookie.length){var d=document.cookie.indexOf(a+"=");if(-1!==d)return d=d+a.length+1,a=document.cookie.indexOf(";",
d),-1===a&&(a=document.cookie.length),decodeURI(document.cookie.substring(d,a))}return""}var f={en:"gb",da:"dk",cs:"cz",el:"gr",hi:"in",ko:"kr",sv:"se",zh:"cn"};return{mixin:function(a,d){for(var e=Array.prototype.slice.call(arguments,1),c=e.shift();c;){for(var b in c)c.hasOwnProperty(b)&&(a[b]=c[b]);c=e.shift()}return a},replace:g,inherit:function(a,d,e){var c=function(){};c.prototype=a.prototype;d.prototype=new c;for(var b in e)e.hasOwnProperty(b)&&(d.prototype[b]=e[b])},trim:function(a){return a.replace(/(^\s+)|(\s+$)/g,
"")},setCookie:h,getCookie:i,clearCookie:function(a){h(a,"",-1)},createTempUserId:function(){var a=i("ppTmpUser");a||(a=Math.floor(1E8*Math.random())+""+(new Date).getTime(),h("ppTmpUser",a,360));return a},addProtocolToUrl:function(a){0!==a.indexOf("http://")&&0!==a.indexOf("https://")&&(a="http://"+a);return a},ensureReplaced:function(a,d){return 0===a.indexOf("$")?d:a},removeTags:function(a){return"string"===typeof a?a.replace(/<([a-zA-Z0-9]*|\n)+>/g,"").replace(/<\/([a-zA-Z0-9]*|\n)+>/g,""):a},
escapeTags:function(a){return"string"===typeof a?a.replace(/</g,"&lt;").replace(/>/g,"&gt;"):a},extendWith:function(a,d){for(var e in d)d.hasOwnProperty(e)&&typeof("function"===d[e])&&(a[e]=k(d[e],a))},getBrowserLanguage:function(){var a="undefined"===typeof window?"en":window.navigator.userLanguage||window.navigator.language||"en";if(2===a.length){var d=f[a];return d?[a,d].join("-"):[a,a].join("-")}return a},getDefaultDialect:function(a){return f[a]?f[a]:a},toArray:function(a){return a instanceof
Array?a:[a]}}}();
nokia.places.settings=function(){function g(){var a=this.jslocation||nokia.maps;if(a&&a.util&&a.util.services)return a.util.services}function k(a){a=a.replace(r,o?"."+o:"");return a=a.replace(m,j?"https":"http")}function h(d){var f=g(),d=a(d,{S_URL:k(e),APPID:c,TOKEN:b,LANG:p});return f?f.addNlpParams(d):d}var i=nokia.places.utils.util,f=nokia.Settings,a=i.replace,d=i.ensureReplaced,e="{protocol}://places{serviceMode}.api.here.com/places/v1",c="",b="",r="{serviceMode}",m="{protocol}",o="",j=!1,q=
d("${cnContext}",!1),n="&app_id={APPID}&app_code={TOKEN}",l=[];l.push("callback=nokia.places.comm.data.clb['{CALLBACK_ID}']");g()?n="":l.push(n);l.push("Accept-Language={LANG}");var l=l.join("&"),s="{S_URL}/discover/search/?"+l+"&",t="{S_URL}/suggest/?"+l+"&",u="{S_URL}/discover/explore/places?"+l+"&",q=q?"":"&int=true",v="{S_URL}/places/{PLACE_ID}?"+l,w="{S_URL}/places/{PLACE_ID}/media/images?offset={START}&size={LIMIT}&"+l,x="{S_URL}/places/{PLACE_ID}/media/reviews?offset={START}&size={LIMIT}&"+
l,y="{S_URL}/places/{PLACE_ID}/related/recommended?size={LIMIT}&"+l,z="{S_URL}/reversegeocode.json?prox={LAT},{LONG},1000&gen=1&mode=retrieveAddresses&jsoncallback=nokia.places.comm.data.clb['{CALLBACK_ID}']"+n+"&language={LANG}"+q,A="{S_URL}/geocode.json?gen=1&searchtext={LOC}&jsoncallback=nokia.places.comm.data.clb['{CALLBACK_ID}']"+n+"&language={LANG}"+q,p=i.getBrowserLanguage();f&&(c=f.app_id,b=f.app_code,p=f.defaultLanguage,o=f.serviceMode,j="force"===f.secureConnection||"prefer"===f.secureConnection,
f.addObserver("app_id",function(a){c=a||c}),f.addObserver("appId",function(a){c=a||c}),f.addObserver("app_code",function(a){b=a||b}),f.addObserver("authenticationToken",function(a){b=a||b}),f.addObserver("defaultLanguage",function(a){p=a||p}),f.addObserver("serviceMode",function(a){o=a}),f.addObserver("secureConnection",function(a){j="force"===a||"prefer"===a}));i=function(){};i.prototype={getPlaceUrl:function(b){var c=h(v);return a(c,{PLACE_ID:b})},getPlaceImagesUrl:function(b,c,e){var d=h(w);return a(d,
{PLACE_ID:b,START:c||0,LIMIT:e||5})},getReviewsUrl:function(b,c){var e=h(x);return a(e,{PLACE_ID:b,LIMIT:c.limit||"5",START:c.start||"0"})},getRecommendationsUrl:function(b,c){var e=h(y);return a(e,{PLACE_ID:b,LIMIT:c||5})},getSearchUrl:function(){return h(s)+"&"},getCategorySearchUrl:function(){return h(u)+"&"},getSuggestUrl:function(){return h(t)+"&"},getLocale:function(){return p},getClbTemplate:function(){return"callback=nokia.places.comm.data.clb['{CALLBACK_ID}']"},getReverseGeoUrl:function(e,
d){var f=a(z,{LAT:e,LONG:d,S_URL:k("{protocol}://{service}{serviceMode}.api.here.com/6.2").replace("{service}","reverse.geocoder"),APPID:c,TOKEN:b,LANG:p}),r=g();return r?r.addNlpParams(f):f},getGeoCodeUrl:function(e){var e=a(A,{LOC:e,S_URL:k("{protocol}://{service}{serviceMode}.api.here.com/6.2").replace("{service}","geocoder"),APPID:c,TOKEN:b,LANG:p}),d=g();return d?d.addNlpParams(e):e},setPlacesServerUrl:function(a){e=a},getPlacesServerUrl:function(){return e},getServices:g,setLocale:function(a){p=
a},setAppContext:function(a){a=a||{};c=a.appId||a.app_id;b=a.authenticationToken||a.app_code;if(f){f.set("app_id",c);f.set("app_code",b)}},setServiceMode:function(a){o=a;f&&f.set("serviceMode",a)},setSecureConnection:function(a){(j=a)&&f&&f.set("secureConnection","force")},isSecure:function(){return j},getServiceMode:function(){return o},getAppContext:function(){return{app_id:c,app_code:b}},commTimeout:1E4,revision:d("-1","0"),version:d("beta5-SNAPSHOT","0")};i.prototype.constructor=i;return new i}();
nokia.places.comm.core=function(){function g(h){h&&h.parentNode&&h.parentNode.removeChild(h)}var k=document;return{get:function(h,i){var f=k.getElementsByTagName("head")[0],a=k.createElement("script");a.setAttribute("src",h);a.setAttribute("type","text/javascript");"Microsoft Internet Explorer"===navigator.appName?a.onreadystatechange=function(){if("loaded"===this.readyState||"complete"===this.readyState)g(this),"function"===typeof i&&i()}:a.onload=function(){g(this);"function"===typeof i&&i()};f.appendChild(a);
return a},post:function(h,i,f,a){var d=k.getElementsByTagName("head")[0],e=k.createElement("iframe");e.style.display="none";d.appendChild(e);setTimeout(function(){var c=e.contentWindow||e.contentDocument;e.doc=c.document?c.document:c;c=e.doc.createElement("form");c.method="post";c.action=h;c.setAttribute("accept-charset","utf-8");c.setAttribute("enctype","multipart/form-data");c.setAttribute("encoding","multipart/form-data");var b=e.doc.createElement("input");b.type="text";b.name="user-id";b.value=
a||"";c.appendChild(b);b=e.doc.createElement("input");b.type="text";b.name="entity";b.value=i;c.appendChild(b);e.doc.body.appendChild(c);var d=function(){setTimeout(function(){g(e)},1);"function"===typeof f&&f()};e.onload=function(){d()};e.onreadystatechange=function(){"complete"===this.readyState&&d()};c.submit()},1)}}}();
nokia.places.comm.data=function(){function g(){return""+ ++d}function k(e,c){var b=function(d,f){d&&400<=d.status&&(d={responseStatus:d.status,message:d.error_description||d.message},f="ERROR",window.console&&"function"===typeof window.console.error&&window.console.error("Error "+d.responseStatus+" - "+d.message));"function"===typeof c&&c(d,f||"OK");clearTimeout(b.timeout);delete a[e]};b.timeout=setTimeout(function(){window.console&&"function"===typeof window.console.error&&window.console.error("Timeout - cannot connect to the server");
b(null,"ERROR")},f.commTimeout);return b}var h=nokia.places,i=h.comm.core,f=h.settings,a={},d=100;return{performRequest:function(e,c,b){b=b||g();e=e.replace("{CALLBACK_ID}",b);a[b]=k(b,c);i.get(e,null,b);return b},performNoCbRequest:function(a){i.get(a)},performPostRequest:function(a,c,b,d){i.post(a,c,b,d)},abortRequest:function(e){if("undefinded"===typeof e||!a[e])return!1;a[e].timeout&&clearTimeout(a[e].timeout);a[e]=function(){delete a[e]}},getCallBackId:g,getSeed:function(){return d},clb:a}}();
(function(g){g.ovi=this.ovi||{};g.ovi.player={};g.ovi.player.places={};g.ovi.player.places.Com={};g.ovi.player.places.Com.data=function(g,h){nokia.places.comm.data.clb[""+g.callback](h)}})(this);
nokia.places.data.dataTransformer=function(){function g(a){return{latitude:a[0],longitude:a[1]}}function k(a){if(a instanceof Array)return{topLeft:{latitude:a[3],longitude:a[0]},bottomRight:{latitude:a[1],longitude:a[2]}}}function h(a){if(a)return{name:a.title,categoryId:a.id,icon:a.icon}}function i(c){var b;if(!c)return!1;if((b=c.results)&&b.next){var f=c.results.next;c.results.getNext=function(b){if(b&&b.onComplete){var c=b.onComplete;f+="&"+d.getClbTemplate();return a(f,function(a,b){"function"===
typeof c&&(b===e&&(a=i(a)),c(a,b))})}}}delete c.next;b=c.items||c.results.items;if(c.search){c.search.context&&(c.search.location=c.search.context.location,delete c.search.context);var m=c.search.location;m.position&&(m.position=g(m.position));m.bbox&&(m.boundingBox=k(m.bbox),delete m.bbox)}if(b)for(var m=0,o=b.length;m<o;m++){var j=b[m],q=j.href.match(/([\w\d]{8}-[\w\d]{32})/),n=j.category;n.icon=j.icon.replace(/(_\d{2})?\.icon/,".icon");j.id?(j.placeId=j.id,delete j.id):q&&q[1]&&(j.placeId=q[1]);
j.position=g(j.position);j.bbox&&(j.boundingBox=k(j.bbox),delete j.bbox);j.category=h(n);delete j.refId;delete j.type}return c}function f(c){if(!c)return!1;if(c.next){var b=c.next;c.getNext=function(c){if(c&&c.onComplete){var j=c.onComplete;b+="&"+d.getClbTemplate();return a(b,function(a,b){"function"===typeof j&&(b===e&&(a=f(a)),j(a,b))})}}}delete c.next;delete c.create;if(c.items)for(var g=0,m=c.items.length;g<m;g++){var h=c.items[g];if(h){var j=h.supplier;h.supplier={name:j.title,supplierId:j.id,
icon:j.icon};delete h.id}}return c}var a=nokia.places.comm.data.performRequest,d=nokia.places.settings,e="OK";return{transformPlace:function(a){if(!a)return!1;a.location.position=g(a.location.position);a.location.bbox&&(a.location.bbox=k(a.location.bbox));if(a.media){var b=a.media;b.reviews&&(b.reviews.available?b.reviews=f(b.reviews):delete b.reviews);b.editorials&&(b.editorials=f(b.editorials));b.images&&(b.images.available?b.images=f(b.images):delete b.images);b.links&&(b.links=f(b.links));b.images||
b.editorials||b.reviews||b.links?a.media=b:delete a.media}if(b=a.supplier)a.supplier={name:b.title,supplierId:b.id};for(var b=0,e=a.categories.length;b<e;b++)a.categories[b]=h(a.categories[b]);delete a.refId;return a},transformSearchResults:i,transformReverseGeo:function(a){if(a){var b={location:{}};b.location.position={latitude:parseFloat(a.Location.DisplayPosition.Latitude),longitude:parseFloat(a.Location.DisplayPosition.Longitude)};var e=b.location,a=a.Location.Address,d={},f,j,g;for(g in a)if(a.hasOwnProperty(g))if(j=
a[g],"AdditionalData"!==g)f="Label"===g?"text":"Country"===g?"countryCode":g.charAt(0).toLowerCase()+g.substr(1),d[f]=j;else{f=0;for(var h=j.length;f<h;f++){var i=j[f];"CountryName"===i.key?d.country=i.value:"StateName"===i.key&&(d.state=i.value)}}e.address=d;b.name=b.location.address.text;return b}},transformMediaObject:f}}();
nokia.places.manager=function(){var g=nokia.places,k=this.console||{},h=g.settings,i=g.comm.data.performRequest,f=g.data.dataTransformer;return{getPlaceData:function(a){if(a){var d=a.onComplete;if((a.placeId||a.href)&&"function"===typeof d)return a=a.href?a.href+"&"+h.getClbTemplate():h.getPlaceUrl(a.placeId),i(a,function(a,c){"OK"===c&&(a=f.transformPlace(a));"function"===typeof d&&d(a,c)})}},getRating:function(a){k.warn&&k.warn("nokia.places.manager.getRating is deprecated use getPlaceData to read rating");
if(a.onComplete)a.onComplete({average:0,count:0},"ERROR")},getReviews:function(a){if(a){var d=a.placeId,e=a.onComplete;if(d&&"function"===typeof e)return a=h.getReviewsUrl(d,a),i(a,function(a,b){"function"===typeof e&&("OK"===b&&(a=f.transformMediaObject(a)),e(a,b))})}},getImages:function(a){if(a){var d=a.placeId,e=a.onComplete;if(d&&"function"===typeof e)return a=h.getPlaceImagesUrl(d,a.start,a.limit),i(a,function(a,b){"OK"===b&&(a=f.transformMediaObject(a));e(a,b)})}}}}();
nokia.places.search.nsp=function(){function g(a){var c=[],d=a.searchCenter;a.limit&&c.push("size="+encodeURIComponent(a.limit));a.searchTerm&&c.push("q="+encodeURIComponent(a.searchTerm));a.category&&c.push("cat="+encodeURIComponent(a.category));"object"===typeof a.boundingBox&&"object"===typeof a.boundingBox.topLeft&&"object"===typeof a.boundingBox.bottomRight?c.push("X-Map-Viewport="+a.boundingBox.topLeft.longitude+","+a.boundingBox.bottomRight.latitude+","+a.boundingBox.bottomRight.longitude+","+
a.boundingBox.topLeft.latitude):d&&("number"===typeof d.longitude&&"number"===typeof d.latitude)&&c.push("at="+d.latitude+","+d.longitude);return c.join("&")}function k(b,f){var h=e.getSearchUrl()+g(b);return a.performRequest(h,function(a,e){e===c&&(a=d.transformSearchResults(a),b.onComplete(a,e))},f)}function h(b,f){var h=e.getCategorySearchUrl()+g(b);return a.performRequest(h,function(a,e){e===c&&(a=d.transformSearchResults(a),b.onComplete(a,e))},f)}function i(b,d){var f=e.getSuggestUrl()+g(b);
return a.performRequest(f,function(a,d){if(d===c)b.onComplete(a,d)},d)}var f=nokia.places,a=f.comm.data,d=f.data.dataTransformer,e=f.settings,c="OK";return{search:function(b,c){var d=b.useGeoLocation,e,f,g={latitude:0,longitude:0},n=a.getCallBackId(),l=!0===c?i:b.category?h:k;try{e=navigator?navigator.geolocation:null}catch(s){}!f&&d&&e?(e.getCurrentPosition(function(a){f={latitude:a.coords.latitude,longitude:a.coords.longitude};b.searchCenter=f;l(b,n)},function(){b.searchCenter=g;l(b,n)},{timeout:6E3}),
f=g):(b.searchCenter=f||b.searchCenter||g,l(b,n));return n}}}();
nokia.places.search.manager=function(){var g=nokia.places,k=g.settings,h=g.search.nsp,i=g.comm.data.performRequest,f=g.data.dataTransformer;return{findPlaces:function(a){if(a&&a.searchTerm&&a.onComplete)return h.search(a)},findPlacesByCategory:function(a){if(a&&a.category&&a.onComplete)return h.search(a)},suggestPlaces:function(a){if(a&&a.searchTerm&&a.onComplete)return h.search(a,!0)},findRecommendations:function(a){if(a){var d=a.placeId,e=a.onComplete;if(d&&"function"===typeof e)return a=k.getRecommendationsUrl(d,
a.limit),i(a,function(a,b){"OK"===b?e(f.transformSearchResults(a),b):e({},b)})}},reverseGeoCode:function(a){var a=a||{},d=a.latitude,e=a.longitude,c=a.onComplete,a=k.getReverseGeoUrl(a.latitude,a.longitude);if(d&&e&&"function"===typeof c)return i(a,function(a){a&&a.Response&&a.Response.View?a.Response.View.length?c(f.transformReverseGeo(a.Response.View[0].Result[0]),"OK"):c("","OK"):c(a?a.Details:"","ERROR")})},geoCode:function(a){var a=a||{},d=a.address,e=a.searchTerm,c=a.onComplete,b,g=[];if(a.onComplete&&
(e||d)){if(d)for(b in d)d.hasOwnProperty(b)&&g.push(d[b]);else g.push(e);e=encodeURIComponent(g.join(","));a=k.getGeoCodeUrl(e);return i(a,function(a){a&&a.Response?a.Response.View&&a.Response.View[0]&&a.Response.View[0].Result?c(f.transformReverseGeo(a.Response.View[0].Result[0]),"OK"):c(null,"OK"):c(a,"ERROR")})}}}}();
(function(){ovi.provide("nokia.maps.gfx.CanvasPainter");
(function(){if(nokia.maps.dom.supportsCanvas&&!/MSIE (\d+\.\d+);/.test(navigator.userAgent)){var e=!("naturalWidth"in new Image),l=nokia.maps.gfx,h=Math,d=h.sqrt,c=h.pow,h=l.Painter,g=l.IDL,b=l.Color,f=g.opcodes,r=g.identifierToAttribute,a=nokia.maps.util.d,a=nokia.maps.util.d,q=h.Gi,l=nokia.maps.gfx.CanvasPainter=new ovi.Class({Extends:nokia.maps.gfx.Painter,updateElement:function(a,b,c){this.Ea(a,b,b.ownerDocument);c=q(c);b.style.opacity=b.$n$opacity=c;b.$n$width=a.data[1];b.$n$height=a.data[2]},
createElement:function(a,b,c){b=(b||document).createElement("CANVAS");this.Ea(a,b);c=q(c);b.style.opacity=b.$n$opacity=c;b.$n$width=a.data[1];b.$n$height=a.data[2];return b},setOpacity:function(a,b){b=q(b);a.style.opacity=a.$n$opacity=b;return this},setScale:function(a,b){a.style.width=a.$n$width*b.x+"px";a.style.height=a.$n$height*b.y+"px"},Ea:function(b,c){var k;(!b||!b.data)&&a("CanvasPainter.createElement: Illegal IDL given");var d=b.data,e,g;d[0]!==f.BEGIN_2D_IMAGE&&a("CanvasPainter.createElement: Illegal opcode in IDL");
e=c.width=d[1];k=c.height=d[2],d=k;c.style.width=e+"px";c.style.height=d+"px";g=c.getContext("2d");g.clearRect(0,0,e,d);this.drawIDLToCanvas(b,g)},drawIDLToCanvas:function(g,h){(!g||!g.data)&&a("CanvasPainter.createElement: Illegal IDL given");var m=g.data,l,q,v,u,x,w,z,B,D,A,C=!0,E,M,I;m[0]!==f.BEGIN_2D_IMAGE&&a("CanvasPainter.createElement: Illegal opcode in IDL");l=3;h.save();for(h.lineCap="round";q=m[++l];)q===f.BEGIN_PATH?h.beginPath():q===f.MOVE_TO?h.moveTo(m[++l],m[++l]):q===f.LINE_TO?h.lineTo(m[++l],
m[++l]):q===f.BEZIER_CURVE_TO?h.bezierCurveTo(m[++l],m[++l],m[++l],m[++l],m[++l],m[++l]):q===f.FILL?(h.fill(),m[l+1]===f.STROKE&&(++l,C&&h.stroke())):q===f.STROKE?(C&&h.stroke(),m[l+1]===f.FILL&&(++l,h.fill())):q===f.SET?(q=r[m[++l]],z=m[++l],q==="fillColor"?h.fillStyle=b.getCssRGBA(z):q==="strokeColor"?h.strokeStyle=b.getCssRGBA(z):q==="opacity"?h.globalAlpha=+z:q!=="textBaseline"&&(q==="lineWidth"?C=(h[q]=z)!==0:q&&(h[q]=z))):q===f.DRAW_IMAGE||q===f.DRAW_IDL?(h.save(),z=m[++l],D=m[++l],v=m[++l],
w=m[++l],B=m[++l],x=m[++l],u=m[++l],M=m[++l],I=m[++l],A=m[++l],A=A.rows,h.transform(A[0][0],A[1][0],A[0][1],A[1][1],A[0][3],A[1][3]),q===f.DRAW_IMAGE&&z.nodeName!=="CANVAS"&&e?(E=new Image,E.src=z.src):E=z,A=E.naturalWidth||E.width,E=E.naturalHeight||E.height,A=(D+w>A?A-D:w)/w,E=(v+B>E?E-v:B)/B,q===f.DRAW_IMAGE?h.drawImage(z,D,v,w*A,B*E,x,u,M*A,I*E):(h.beginPath(),h.rect(x,u,M*A,I*E),h.clip(),A=M/w,E=I/B,h.translate(x-D*A,u-v*E),h.scale(A,E),this.drawIDLToCanvas(z,h)),h.restore()):q===f.SAVE?h.save():
q===f.RESTORE?h.restore():(z=q===f.FILL_TEXT,(D=q===f.STROKE_TEXT)||z?(w=m[++l],q=m[++l],v=m[++l],u=m[++l]-q,x=m[++l]-v,B=d(c(u,2)+c(x,2)),u/=B,x/=B,h.save(),h.transform(B*u,B*x,B*-x,B*u,q,v),z&&h.fillText(w,0,0),D&&h.strokeText(w,0,0),h.restore()):q===f.CLOSE_PATH&&h.closePath());h.restore()}});if(!h.defaultPainter)h.defaultPainter=l}})();ovi.provide("nokia.maps.gfx._packaging.package-canvas");})();
(function(){ovi.provide("nokia.maps.util.proto");(function(){var e={}.toString,l=nokia.maps.util.proto=function(h,d,c,g){var b=Function(),f,r;b.prototype=d;b=new b;for(f in h)h.hasOwnProperty(f)&&(b[f]=c&&f in d&&e.call(r=h[f])==="[object Object]"?l(r,d[f],c):h[f]);if(c&&!g)for(f in d)if(d.hasOwnProperty(f)&&(r=d[f])===b[f]&&e.call(r)==="[object Object]")b[f]=l(0,r,c);return b}})();ovi.provide("nokia.maps.map.render.p2d._helpers");
(function(e){ovi.extend(e,{geoToScreen:function(e,h){var d=h.geoToPixel(e),c=h.w;d.x-=Math.round(d.x/c)*c;return d}})})(nokia.maps.map.render.p2d._helpers);ovi.provide("nokia.maps.util.Event");(function(e){var l=e.now,e=e.Event=function(e){this.type=""+e;this.timeStamp=l()};ovi.extend(e.prototype,{target:null,defaultPrevented:!1,preventDefault:function(){this.defaultPrevented=!0}})})(nokia.maps.util);ovi.provide("nokia.maps.util.Cache");
(function(e){function l(a,b,c,f){this.c=a;this.G=b;if(this.f!==f)this.f=f;if(c)(c.X=this).V=c}function h(a,c){b.G=a;b.f=c===void 0?1:c;return b}function d(a){return a===void 0?1:isNaN(a=+a)||a<0||a===r?e.d():a}var c={},g={},b={},f={},r=1/0;e.Cache=new ovi.Class({initialize:function(a,b,c,f){this.Sb=d(a);if(b)this.Ld=b;if(c)this.se=c;if(f)this.W=f;this.q={}},Statics:{DONT:c,NEXT:g,NOT_ENOUGH_SPACE:f,change:h},f:0,change:h,add:function(a,e,k){var h=this.Ld,m=this.W,r=this.q,s=r[a],v;if(h){if((h=h(e))===
g)return s&&this.remove(a,1),m?m.add(a,e,k):g;if(h===c)return s&&this.remove(a),c;h===b?(e=h.G,k=h.f):e=h}if((k=d(k))>this.Sb)return m?m.add(a,e,k):f;if(s)this.f+=k-s.f,s.G=e,s.f=k,this.Tb(s);else{s=r[a]=this.U=new l(a,e,this.U,k);if(!this.fa)this.fa=s;this.f+=k}for(;this.f>this.Sb;)this.Y((v=this.fa).c,v),m&&m.add(v.c,v.G,v.f)},get:function(a,b){var c=this.q[a],f;c&&(b||this.Tb(c));return c?c.G:(f=this.W)?f.get(a,b):void 0},remove:function(a,b){var c=this.q[a],f,d;c&&this.Y(a,c);if(!b&&(f=this.W))d=
f.remove(a,b);return c?c.G:d},removeAll:function(a){var b=this.q,c,f;for(c in b)b.hasOwnProperty(c)&&!c.indexOf(a)&&this.Y(c,b[c]);(f=this.W)&&f.removeAll(a)},destroy:function(){var a=this.q,b,c;for(c in a)(b=a[c]).V=0,b.X=0;this.fa=this.U=0;this.W&&this.W.destroy()},Y:function(a,b,c){var f=b.X,d=b.V,e;f?d?(f.V=d).X=f:(this.fa=f).V=void 0:(this.U=d)?d.X=void 0:this.fa=void 0;if(!c)delete this.q[a],this.f-=b.f,(e=this.se)&&e(b.G);return b.G},Tb:function(a){var b=this.U;if((b=this.U)!==a){this.Y(a.c,
a,1);if(b)(b.X=a).V=b;(this.U=a).X=void 0}}});l.prototype.f=1})(nokia.maps.util);ovi.provide("nokia.maps.map.provider.IData");ovi.provide("nokia.maps.map.provider.IObjectProvider");ovi.provide("nokia.maps.util.Arrows");
(function(e){var l=nokia.maps.gfx.Color,h={color:1,width:1,length:1,frequency:1};e.Arrows=new ovi.Class({width:1.2,length:1.6,frequency:5,color:"#FFFC",initialize:function(d){var c,g,b=e.d;if(typeof d==="object")for(c in h)h.hasOwnProperty(c)&&c in d&&(g=d[c],c==="color"?l.parseCss(g)===null&&b(c):g<=0&&b(c),this[c]=d[c])}})})(nokia.maps.util);ovi.provide("nokia.maps.map.provider.Tile");
(function(){var e=nokia.maps,l=e.dom.importNode,h=e.dom.cloneNode;ovi.extend((nokia.maps.map.provider.Tile=function(d,c,e){this.id=d;if(c)(this.data=c).style.position="absolute";this.vi=(this.e=e)?e.getInvalidationMark():void 0}).prototype,{vi:-1/0,ok:1,state:void 0,getInvalidations:function(d){return this.e.getInvalidations(this,d)},getNode:function(d){var c=this.data,e;return c&&(d&&d!==document&&l(d,c,1)||(e=c.parentNode)&&e.nodeType!==11&&h(c,1)||c)}})})();ovi.provide("nokia.maps.map.render.p2d.Animation");
(function(e){var l=e.util,h=l.requestAnimationFrame,d=l.cancelAnimationFrame,c=e.util.now;e.map.render.p2d.Animation=ovi.Class({initialize:function(c,b,f,d){this.duration=d||300;this.Qv=c;this.lq=b;if(typeof f==="function")this.Hl=f;this.isRunning=!1},start:function(){function d(){var e=c(),a=e-b.Gd,l=a/b.duration,l=l>1?1:l;b.Hl&&(l=b.Hl(l));b.Qv(l,a,e-f,e);f=e;l>=1?b.stop():b.Co=h(d)}var b=this,f;b.Gd=c();f=b.Gd;b.isRunning=!0;b.Co=h(d)},stop:function(c){d(this.Co);this.isRunning=!1;c||this.lq&&
this.lq()}})})(nokia.maps);ovi.provide("nokia.maps.map.render.Preloader");
nokia.maps.map.render.Preloader=new ovi.Class({initialize:function(e,l){this.sa=ovi.bind(this,this.sa);this.Lq=e;this.qq=l;this.Dv=setTimeout(ovi.bind(this,this.nd));this.Rm={};this.jn=[]},total:0,past:0,nd:function(){for(var e=this.Lq,l=e.length,h=0,d,c,g,b,f,r,a=0,q=0,k=this.Rm,p;h<l;++h){this.jn.push(c=e[h]);providers.addListener("response",this.sa);d=e[++h];f=e[++h];g=c.request;b=c.createId;argsLength=f.length;for(r=0;r<argsLength;)++a,g.apply(c,p=f.slice(r,r+=d))===TRUE?k[b.apply(c,p)]=1:++q}this.Lq=
0;this.state=1;this.total=a;this.past=q;this.qq()},sa:function(e){var e=e.data[0],l=this.Rm;if(l[e]){l[e]=0;if(++this.past===this.total)this.Rm=0;this.qq()}},Aw:function(){for(var e=that.jn.length;e--;)that.jn[e].removeListener("response",that.sa)},state:0,cancel:function(){clearTimeout(this.Dv)}});ovi.provide("nokia.maps.map.render.InteractionRecorder");
(function(e){var l=e.util.Vector3D;e.map.render.InteractionRecorder=new ovi.Class({initialize:function(e){e=e||{};this.Gr=e.toleraceX||3;this.Hr=e.toleraceY||3;this.dq=e.maxSpeed||300;this.Ov=e.timeDelta||300;this.ep=e.directionTolerance||3;this.reset()},reset:function(){this.Nq=[]},setTollerance:function(e,d){this.Gr=e||3;this.Hr=d||3},recordXY:function(e,d,c,g,b){e||(e=(new Date).getTime());this.Nq.push({x:d,y:c,bx:g,by:b,time:e})},getRecorded:function(e){var d=this.Nq,c=d.length,g;e||(e=(new Date).getTime());
g=e-this.Ov;if(c===0||c>0&&g>d[c-1].time)return[];for(;c--;)if(e=d[c],e.time<g)return d.slice(c,d.length);return d},Ul:function(e,d){return e.bx===+e.bx&&d.bx===+d.bx?{dx:d.x+(d.bx-d.x)/2-(e.x+(e.bx-e.x)/2),dy:d.y+(d.by-d.y)/2-(e.y+(e.by-e.y)/2)}:{dx:d.x-e.x,dy:d.y-e.y}},getInteractionDirection:function(e){var e=this.getRecorded(e),d=e.length,c=this.ep>1?this.ep:2;d>1?(e=this.Ul(e[d-(c>d?d:c)],e[d-1]),e=new l(e.dx,e.dy,0)):e=new l(0,0,0);return e.normalize()},As:function(e,d){var c=this.Ul(e,d);return Math.abs(c.dx)>
this.Gr||Math.abs(c.dy)>this.Hr},getInteractionSpeed:function(e){var e=this.getRecorded(e),d=e.length,c=0,c=0,g,b;if(d>1&&this.As(e[d-1],e[d-2])){c=0;for(b=1;b<d;b++)g=this.Ul(e[b-1],e[b]),c+=Math.sqrt(g.dx*g.dx+g.dy*g.dy);c/=d-1;return c<=this.dq?c:this.dq}else return 0}})})(nokia.maps);ovi.provide("nokia.maps.map.render.KineticMove");
(function(e){e.map.render.KineticMove=new ovi.Class({initialize:function(e,h){this.Jk=h||0.5;this.Jc=this.Mn=0;e&&this.setInitialSpeed(e)},setInitialSpeed:function(e){this.Mn=e;this.Jc=this.getDuration()},getValue:function(e){return this.Mn+this.Jk*e},getPath:function(e){return Math.abs(this.Jk*e*e/2)},getDuration:function(){return this.Mn/this.Jk}})})(nokia.maps);ovi.provide("nokia.maps.map.render.p2d.ILayer");ovi.provide("nokia.maps.map.render.p2d.dom.ImageLayer");
(function(){var e=nokia.maps,l=e.util,h=e.map.render.p2d.dom,d=e.dom,c={state:!1};h.ImageLayer=function(c,b,f,d){this.e=b;this.Da=d;this.n=c;this.Dd=b.opacity||1;this.Mj=ovi.bind(this,this.Mj);this.ef=c.ownerDocument};h.ImageLayer.prototype={rc:-1/0,ta:e.util.A,shutdown:function(){this.Da=l.A;this.Mj=e.util.A;this.stop();d.ac(this.n);return this.n},stop:function(){this.wl&&this.wl.abort()},show:function(){this.gr("")},hide:function(){this.gr("none")},gr:function(c){this.n.style.display=c},render:function(d,
b,f,e,a,h,k,l,m,y,s,v){var b=this.e,e=this.rc,u;this.ov=h;if(d>=b.min&&d<=b.max){this.Ph=f;if(b.getInvalidations(e)&&(this.wl=u=b.request(k,v,this.Mj))&&u.state)this.Rp=u,this.rc=b.getInvalidationMark();(u=this.Rp)&&this.Dk(u)}else this.Dk(c)},Mj:function(c){if(c.state)this.Rp=c;this.wl===c&&this.Dk(c)},Dk:function(c){var b,f,e,a,h;b=this.n;var k=b.firstChild;e=c.bbox;f=c.data;c=this.Dd;f?(k||(k=this.ef.createElement("img")),h=this.Ph,k.src=f.src,b=h.geoToPixel(e.topLeft).round(),f=h.geoToPixel(e.bottomRight).round(),
a=f.x-b.x,a=e.isCDB?a+h.w:a,h=b.x-h.w,h=b.x<Math.abs(h)?b.x:h,e=k.style,e.position="absolute",e.left=h+"px",e.top=b.y+"px",e.width=a+"px",e.height=f.y-b.y+"px",c!==1&&d.Fd(k,c),this.n.appendChild(k)):k&&b.removeChild(k)},capture:function(c,b,f){var d=this.n.childNodes,a;a=this.ov;var e=d.length,k=0;b-=a.x;f-=a.y;c.save();for(c.set("opacity",this.Dd);k<e;k++)a=d[k],c.drawImage(a,0,0,a.naturalWidth||a.width,a.naturalHeight||a.height,a.offsetLeft-b,a.offsetTop-f,parseInt(a.style.width,10),parseInt(a.style.height,
10));c.restore()}}})();ovi.provide("nokia.maps.map.render.p2d.dom.CanvasLayer");
(function(){var e=nokia.maps,l=e.dom,h=e.map.render.p2d.dom;h.CanvasLayer=function(d,c,e){var c=new h.ImageLayer(d,c,0,e),b=d.ownerDocument;c.Dk=function(c){var d,a,e,g,h,m=this.n.firstChild;e=c.bbox;d=c.data;c=this.Dd;m?this.n.removeChild(m):m=b.createElement("canvas");if(d)h=this.Ph,m.width=d.width,m.height=d.height,m.getContext("2d").drawImage(d,0,0),d=h.geoToPixel(e.topLeft).round(),a=h.geoToPixel(e.bottomRight).round(),g=a.x-d.x,g=e.isCDB?g+h.w:g,h=d.x-h.w,h=d.x<Math.abs(h)?d.x:h,e=m.style,e.position=
"absolute",e.left=h+"px",e.top=d.y+"px",e.width=g+"px",e.height=a.y-d.y+"px",c!==1&&l.Fd(m,c),this.n.appendChild(m)};return c}})();ovi.provide("nokia.maps.map.IView");ovi.provide("nokia.maps.map.ICam");ovi.provide("nokia.maps.map._EngineTransition");
(function(e){var l=ovi.extend,h={"2d-3d":void 0,"3d-2d":{},"2d-panorama":{altitude:27.26},"panorama-2d":{altitude:27.26,pitch:0,yaw:0},"3d-panorama":{pitch:0,altitude:20},"panorama-3d":{pitch:0}},d={"2d-3d":{},"3d-2d":void 0,"2d-panorama":{pitch:90},"panorama-2d":{altitude:27.26},"3d-panorama":{pitch:90},"panorama-3d":{pitch:0}};e.map.Vr=new ovi.Class({start:function(){this.inProgress=!0},finish:function(){this.inProgress=!1},getHandoverCam:function(c,d,b){c=h[d+"-"+c];return c===void 0?c:l({},b,
c)},getDestinationCam:function(c,e,b){c=d[e+"-"+c];return c===void 0?c:l({},b,c)}})})(nokia.maps);ovi.provide("nokia.maps.language.Manager");
(function(e){var l=e.util.getRootNameSpace("nokia.maps").Language;e.language.Manager=ovi.Class({translateToken:function(e,d,c){c=c||l.translations;c=c[e];d&&c==null&&ovi.warn("Translation: Cannot translate token: "+e);return c||e},translate:function(h,d,c){var c=c||/__i18n_([a-z\.]*_[a-z0-9]*)__/g,g=this,b=l.translations;return h.replace(c,function(c,h){(h==null||typeof h==="number")&&e.util.d("keyRegexp does not contain a valid token group");return g.translateToken(h,d,b)})}})})(nokia.maps);ovi.provide("nokia.maps.map.HitArea");
(function(){var e=Math,l=e.PI/180,h=e.ceil,d=e.min,c=e.sin,g=e.cos,b=nokia.maps.util,f=b.Point,r=nokia.maps.map.HitArea=new ovi.Class({initialize:function(a,f){var e=(f=[].concat(f)).length,p=e,m,r,s,v,u;this.values=f;for(this.type=a;p--;)isNaN(f[p]=f[p])&&b.d("Given argument is not the array of numbers");a==="rect"&&e>3&&(f=[+f[0],+f[1],+f[2],+f[1],+f[2],+f[3],+f[0],+f[3]],a="poly");if(a==="circle"&&e>2&&(s=+f[2])>0){m=+f[0];r=+f[1];p=d(h(s)*2,40);v=360/p;for(f=[];p--;)u=v*p*l,f.push(m+c(u)*s,r+
g(u)*s);a="poly"}if(a==="poly"&&e&&!(f.length%2))this.Yb=f;!this.Yb&&b.d("bad polygon")},Statics:{from:function(a){return a instanceof r?a:new r(a.type,a.values?a.values:a.coords)}},hitTest:function(a,b,c){return f.isCoveredBy(a,b,this.Yb,c,!0)}})})();ovi.provide("nokia.maps.util.ColorHelper");
(function(e){function l(a){var b;if(a.charAt(0)==="#")b=f[a.length]?a:null;else if(a.substr(0,3)==="rgb"){b=a.match(/\d+(\.\d+)?/g);var c=b.length;b=c>2&&c<5?["#",d(+b[0]),d(+b[1]),d(+b[2]),c>3?d(+b[3]*255):"ff"].join(""):null}b||e.d("Invalid color definition: "+a);return b}function h(a){return!/^(#|rgb).*/.test(a)}function d(a){return a<16?"0"+g(a).toString(16):g(a).toString(16)}function c(a){a=b(a,16);return(a<<4)+a}var g=Math.round,b=parseInt,f={4:function(a){return["#",a.charAt(1),a.charAt(1),
a.charAt(2),a.charAt(2),a.charAt(3),a.charAt(3),"ff"].join("")},5:function(a){return["#",a.charAt(1),a.charAt(1),a.charAt(2),a.charAt(2),a.charAt(3),a.charAt(3),a.charAt(4),a.charAt(4)].join("")},7:function(a){return a+"ff"},9:function(a){return a}},r={4:function(a){return[c(a.charAt(1)),c(a.charAt(2)),c(a.charAt(3)),255]},5:function(a){return[c(a.charAt(1)),c(a.charAt(2)),c(a.charAt(3)),c(a.charAt(4))]},7:function(a){a=b(a.substring(1),16);return[a>>16&255,a>>8&255,a&255,255]},9:function(a){a=b(a.substring(1),
16);return[a>>24&255,a>>16&255,a>>8&255,a&255]}};e.ColorHelper={toInternal:function(a){return h(a)?a:(a=l(a),f[a.length]?f[a.length](a):a)},toRGBA:function(a,b){return h(a)?[0,0,0,255]:(b||(a=l(a)),r[a.length](a))},getHex3:function(a,b){return h(a)?a:(b||(a=l(a),a=f[a.length]?f[a.length](a):a),a.substr(0,7))},getAlpha:function(a,c){return h(a)?1:(c||(a=l(a),a=f[a.length]?f[a.length](a):a),b(a.substr(7,2),16)/255)},toRandomRGBA:function(a,b){if(h(a))return"000000ff";else{for(var a=this.toRGBA(a,b),
c=0;c<4;c++)a[c]=""+d(c<3?Math.floor(Math.random()*(a[c]-0+1))+0:a[c]);return a.join("")}}}})(nokia.maps.util);ovi.provide("nokia.maps.map._packaging.components-nokia");ovi.provide("nokia.maps.dom.KeyCodes");
(function(){function e(d,c){for(var e=c.length;e--;)l[c[e]]=d+e}var l={BACKSPACE:8,TAB:9,NUM_CENTER:12,ENTER:13,SHIFT:16,CTRL:17,ALT:18,PAUSE:19,CAPS_LOCK:20,ESC:27,META:91,CONTEXT_MENU:93,CMD_LEFT:91,CMD_RIGHT:93};e(32,["SPACE","PAGE_UP","PAGE_DOWN","END","HOME","LEFT","UP","RIGHT","DOWN"]);e(44,["PRINT_SCREEN","INSERT","DELETE"]);e(48,["ZERO","ONE","TWO","THREE","FOUR","FIVE","SIX","SEVEN","EIGHT","NINE"]);e(96,["NUM_ZERO","NUM_ONE","NUM_TWO","NUM_THREE","NUM_FOUR","NUM_FIVE","NUM_SIX","NUM_SEVEN",
"NUM_EIGHT","NUM_NINE"]);e(112,["F1","F2","F3","F4","F5","F6","F7","F8","F9","F10","F11","F12"]);for(var h=65;h<=90;h++)l[String.fromCharCode(h).toUpperCase()]=h;nokia.maps.dom.KeyCodes=l})();ovi.provide("nokia.maps.map.render.Capabilities");
(function(){if(!nokia.maps.util.getConstructor(nokia.maps.map.render.Capabilities))var e=nokia.maps,l={min:0,max:0},h=(e.map.render.Capabilities=function(d){return e.util.proto(d,h,!0,!0)}).prototype={view:{heading:l,tilt:l,incline:l,distance:l,zoom:{min:-1/0,max:1/0}},cam:{fov:{min:70,max:70}},altMode:{GL:!0,OL:!1,SL:!1,SB:!1,WE:!1,WG:!1},provider:{tile:{bmp:!0,gfx:!1,mesh:!1},object:{spatial:!0,marker:!0,decal:!1}},ui:17,capture:!1,ZOOM:1,HEADING:2,TILT:4,INCLINE:8,COORD:16,FOV:32,SIZE:64}})();
ovi.provide("nokia.maps.util.EventTarget");
(function(e){var e=e.EventTarget=function(e){var e=e||this,d;if(!e.Wt)for(d in l)d in e||(e[d]=l[d]);return e},l={Wt:!0,addListener:function(e,d){var c=this.Vk||(this.Vk={}),c=c[e]||(c[e]=ovi.Array([]));c.indexOf(d)<0&&c.push(d)},removeListener:function(e,d){var c=this.Vk,g,b;if(c&&(g=c[e]))b=g.indexOf(d),b>=0&&(g.splice(b,1),b<=g.Q&&--g.Q),g.length||delete c[e]},dispatch:function(e){var d=this.Vk,c;e.target=this;if(d&&(c=d[e.type])){for(d=0;d<c.length;d++)c.Q=d,c[d].call(this,e),d=c.Q;c.Q=NaN}return!e.defaultPrevented}};
ovi.extend(e.prototype,l)})(nokia.maps.util);ovi.provide("nokia.maps.map.provider.NullObjectProvider");(function(e){e.map.provider.NullObjectProvider=new ovi.Class({$f:function(){},Sh:function(){},qc:function(){},requestBBox:function(){return[]},cancelBBoxRequest:function(){},adopt:function(e){if(e.e)return!1;e.e=this;return e},orphan:function(e){if(e.e!==this)return!1;e.e=null;return e}})})(nokia.maps);ovi.provide("nokia.maps.geo.PixelProjection");
(function(e){var l=e.util,h=l.Point,d=l.d,e=e.geo.PixelProjection=function(c,e,b,f,h){(this.p=c)&&(this.w=+e)>0&&(this.h=+b)>0||d();if(f)this.x=+f;if(h)this.y=+h};ovi.extend(e.prototype,{x:0,y:0,geoToPixel:function(c){c=this.p.latLngToPoint(c.latitude,c.longitude);return new h(c.x*this.w-this.x,c.y*this.h-this.y)},latLngToPixel:function(c,d){var b=this.p.latLngToPoint(c,d);return new h(b.x*this.w-this.x,b.y*this.h-this.y)},pointToPixel:function(c){return new h(c.x*this.w-this.x,c.y*this.h-this.y)},
xyToPixel:function(c,d){return new h(c*this.w-this.x,d*this.h-this.y)},pixelToPoint:function(c){return new h((c.x+this.x)/this.w,(c.y+this.y)/this.h)},xyToPoint:function(c,d){return new h((c+this.x)/this.w,(d+this.y)/this.h)},pixelToGeo:function(c){return this.p.xyToGeo((c.x+this.x)/this.w,(c.y+this.y)/this.h)},xyToGeo:function(c,d){return this.p.xyToGeo((c+this.x)/this.w,(d+this.y)/this.h)}})})(nokia.maps);ovi.provide("nokia.maps.map.component.KeyControl");
(function(e){function l(){this.values={}}function h(b,c,d,a,e,g,h,m){this.Xt=b;this.hq=c;this.iq=d;this.jq=a;this.ar=e;this.br=g;this.cr=h;this.Tr=m}var d=e.map.component,c=e.dom.KeyCodes,g={duration:function(){return 600},power:function(){return 0.35},ease:e.util.animation.easeFunctions.EASE_OUT_CIRC};h.prototype={applies:function(b){var d=this.Xt,e=d&1024,a=d&2048,g=d&4096,k=d&8192;(d=b[d-(e?1024:0)+(a?2048:0)+(g?4096:0)+(k?8192:0)])&&(d=e&&b[c.SHIFT]||!e&&!b[c.SHIFT]);d&&(d=a&&b[c.CTRL]||!a&&!b[c.CTRL]);
d&&(d=g&&b[c.ALT]||!g&&!b[c.ALT]);d&&(d=k&&b[c.META]||!k&&!b[c.META]);return d}};l.prototype={add:function(b,c,d,a,e,g,l,m){this.values[b]=new h(b,c,d,a,e,g,l,m)},isMapped:function(b){var c=this.values,d;for(d in c)if(c.hasOwnProperty(d)&&d&b)return!0},remove:function(b){delete this.values[b]},query:function(b){var c=[],d=this.values,a;for(a in d)d[a].applies(b)&&c.push(d[a]);return c}};l.MOD_SHIFT=1024;l.MOD_ALT=1024;l.MOD_CTRL=1024;l.MOD_META=8192;d.KeyControl=new ovi.Class({c:"KeyControl",o:"0.0.0.1",
Extends:d.Component,Statics:{CAM_KEYMAP:function(){var b=new l;b.add(c.UP,0,0,0,-0.015);b.add(c.DOWN,0,0,0,0.015);b.add(c.LEFT,0,0,0,0,0.015);b.add(c.RIGHT,0,0,0,0,-0.015);b.add(1024|c.RIGHT,0,0,0,0,-0.015);b.add(1024|c.LEFT,0,0,0,0,0.015);b.add(1024|c.UP,0,0,0,-0.015);b.add(1024|c.DOWN,0,0,0,0.015);b.add(107,0,0,0,0,0,0,0.02);b.add(109,0,0,0,0,0,0,-0.02);b.add(187,0,0,0,0,0,0,0.02);b.add(189,0,0,0,0,0,0,-0.02);b.add(171,0,0,0,0,0,0,0.02);b.add(173,0,0,0,0,0,0,-0.02);return b}(),VIEW_KEYMAP:function(){var b=
new l;b.add(c.UP,0,0.002);b.add(c.DOWN,0,-0.002);b.add(c.LEFT,-0.002);b.add(c.RIGHT,0.002);b.add(107,0,0,0.001);b.add(109,0,0,-0.001);b.add(187,0,0,0.001);b.add(189,0,0,-0.001);b.add(171,0,0,0.001);b.add(173,0,0,-0.001);b.add(1024|c.RIGHT,0,0,0,0,0.015);b.add(1024|c.LEFT,0,0,0,0,-0.015);b.add(1024|c.UP,0,0,0,0.015);b.add(1024|c.DOWN,0,0,0,-0.015);return b}(),KeyMap:l},initialize:function(){this.tj=ovi.bind(this,this.tj);this.uj=ovi.bind(this,this.uj);this.We=ovi.bind(this,this.We);this.Wa=ovi.bind(this,
this.Wa);this.Rk=ovi.bind(this,this.Rk);this.tm=0;this.xs=d.KeyControl.CAM_KEYMAP;this.aw=d.KeyControl.VIEW_KEYMAP;this.Ue=null;this.Dn("view");this.Td={}},attach:function(b){this._super(b);b.addListener("keydown",this.tj);b.addListener("keyup",this.uj);b.addListener("blur",this.We);b.addListener("focus",this.We);b.addListener("dragstart",this.Wa)},detach:function(b){b.removeListener("keydown",this.tj);b.removeListener("keyup",this.uj);b.removeListener("blur",this.We);b.removeListener("focus",this.We);
b.removeListener("dragstart",this.Wa);this._super(b)},Dn:function(b){this.Qs=b;switch(b){case "cam":this.Ue=this.xs;break;case "view":this.Ue=this.aw}},Uk:function(b,c){b.zoom=c?Math.ceil(b.zoom):Math.floor(b.zoom);b.distance=void 0;return b},Rk:function(b,c){return this.Uk(ovi.extend({},c),c.zoom-b.zoom>0)},bs:function(){return!1},jp:function(b){var c=b.length,d=c,a,e,k,h,m,l,s,v;for(e=k=h=m=l=s=v=0;c--;)a=b[c],e===0&&(e=a.hq?a.hq:0),k===0&&(k=a.iq?a.iq:0),h===0&&(h=a.jq?a.jq:0),m===0&&(m=a.ar?a.ar:
0),l===0&&(l=a.br?a.br:0),s===0&&(s=a.cr?a.cr:0),v===0&&(v=a.Tr?a.Tr:0);d?(this.tm||this.mapDisplay.beginControl(this.Qs,g),this.mapDisplay.control(null,e,k,h,m,l,s,h?0:v)):this.tm&&this.mapDisplay.endControl(this.Rk);this.tm=d},Uu:function(b){var c;this.Ue.isMapped(b)&&!this.Td[b]&&(this.Td[b]=1,c=this.Ue.query(this.Td),this.jp(c));return c?c.length:0},Qq:function(b){var c;this.Ue.isMapped(b)&&this.Td[b]&&(delete this.Td[b],c=this.Ue.query(this.Td),this.jp(c));return c?c.length:0},tj:function(b){var c=
b.nativeEvent;this.Uu(c.keyCode||c.which)&&b.preventDefault()},uj:function(b){b=b.nativeEvent;this.Qq(b.keyCode||b.which)},We:function(){var b=this.Td,c;for(c in b)this.Qq(b[c])},Wa:function(){this.mapDisplay.endControl(this.bs)},isCompatible:function(){this.mapDisplay.baseMapType===nokia.maps.map.Display.PANORAMA?this.Dn("cam"):this.Dn("view");return!0}})})(nokia.maps);ovi.provide("nokia.maps.map.render.p2d.capabilities");var lc=nokia.maps,mc=lc.map.render,nc=lc.dom.Page.browser;
mc.p2d.capabilities=mc.Capabilities({view:{distance:{max:1/0},zoom:{min:-8,max:22}},cam:{fov:{min:70,max:70}},provider:{tile:{gfx:!0}},capture:(!nc.msie||nc.version>=9)&&!nc.webkit});ovi.provide("nokia.maps.map.provider.Provider");
(function(){var e=0,l=Math,h=l.min,d=l.max,c=[],g=nokia.maps.util.Event;nokia.maps.map.provider.Provider=new ovi.Class({methodsToBind:[],staticsToBind:[],Extends:nokia.maps.util.EventTarget,initialize:function(b){var c=this;ovi.extend(c,b);if(b&&"strictUpdate"in b&&!("strictInvalid"in b))c.strictInvalid=c.strictUpdate;c.id=e++;c.max=h(c.max,30);c.min=d(c.min,0);b=d(0,c.updateCycle);if(b>0)c.Uv=setInterval(function(){c.ho()},b*1E3);c.Ua={};c.Sv=function(){c.ho();c.Pr=0};c.qs()},pType:1,min:0,max:-1,
label:"",description:"",strictUpdate:!1,strictInvalid:!1,kb:Math.pow(-2,53),providesLevel:function(b){return b>=this.min&&b<=this.max},getInvalidationMark:function(){return this.kb},update:function(){this.Pr||(this.Pr=setTimeout(this.Sv,0))},ho:function(){++this.kb;this.dispatch(new g("update"))},getCopyrights:function(){return c},shutdown:function(){clearInterval(this.Uv);delete this.nw},ps:function(b){for(var c=this.methodsToBind,d=c.length;d--;)this[c[d]]=ovi.bind(b,b[c[d]])},qs:function(){for(var b=
this,c=b.staticsToBind,d=c.length;d--;)b[c[d]]=function(a){return function(){var d=b.wt();return d[c[a]].apply(d,arguments)}}(d)}})})();ovi.provide("nokia.maps.map.provider.RemoteObjectProvider");
(function(e){(function(){var l;ovi.extend((l=function(e){this.kq=e}).prototype,{getBBox:function(){return this.kq.getBoundingBox()},getObject:function(){return this.kq},cancel:e.util.A});return l})();e.map.provider.RemoteObjectProvider=new ovi.Class({Extends:e.map.provider.Provider,initialize:function(e){this._super(e)},requestBBox:function(){},cancelBBoxRequest:function(){}})})(nokia.maps);ovi.provide("nokia.maps.map.provider.BitmapProvider");
nokia.maps.map.provider.BitmapProvider=new ovi.Class({Extends:nokia.maps.map.provider.Provider,request:function(e,l,h){var d=this,c,g=this.getBoundingBox();if(g.intersects(e))return e=this.getId(),this.cache&&(c=this.cache.get(e)),c===void 0&&!l&&(c=this.create(e,g,l)),l||c.send(function(b){d.cache&&b.state!==void 0&&d.cache.add(b.id,b);h(b)}),c},getInvalidations:function(e){return(e<this.getInvalidationMark())*1}});ovi.provide("nokia.maps.map.provider.CanvasProvider");
(function(){function e(e,d,c){this.id=e;this.bbox=d;this.provider=c}var l;ovi.extend(e.prototype,{send:function(e){var d=this;this.data=l=l||document.createElement("canvas");this.provider.draw(this.data,function(c,g){d.state=g;d.data=c;e(d)})},abort:function(){}});nokia.maps.map.provider.CanvasProvider=new ovi.Class({Extends:nokia.maps.map.provider.BitmapProvider,initialize:function(e){this._super(e)},create:function(h,d){return new e(h,d,this)},getId:function(){return this.id},getInvalidations:function(e){return(e<
this.getInvalidationMark())*1}});nokia.maps.map.provider.CanvasProvider.Request=e})();ovi.provide("nokia.maps.map.provider.PanoramaProvider");
(function(e){function l(){var d=e.map.render.panorama&&e.map.render.panorama.Engine;d&&d.setAppIdAndAppCode(h.app_id,h.app_code)}e.map.provider.PanoramaProvider=new ovi.Class({Extends:e.map.provider.Provider,methodsToBind:["getPanoramaId"],staticsToBind:["hasCoverage","isCovered","getClosestPanorama","loadCoverage"],label:"StreetLevel",initialize:function(d){this._super(d);this.pType=2;this.min=this.max=22;this.version="newest";this.baseUrl=d.baseUrl},wt:function(){return e.map.render.panorama.Engine},
getCopyrights:function(d,c){return e.map.js.copyrights.get("panorama",d,c)},setTileVersion:function(d){this.version=d||"newest";this.No()},setBaseUrl:function(d){this.baseUrl=d||this.baseUrl;this.No()},No:function(){var d=e.map.render.panorama&&e.map.render.panorama.Engine;d&&typeof d.setVersion==="function"?d.setVersion(this.version):d&&typeof d.setConfiguration==="function"&&d.setConfiguration({MRSBaseUrl:"http://1."+this.baseUrl+"rcdistonlytile/"+this.version+"/normal.day/",UseSSL:h.secureConnection===
"force",RequestParam:{xnlp:"CL_JSMv"+encodeURIComponent("2.5.4")}})}});var h=nokia.maps.util.getRootNameSpace("nokia.maps").Settings;h.addObserver("app_id",l);h.addObserver("app_code",l)})(nokia.maps);ovi.provide("nokia.maps.map.provider.GlobeProvider");
(function(e){e.map.provider.GlobeProvider=new ovi.Class({Extends:e.map.provider.Provider,label:"3d",initialize:function(e){this._super(e);this.pType=4;this.max=Infinity;this.min=0},getCopyrights:function(l,h){return e.map.js.copyrights.get("globe",l,h)}})})(nokia.maps);ovi.provide("nokia.maps.map.overlay.ObjectProvider");
nokia.maps.map.overlay.ObjectProvider=new ovi.Class({Extends:nokia.maps.map.provider.Provider,Mixins:[nokia.maps.util.OObject],readyObjects:null,cache:nokia.maps.util.A,finishRequest:function(e,l){l&&(this.notify(e),this.cache(e))},notify:function(e){this.set("readyObjects",e)}});ovi.provide("nokia.maps.map.DisplayContainer");
(function(){var e=nokia.maps,l=e.dom,h=ovi.Array.indexOf,d=e.util;nokia.maps.map.DisplayContainer=new ovi.Class({initialize:function(c,e){function b(a){if(r.enabled){var b=v.getClientRect(m),d=+a.pageX,f=+a.pageY,e,g,k=a.type,l=a.dataTransfer,p,y=null;p=null;var s=C,w=-1;if(c.width!==c.da.offsetWidth||c.height!==c.da.offsetHeight)c.Cf(c.da.offsetWidth,c.da.offsetHeight),(a.type=="resizestart"||a.type=="resize")&&c.yv(16);a.display=c;if(!x[k]&&d===d&&f===f&&(a.displayX=e=d-b.left,a.displayY=g=f-b.top,
k!=="drag"&&k!=="drop"&&k!=="dragend"&&k!=="dragleave"&&k!=="gesturestart"&&k!=="gesturechange"&&k!=="gestureend"))a.displayObjects=y=c.getObjectsAt(a.displayX,a.displayY);p=y&&y.length>0&&y[0]||c;if(k==="dragstart"){for(p=I(p);p&&p.length;){if(p[0]&&p[0].isDraggable)break;p.shift()}B=p=p&&p[0]||c;A=!1}else if(k==="drag")p=B;else if(l&&(k==="dragenter"||k==="dragover"||k==="dragleave")){k==="dragleave"&&(p=null);D!==p&&(k=new q({type:"dragleave",target:D,relatedTarget:B,pageX:d,pageY:f,display:c,
displayX:e,displayY:g,dataTransfer:l}),M(D,k),D=null,A=!1);if(!D&&p)k=new q({type:"dragenter",target:D=p,relatedTarget:B,pageX:d,pageY:f,display:c,displayX:e,displayY:g,dataTransfer:l}),M(D,k),A=k.defaultPrevented;A?(k=new q({type:"dragover",target:D,relatedTarget:B,pageX:d,pageY:f,display:c,displayX:e,displayY:g,dataTransfer:l}),M(D,k)):l.dropEffect="none";a.cancel();return}else if(k==="drop"){D&&A?(k=a.clone(),k.target=D,M(D,k)):l.dropEffect="none";a.cancel();return}else if(k==="dragend")a.target=
p=B,B=D=null,A=!1;else{if(x[k]||C&&C!==p)d=a.clone(),d.type="mouseout",d.target=C,d.relatedTarget=x[k]?a.relatedTarget:p,M(C,d),C=null;for(;++w<E.length;)if((!y||h(y,E[w])<0)&&(E[w]!==c||x[k]))d=a.clone(),d.type="mouseleave",d.target=E[w],delete d.relatedTarget,M(d.target,d),E.splice(w--,1);if(!x[k]&&!C){if(h(E,p)<0)d=a.clone(),d.type="mouseenter",d.target=p,delete d.relatedTarget,M(p,d),E.push(p);d=a.clone();d.type="mouseover";d.target=C=p;d.relatedTarget=u[k]?a.relatedTarget:s;M(C,d)}}if(!x[k]&&
!u[k])a.target=p,M(p,a,"isRemote"in p&&p.isRemote?[c]:void 0)}}function f(a,b,c){return(b in w?k:m)[a+"Listener"](b,c,void 0)}var r=this,a=l.EventTarget,q=l.Event,k=a(l.gb(e,"div")),p=l.gb(k,"div"),m=a(l.gb(p,"div")).enableDrag(),y=l.gb(k,"div"),s=l.gb(p,"div"),c=a(c).enableDrag(),v=r.hn=l.Page(m),u={mouseover:!0,mouseenter:!0},x={mouseout:!0,mouseleave:!0,blur:!0},w={keydown:!0,keyup:!0,focus:!0,blur:!0},z={dragstart:!0,drag:!0,dragenter:!0,dragover:!0,drop:!0,dragleave:!0,dragend:!0,mouseover:!0,
mouseout:!0,mousedown:!0,mousemove:!0,mouseup:!0,keydown:!0,keyup:!0,focus:!0,blur:!0,tap:!0,dbltap:!0,click:!0,dblclick:!0,longpress:!0,wheel:!0,contextmenu:!0,resizestart:!0,resize:!0,resizeend:!0,beforeunload:!0,touchstart:!0,touchmove:!0,touchend:!0},B,D,A,C=null,E=[],M=a.dispatchEvent,I=a.getDispatchPath,K;r.doc=e.ownerDocument;r.s=e;r.enabled=!0;k.tabIndex=0;(r.da=k).style.cssText+="position:relative;width:100%;height:100%;overflow:hidden;outline:none;";c.Ed("width",k.offsetWidth);c.Ed("height",
k.offsetHeight);(r.yf=m).style.cssText+="position:absolute;z-index:0;width:100%;height:100%;overflow:hidden;";if(ovi.browser.msie)m.style.backgroundColor="white",nokia.maps.dom.Fd(m,0);(r.Ui=p).style.cssText+="position:absolute;z-index:0;width:100%;height:100%;overflow:hidden;";(r.R=y).style.cssText+="z-index:0;";r.fo=l.Page(y);r.ib=s;for(K in z)f("add",K,b);r.addEvent=function(a){z[a]=!0;return f("add",a,b)};r.removeEvent=function(a){delete z[a];return f("remove",a,b)};r.containerDestroy=function(){var a=
this,c;for(c in z)f("remove",c,b);try{e.removeChild(k)}catch(h){}setTimeout(function(){for(var b in a)a[b]=typeof a[b]=="function"?d.A:null},0)}}})})();ovi.provide("nokia.maps.map.js.copyrights");ovi.provide("nokia.maps.resources.copyrights.json");nokia.maps.resources.copyrights.json='/*\r\n * Fetched 2010-11-08 from\r\n * http://maptile.maps.svc.ovi.com/maptiler/v2/copyright/newest?referer=&token=&output=xml&callback_func=BAR&callback_id=FOO\r\n *\r\n * Manually correction by Thomas Fischer:\r\n * - add missing default copyrights (whole world, level 0-20) for "normal" and "hybrid"\r\n * - fix wrong label for Chineese "normal" map from "NAVTEQ 2010" into "NavInfo 2010"\r\n * - changed all "2010" to "2011"\r\n *\r\n * Update by Michal Aichinger\r\n * - changed all "2011" to "2012"\r\n * \r\n * - change all "2012" to "2013"\r\n * - all labels should be in form "@ year company", not "@ company year"\r\n * - replace all Navteq by Nokia\r\n * - fixed hybrid copyright to not repeat Nokia for zoom levels 9 - 20, hybrid is copyrighted to Nokia and DigitaGlobe in whole space.  \r\n *\r\n * Update by Radek\r\n * - adding C3 Technologies for globe\r\n * - adding INEGI to terrain since it is in fact terrain hybrid\r\n * - currently we are loading copyrights from http://maps.nlp.nokia.com/maptile/2.1/copyright/newest and we use this one to updated missing features (or as fallback)\r\n * \r\n * Update by J\u00f6rg\r\n * - changing default copyright to 1987 - 2013 HERE\r\n * \r\n * Update by Tomas T.\r\n * - updating 2013 to 2014\r\n */\r\n\r\n{\r\n\t"panorama": [\r\n\t\t{\r\n\t\t\t"minLevel": 0,\r\n\t\t\t"maxLevel": 22,\r\n\t\t\t"label": "1987 - 2014 HERE",\r\n\t\t\t"alt": "copyright 2014 Nokia All Rights Reserved"\r\n\t\t}\r\n\t],\r\n\t\r\n\t"globe": [\r\n\t\t{\r\n\t\t\t"minLevel": 0,\r\n\t\t\t"maxLevel": 22,\r\n\t\t\t"label": "1987 - 2014 HERE",\r\n\t\t\t"alt": "copyright 2014 Nokia All Rights Reserved"\r\n\t\t},\r\n\t\t{\r\n\t\t\t"minLevel": 0,\r\n\t\t\t"maxLevel": 22,\r\n\t\t\t"label": "2014 DigitalGlobe",\r\n\t\t\t"alt": "copyright 2014 DigitalGlobe, Inc."\r\n\t\t}\r\n\t],\r\n\t\r\n\t"normal": [\r\n\t\t{\r\n\t\t\t"minLevel": 0,\r\n\t\t\t"maxLevel": 20,\r\n\t\t\t"label": "1987 - 2014 HERE",\r\n\t\t\t"alt": "copyright 1987 - 2014 HERE All Rights Reserved"\r\n\t\t},\r\n\t\t{\r\n\t\t\t"minLevel": 4,\r\n\t\t\t"maxLevel": 8,\r\n\t\t\t"label": "2014 INEGI",\r\n\t\t\t"alt": "copyright 2014 INEGI All Rights Reserved",\r\n\t\t\t"boxes": [\r\n\t\t\t\t[14.5333, -118.3666, 32.7166, -86.7]\r\n\t\t\t]\r\n\t\t}\r\n\t],\r\n\t"satellite": [\r\n\t\t{\r\n\t\t\t"minLevel": 0,\r\n\t\t\t"maxLevel": 20,\r\n\t\t\t"label": "1987 - 2014 HERE",\r\n\t\t\t"alt": "copyright 1987 - 2014 HERE All Rights Reserved"\r\n\t\t}\r\n\t],\r\n\t"hybrid": [\r\n\t\t{\r\n\t\t\t"minLevel": 0,\r\n\t\t\t"maxLevel": 20,\r\n\t\t\t"label": "1987 - 2014 HERE",\r\n\t\t\t"alt": "copyright 1987 - 2014 HERE All Rights Reserved"\r\n\t\t},\r\n\t\t{\r\n\t\t\t"minLevel": 4,\r\n\t\t\t"maxLevel": 8,\r\n\t\t\t"label": "2014 INEGI",\r\n\t\t\t"alt": "copyright 2014 INEGI All Rights Reserved",\r\n\t\t\t"boxes": [\r\n\t\t\t\t[14.5333, -118.3666, 32.7166, -86.7]\r\n\t\t\t]\r\n\t\t}\r\n\t],\r\n\t"terrain": [\r\n\t\t{\r\n\t\t\t"minLevel": 0,\r\n\t\t\t"maxLevel": 20,\r\n\t\t\t"label": "1987 - 2014 HERE",\r\n\t\t\t"alt": "copyright 1987 - 2014 HERE All Rights Reserved"\r\n\t\t},\r\n\t\t{\r\n\t\t\t"minLevel": 0,\r\n\t\t\t"maxLevel": 20,\r\n\t\t\t"label": "SRTM V4, 2014, CIAT",\r\n\t\t\t"alt": "SRTM V4, 2014, CIAT"\r\n\t\t},\r\n\t\t{\r\n\t\t\t"minLevel": 4,\r\n\t\t\t"maxLevel": 8,\r\n\t\t\t"label": "2014 INEGI",\r\n\t\t\t"alt": "copyright 2014 INEGI All Rights Reserved",\r\n\t\t\t"boxes": [\r\n\t\t\t\t[14.5333, -118.3666, 32.7166, -86.7]\r\n\t\t\t]\r\n\t\t}\r\n\t]\r\n}';
(function(){function e(b,c){h(c,function(c,d){a[c]||(a[c]={});b[c]||(b[c]=[]);a[c][d.label]||b[c].unshift(d)})}function l(a,b){var c=b.boxes,d,f;if(c instanceof Array)for(d=c.length;d--;)f=c[d],c[d]=new r([f[2],f[1]],[f[0],f[3]],!0)}function h(a,b){var c,d;for(c in a)if(a.hasOwnProperty(c))for(d=a[c].length;d--;)b(c,a[c][d])}var d=nokia.maps,c=d.Config,g=d.net.Request,b=d.util.getRootNameSpace("nokia.maps").Settings,f=nokia.maps.util.services,r=d.geo.BoundingBox,a={},q=d.resources.copyrights=eval("("+
nokia.maps.resources.copyrights.json+")")||{},k=c.getDefault("copyrights"),d=new ovi.Class({Extends:d.util.OObject,initialize:function(){h(q,l);this.set("copyrights",q);this.onCopyrightLoaded=ovi.bind(this,this.onCopyrightLoaded);this.$p=!1},loadCopyright:function(){var a,d;d=b.serviceMode;a=c.getDefault("secureConnection");if(!this.$p&&k)a=a==="force"||a==="prefer"?k.replace("http://","https://"):k,a=a.replace("{serviceMode}",d?"."+d:""),a=f.addNlpParams(a),d=new g(g.JSONP,{callbackKey:"callback_func",
standardJSONP:!0}),d.send(a,this.onCopyrightLoaded),this.$p=!0},onCopyrightLoaded:function(b){!b.error&&b.response&&(b=ovi.json.parse(b.response),a={},h(b,function(b,c){l(0,c);a[b]||(a[b]={});a[b][c.label]=!0}),e(b,q),this.set("copyrights",b))},get:function(a,b,c){var d=[],f,e,g,k,h;if(a=this.copyrights[a])for(g=a.length;g--;)if(f=a[g],c>=f.minLevel&&c<=f.maxLevel){if(e=f.boxes){h=0;for(k=e.length;k--;)if(e[k].intersects(b)){h=1;break}}else h=1;h&&d.unshift({label:f.label,alt:f.alt})}return d}});
nokia.maps.map.js.copyrights=new d})();ovi.provide("nokia.maps.css");
(function(e){var l=e.css,h=e.dom.Page.browser,d=e.dom.Page.platform,d=d.ipad||d.iphone||d.ipod,c=h.gecko?"Moz":h.opera?"O":h.msie?"ms":h.webkit?"Webkit":null,d=2*(h.msie&&h.version>=11||h.gecko&&h.version>=10||d||h.safari)|1*!(h.msie&&h.version<10||h.gecko&&h.version<=4),g={};ovi.extend(l,{transformType:d,Zv:c,oo:c?"-"+c.toLowerCase()+"-":"",Lr:c==="O"?"oTransitionEnd":c==="Webkit"?"webkitTransitionEnd":c==="MS"?"MSTransitionEnd":"transitionend",getVendorJsProperty:function(b){return g[b]||(g[b]=
c+b.substr(0,1).toUpperCase()+b.substr(1))},css3Style:function(b,d,e){b=b.style;b[d]=e;c&&(b[this.getVendorJsProperty(d)]=e)},cssTransform:function(b,c){this.css3Style(b,"transform",c)},cssTransformOrigin:function(b,c){this.css3Style(b,"transformOrigin",c)},cssTransformStyle:function(b,c){this.css3Style(b,"transformStyle",c)},cssBackfaceVisibility:function(b,c){this.css3Style(b,"backfaceVisibility",c)},supportsTransition:function(){return!h.msie||h.version>=10},applyMatrix:d&2?function(b,c){var d=
c.rows,a=d[0],e=d[1],d=d[2];b.style[l.getVendorJsProperty("transform")]="matrix3d("+a[0]+","+e[0]+","+d[0]+",0,"+a[1]+","+e[1]+","+d[1]+",0,"+a[2]+","+e[2]+","+d[2]+",0,"+a[3]+","+e[3]+","+d[3]+",1)"}:d&1?function(b,c){var d=c.rows,a=d[0],d=d[1];b.style[l.getVendorJsProperty("transform")]="matrix("+a[0]+","+d[0]+","+a[1]+","+d[1]+","+a[3]+","+d[3]+")"}:function(b,c){var d=c.rows,a=b.style;a.top=d[1][3]+"px";a.left=d[0][3]+"px"},translateXYElement:d&2?function(b,c,d){b.style[l.getVendorJsProperty("transform")]=
"matrix3d(1,0,0,0,0,1,0,0,0,0,1,0,"+c+","+d+",0,1)"}:d&1?function(b,c,d){b.style[l.getVendorJsProperty("transform")]="matrix(1,0,0,1,"+c+","+d+")"}:function(b,c,d){b=b.style;b.top=d+"px";b.left=c+"px"},transformElement:d?function(b,c,d,a,g,k){var h=new e.util.Matrix3D,h=h.translate(c,d,0);a&&(h=h.rotateZ(a));g!==void 0&&g!==1&&(h=h.scale(g,k!==void 0?k:g,1));l.applyMatrix(b,h)}:function(b,c,d){b=b.style;b.left=c+"px";b.top=d+"px"}})})(nokia.maps);ovi.provide("nokia.maps.map.Object");
(function(e){if(!e.util.getConstructor(e.map.Object)){var l=0,h=0,d=function(c,b){var d=c.Na(),e=b.Na(),a,l,k,p=0,m;if(!d||!e)return 0;a=d.length;l=e.length;for(k=a<l?a:l;p<k;p++)if(m=e[p]-d[p])return h?-m:m;return h?a-l:l-a},c={rev:0,sort:function(c,b,f){var e=[],a,l,k=c.length;for(l=0;l<k;l++)((a=c[l]).getIconForRendering||a.drawToTile)&&(b||a.isVisible())&&e.push(a);h=f;e.sort(d);return e},create:function(c){var b=c.s,d;d=null;b&&(d=(d=b.Na())?d.slice():[],d.push(c.zIndex,b.objects.indexOf(c)));
return d}};nokia.maps.map.Object=new ovi.Class({Extends:e.util.OObject,Mixins:e.dom.EventTarget,Statics:{sortByZInfo:c.sort,CHANGE_SPATIAL:1,CHANGE_VISUAL:2,CHANGE_ZINDEX:4},dispatch:function(c){c.display=this.getDisplay();return e.dom.EventTarget.prototype.dispatch.call(this,c)},initialize:function(c){this.e=new e.map.provider.NullObjectProvider;this.id=l++;c&&"draggable"in c?(c.isDraggable=c.draggable,delete c.draggable,this._super(c),c.draggable=c.isDraggable,delete c.isDraggable):this._super(c);
this.addObserver("*",this.$b,this)},s:null,CHANGE_SPATIAL:1,CHANGE_VISUAL:2,CHANGE_ZINDEX:4,isEventTarget:!0,zIndex:0,visibility:!0,u:"object",Lc:function(){return this.Nb||(this.Nb={})},destroy:function(){var c=this.s;c&&c.objects.remove(this);this.removeAllListeners();this.e=null;this.removeObserver("*",this.$b,this)},getInvalidations:function(c){var b=this.Nb;return b?(b[1]>c)*1|(b[2]>c)*2|(b[4]>c)*4:0},$b:function(c,b){this.ia(b,0)},getProvider:function(){return this.e},getParent:function(){return this.s},
getRoot:function(){for(var c=this,b;b=c.s;)c=b;return c},getDisplay:function(){var c=this.getRoot();return c.u==="display"?c:null},isVisible:function(){var c=this,b=!1;do b=c.visibility;while(b&&(c=c.s));return b},ia:function(c,b){var d;d=this.e;var e;b|=c==="zIndex"?4:c==="visibility"?2:0;e=d.qc(this,b);d=this.Lc();b&1&&(d[1]=e);b&2&&(d[2]=e);b&4&&(d[4]=e)},zIndexSetter:function(c){this.Ob();return c},eventListenerSetter:function(c){var b=0,d,e;if(c)for(e in this.removeAllListeners(),c)if((b=ovi.type(d=
c[e]))==="array")for(b=0;b<d.length;b+=3)this.addListenerNS(d[b+2],e,d[b],d[b+1]);else b==="function"&&this.addListenerNS(null,e,d,!1)},Na:function(){var d;if(!(d=this.oc))d=this.oc=c.create(this);return d},Ob:function(){this.oc=void 0},adopt:function(c){return c.adopt(this)},orphan:function(){return this.e.orphan(this)}})}})(nokia.maps);ovi.provide("nokia.maps.map.Container");
(function(){var e=nokia.maps.map,l=nokia.maps.util,h=l.d,d=new ovi.Class({Extends:e.Object,initialize:function(c,d){c&&!c.length&&(d=c,c=void 0);var b=this,f=b.objects=new l.OList;f.Gu=f.L;f.L=function(c,a,d){c===b&&h();var e=c.e,g=c.s;g&&g.objects.remove(c);if(c.orphan()&&c.adopt(b.e))return c.Ob(),f.Gu(c,a,d);g&&g.objects.add(c);c.e=e;h()};f.Hu=f.bc;f.bc=function(b,a){f.get(b);return this.Hu(b,a)};f.addObserver(b.Os,b);b._super(d);c&&f.addAll(c)},u:"container",objectsSetter:function(c){this.objects.clear();
return this.objects.addAll(c)},Os:function(c,d,b,f){var e=this.e,c=c.ha.length;d==="add"?(b.s=this,this.Ap(b)&&this.nj(e.$f,b,[]),f!==c-1&&this.hm(f+1)):(this.Ap(b)&&this.nj(e.Sh,b,[]),b.s=null,b.Ob(),f!==c&&this.hm(f))},nj:function(c,d,b){var f,e;if(this.Op(d)){d=d.objects;for(e=d.getLength();e--;)f=d.get(e),f=this.Op(f)?f.nj(c,f,b):c.apply(this.e,[f].concat(b))}else f=c.apply(this.e,[d].concat(b));return f},Op:function(c){return c instanceof d},Ap:function(c){for(var d=this.e.ev;c=c.s;)if(c===d)return!0;
return!1},getBoundingBox:function(){for(var c=this.objects,d=c.getLength(),b,f=null;d--;)if(b=c.get(d).getBoundingBox())f=!f?b:f.merge(b);return f},ia:function(c,d){d|=c==="zIndex"?4:c==="visibility"?2:0;d&&this.nj(this.e.qc,this,[d])},hm:function(c){for(var d=this.objects.ha,b=d.length;c<b;)d[c++].Ob()},Ob:function(){this._super();this.hm(0)},contains:function(c){for(var d=!1;c&&!(d=c===this);)c=c.s;return d},orphan:function(){for(var c=this.objects,d=c.getLength();d--;)c.get(d).orphan();return this._super()},
adopt:function(c){for(var d=this.objects,b=d.getLength();b--;)d.get(b).adopt(c);return this._super(c)}});if(e.Container.isNs)e.Container=d})();ovi.provide("nokia.maps.map.provider.ImageProvider");
(function(){function e(e,d,c){this.id=e;this.provider=c;this.bbox=d}var l=nokia.maps.dom.imgLoader;ovi.extend(e.prototype,{send:function(e){var d=this;this.state=l.request(this.data=new Image,this.id,function(c,g){d.state=g;e(d)})},abort:function(){l.cancel(this.data)}});nokia.maps.map.provider.ImageProvider=new ovi.Class({Extends:nokia.maps.map.provider.BitmapProvider,initialize:function(e){this._super(e)},create:function(h,d){return new e(h,d,this)},getId:function(){return this.getUrl()},getInvalidations:function(e){return(e<
this.getInvalidationMark())*1}});nokia.maps.map.provider.ImageProvider.Request=e})();ovi.provide("nokia.maps.map.render.p2d.TileLayer");
(function(){var e=Math,l=e.abs,h=e.round,d=e.floor,c=e.log,g=e.LN2,b=e.pow;new Image;var e=nokia.maps,f=e.util,r=f.Point,a=f.qf,q=e.dom,k=e.gfx.Painter.defaultPainter,p=nokia.maps.map.render.p2d.TileLayer=new ovi.Class({initialize:function(a,b,c,d){this.Dd=b.opacity||1;this.n=a;this.e=b;this.Da=d;this.C=a.ownerDocument;this.Xb={};this.vc={};this.hk=0;this.we=new k;this.ld=new r(-1,-1);b.addListener("response",this.sa=ovi.bind(this,this.sa))},Statics:{Sl:function(a,b){return h(c(b.w/a.width)/g)},vp:function(a,
c,d){isNaN(d)&&(d=p.Sl(a,c));return new r(c.w/(b(2,d)*a.width),c.h/(b(2,d)*a.height))},Ks:function(b,c,f,e,g,k,q,z,B,D){var A,C,E,M,I,q=[],B=isNaN(B)?p.Sl(b,c):h(B);if(b.providesLevel(B)){z=z.sub(e);k=b.ic;D=D||p.vp(b,c,B);c=new r(k.x*D.x,k.y*D.y);if(c.x%1||c.y%1)c=c.round(),D.x=c.x/k.x,D.y=c.y/k.y;c=b.pixelProjections[B];g=new r(g.x*c.w-e.x/D.x,g.y*c.h-e.y/D.y);c=new r(a(g.x,k.x),a(g.y,k.y));g=g.sub(c).round();A=(new r(c.x*-D.x,c.y*-D.y)).sub(e).round();c=(new r(k.x*D.x,k.y*D.y)).round();D=c.divide(2);
f=f.sub(e);e=d(g.y/k.y);for(C=A.y;C<f.y;C+=c.y){E=d(g.x/k.x);for(M=A.x;M<f.x;M+=c.x)(I=b.createId(B,e,E))&&q.push({Qf:M,Rf:C,c:I,Vc:B,lv:e,Es:E++,Kq:l(z.x-(M+D.x))+l(z.y-(C+D.y))});e++}}return q}},rc:-1/0,eh:-1/0,fh:-1/0,Rc:0,Th:-1,uh:function(){this.Da(this,this.sm>0)},ta:e.util.A,stop:function(a,b){var c=this.vc,d,f=this.e;if(this.hk)for(d in c)c[d]&&(f.cancel(d),this.sa({data:[d]}));this.vc=a||{};this.hk=b||0},shutdown:function(){this.Da=f.A;this.e.removeListener("response",this.sa);this.Xb={};
q.ac(this.n);this.stop();return this.n},sa:function(){throw Error("_onProviderResponse needs implementation");},Mq:function(a,b,c){var d=0,f=a[b]||(d=1,a[b]=[]);c?f.push(c):a[b]=0;return d},Nu:function(a,b){var c=a[b];return c&&(c.length<2?(a[b]=0,c[0]):c.pop())},Bt:function(a,b){var c=a[b];return c&&c[0]},pn:function(a,b){var c=a[b],d;if(c&&a.hasOwnProperty(b)){for(d=c.length;d--;)this.nn(c[d]);a[b]=0}},Ae:function(a,b,c){this.Mq(c,a,b)},Qi:function(a,b){b||(b={c:a.c});b.Vc=a.Vc;b.rb=a.rb;return b},
Cv:function(a,b){return b.Kq-a.Kq},render:function(a,b,c,d,f,e,g,k,l,q,r,C,E,M){var a=this.e,d=p.vp(a,c,r=isNaN(r)?p.Sl(a,c):r),b=p.Ks(this.e,c,f,e,b,l,q,E,r,d),c=b.length,I,f=this.Xb,l={},q=this.vc,E={},g=0,k=a.getInvalidationMark(),K,Q=0,F=a.strictInvalid,L=this.Dd;this.Th=r;this.ld.x=h(a.ic.x*d.x);this.ld.y=h(a.ic.y*d.y);this.Uc=e;for(C||b.sort(this.Cv);c--;){K=!1;e=b[c];I=e.c;r=this.Nu(f,I);if(!r&&(r=this.Bt(l,I)))K=1;if(!r||!K&&a.getInvalidations(r.rb,this.rc))if(q[I]?(q[I]=0,d=!0):d=E[I]?!0:
a.request(e.Vc,e.lv,e.Es,C),d===!0?(++Q,g+=this.Mq(E,I,e)):d?(e.rb=d,e.Ca=this.jk(d.getNode(this.C)),this.Ae(I,e,l,L)):++Q,r&&(F||d!==!0&&(!C||d!==!1)))this.nn(r),K||this.pn(f,I),r=0;if(r)K&&(r=this.Qi(r)),r.Qf=e.Qf,r.Rf=e.Rf,this.Ae(I,r,l,L)}this.eh=M;if(!C)this.rc=k,this.fh=M;this.stop(E,g);for(I in f)this.pn(f,I);this.Xb=l;this.sm=Q;C||g||this.uh();return!g&&!Q},capture:function(a,b,c){var d=this.Uc,f,e;e=this.e;var g=e.width,k=e.height,h=this.Xb,l,p;b-=d.x;c-=d.y;a.save();a.set("opacity",e.opacity);
for(f in h){d=h[f];for(l=d.length;l--;)e=d[l],p=e.Ca,a.drawImage(p.firstChild||p,0,0,g,k,e.Qf-b,e.Rf-c,g,k)}a.restore()}})})();ovi.provide("nokia.maps.map.render.p2d.MarkerLayer");
(function(e){function l(a){this.tc=a}function h(a){var b=a.parentNode;return k||b&&b.nodeType!==11?q.cloneNode(a,!0):a}var d=[],c=e.util,g=e.map.provider,b=e.map.render.p2d._helpers.geoToScreen,f=c.Point,r=c.Rectangle,a=e.gfx,q=e.dom,k=a.Painter.defaultPainter.isVML;l.prototype.getObject=function(){return this.tc};nokia.maps.map.render.p2d.MarkerLayer=new ovi.Class({initialize:function(a,b,c,d){this.n=a;this.C=a.ownerDocument;this.e=b;this.jm=b instanceof g.LocalObjectProvider;this.le={};this.Fp=
[];this.Io=new e.util.Cache(128);this.Da=d;this.e.addListener("response",this.sa=ovi.bind(this,this.sa))},Rc:0,sa:function(a){var c,d,f,e,g,k,h,l,q,r;if(a.data[0]===this.xf){c=this.Io;f=this.C;k={};q=this.wj;r=this.Uc;g=this.Up;h=a.data[1];for(l=h.length;l--;)e=h[l].getObject(!0),a=e.getIconForRendering(f),d=a.createElement(),d.style.position="absolute",c.add(a.c,d),k[e.id]=[e,this.Vl(e,g,q,r,a),d],this.an(a,d,b(e.coordinate,g).sub(e.anchor),l,!0);this.mn();this.xf=!1;this.le=k}},ta:e.util.A,yb:function(a,
b,c){for(var e=this.le,g=this.Fp,k,h,l=g.length,q,r;l--;)if(h=g[l],k=e[h])if(h=k[1],h.contains(new f(a,b))&&(h=h.topLeft,k=k[0],q=k.hitArea,!q||q.hitTest(a-h.x,b-h.y)))if(r||(r=[]),r.push(k),c)break;return r||d},stop:function(){if(this.xf)this.e.cancelBBoxRequest(this.Vp.bBox,2,this.Vp.zoom),this.xf=!1},shutdown:function(){this.Da=c.A;this.e.removeListener("response",this.sa);this.stop();this.le={};q.ac(this.n);return this.n},rc:-1/0,eh:-1/0,fh:-1/0,render:function(a,c,d,f,e,g,k,q,r,B,D,A,C,E){var f=
this.e,e=f.getInvalidationMark(),q=this.rc,M,I,K,Q,F,L,ea,U,aa,la=0,J,a=Math.round(Math.log(d.w/f.width)/Math.LN2),D=this.n,C=this.le;M={};I=this.Fp;ea=this.Io;U=this.C;aa=!A;J=this.jm;this.Up=d;this.wj=c;this.Uc=g;this.xf&&!A&&this.stop();if(A&&this.Yp!==a){r=[];for(B=I.length;B--;)K=C[I[B]][0],r.push(J?K:new l(K))}else r=f.requestBBox(k,2,a,A);B=r.length;I.length=0;if(!this.xf&&!A)this.xf=r===!0?f.fj(k,a):!1,this.Vp={bBox:k,zoom:a};for(;B--;){if((K=J?r[B]:r[B].getObject(!0))&&K!==!0){k=0;Q=K.id;
a=C[Q];L=b(K.coordinate,d).sub(K.anchor);a&&(F=a[2])?f.getInvalidations(K,q)?k=K.getIconForRendering(U):A||ea.get(K.getIconForRendering(U).c):(F=ea.get(K.getIconForRendering(U).c,A))?F=h(F):A||(k=K.getIconForRendering(U));if(k)F=k.createElement(),F.style.position="absolute",ea.add(k.c,F),F=h(F),a&&(this.ln(D,a[2]),a[2]=F);F&&(k||(k=K.getIconForRendering(U)),a?(a[1]=this.Vl(K,d,c,g,k),C[Q]=0,M[Q]=a):M[Q]=[K,this.Vl(K,d,c,g,k),F],I.push(Q),this.an(k,F,L,B,!1))}if(A&&la===300){aa=!1;break}la++}this.mn();
this.eh=E;if(!A)this.rc=e,this.fh=E;this.le=M;this.Da(this,!1);return aa},Vl:function(a,c,d,e,g){a=b(a.coordinate,c).sub(a.anchor);return new r([a,new f(a.x+g.width,a.y+g.height)])},qw:function(a,b,c,d,e){var g=new f(b,c);return a.contains(g)&&(!d||d.hitTest(b-bbox.topLeft.x,c-bbox.topLeft.y,e))},capture:function(c,d,f){var e=this.Up,g,k=this.le,h=this.Uc,l,q,r;d-=h.x;f-=h.y;for(g in k)h=k[g][0],l=h.icon,q=b(h.coordinate,e).sub(h.anchor),r=q.x-d,q=q.y-f,h.icon.isBitmap?c.drawImage(l.zb,0,0,l.width,
l.height,r,q,l.width,l.height):c.drawGraphics(new a.Graphics(l.getIDL()),0,0,l.width,l.height,r,q,l.width,l.height)}})})(nokia.maps);ovi.provide("nokia.maps.map.render.p2d.dom.MarkerLayer");
(function(){var e=nokia.maps,l=e.css,h=Math.round;e.map.render.p2d.dom.MarkerLayer=new ovi.Class({Extends:e.map.render.p2d.MarkerLayer,initialize:function(d,c,e){this._super.apply(this,arguments);d.className=e.cssClass+"_markerLayer"},an:function(d,c,e,b){d=this.n;l.translateXYElement(c,h(e.x),h(e.y));c.style.zIndex=-b;c.parentNode!==d&&d.appendChild(c)},show:function(){if(this.Rc)this.n.style.display="",this.Rc=0},hide:function(){if(!this.Rc)this.n.style.display="none",this.Rc=!0},mn:function(){var d=
this.n,c=this.le,e,b;if(d.childNodes.length)for(b in c)(e=c[b])&&this.ln(d,e[2])},ln:function(d,c){d.removeChild(c)}})})();ovi.provide("nokia.maps.map.render.p2d.canvas.TileLayer");
(function(){var e=Math.round,l=nokia.maps.util.A;nokia.maps.map.render.p2d.canvas.TileLayer=new ovi.Class({Extends:nokia.maps.map.render.p2d.TileLayer,initialize:function(e,d,c,g){this._super(e,d,c,g);this.useBuffer=c.useBuffer;this.Qd=e.getContext("2d");this.vb=this.ql();this.td=this.vb.getContext("2d");if(this.useBuffer)this.Un=this.ql(),this.zr=this.Un.getContext("2d"),this.ag=this.ql(!0),this.Hi=this.ag.getContext("2d")},ql:function(){var e=this.C.createElement("canvas");e.width=this.n.width;
e.height=this.n.height;return e},ta:function(){var e=this.n,d=e.width,e=e.height;this.Sk(this.vb,d,e);this.useBuffer&&(this.Sk(this.Un,d,e),this.Sk(this.ag,d,e))},Sk:function(e,d,c){e.width=d;e.height=c},sa:function(e){var d=e.data,e=d[0],d=d[1],c=this.vc,g=c[e],b,f=0,l,a=this.Dd;if(g){if(d)for(l=g.length;f<l;)(b=g[f]).rb=d,b.Ca=d.getNode(this.C),this.Ae(e,b,this.Xb,a),f++,--this.sm;c[e]=0;--this.hk||this.uh()}},Ae:function(e,d,c,g){var b=this.td,f=d.Ca;if(g!==1)b.save(),b.globalAlpha=g;(f.nodeName!==
"IMG"||f.complete&&f.naturalWidth)&&b.drawImage(d.Ca,d.Qf+this.Uc.x,d.Rf+this.Uc.y,this.ld.x,this.ld.y);g!==1&&b.restore();this._super(e,d,c,g)},render:function(h,d,c,g,b,f,l,a,q,k,p,m,y,s){var v=!1,u,x,w=b.x||1;u=(b.x+g[3]-g[1])/2;var z=b.y||1;x=(b.y+g[0]-g[2])/2;m&&this.useBuffer?this.eh!==s?(h=c.w/this.bu,d=c.w,u=(this.xj-u)*h-(c.x-u),u=e(u+(u>d/2?-d:u<-d/2?d:0)),x=-e(c.y-x-(this.nm-x)*h),this.zr.clearRect(0,0,w,z),this.zr.drawImage(this.ag,0,0),this.Hi.clearRect(0,0,w,z),this.Hi.drawImage(this.Un,
0,0,w,z,u,x,w*h,z*h),this.Qd.drawImage(this.ag,0,0)):this.Qd.drawImage(this.vb,0,0):(this.fh===s&&this.rc===this.e.getInvalidationMark()?(v=!0,this.uh()):(this.td.clearRect(0,0,w,z),this.useBuffer&&this.td.drawImage(this.ag,0,0),v=this._super.call(this,h,d,c,g,b,f,l,a,q,k,p,m,y,s)),this.useBuffer&&(this.Hi.clearRect(0,0,w,z),this.Hi.drawImage(this.vb,0,0)),this.Qd.drawImage(this.vb,0,0));this.xj=c.x;this.nm=c.y;this.bu=c.w;return v},Qi:function(e,d){d=this._super(e,d);d.Ca=e.Ca;return d},jk:function(e){return e},
nn:l,show:l,hide:l})})();ovi.provide("nokia.maps.map.render.p2d.canvas.MarkerLayer");
(function(){var e=nokia.maps,l=e.util.A,h=Math.round,d=Math.min;e.map.render.p2d.canvas.MarkerLayer=new ovi.Class({Extends:e.map.render.p2d.MarkerLayer,initialize:function(c){this._super.apply(this,arguments);this.Qd=this.n.getContext("2d");this.vb=this.C.createElement("canvas");this.vb.width=c.width;this.vb.height=c.height;this.td=this.vb.getContext("2d");this.Gl=this.Fl=0},ta:function(){var c=this.n,d=this.vb;this.Pf=d.width=c.width;this.hf=d.height=c.height},an:function(c,e,b,f,l){if(!l){var f=
e,a,q,k;if(e.nodeName==="DIV"&&(f=e.firstChild))a=c.offsetX!==void 0;f&&(e=h(b.x+this.Uc.x),b=h(b.y+this.Uc.y),a?this.td.drawImage(f,c.offsetX,c.offsetY,q=d(c.width,c.naturalWidth-c.offsetX),k=d(c.height,c.naturalHeight-c.offsetY),e,b,q,k):this.td.drawImage(f,e,b,c.width,c.height))}},shutdown:function(){this._super();this.vb=void 0},show:l,hide:l,mn:l,ln:l,render:function(c,d,b,f,e,a,h,k,l,m,y,s,v,u){var x=!1;s?this.eh!==u&&(this.Yp===c&&this.xj!==void 0?(this.Fl+=b.x-this.xj,this.Gl+=b.y-this.nm):
(this.td.clearRect(0,0,this.Pf,this.hf),x=this._super(c,d,b,f,e,a,h,k,l,m,y,s,v,u))):this.fh===u&&this.rc===this.e.getInvalidationMark()?(this.Da(this,!1),x=!0):(this.td.clearRect(0,0,this.Pf,this.hf),x=this._super(c,d,b,f,e,a,h,k,l,m,y,s,v,u),this.Gl=this.Fl=0);this.Qd.drawImage(this.vb,0-this.Fl,0-this.Gl);this.xj=b.x;this.nm=b.y;this.Yp=c;return x}})})();ovi.provide("nokia.maps.map.render.p2d.canvas.SpatialTileLayer");
(function(){var e=[],l=Math.pow,h=nokia.maps.map,d=h.Object.sortByZInfo,h=h.render.p2d.canvas,c=h.TileLayer;h.SpatialTileLayer=function(g,b,f,h){g=new c(g,b,f,h);g.yb=function(a,b,c){var f=this.e,g=l(2,this.Th+8);a*=g;var b=b*g/this.ld.x*this.ld.y,g=f.getTileId(this.Th,a,b),h,r;if(g&&(h=this.Xb[g])&&(h=h[0]))r=d(h.rb.yb(a%f.width,b%f.height,c),!1,!1);return r||e};return g}})();ovi.provide("nokia.maps.map._Copyright");ovi.provide("nokia.maps.resources.copyright.html");
nokia.maps.resources.copyright.html='<div class="nm_crimg" style="display:block;position:absolute;bottom:20px;left:4px;width:33px;height:24px;margin:6px;cursor:pointer" title="HERE"></div> \r\n<div class="nm_crnode" style="position:relative;top:0;padding-left:10px;padding-bottom:8px;height:13px;font-size:10px;font-family:arial, sans-serif;color:#333;white-space:nowrap;"> \r\n\t<span class="nm_crtext"></span>&nbsp;<a class="nm_toulink" target="_blank" style="text-decoration: underline;"></a>\r\n\t&nbsp;<a class="nm_rilink" target="_blank" title="" style="text-decoration: none;"></a>\r\n</div>';
(function(e){function l(b){a.test(b)||e.util.d("alignment '"+b+"'");this.Ti.lo(b);return b}var h=e.dom,d=Math.floor,c=e.util,g=new e.language.Manager,b=c.Point,f=new Image,r=e.loadPath+e.config.assetsPath+"/here_logo.png",a=/^(top|middle|bottom)(left|center|right)$/,q;f.src=r;e.map.uo=new ovi.Class({initialize:function(a){var b,d;this.ga=a;q=ovi.Array([a.SATELLITE,a.SATELLITE_PLAIN,a.SATELLITE_COMMUNITY,a.GLOBE,a.PANORAMA]);b=this.Qo=h.gb(a.Ui,"div");b.innerHTML=e.resources.copyright.html;this.bo=
h.findElement("nm_toulink",b);d=this.Yh=h.findElement("nm_rilink",b);d.onclick=function(){var b=a.m.getCam(),c="http://here.com/latitude,longitude,fov,yaw,pitch,panorama.day,report",d;for(d in b)c=c.replace(RegExp("\\b"+d+"\\b"),b[d]);this.href=c};d.onclick();this.Br=(this.Jv=h.findElement("nm_crtext",b)).parentNode;(d=(this.am=b=h.findElement("nm_crimg",b)).style).backgroundRepeat="no-repeat";d.backgroundImage="url("+r+")";b.onclick=function(){var b=a.center;window.open(["http://here.com/?cid=nokiamaps-fw-ilc-na-acq-na-thirdparty-g0-na-1#",
b.latitude,b.longitude,a.zoomLevel,"0|0|"].join("|"))};a.Ed("poweredByWidth",b.offsetWidth);a.Ed("poweredByHeight",b.offsetHeight);this.Af=ovi.bind(this,this.Af);a.copyrightAlignmentSetter=l;a.addListener("basemapchangeend",this.Af);a.addListener("mapviewchangeend",this.Af);a.addListener("resizeend",this.Af);e.map.js.copyrights.addObserver("copyrights",this.Af);this.lo(a.copyrightAlignment);this.nq();c.getRootNameSpace("nokia.maps").Settings.addObserver("defaultLanguage",this.nq,this)},nq:function(){var a;
a=this.bo;a.title=a.innerHTML=g.translateToken("ovi.service.map._t66",!1);a.href=h.Page.browser.mobile?"http://nokia.mobi/terms":g.translateToken("ovi.service.map._t67",!1);a=this.Yh;a.title=a.innerHTML=g.translateToken("ovi.service.map._t94",!1);this.Yh.style.display="none"},lo:function(c){var f=this.ga,e=this.Qo,g=this.Br,h=this.am;if(c){var l=a.exec(c),c=l[1],l=l[2],q=e.style;q.cssText="position:absolute;z-index:500;"+(c==="middle"?"top:50%;margin-top:"+d(e.offsetHeight/-2)+"px;":c+":"+(c==="top"?
"34px;":"-7px;"))+(l==="center"?"left:50%;margin-left:"+d(e.offsetWidth/-2)+"px;":l+":"+(l==="left"?"-4px;":"4px;"))+"width:"+q.width+";height:"+q.height+";"}if(e.style.bottom&&ovi.dom.hasClass(f.R.parentNode,"nm_adbar_bottom"))e.style.bottom="21px";e=new b(e.offsetLeft,e.offsetTop);f.Ed("copyrightPosition",e.add({x:g.offsetLeft,y:g.offsetTop}));f.Ed("poweredByPosition",e.add({x:h.offsetLeft,y:h.offsetTop}))},Af:function(){var a=this.ga,b=a.baseMapType,c=this.Br;this.Jv.innerHTML="&copy; "+a.getCopyright();
q.indexOf(b)===-1?(c.style.color=this.bo.style.color=this.Yh.style.color="#333",this.am.style.backgroundPosition="0 0"):(c.style.color=this.bo.style.color=this.Yh.style.color="#FFF",this.am.style.backgroundPosition="0px -34px");this.Yh.style.display=b===a.PANORAMA?"":"none";this.lo();a.Ed("copyrightWidth",c.offsetWidth);a.Ed("copyrightHeight",c.offsetHeight)},getCopyrightGfx:function(){var a=this.Qo,b=f.width;return(new e.gfx.Graphics).beginImage(a.offsetWidth+b,a.offsetHeight+34-6).drawImage(f,0,
this.zp()?34:0,b,34,6,3,b,34).set("fillColor",this.zp()?"#fff":"#333").fillText(String.fromCharCode(169)+" "+this.ga.getCopyright(),6,40)},zp:function(){var a=this.ga,b=a.baseMapType;return b===a.SATELLITE||b===a.SATELLITE_PLAIN||b===a.SATELLITE_COMMUNITY||b===a.GLOBE}})})(nokia.maps);ovi.provide("nokia.maps.map.Spatial");nokia.maps.map.Spatial=new ovi.Class({Extends:nokia.maps.map.Object,initialize:function(e){this._super(e);this.Vm={}},simplify:3,Sc:1});ovi.provide("nokia.maps.map.provider.LocalObjectProvider");
(function(e){var l=Math,h=e.util,d=h.Event,c=h.d,g=e.geo.QuadTree,b=e.map.Object,f=b.sortByZInfo,r=b.CHANGE_SPATIAL,a=b.CHANGE_VISUAL,q=b.CHANGE_ZINDEX,k=e.map.provider.LocalObjectProvider=new ovi.Class({Extends:e.map.provider.Provider,Statics:{SPATIAL:1,MARKER:2},initialize:function(a,b){this.rm=new g(18);this.Ln=new g(18);this.ev=a.e.orphan(a)&&this.adopt(a);this._super(b)},Lp:-l.pow(2,53),Kp:-l.pow(2,53),Oi:function(a){return a?++this.Lp:++this.Kp},getInvalidationMark:function(a){return a?this.Lp:
this.Kp},ho:function(){this.dispatch(new d("update"))},xo:function(b){var c,d=b.Lc();c=b.Sc?this.Ln.insertBoundingBox(b.getBoundingBox()):this.rm.insertCoordinate(b.coordinate);c.bq=b;b.ri=c;d[r]=d[a]=d[q]=this.Oi(b.Sc);return b},Tq:function(a){a.Sc?this.Ln.remove(a.ri):this.rm.remove(a.ri);a.ri=null;return a},Sh:function(a){a.e!==this&&c();if(!a.ri)return this.getInvalidationMark(a.Sc);this.Tq(a);this.update();this.dp(a);return this.Oi(a.Sc)},$f:function(a){a.e!==this&&c();this.xo(a);this.update();
return this.Oi(a.Sc)},qc:function(a,b){a.e!==this&&c();if(!a.ri)return this.getInvalidationMark(a.Sc);b&r&&(this.Tq(a),this.xo(a));this.dp(a);this.update();return this.Oi(a.Sc)},dp:function(a){var b,c;if(a.Sc)for(c in b=a.Vm,b)b[c].bp(a)},getInvalidations:function(a,b){return a.getInvalidations(b)},requestBBox:function(a,b){var c,d,e=[],b=b||k.SPATIAL|k.MARKER;if(b&k.SPATIAL){c=this.Ln.intersectBoundingBox(a,1);for(d=c.length;d--;)e.push(c[d].bq)}if(b&k.MARKER){c=this.rm.intersectBoundingBox(a,1);
for(d=c.length;d--;)e.push(c[d].bq)}return e=f(e)},cancelBBoxRequest:function(){},adopt:function(a){if(a.e||!(a instanceof b))return!1;a.e=this;return a},orphan:function(a){if(a.e!==this||!(a instanceof b))return!1;a.e=null;return a}})})(nokia.maps);ovi.provide("nokia.maps.map.render.p2d.dom.TileLayer");
(function(){new Image;var e=ovi.browser.msie,l=nokia.maps,h=l.dom,d=l.css,c=h.cloneNode;nokia.maps.map.render.p2d.dom.TileLayer=new ovi.Class({Extends:l.map.render.p2d.TileLayer,initialize:function(c,b,d){c.style.position="absolute";this.Mv=d.cssClass+"Tile";this._super.apply(this,arguments)},uh:function(){var c,b,f;if(d.supportsTransition()){c=this.n.children;b=c.length;for(f=this.Dd;b--;)this.Mr(c[b],f)}this._super()},sa:function(c){var b=c.data,c=b[0],b=b[1],f=this.vc,e=f[c],a,h=0,k,l,m=this.Dd;
this.pn(this.Xb,c);if(e){if(b)for(k=e.length;h<k;)(a=e[h]).rb=b,(a.Ca=l=this.jk(b.getNode(this.C),h++)).style.position="absolute",d.supportsTransition()?(this.Ae(c,a,this.Xb,0),this.Mr(l,m)):this.Ae(c,a,this.Xb,m),--this.sm;f[c]=0;--this.hk||this.uh()}},Mr:function(c,b){setTimeout(function(){h.Fd(c,b)},20)},nn:function(c){this.n.removeChild(c.Ca)},Ae:function(c,b,f,e){var a=b.Ca,h=this.ld;d.translateXYElement(a,b.Qf,b.Rf);this.mr(h.x,h.y,b);this.lr(a,e);a.parentNode!==this.n&&this.n.appendChild(a);
this._super(c,b,f,e);this.e.providesLevel(b.Vc)&&this.show()},lr:function(c,b){b!==1&&h.Fd(c,b)},mr:function(c,b,d){d=d.Ca.style;d.width=c+"px";d.height=b+"px"},jk:function(d,b){var f=d.parentNode;if(f&&(!e||f.nodeType!==11)&&(b||f!==this.n))d=c(d,!0);d.className=this.Mv;d.style.position="absolute";return d},Qi:function(c,b){b=this._super(c,b);b.Ca=this.jk(c.Ca,!0);return b},show:function(){if(this.Rc)this.n.style.display="",this.Rc=!1},hide:function(){if(!this.Rc)this.n.style.display="none",this.Rc=
!0}})})();ovi.provide("nokia.maps.map.render.p2d.dom.SpatialTileLayer");
(function(){var e=[],l=Math.pow,h=nokia.maps,d=h.css,c=h.dom,g=h.map,b=g.Object.sortByZInfo,g=g.render.p2d.dom,f=g.TileLayer;g.SpatialTileLayer=function(g,a,q,k){a=new f(g,a,q,k);a.yb=function(a,c,d){var f=this.e,g=l(2,this.Th+8);a*=g;var c=c*g/this.ld.x*this.ld.y,g=f.getTileId(this.Th,a,c),k,h;if(g&&(k=this.Xb[g])&&(k=k[0]))h=b(k.rb.yb(a%f.width,c%f.height,d),!1,!1);return h||e};a.Ew=null;g.className=a.mw=q.cssClass+"SpatialTileLayer";a.mr=function(a,b,c){a=new nokia.maps.util.Point(a/c.rb.e.tileSize.x,
b/c.rb.e.tileSize.y);this.we.setScale(c.Ca,a)};a.lr=function(a,b){d.transformType>0&&b!==1&&c.Fd(a,b)};a.Qi=function(a,b){b||(b={c:a.c});b.Vc=a.Vc;b.rb=a.rb;b.Ca=c.cloneNode(a.Ca,!0);b.Ca=b.rb.getNode(this.C);return b};a.capture=function(a,b,c){var d,f,e;f=this.e;var g=f.width,k=f.height,l=this.Xb,q=this.Uc;for(d in l)for(e=l[d].length;e--;)f=l[d][e],a.drawGraphics(new h.gfx.Graphics(f.rb.getIDL()),0,0,g,k,f.Qf+(q.x-b),f.Rf+(q.y-c),g,k)};return a}})();ovi.provide("nokia.maps.map.render.p2d.canvas.MapLayer");
(function(){var e=Math.round,l=Math.max,h=nokia.maps.map.render.p2d.canvas;h.MapLayer=new ovi.Class({initialize:function(d,c,e,b){this.pf=c.min;this.Xa=c.max;this.e=c;this.Da=b;this.s=d;this.$k=new h.TileLayer(d,c,e,function(){});e.useBuffer=!1;this.yj=new h.TileLayer(d,c,e,this.Da);this.Bb=ovi.bind(this,this.Bb)},shutdown:function(){this.$k.shutdown();this.yj.shutdown();return this.n},ta:function(){this.$k.ta();this.yj.ta()},stop:function(){this.yj.stop()},render:function(d,c,g,b,f,h,a,q,k,p,m,y,
s,v){var u,m=e(m);for(u=l(this.pf,m-3);u<m;)this.$k.render(d,c,g,b,f,h,a,q,k,p,u++,!0,s,v);return this.yj.render(d,c,g,b,f,h,a,q,k,p,m,y,s,v)}})})();ovi.provide("nokia.maps.map._MarkerIcon");
(function(){function e(c){return new b(typeof c==="object"?c.strokeColor?{strokeColor:a(c.strokeColor)}:void 0:{strokeColor:c})}var l=nokia.maps,h=l.map.HitArea,d=l.util,c=d.proto,g=d.Point,b=d.Pen,f=new b({strokeColor:"#FFF"}),r=d.Brush,a=d.ColorHelper.getHex3,q=l.gfx,k=q.GraphicsImage,p=q.IDL,m=q.Color.parseCss,y=[4207599104,4207599105,4207599106,"$Text$"],s=new l.gfx.SvgParser,v=d.Yc("shape text textPen pen brush effect"),u=d.flatMerge(d.Yc("anchor hitArea"),v),x=new d.Cache(50),w=nokia.maps.map.Gb=
new ovi.Class({Extends:nokia.maps.util.OObject,initialize:function(a){var b;a&&a.shape&&a.shape!==this.shape?(this.shape=this.shapeSetter(b=a.shape),delete a.shape,this._super(a),a.shape=b):(this.shapeSetter(this.shape),this._super(a));this.addObserver("*",this.$d)},Statics:{gn:u,Sa:function(a){return a in u},pe:function(a){return!(a in v)},ec:{balloon:['<path style="opacity:0.4;fill:#353535" d="m 19,31 c 0,1.67 -2.69,3 -6,3 c -3.31,0 -6,-1.33 -6,-3 c 0,-1.67 2.69,-3 6,-3 c 3.31,0 6,1.33 6,3 z" /><path style="fill:#Facade01" d="m 13,0 c -3.47,0 -6.73,1.32 -9.19,3.75 C 1.36,7.82 0,9.41 0,12.84 c 0,3.43 1.36,6.64 3.81,9.06 L 13,31 l 9.19,-9.094 c 2.46,-2.43 3.81,-5.63 3.81,-9.06 c 0,-3.43 -1.36,-6.67 -3.81,-9.09 C 19.73,1.32 16.47,0 13,0 z"/><path style="fill:#ffffff" d="m 13,1 c -3.21,0 -6.23,1.23 -8.5,3.47 c -2.26,2.24 -3.5,5.22 -3.5,8.38 c 0,3.16 1.24,6.14 3.5,8.38 l 8.5,8.38 l 8.5,-8.38 c 2.26,-2.24 3.5,-5.22 3.5,-8.38 c 0,-3.16 -1.24,-6.14 -3.5,-8.38 C 19.23,2.23 16.2,1 13,1 z"/><path style="fill:#Facade00;fill-opacity:1" d="m 13,2.19 c -7,0 -10.74,4.96 -10.81,10.65 c 0,3.27 0.95,5.61 3.03,7.66 l 7.79,7.69 l 7.79,-7.69 c 2.07,-2.05 3.02,-4.27 3.03,-7.66 C 23.58,7.07 19.98,2.19 13,2.19 z"/><text x="13" y="18" font-size="10pt" font-family="arial" font-weight="bold" text-anchor="middle" fill="#Facade02">$Text$</text>',
28,36,13,31,"poly",[0,16,0,7,8,0,18,0,26,7,26,16,18,34,8,34]]}},text:"",pen:c({},f),textPen:c({},f),brush:c({},new r({color:"#1080DD"})),shape:"balloon",effect:"none",$d:function(a,b){if(b in v)a.c="",a.Oa=0},shapeSetter:function(a){var b=w.ec[a]||d.d("shape");this.f=new g(b[1],b[2]);this.anchor=new g(b[3],b[4]);this.hitArea=b[5]?new h(b[5],b[6]):void 0;return a},brushSetter:function(b){return new r(typeof b==="object"?b.color?{color:a(b.color)}:void 0:{color:b})},penSetter:e,textPenSetter:e,textSetter:function(a){return d.sanitizeText(a)},
Yd:function(){var a=w.ec[this.shape],b,c,d,f;if(a&&typeof a[0]==="string"){b=y.length;for(c=a[0]=ovi.Array(s.parseSvg('<svg version="1.1" width="'+(d=a[1])+'" height="'+(f=a[2])+'" viewBox="0 0 '+d+" "+f+'">'+a[0]+"</svg>").data);b--;){f=[];for(d=-1;(d=c.indexOf(y[b],d+1))!==-1;)f.push(d);f.length&&(a[7+b]=f)}}return a},Fe:function(a){for(var b=[m(this.brush.color,1),m(this.pen.strokeColor,1),m(this.textPen.strokeColor,1),this.text],c=b.length,d=a[0].slice(),f,e;c--;)if(f=a[7+c])for(e=f.length;e--;)d[f[e]]=
b[c];return d},getIcon:function(){var a,b;if(!this.Oa){if(!(b=x.get(a=this.ea())))x.add(a,b=new k(new p(this.Fe(this.Yd()))));this.Oa=b}return this.Oa},ea:function(){return this.c||(this.c=(this.hasOwnProperty("shape")?this.shape:"").concat(this.text,this.textPen.ea(),"P",this.pen.ea(),"B",this.brush.ea()))}})})();ovi.provide("nokia.maps.map.Polyline");
(function(e){var l=nokia.maps.geo,h=l.BoundingBox,d=l.Coordinate,e=nokia.maps.util,c=e.math.clipping.clipStrips,g=e.isArray,b=e.Strip,f=nokia.maps.util.Rectangle,r=e.Point,a=e.Arrows,q=e.Pen,k=nokia.maps.gfx.Color.parseCss,p=k("#0000"),m=new b(["latitude","longitude","altitude"]),y=l.Shape.vo,s=[],v=Math,u=v.min,x=v.atan,w=v.sqrt,z=v.pow,B=v.floor,D=180/v.PI,A=nokia.maps.map.Polyline=new ovi.Class({Extends:nokia.maps.map.Spatial,initialize:function(a,b){a instanceof l.Strip||g(a)||e.d("Argument coords is not instance of geo.Strip or Array.");
var c=this.path=a instanceof l.Shape?a:new l.Shape(this.closedShape);a instanceof l.Shape?c.wb=this.closedShape:a instanceof l.Strip?c.op(a):c.splice(0,0,a,"auto");this.pm={};(!b||!b.pen)&&(this.pen=this.penSetter());this._super(b);c.addObserver(this.Lu,this)},destroy:function(){this.path.destroy();this._super()},Statics:{Di:100,Ur:s},Ii:null,u:"polyline",color:null,stroke:"solid",width:0,lineJoin:null,pen:null,arrows:null,closedShape:!1,ia:function(a,b){a==="path"?(this.Xq(),b|=1):a!=="zIndex"&&
(b|=2);this._super(a,b)},Lu:function(a,b){this.Xq();this.ia(b,1)},Xq:function(){this.Ii=null;this.pm={}},getNearest:function(a){var b=this.path,a=this.getNearestIndex(a);return b.get(a)},getNearestIndex:function(a){for(var b=this.path.asArray(),c=b.length,d=l.Coordinate.fromObject(a),f,e=d.distance({latitude:b[0],longitude:b[1]}),g=0,a=3;a<c;a+=3)f=d.distance({latitude:b[a],longitude:b[a+1]}),f<e&&(g=a/3,e=f);return g},getBoundingBox:function(){var a=this.path,b=this.Ii;if(!b&&(b=a.getBoundingBox()))b.getWidth()==
360&&a.xb%2==1&&(b=b.merge(new h(new d(this.coverNorthPole?90:-90,0,void 0,!0),void 0,!0))),this.Ii=b;return b},pathSetter:function(a){var b=this.path;b.splice(0,b.getLength(),l.Strip.convertToArray(a),"unsafe values lat lng alt");return b},widthSetter:function(a){(a=e.Ia(a,0,A.Di))!==a&&e.d("width must be in range [0.."+A.Di+"]");this.pen=new q({lineWidth:a},this.pen);return a},strokeSetter:function(a){a!=="solid"&&e.d("cannot set anything else than stroke=solid");this.pen=new q({stroke:a},this.pen);
return a},colorSetter:function(a){k(a)===null&&e.d("color");this.pen=new q({strokeColor:a},this.pen);return a},lineJoinSetter:function(a){this.pen=new q({lineJoin:a},this.pen);return a},penSetter:function(a){a instanceof q||(a=new q(a));this.set("width",a.lineWidth);this.set("color",a.strokeColor);this.set("lineJoin",a.lineJoin);return a},arrowsSetter:function(b){return b instanceof a?b:b?new a(b):!1},coveredByTile:function(a,b,c){var d=a?a.length:0,f,e=this.lineWidth;if(this.closedShape)for(;d--;)if(r.isCoveredBy(b,
c,a[d],e,!0)){f=!0;break}return f||!1},drawToTile:function(a,b,e){var g=this.closedShape,l=this.getBoundingBox();h.fromObject([90,l.topLeft.longitude,-90,l.bottomRight.longitude],!0).contains(new d(0,180,void 0,1));var l=this.pen.lineWidth,m=this.pen.lineCap,q=this.pen.lineJoin,w=this.pen.miterLimit,v=e?2*(l>1?l:1)+0.13524:0,v=new f([new r(-v,-v),new r(a.getWidth()+v,a.getHeight()+v)]),b=this.path.clip(b,v,this.simplify,this.coverNorthPole,this.Ml,e,A.Di),e=b.length,u,v=l||g,x,z,B;if(e){l&&(a.set("strokeColor",
k(this.pen.strokeColor)),a.set("lineWidth",l));m&&a.set("lineCap",m);q&&a.set("lineJoin",q);w&&a.set("miterLimit",w);g&&a.set("fillColor",this.brush.fill==="none"?p:k(this.brush.color));for(this.arrows&&(B=c(b,0,0,x=a.getWidth(),z=a.getHeight()));e--;){m=b[e];w=m.length;u=m[0];if(v){a.beginPath();a.moveTo(u.x,u.y);for(q=1;q<w;q++)a.lineTo((u=m[q]).x,u.y);g&&(a.closePath(),a.fill());l&&a.stroke()}for(q=w;q--;)m.push((u=m[q]).x,u.y);m.splice(0,w)}B&&this.gt(a,x,z,B,l);return!g||!b.fullfilled?b:s}else return b===
y?s:!1},At:function(a){for(var b=a.length,c=0;--b;)c+=a[b].distance(a[b-1]);return c},gt:function(a,b,c,d,e){var g=this.arrows,k=e*g.width/2,e=e*g.length/2,h=e/2,l=e*2*g.frequency,m=w(z(e,2)+z(k,2)),b=new f([new r(m,m),new r(b-m,c-m)]),p,q,c=this.At,s,y,v,A,Ba,S,sa;a.set("fillColor",g.color);for(g=d.length;g--;)if(y=0,m=d[g],p=m.length)if((q=c(m))>=l){s=u(B(q/l),1E3);q/=s+1;for(s=q/2;--p;){for(v=(A=m[p]).distance(Ba=m[p-1]);s<=y+v;)sa=A.x+(Ba.x-A.x)*(S=(s-y)/v),S=A.y+(Ba.y-A.y)*S,b.contains(new r(sa,
S))&&(a.save(),a.translate(sa,S),a.rotate(-x((Ba.y-A.y)/(A.x-Ba.x))*D-(A.x<Ba.x?270:90)),a.beginPath(),a.moveTo(-k,-e),a.lineTo(0,e),a.lineTo(k,-e),a.lineTo(0,-h),a.closePath(),a.fill(),a.restore()),s+=q;y+=v}}},project:function(a){return this.pm[a.id]||(this.pm[a.id]=a.geoToMapPoints(b.stencil(m,this.path.internalArray)))}})})(nokia.maps.util);ovi.provide("nokia.maps.map.render.p2d.dom.MapLayer");
(function(){function e(a,b){return a.Gk-b.Gk}var l=Math,h=l.abs,d=l.pow,c=l.round,g=nokia.maps,b=g.map.render.p2d.dom,f=g.dom,r=(l=f.Page.browser.mobile)?-1:-2,a=l?2:4;b.MapLayer=new ovi.Class({initialize:function(a,c,d,e){var g,h;this.pf=g=c.min;this.Xa=h=c.max;this.e=c;this.Da=e;this.n=a;this.Aj=a=[];this.Cp=d.fading*1.1+20;this.Zl=ovi.bind(this,this.Zl);for(this.Bb=ovi.bind(this,this.Bb);g<=h;g++)a[g]=new b.TileLayer(f.gb(this.n,"div"),c,d,this.Bb),a[g].Wf=g},shutdown:function(){var a=this.pf,
b=this.Aj,c=b.length;for(this.Da=g.util.A;c--&&c>=a;)b[c].shutdown();f.ac(this.n);return this.n},stop:function(){for(var a=this.pf,b=this.Aj,c=b.length;c--&&c>=a;)b[c].stop()},Bb:function(a,b){if(a===this.qd){if(!b)this.Cp&&(this.Kt=setTimeout(this.Zl,this.Cp));this.Da(this,!1)}},Zl:function(){for(var a=this.qd.Gk;a--;)this.qr[a].hide()},vv:function(a){for(var b=this.Aj,c=b.length,d=this.pf,f;c--&&c>=d;)f=a-c,b[c].cw=f,b[c].Gk=-h(2*f-(f>0))},render:function(b,f,g,h,l,s,v,u,x,w,z,B,D){var z=c(z),A=
this.pf,C=this.Xa,E=this.Aj,M,I;clearTimeout(this.Kt);this.qd&&this.qd.Wf!==z&&this.qd.stop();this.qd=E[z];this.vv(z);this.qr=z=E.slice(A,C+1).sort(e);for(I=z.length;I--;)z[I].Gk=I;for(E=!(I=z.length);I--;)A=z[I],C=A===this.qd,M=z[I].cw,E||M&&(M<r||M>a)?A.hide():(d(2,M),E=A.render(b,f,g,h,l,s,v,u,x,w,A.Wf,B||!C,D)&&!C),this.qr[I].n.style.zIndex=I-100;return E},capture:function(a,b,c,d,f){this.qd&&this.qd.capture(a,b,c,d,f)}})})();ovi.provide("nokia.maps.map.Polygon");
(function(){var e=nokia.maps.util.Brush,l=nokia.maps.util.d;nokia.maps.map.Polygon=new ovi.Class({Extends:nokia.maps.map.Polyline,initialize:function(e,d){(!d||!d.brush)&&(this.brush=this.brushSetter());this._super(e,d)},u:"polygon",fillColor:null,brush:null,closedShape:!0,coverNorthPole:!1,Ml:136,fillColorSetter:function(h){var d=nokia.maps.gfx.Color,c=d.parseCss(h);c===null&&l("Invalid fillColor set!");this.Ml=d.alpha(c);this.brush=new e({color:h},this.brush);return h},brushSetter:function(h){var d=
nokia.maps.gfx.Color,c;h instanceof e||(h=new e(h));this.set("fillColor",h.color);c=d.parseCss(h.color);this.Ml=d.alpha(c);return h},coverNorthPoleSetter:function(e){return!!e}})})();ovi.provide("nokia.maps.map.Marker");
(function(){var e=nokia.maps,l=e.util,h=e.dom,d=e.map,c=e.gfx,g=l.Point,b=l.Strip,f=new g(0,0),r=l.Rectangle,a=d.Gb,q=e.geo,k=d.HitArea,p=q.Coordinate,e=new ovi.Class({Extends:d.Object,initialize:function(b,c){var d;if(this.u==="marker"&&(!c||!("icon"in c)))d=new a,this.set("icon",d.getIcon()),this.set("anchor",d.anchor),this.set("hitArea",d.hitArea);this.Pa={};this._super(c);this.set("coordinate",b,1)},u:"marker",anchor:f,f:f,coordinateSetter:function(a){(a=p.fromObject(a))||l.d("coord");this.Pa=
{};return a},hitAreaSetter:function(a){return!a?a:k.from(a)},anchorSetter:function(a){(a=g.fromObject(a))||l.d("you have to set util.Point");return a},Ja:function(a){this.f=new g(a.width,a.height);this.fc=1},iconSetter:function(a){ovi.type(a);a instanceof c.Image||(a=c.Image.fromObject(a));a instanceof c.Image||l.d("icon");this.icon=a.C===document?a:a.clone(document);a.state===1?this.Ja(a):this.fc=0;return this.icon},getBoundingBox:function(){return q.BoundingBox.coverAll([this.coordinate])},getDisplayBoundingBox:function(a){a=
a.geoToPixel(this.coordinate).sub(this.anchor);return new r([a,a.add(this.f)])},hitTest:function(a,b,c,d){var a=this.getDisplayBoundingBox(a),f=new g(b,c),e=this.hitArea;return a.contains(f)&&(!e||e.hitTest(b-a.topLeft.x,c-a.topLeft.y,d))},getDisplayOffset:function(a,b,c){return(new g(b,c)).sub(a.geoToPixel(this.coordinate))},ia:function(a,b){a!=="zIndex"&&(b|=a==="coordinate"?1:2);this._super(a,b)},ae:function(a){var b="error";a.state===1&&(this.Ja(a),this.ia("icon",2),b="load");this.dispatch(new h.Event({type:b,
target:this,relatedTarget:a}))},getIconForRendering:function(a){var b=this.icon;a!==document&&(b=b.clone(a));b.state?this.fc||b.state===1&&this.Ja(b):b.prepare(this.ae,this);return b},project:function(a){return this.Pa[a.id]||(this.Pa[a.id]=a.geoToMapPoints(b.stencil(b.LAT_LNG,[this.coordinate.latitude,this.coordinate.longitude])))}});if(d.Marker.isNs)d.Marker=e})();ovi.provide("nokia.maps.map.Rectangle");
(function(){var e=nokia.maps,l=e.util,e=e.geo,h=e.Strip,d=e.BoundingBox;nokia.maps.map.Rectangle=new ovi.Class({Extends:nokia.maps.map.Polygon,initialize:function(c,d){c=this.boundingBoxSetter(c,1);this._super(this.wg(this.boundingBox=c),d)},simplify:0,u:"rectangle",wg:function(c){var d=c.topLeft,b=d.latitude,f=d.longitude,e=c.bottomRight,d=e.latitude,e=e.longitude,f=[b,f,b,e,d,e,d,f],e=0;if(c.getWidth()>=180)c=c.getCenter(),e=c.longitude,f.splice(6,0,d,e),f.splice(2,0,b,e);return new h(f,"unsafe values lat lng")},
boundingBoxSetter:function(c,e){c=d.fromObject(c)||l.d();e||this.set("path",this.wg(c));return c}})})();ovi.provide("nokia.maps.map.StandardMarker");
(function(){function e(c,d,b){c.T.set(d,b);if(d==="shape")c.f=c.T.f,c.set("anchor",c.T.anchor),c.set("hitArea",c.T.hitArea);return c.T[d]}var l=nokia.maps,h=l.util,d=l.map.Gb,l=nokia.maps.map.StandardMarker=new ovi.Class({Extends:nokia.maps.map.Marker,initialize:function(c,e){var b=this.T=new d(h.flatMerge({},e,1,d.Sa));h.flatMerge(this,b,1,d.Sa);this.f=b.f;this._super(c,h.flatMerge({},e,1,d.pe))},u:"standardmarker",shapeSetter:function(c){return e(this,"shape",c)},textSetter:function(c){return e(this,
"text",c)},textPenSetter:function(c){return e(this,"textPen",c)},penSetter:function(c){return e(this,"pen",c)},brushSetter:function(c){return e(this,"brush",c)},getIconForRendering:function(c){this.set("icon",this.T.getIcon());return this._super(c)}});h.flatMerge(l.prototype,d.prototype,!0,d.Sa)})();ovi.provide("nokia.maps.map.provider.SpatialTile");
(function(){var e=nokia.maps,l=e.util.Point,h=e.dom.importNode,d=e.dom.cloneNode,c=e.map,g=c.Polyline.Ur,e=e.gfx,b=e.Graphics,f=e.IDL,r=e.GraphicsImage,a=e.Painter.defaultPainter.isVML,q=[],k=-1/0,p=q.concat,e=c.provider.SpatialTile=function(a,b,c,d){this.id=a;this.e=b;this.Ph=c;this.Vc=d;this.Gh={};this.Um={}};ovi.extend(e.prototype=new c.provider.Tile(0,0,0),{bn:k,vi:k,getIDL:function(){var a,b=this.Ep;return b&&new f(p.apply([f.opcodes.BEGIN_2D_IMAGE,(a=this.e).width,a.height,""],b))},getNode:function(b){var c=
this.data,f,e;if(!c&&(f=this.getIDL()))this.data=c=(new r(f,null,document)).createElement(),c.style.position="absolute";if(c){if(b&&b!==document)c=h(b,c,1);else if(a||(e=c.parentNode)&&e.nodeType!==11)c=d(c,1);return c}},Cs:function(){var a=this.Gh,b;this.Jh=null;for(b in a)a.hasOwnProperty(b)&&this.bp(a[b][0])},bp:function(a){var b=a.id,c=this.Ep,d,f=this.Gh;if(b in f){delete a.Vm[this.id];if((d=f[b][2])&&(d=c.indexOf(d))!==-1)c.splice(d,1),this.data=0,this.vi=k;delete f[b]}},Pq:function(a,b,c){var d=
a.id,f=this.Gh;d in f||(a.Vm[this.id]=this);return f[d]=b?[a,b,c]:[a]},yb:function(a,b){var c,d=this.Um,f,e,k,h,p,r,A,C,E;for(e in d)if(d.hasOwnProperty(e)&&(k=(f=d[e])[1])){h=f[0];if(!(p=k===g)){r=h.width||0;for(A=k.length;A--&&!p;)if(E=l.isCoveredBy(a,b,k[A],r,C=h.closedShape),C&&h.brush.fill==="none"&&E==="S"&&(E=!1),E&&C||!C&&(E==="E"||E==="V"))p=1}p&&(c||(c=[]),c.push(h))}return c||q},Tu:function(){var a=this.e,b=a.kb;if(this.bn<b)(a=a.xt(this.Ph,this.Vc)).length?(this.Jh=a,this.state=void 0):
(this.Jh=null,this.state=!1),this.bn=b},paint:function(){var a=0,c=this.Jh,d=c.length;if(d){for(var f=this.e,e=this.Ph,g=this.Vc,k=f.width,f=f.height,h=[],l,p,q=this.Gh,r,E,M,I=new b;d--;){p=c[d];l=p.id;if(!(r=q[l]))I.beginImage(k,f),(l=p.drawToTile(I,e,g))?(r=this.Pq(p,l,I.getIDL().data.slice(4)),M=1):this.Pq(p);r&&(E=r[2])&&h.push(E)}this.vi=this.bn;if(M)this.Ep=ovi.Array(h),this.data=0;h.length&&(a=1)}this.Jh=0;this.Um={};for(var K in this.Gh)this.Um[K]=q[K];return this.state=a!==0}}).constructor=
e})();ovi.provide("nokia.maps.map.Circle");
(function(){var e=nokia.maps,l=Math,h=l.asin,d=l.sin,c=l.cos,g=l.abs,b=l.PI,f=b/180,r=180/b,a=e.util,q=e.geo.Coordinate;nokia.maps.map.Circle=new ovi.Class({Extends:nokia.maps.map.Polygon,initialize:function(a,b,c){this._super(this.wg(this.center=this.centerSetter(a,1),this.radius=this.radiusSetter(b,1),c&&"precision"in c?this.precisionSetter(c.precision,1):this.precision),c)},u:"circle",precision:60,centerSetter:function(b,c){b=q.fromObject(b)||a.d();b.equals(this.center)?b=this.center:c||this.Gn(b,
this.radius,this.precision);return b},radiusSetter:function(b,c){(b=a.Ia(b,0,1E7))!==b&&a.d("Passed argument is not a number.");c||this.Gn(this.center,b,this.precision);return b},precisionSetter:function(b,c){((b=a.Ia(b,4,360))!==b||b===Infinity)&&a.d("Passed argument is not a number or is a infinity.");c||this.Gn(this.center,this.radius,b);return b},Gn:function(a,b,c){this.set("path",this.wg(a,b,c))},wg:function(a,b,c){var d=270,c=360/c,f=[],a=q.fromObject(a);this.set("coverNorthPole",a.latitude>
0?!0:!1);if(g(a.latitude===90))f=this.Js(a,b,c,d,630);else for(;d<630;d+=c)f.push(a.walk(d,b,1));this.Ii=null;return f},Js:function(a,e,g,l,s){e/=6371E3;for(var v=[],a=f*a.latitude,u,x;l<s;l+=g)u=f*l,x=h(d(a)*c(e)+c(a)*d(e)*c(u)),u=(u+b)%(2*b)-b,v.push(new q(x*r,u*r));return v}})})();ovi.provide("nokia.maps.map.provider.TileProvider");
(function(){var e=nokia.maps,l=e.util.Cache,h=l.NEXT,d=l.DONT;new Image;var c=e.map.provider.SpatialTile,g=e.util,b=g.Event,f=g.Point,e=e.geo,r=e.PixelProjection,a=Math.floor;nokia.maps.map.provider.TileProvider=new ovi.Class({Extends:nokia.maps.map.provider.Provider,initialize:function(a){var b,c,d={},e={},g,h,l,x;this._super(a);this.ic=new f(this.width,this.height);a=this.projection;g=this.width;h=this.height;l=this.max;for(x=this.min;l>=x;)b=1<<l,c=function(a,b){this.y=a*h;this.x=b*g},c.prototype=
new r(a,g*b,h*b),e[l]=new c(0,0),d[l--]=c;this.Yr=d;this.pixelProjections=e;this.tileSize=new f(g,h)},width:256,height:256,opacity:1,alpha:!1,scalable:!0,cache:new l(128,function(a){return a.data?a:h},null,new l(512,function(a){a.data=null;return a instanceof c?a:h},function(a){a&&a.Cs()},new l(2048,function(a){return a instanceof c?d:a}))),projection:e.mercator,getInvalidations:function(a,b){var c=this.getInvalidationMark();return(b<c||a.vi<c)*1},createId:function(a,b,c,d){return d||(c=this.checkAddy(a,
b,c))!==-1?this.id+"_"+a+"_"+b+"_"+c:!1},checkAddy:function(a,b,c){var d=1<<a;return a<this.min||a>this.max||b<0||b>=(d=1<<a)?-1:(c%=d)<0?c+d:c},cancel:function(a){var b=this.Ua[a];if(b&&!--b.ok)return b.state=void 0,this.finishRequest(a,b,!0,!0),b},zs:function(){var a=this.Ua,b,c;for(b in a)if((c=a[b])&&c.ok)c.ok=1,this.cancel(b)},finishRequest:function(a,c,d,f){var e;!d&&(e=this.cache)&&c.state!==void 0&&e.add(a,c);delete this.Ua[a];if(!f)d=new b("response"),d.data=[a,c.state?c:!1],this.dispatch(d)},
request:function(a,b,c,d){var f,e,g=!1;if((c=this.checkAddy(a,b,c))!==-1)if(e=this.Ua[f=this.createId(a,b,c,1)])d||(e.ok++,g=!0);else{if(g=this.cache)if((e=g.get(f))&&this.getInvalidations(e,this.kb)!==0)g.remove(f,!1),e=void 0;!d&&(e===void 0||e.state===!0&&!e.data)?(e=this.create(a,b,c,f,!1),e.state===void 0?(this.Ua[f]=e,g=!0):g=e.state&&e):(e&&e.state===!0&&!e.data&&(e=this.create(a,b,c,f,!0)),g=e!==!0&&e&&e.state&&e.data&&e||!1)}return g},getTileAdr:function(b){return new f(a(b.x/this.width),
a(b.y/this.height))},getTileId:function(b,c,d){if((c=this.checkAddy(b,d=a(d/this.height),a(c/this.width)))!==-1)return this.createId(b,d,c,!0)},destroy:function(){var a=this.cache;a&&a.removeAll(this.id);this.zs()}})})();ovi.provide("nokia.maps.map.provider.SpatialTileProvider");
(function(){var e=nokia.maps,l=e.util.Coroutine,h=e.geo.BoundingBox,d=e.map,c=e.map.provider,g=c.SpatialTile;nokia.maps.map.provider.SpatialTileProvider=new ovi.Class({Extends:nokia.maps.map.provider.TileProvider,initialize:function(b,f){this.xm=b;b.addListener("update",this.ue=ovi.bind(this,this.ue));this.jm=b instanceof c.LocalObjectProvider;this.label=b.label+"[Spatial]";this.min=b.min;this.max=b.max;this._super(f);this.fu=Math.round(d.Polyline.Di/2)+1;this.Fh={};this.Tm(this);this.uf=ovi.Array()},
sw:1,np:0,shutdown:function(){this.xm.removeListener("update",this.ue);this._super()},ue:function(){this.kb=this.xm.getInvalidationMark(!0)},finishRequest:function(b,c,d,a){this._super(b,c,d,a);a||this.av(c)},av:function(b){var c,d,a;a=(c=this.uf).length;for(d=0;d<a;d++)if(c[d]===b)return c.splice(d,1)},Tm:l.create("nokia.maps.map.provider.SpatialTileProvider#_paintCo",function(b){for(var b=b.that,c;c=b.uf.shift();)if(c.paint(1),b.finishRequest(c.id,c),l.shallYield())return l.yield();return l.wait(b.Fh)},
"that"),ut:function(b){for(var c=b.length,d=0;c--;)d+=b[c].path.internalArray.length;return d},create:function(b,c,d,a){b=new g(a,this,new this.Yr[b](c,d),b);b.Tu();b.state!==!1&&(this.np||this.ut(b.Jh)<3E3?(b.paint(),this.finishRequest(a,b,!1,!0)):(this.uf.push(b),l.signal(this.Fh)));return b},xt:function(b,c){for(var d=this.jm,a=this.fu,a=this.xm.requestBBox(c?new h(b.xyToGeo(-a,-a),b.xyToGeo(this.width+a,this.height+a),!0):new h(b.xyToGeo(0,0),b.xyToGeo(this.width,this.height),!0),1,c),e=a.length,
g=-1,l=[],m;++g<e;)(m=d?a[g]:a[g].getObject(!0))&&l.push(m);return l}})})();ovi.provide("nokia.maps.map.provider.ImgTileProvider");
(function(){var e=nokia.maps,l=e.dom,h=e.util.now,d=e.map.provider.Tile,c=l.imgLoader;nokia.maps.map.provider.ImgTileProvider=new ovi.Class({Extends:nokia.maps.map.provider.TileProvider,initialize:function(c){this._super(c);if(!c||c.timeout===void 0)this.timeout=3E4},create:function(e,b,f,r,a){var q=this,k,p=new d(r,k=document.createElement("img"),q),e=q.getUrl(e,b,f),m;a?l.loadImg(k,e)!==!0?l.cancelImg(k):p.state=!0:(m=h(),c.request(k,e,function(a,b,c){p.state=b;q.finishRequest(r,p,!b&&h()-m>q.timeout,
c)}));return p},cancel:function(d){var b;(b=this._super(d))&&c.cancel(b.data);return b}})})();ovi.provide("nokia.maps.map.provider.ObjectTileProvider");
(function(e){var l=e.net.Request,h=e.map.provider.Tile;nokia.maps.map.provider.ObjectTileProvider=new ovi.Class({Extends:nokia.maps.map.provider.TileProvider,initialize:function(d){this._super(d);this.nk=new l(d.requestType||l.JSONP);this.cb=[];this.Fa=0},Statics:{XHR:l.XHR,JSONP:l.JSONP},gu:e.dom.Page.browser.mobile?6:34,Pp:function(){for(var d=this,c=0,e=d.cb,b;c<e.length&&d.Fa<=d.gu;c++)b=e.shift(),d.nk.send(d.getUrl(b[0],b[1],b[2]),function(b,c){return function(a){if(!a.error&&!a.timeout)c.data=
a.response,c.state=!0,d.finishRequest(b,c);d.Fa--;setTimeout(function(){d.Pp()},1)}}(b[3],b[4]),b[3]),d.Fa++},create:function(d,c,e,b,f){var l=new h(b,!1,this);f?this.Ua[l.id]?this.cancel(l.id):l.state=!0:(this.cb.push([d,c,e,b,l]),this.Pp());return l},cancel:function(d){var c,e=0,b=this.cb,f=this.cb.length;if(c=this._super(d))for(;e<f;e++)if(b[e][4]===c){this.finishRequest(d,c,!0,!0);b.splice(e,1);break}return c}})})(nokia.maps);ovi.provide("nokia.maps.map.render.p2d.Engine");
(function(e){function l(a,b){return a instanceof b}var h=[],d=Number.POSITIVE_INFINITY,e=nokia.maps,c=e.util,g=c.A,b=c.d,f=c.qf,r=c.Vector3D,a=e.css.supportsTransition,q=self.clearTimeout,k=Math,p=k.pow,m=k.min,y=k.max,s=k.round,v=k.floor,u=k.LN2,x=k.log,w=k.abs,z=k.tan,B=k.sqrt,k=k.PI,D=c.Point,A=c.Ia,C=[].slice,E=e.geo,M=e.dom.Page.browser,I=E.mercator,K=z(35/180*k),Q=k*6371E3,F=new D(256,256),L=[0,0,0,0],ea=[-256,-256,-256,-256],U=M.mobile?50:0,aa=E.Coordinate,la=E.BoundingBox,z=e.map,k=z.provider,
J=k.TileProvider,ba=k.LocalObjectProvider,G=k.RemoteObjectProvider,R=k.ImageProvider,Ba=k.CanvasProvider,S=z.render,sa=S.p2d,fa=sa.capabilities,H=sa.Animation,ga=fa.ZOOM,X=fa.COORD,ia=fa.SIZE,V=sa._helpers.geoToScreen,$a=0;sa.Engine=new ovi.Class({initialize:function(a,b,c,d){var d=d||{},f=this;f.c=$a++;f.Vi="nma_p2d_"+f.c;f.sv(d.fading);f.Fu=d.onViewChange||g;f.Bu=d.onStateChange||g;f.Aq=d.onValueExceeded||g;f.ak=d.onTransition||g;f.Ni=ovi.bind(f,f.Ni);f.Va=new D(a.offsetWidth,a.offsetHeight);f.ge=
f.oe(f.s=a);f.B={latitude:0,longitude:0,altitude:0,heading:0,tilt:0,incline:0,zoom:0,distance:0};f.Pd={latitude:0,longitude:0,altitude:0,yaw:0,pitch:0,roll:0,fov:70};f.Z=new E.PixelProjection(I,2,2,1,1);f.lb=new D(0.5,0.5);f.Ad=[0,0,0,0];f.Dq=new D(0,0);f.ob=new D(0,0);f.Zb=new D(0,0);f.ah=new e.map.render.InteractionRecorder;f.Bb=ovi.bind(f,f.Bb);f.ue=ovi.bind(f,f.ue);f.$t=0;f.au=0;f.ad=2147483647;f.Ef("busy");f.ih=f.oe(f.ge,void 0,!1,!0);f.setMapProvider(b);f.kr(c);f.Pt();f.Tk();f.Zu=setTimeout(function(){d.onReady(f)},
1)},Statics:{TRANSITION:{AUTO:0,NONE:1,FADE:2,LINEAR:4,FLUID:8}},Pt:function(){var a=this.s;a.style[e.css.Zv+"Transition"]+=","+e.css.oo+"transform .15s linear";a.addEventListener&&a.addEventListener(e.css.Lr,ovi.bind(this,this.qu),!1)},loadDestinationCam:function(a,b){var c=this.viewToCam(a);this.Jn(a);this.hs=!0;this.update(!0,!0);b(c)},setHandoverProperties:function(){},exit:function(a,b){this.onExit=b;a?this.setCam(a):(this.onExit(),this.onExit=void 0)},enter:function(a,b){this.onEnter=b;a?this.setCam(a):
(b.call(this),this.onEnter=void 0)},TRANSITION_START:1,TRANSITION:2,TRANSITION_END:4,capabilities:fa,Ve:0,Bb:function(){var a=this;this.Bj&&!--this.Bj&&setTimeout(function(){a.Ef("idle")},0)},kl:function(a,b){return l(a,ba)||l(a,G)||l(a,J)||l(a,R)||l(a,Ba)&&(!b||a.projection===this.Z.p)},rp:function(a){return this.ge.childNodes[a+1]},fs:function(a,b){for(var c=this.Sm,d,f=this.zd,e,g=f.length;g--;)e=f[g],d=c.get(g),this.kl(d,!0)?e?l(d,ba)&&e.Bo(a,b):this.oe(this.s,e.shutdown(),!0,!1):e&&this.oe(this.s,
e.shutdown(),!0,!0)},setMapProvider:function(a){var b=this.Wc,c=this.mf,d,f,e=this.ic,g,k=this.Z,h={cssClass:this.Vi};if(a!==b&&(g=this.kl(a),this.ih=d=this.oe(this.ge,this.ih,!0,!g),c&&(c.shutdown(),this.tk(b,!1),--this.Ve),g?(this.tk(a,!0),++this.Ve,l(a,J)?(h.fading=this.Ll,c=new this.hj.MapLayer(d,a,h,this.Bb),f=a.projection,b=a.tileSize):c=new this.hj.ObjectLayer(d,a,h,this.Bb,f=I,b=F)):b=c=void 0,e=this.Sm&&(f!==k.p||!b.equals(e)),this.Wc=a,this.mf=c,k.p=f,this.ic=b,g))this.Er=b.x/b.y,this.rk(this.lb),
this.dc(A(this.B.zoom,a.min,a.max)),e&&this.fs(f,b)},tk:function(a,b){a[(b?"add":"remove")+"Listener"]("update",this.ue)},kr:function(a){var b,c,d=0;a?(b="add",this.Sm=a,this.zd=ovi.Array([])):(b="remove",a=this.Sm);for(c=a.getLength();d<c;)this.Bq(a,b,a.get(d),d),d++;a[b+"Observer"](this.Bq,this);this.update(!1,!0)},Bq:function(a,b,c,d){var a=this.zd,f,e=this.kl(c),g={cssClass:this.Vi};if(b==="add")f=this.oe(this.ge,this.rp(d),!1,!e),e&&(++this.Ve,this.tk(c,!0),(b=this.Vs(c,f,g))&&a.splice(d,0,b),
b?b.ta():this.ge.removeChild(f));else{if(b=a[d])this.tk(c,!1),f=b.shutdown(),--this.Ve;f=a[d]?f:this.rp(d);a.splice(d,1);this.ge!==f&&f&&this.ge.removeChild(f)}this.update(!1,!0)},Vs:function(a,b,c){var d=this.hj,f=this.Bb;return l(a,ba)||l(a,G)?new d.ObjectLayer(b,a,c,f,this.Z.p,this.ic):l(a,J)?new d.TileLayer(b,a,c,f):l(a,R)?new d.ImageLayer(b,a,0,f):l(a,Ba)?new d.CanvasLayer(b,a,f):void 0},ic:F,Er:1,ue:function(){this.update(!1,!0)},kb:Math.pow(-2,53),hl:function(a){var b=this.ad;if(b&&(++this.kb,
this.Fu(this,b,a),a))this.ad=0},Ni:function(){var a=this.state;this.gl=0;if(a!==this.Wu)this.Bu(this,this.Wu=a)},Ef:function(a){if(a!==this.state&&(this.state=a,!this.gl))this.gl=setTimeout(this.Ni,0)},shutdown:function(){this.Ba&&this.Ba.stop(!0);this.kr();this.setMapProvider();q(this.Zu);c.cancelAnimationFrame(this.gd);q(this.Bf);q(this.gl);this.state="shutdown";this.Ni()},Md:function(a,b,c){var d=this.Z,f=this.lb,e=d.w,a=d.x+=a;f.x=(d.x=(a%e+e)%e)/e;f.y=(d.y+=b)/d.h;c||this.ei(d.p.pointToGeo(f),
!0)},dr:function(a,b){a.i=b;a.wj={x:this.lb.x,y:this.lb.y}},iw:function(){var a=this.mf.e,b=this.Z,c=this.B.zoom;return scale=new nokia.maps.util.Point(b.w/(Math.pow(2,c)*a.ic.x),b.h/(Math.pow(2,c)*a.ic.y))},Tk:function(){var a=this.Va,b=this.ob,c=this.Zb,d=this.Ad,f=d[0],e=d[3],g=a.x-e-d[1],a=a.y-f-d[2],d=this.Dq;b.x=c.x=s(g/2+e);b.y=c.y=s(a/2+f);this.ta(this.ih);d.x=y(g,0);d.y=y(a,0);this.sn();this.update(!0)},resize:function(a,b){this.Va.x=a;this.Va.y=b;this.ad|=ia;this.Tk()},setPadding:function(a,
b,c,d){this.Ad.splice(0,4,+a||0,+b||0,+c||0,+d||0);this.kb++;this.Tk()},suspend:function(){this.Ef("suspended")},resume:function(){this.Ef("idle")},type:"2d",Ll:0,sv:function(a){this.Ll=M.mobile?0:+a},Kf:0,setTransition:function(a,b){this.Kf=a;this.co=b},getView:function(){return this.B},rk:function(a,b){var c=this.lb,d=this.Z;d.x=d.w*(c.x=a.x);d.y=d.h*(c.y=a.y);b||this.ei(d.p.pointToGeo(c),!0)},ei:function(a,b){var c=this.B,d=this.Pd;b||this.rk(this.Z.p.geoToPoint(a),!0);if(c.latitude!==a.latitude||
c.longitude!==a.longitude)c.latitude=d.latitude=a.latitude,c.longitude=d.longitude=a.longitude,this.ad|=X;this.sn();this.update(!1,!0)},sn:function(){this.ba=this.Cq=this.cq=0},gi:function(a,b,c,d,f){var e=this;e.Ba&&e.Ba.isRunning&&(e.Ba.stop(f),e.ak(e.TRANSITION_END));e.ak(e.TRANSITION_START);e.Ba=new H(function(){a.apply(a,arguments);e.ak(e.TRANSITION)},function(){b&&b.apply(b,arguments);e.ak(e.TRANSITION_END)},c,d);e.Ba.start()},yp:function(){var a;if(this.onExit)a=this.onExit,this.onExit=void 0,
a();if(this.onEnter)a=this.onEnter,this.onEnter=void 0,a();this.hl()},setView:function(a){var b=this,c=b.B.zoom,d=(a.zoom!==void 0?a.zoom:b.El(a.distance))-c,f,e=!0,g,k;b.Kf===sa.Engine.TRANSITION.AUTO&&b.Jo(a)?b.gi(function(h){e&&(f=c+h*d,b.Pi(f)?e=!1:b.dc(c+h*d));g=b.Z.p.geoToPoint(a);k=b.lb;b.rk(new D(k.x+(g.x-k.x)*h,k.y+(g.y-k.y)*h));b.update(!0,!0)},function(){b.Jn(a);b.yp()},null,b.co):(b.Jn(a),b.yp());return b.B},Jn:function(a){this.Kf=sa.Engine.TRANSITION.NONE;this.setCoord(a);isNaN(a.distance)?
this.dc(a.zoom):this.setDistance(a.distance);this.Kf=sa.Engine.TRANSITION.AUTO},setCoord:function(a){var b=this,d=b.Z.geoToPixel(a),f=b.Z.geoToPixel(b.B),e=d.x-f.x,g=d.y-f.y,k,h,l=0;a&&aa.isValid(a.latitude,a.longitude,a.altitude)&&!(b.B.latitude===a.latitude&&b.B.longitude===a.longitude)?b.Kf===sa.Engine.TRANSITION.AUTO&&b.Jo(a)?b.gi(function(a){k=f.x+(a-l)*e;h=f.y+(a-l)*g;b.Md(k,h);b.update(!0,!0);l=a},function(){b.ei(a)},c.animation.easeFunctions.EASE_OUT_QUAD,b.co):b.ei(a):a=b.B;return new aa(a.latitude,
a.longitude,a.altitude)},Jo:function(a){var b=this.Z.geoToPixel(this.B),a=this.Z.geoToPixel(a);return w(a.x-b.x)<=this.Va.x&&w(a.y-b.y)<=this.Va.y},Uk:function(a,b,c){c=c.width;return x((b.w=b.h=p(2,s(x(b.w/c)/u))*s(c*p(2,a-s(a))/2)*2)/256)/u},dc:function(a,b,c){var d=this.B,f=this.Z,e=b!==void 0,g=this.ob,a=A(a,this.Wc.min,this.Wc.max);if(e)this.Zb.x=b,this.Zb.y=c,this.Md(b-=g.x,c-=g.y,!0);f.w=p(2,a+8);a=this.Uk(a,f,this.Wc);if(a!==this.B.zoom)d.zoom=a,d.distance=this.Ci(a),this.ad|=ga;this.Pd.altitude=
d.distance+(d.altitude||0);this.rk(this.lb,!0);e?(a=this.ph(-c),this.Md(-b,a,!1)):(this.sn(),this.update(!1,!0))},setZoom:function(a,b,c){var d=this,f=d.B,e=d.B.zoom,g=a-e,k=d.Wc;if((a=A(a,k.min,k.max))!==f.zoom&&!isNaN(a))d.Kf===sa.Engine.TRANSITION.AUTO?d.gi(function(a){d.dc(e+a*g,b,c);d.update(!0,!0)},function(){d.dc(a,b,c)},null,d.co,!0):d.dc(a,b,c);return f.zoom},getZoom:function(){return this.B.zoom},Ci:function(a){var b=this.Wc;return A(Q/p(2,a)/K,Q/p(2,b.max)/K,Q/p(2,b.min)/K)},El:function(a){return A(-(x(a*
K/Q)/u),this.Wc.min,this.Wc.max)},setDistance:function(a,b,c){var d=this.B;m(y(a,0),1/0)===a&&this.dc(this.El(a),b,c);return d.distance},setHeading:function(){return this.B.heading},setTilt:function(){return this.B.tilt},setIncline:function(){return this.B.incline},Vg:function(a){return a===this.Ad?this.Cq||(this.Cq=this.vg(a)):a===ea?this.cq||(this.cq=this.vg(a)):a===L||!a?this.ba||(this.ba=this.vg(L)):this.vg(a)},vg:function(a){var b=this.Va,c=this.ob,d=a[0]-c.y,f=a[3]-c.x,e=b.y-c.y-a[2],a=b.x-
c.x-a[1],b=this.Z;f>a&&(f=a=0);d>e&&(d=e=0);d=b.pixelToGeo({x:f,y:d});e=b.pixelToGeo({x:a,y:e});if(a-f>=b.w)d.longitude=-(e.longitude=180);return new la(d,e)},ph:function(a){var b=this.Z,c;c=(b.y+a)/b.h;c<0?a=-b.y:c>1&&(a=b.h-b.y);return a},Ls:function(a,b,c,d){var c=a-c,f=b-d,d=B(p(c,2)+p(f,2));a-=c/2;b-=f/2;d=x(p(2,this.Rt)*(d/this.Qt))/u;this.Pi(d,a,b)||w(this.B.zoom-d)>=0.1&&this.dc(d,a,b)},Is:function(a,b,c,d){this.Md(this.lj+(this.Ip-this.lj)/2-(a+(c-a)/2),this.ph(this.mj+(this.Jp-this.mj)/
2-(b+(d-b)/2)))},getBBox:function(){return this.Vg(this.Ad)},getCenter:function(){return new aa(this.B.latitude,this.B.longitude,void 0,!0)},camToView:function(a){var b=aa.fromObject([a.latitude,a.longitude,0,a.altMode]),a=b.distance(new aa(a.latitude,a.longitude,a.altitude,!1,a.altMode),!0),c=this.El(a),a=this.Ci(c);return ovi.extend({},this.B,b,{distance:a,zoom:c})},getCam:function(){return this.Pd},setCam:function(a){this.setView(this.camToView(a));return this.getCam()},setCamCoord:function(a){this.ei(a);
return new aa(a.latitude,a.longitude,a.altitude,!0)},setYaw:function(){return this.Pd.yaw},setPitch:function(){return this.Pd.pitch},setRoll:function(){return this.Pd.roll},viewToCam:function(a){var b=a.distance,b=+b===b?b:this.Ci(a.zoom),a=aa.fromObject([a.latitude,a.longitude,b,a.altMode]);return ovi.extend({},this.Pd,a)},Ct:function(a,b,c){var d=this.Z,f=ovi.extend({},this.B),e=d.w;if(a||b)b=this.ph(-b*91.401472),a={x:(a*91.401472+d.x)%e/e,y:(d.y+b)/d.h},d=d.p.pointToGeo(a),f.latitude=d.latitude,
f.longitude=d.longitude;if(c)f.zoom+=c,f.distance=this.Ci(f.zoom);f.distance=this.Ci(f.zoom);return f},ks:function(a,b,c,d){var f=this.B,d=d||1;if(a||b)b=this.ph(-b*91.401472*d),this.Md(a*91.401472*d,b);c&&(a=f.zoom+c*d,this.Pi(a)||this.dc(a));this.update(!0,!0)},Pi:function(a){var b=this.Wc;return a>b.max?(this.B.zoom!==b.max&&this.dc(b.max),this.Aq(ga,a),!0):a<b.min?(this.B.zoom!==b.min&&this.dc(b.min),this.Aq(ga,a),!0):!1},Ri:!1,beginControl:function(a,b,c,d){this.Ri=C.call(arguments,0);this.vj=
b;this.Ps=ovi.extend({},this.getView());this.jw=c;this.kw=d;this.Ba&&this.Ba.isRunning&&this.Ba.stop(!0)},control:function(a,b,c,f,e,g,k,h){var l=this,m=l.B,p,f=f||h;if(l.Ri)l.gi(function(a,d,e){p=m.zoom+f*e;l.Pi(p)?f=0:l.ks(b,c,f,e);if(this!==l.Ba)return!0},null,null,d),l.Rs=b,l.Ss=c,l.Ts=f,l.lw=h},endControl:function(a){var b=this.vj,c,d,f,g=this.B;d=!1;if(this.Ri)this.Ri=!1,this.Ba&&this.Ba.isRunning&&this.Ba.stop(),b&&(c=new r(this.Rs,this.Ss,this.Ts),d=c.normalize(),f=c.magnitude(),c=typeof b.duration===
"function"?b.duration(f):600,b=typeof b.power==="function"?b.power(f):1,f*=b,b=new e.map.render.KineticMove(f,-(f/c)),b=b.getPath(c),d=this.Ct(d.x*b,d.y*b,d.z*b)),a=typeof a==="function"?a(this.Ps,g):d,a!==!1&&(this.setTransition(sa.Engine.TRANSITION.NONE,c),this.setView(a),this.setTransition(sa.Engine.TRANSITION.AUTO,c))},gs:function(a){if(a&=fa.ui)for(var b=a&X,c=X,d=0;c>>=1;){if(a&c&&(b|=c,++d>1))break}else b=X;return b},beginInteraction:function(a,b,c,d,f,e,g){if(this.fm)this.Hl=null,this.Ba&&
this.Ba.isRunning&&this.Ba.stop(),this.endInteraction();if(this.kj=this.gs(a)){this.fm=!0;this.lj=d;this.mj=f;if(e===+e&&g===+g)this.Ip=e,this.Jp=g;this.Qt=B(p(d-e,2)+p(f-g,2));this.Rt=this.B.zoom}if(this.vj=b)this.ah.reset(),this.ah.recordXY(c,d,f)},interact:function(a,b,c,f,e){var g,k;if(this.fm&&(!this.Sp||a-this.Sp>U)){if(a!==d)this.Sp=a;f===+f&&e===+e?(this.kj&X&&this.Is(b,c,f,e),this.kj&ga&&this.Ls(b,c,f,e),this.Ip=f,this.Jp=e):this.kj&X&&(g=this.ph(this.mj-c),k=this.lj-b,this.Md(k,g));this.lj=
b;this.mj=c;this.vj&&this.ah.recordXY(a,b,c,f,e)}},endInteraction:function(a){var b=this,c=b.vj,d=b.Z,f,g,k,h,l,m,p;c&&(f=b.ah.getInteractionDirection(a),h=b.ah.getInteractionSpeed(a),g=typeof c.duration==="function"?c.duration(h):600,a=typeof c.power==="function"?c.power():1,l=h*a,p=new e.map.render.KineticMove(l,-(l/g)),!isNaN(f.x)&&!isNaN(f.y)&&l>0&&b.gi(function(a){l=p.getValue(a*g);if(b.kj&X&&!isNaN(l)){m=-f.y*l;k=(d.y+m)/d.h;if(k<0||k>1)f.y=-f.y,m=-f.y*l;b.Md(s(-f.x*l),s(-f.y*l),!1);b.update(!0,
!0)}},null,c.ease,g));b.fm=!1},setPointer:g,screenToGeo:function(a,b){return this.Z.pixelToGeo(new D(a-this.ob.x,b-this.ob.y))},geoToScreen:function(a){return V(a,this.Z).add(this.ob).round()},convertAlt:function(a,b){var c=a.altMode||"GL";return c===(b||"GL")?a.altitude:NaN},viewForXY:function(a,b){return ovi.extend({},this.B,this.Z.pixelToGeo(new D(a-this.ob.x,b-this.ob.y)))},viewForBBox:function(a){var b=fa.view.zoom.max,c=ovi.extend({},this.B,a.getCenter()),d,f,e=this.Dq,g;a.isEmpty()||(f=new E.PixelProjection(this.Z.p,
d=p(2,b),d*this.Er),g=f.geoToPixel(a.topLeft),f=f.geoToPixel(a.bottomRight),b-=8+y(x(a.isCDB?d-g.x+f.x:f.x-g.x)/u-x(e.x)/u,x(f.y-g.y)/u-x(e.y)/u));c.zoom=v(b);c.distance=NaN;return c},viewFor:function(a){for(var b=[],c=a.length;c--;)b.push(a[c].getBoundingBox());return this.viewForBBox(la.merge(b))},getObjectAt:function(a,b){return this.yb(a,b,!0)[0]},getObjectsAt:function(a,b){return this.yb(a,b,!1)},yb:function(a,b,c){var d=sa.ObjectLayer,e=this.zd,g=e.length,k,l,m,p=!1,q=this.Z,r=this.ob;a-=r.x;
b-=r.y;for(c=!!c;g--;)if((k=e[g])&&k instanceof d)if(l=k.yb(a,b,f((q.x+a)/q.w,1),f((q.y+b)/q.h,1),c),l.length){if(c)break;m=p?m.concat(l):l;p=!0}return m||l||h},getObjectsWithin:function(a,b,c,d){for(var f=this.Va,a=this.vg([b,f.x-c,f.y-d,a]),b=this.zd,c=b.length,d=[];c--;)f=b[c],f.qp&&(f=f.qp(a))&&f.length&&(d=d.concat(f));return d},capture:function(a,b,c,d){var f=this.Va,a=A(a||0,0,f.x),b=A(b||0,0,f.y),c=A(c||f.x,a,f.x),d=A(d||f.y,b,f.y),f=(new e.gfx.Graphics).beginImage(c-a,d-b,"capture"),g=this.zd,
k=g.length,h;this.mf.capture(f,a,b,c,d);for(h=0;h<k;h++)g[h].capture(f,a,b,c,d);return f},preload:function(a,c){a||b("view");return new S.Preloader([],c)},bounce:function(b,c,d){a()&&(c&&d&&(this.s.style[e.css.getVendorJsProperty("transformOrigin")]=[c,"px ",d,"px"].join("")),this.s.style[e.css.getVendorJsProperty("transform")]="matrix("+(!b?".9, 0, 0, .9, 0, 0":"1.1, 0, 0, 1.1, 0, 0")+")")},qu:function(a){if(/\btransform$/.test(a.propertyName))a=a.target.style,a[e.css.getVendorJsProperty("transform")]!==
"matrix(1, 0, 0, 1, 0, 0)"?a[e.css.getVendorJsProperty("transform")]="matrix(1, 0, 0, 1, 0, 0)":this.fw=!0}})})(nokia.maps);ovi.provide("nokia.maps.map.render.p2d.ObjectLayer");
(function(e){var l=[],h=e.map.provider,d=h.SpatialTileProvider,c=h.LocalObjectProvider;e.map.render.p2d.ObjectLayer=new ovi.Class({initialize:function(d,b,f,e,a,h){this.zj=f;this.rf=ovi.bind(this,this.rf);this.n=d;this.e=b;this.It=b instanceof c;this.Da=e;this.Bo(a,h);this.So()},Bo:function(c,b){var f=this.vk;if(this.fn!==c||!b.equals(this.ic))this.fn=c,this.ic=b,f&&f.shutdown(),this.vk=new d(this.e,{projection:c,width:b.x,height:b.y}),this.Uo(),this.vk.np=1},yr:0,rf:function(c){(this.yr|=c===this.Db?
1:2)===3&&this.Da(this,!1)},shutdown:function(){this.Da=e.util.A;this.Db.shutdown();this.me.shutdown();e.dom.ac(this.n);return this.n},ta:e.util.A,stop:function(){this.Db.stop();this.me.stop()},render:function(c,b,d,e,a,h,k,l,m,y,s,v,u,x){var w=this.Db.render(c,b,d,e,a,h,k,l,m,y,s,v,u,x),c=this.me.render(c,b,d,e,a,h,k,l,m,y,s,v,u,x);this.yr=0;return w&&c},yb:function(c,b,d,e,a){c=this.me.yb(c,b,a);if(!a||!c.length)c=c.concat(this.Db.yb(d,e,a));return c},qp:function(c){var c=this.e.requestBBox(c,3),
b;if(!this.It)for(b=result.length;b--;)c[b]=c[b].getObject();return c||l},capture:function(c,b,d,e,a){this.Db.capture(c,b,d,e,a);this.me.capture(c,b,d,e,a)}})})(nokia.maps);ovi.provide("nokia.maps.map.render.p2d.canvas.ObjectLayer");
(function(){var e=nokia.maps.map.render.p2d,l=e.canvas,h=l.MarkerLayer,d=l.SpatialTileLayer;l.ObjectLayer=new ovi.Class({Extends:e.ObjectLayer,ta:function(){this.Db.ta();this.me.ta()},So:function(){this.me=new h(this.n,this.e,this.zj,this.rf)},Uo:function(){this.Db=new d(this.Db?this.Db.shutdown():this.n,this.vk,this.zj,this.rf)}})})();ovi.provide("nokia.maps.map.js.nlpTileProviders");
(function(e){function l(c){c=new e.map.provider.ImgTileProvider(c);c.getUrl=function(a,c,d){this.pt||this.ot();var f=this.subDomains,e=this.mode==="community"?"."+this.mapColors:this.mapType+"."+this.mapColors,f=[this.protocol,f?f[(c+d)%f.length]+".":"",this.baseUrl,this.tileType?this.tileType+"/":"",this.version?this.version+"/":"",e.length>1?e+"/":"",this.mode==="nokia"?q.nokia(a,c,d)+this.width+"/":"",this.imgType,this.mode==="community"?q.navteq(a,c,d):""],e=this.additionalParameters,g=[],k;if(this.mode===
"navteq")e.quadKey=q.navteq(a,c,d);for(k in e)g.push(encodeURI(k+"="+e[k]));f.push(g.length>0?"?"+g.join("&"):"");return b.addNlpParams(f.join(""),!0)};c.ot=function(){var b=this.additionalParameters,c=f.defaultLanguage;if(!b.lg&&f.defaultLanguage&&(c&&(c=c.substr(0,2)),c&&(c=a[c]),c))b.lg=c;this.pt=!0};c.setTileVersion=function(a){if(a!=this.version)this.version=a,this.update()};c.setTileLanguage=function(a){this.additionalParameters.lg=a;this.update()};c.getCopyrights=function(a,b){return g.copyrights.get(this.mapType===
"traffic"?"normal":this.mapType,a,b)};c.timeout=-1;return c}function h(a){var b,c=f.serviceMode;for(b in a)if(a.hasOwnProperty(b)&&a[b].service)a[b].baseUrl=k.baseUrl.replace("{service}",a[b].service).replace("{serviceMode}",c?"."+c:"")}var d=e.config,c=e.util,g=e.map.js,b=nokia.maps.util.services,f=c.getRootNameSpace("nokia.maps").Settings,r=g.nlpTileProviders,a={en:"ENG",zh:"CHI",es:"SPA",fr:"FRE",it:"ITA",de:"GER",ru:"RUS"},q={nokia:function(a,b,c){return a+"/"+c+"/"+b+"/"},navteq:function(a,b,
c){for(var d,f=[];a-- >0;)d=1<<a,f.push(((c&d)!==0)+((b&d)!==0)*2);return f.join("")}},k={min:0,max:20,width:256,height:256,label:"Map",description:"Show street map",protocol:"http://",subDomains:[1,2,3,4],baseUrl:"{service}.maps{serviceMode}.api.here.com/maptile/2.1/",tileType:"maptile",version:"newest",mapType:"normal",mapColors:"day",additionalParameters:{},mode:"nokia",imgType:"png8",providerType:"base"},p={NORMAL:{service:"base"},SATELLITE:{mapType:"hybrid",label:"Hybrid",description:"Show hybrid imagery",
service:"aerial"},SATELLITE_PLAIN:{mapType:"satellite",label:"Satellite",description:"Show satellite imagery",service:"aerial"},TERRAIN:{mapType:"terrain",label:"Terrain",description:"Show terrain map",service:"aerial"},SMARTMAP:{mapColors:"day.grey",label:"Smart Map",description:"Show smart map",service:"base"},SMART_PT:{mapColors:"day.transit",label:"Public Transit Map",description:"Show public transport",service:"base"},TRAFFIC:{tileType:"traffictile",label:"Traffic Map",description:"Show traffic",
updateCycle:169,service:"traffic"},NORMAL_COMMUNITY:{baseUrl:"communitymaptiles.nokia.com/tilehub/",mapType:"normal",mapColors:"",tileType:"live/map",imgType:"png/",mode:"community",min:1,version:null,label:"Community Map",description:"Show map with live community edits",updateCycle:180},SATELLITE_COMMUNITY:{baseUrl:"communitymaptiles.nokia.com/tilehub/",mapType:"satellite",mapColors:"",tileType:"live/sat",imgType:"png/",mode:"community",min:1,version:null,label:"Community Satellite Map",description:"Show satellite map with live community edits",
updateCycle:180}},m,y=[],s=[],v={},u;for(m in p)u=l(c.flatMerge(p[m],k)),(u.providerType==="base"?y:s).push(v[m]=u),u.label==="Traffic Map"&&s.push(v[m]=u);r.constants=v;r.base=y;r.overlays=s;if(c.isWebGl()&&d.includeWebGL)r.constants.GLOBE=new nokia.maps.map.provider.GlobeProvider,r.constants.PANORAMA=new nokia.maps.map.provider.PanoramaProvider,r.constants.COVERAGE=new nokia.maps.map.provider.ImgTileProvider({max:20,getUrl:function(a,c,d){return b.addNlpParams(["http://"+((c+d)%4+1)+".maps.nxt.nlp.nokia.com/maptiler/v2/rctile/newest/normal.day",
a,d,c,"256/png8?lg=ENG"].join("/"))},getCopyrights:function(a,b){return g.copyrights.get("normal",a,b)}});h(r.constants);f.addObserver("serviceMode",function(){h(r.constants)})})(nokia.maps);ovi.provide("nokia.maps.map.overlay.TrafficIncidentsProvider");
(function(e){var l=e.util.Event,h=e.gfx.BitmapImage,d={x:12,y:12};nokia.maps.map.overlay.TrafficIncidentsProvider=new ovi.Class({Extends:e.map.provider.RemoteObjectProvider,initialize:function(c){var d=this.tileSize,b;this._super(c);b=1<<this.max;this.zk=new e.map.provider.ObjectTileProvider(c);this.Dp=this.us();this.Ua={};this.vc={};this.Mt=new e.language.Manager;this.zk.addListener("response",this.sa=ovi.bind(this,this.sa));this.fn=new e.geo.PixelProjection(nokia.maps.geo.mercator,d*b,d*b)},tileSize:256,
width:256,height:256,sa:function(c){var d=c.data[1],b=c.data[0],f=this.Ua,e,a;delete this.vc[b];for(e in f){a=f[e];c=a.Bd.indexOf(b);if(c!==-1)a.Bd.splice(c,1),a.zf=a.zf.concat(this.cn(d));if(!a.Bd.length)c=new l("response"),c.data=[e,a.zf],this.dispatch(c),delete f[e]}},us:function(){var c=e.loadPath+"assets/ovi/mapsapi/ui/images/trafficitems/";return{CONSTRUCTION:new h(c+"construction.png",function(){},24,24),EVENT:new h(c+"event.png",function(){},24,24),"MASS TRANSIT":new h(c+"masstransit.png",
function(){},24,24),INCIDENT:new h(c+"incident.png",function(){},24,24)}},requestBBox:function(c,d,b,f){if(d!==2)return!1;var d=this.fj(c,b),e=this.Ua[d];e?!f&&e.Fa++:f||(e=this.Ua[d]={Fa:1,zf:[],Bd:new ovi.Array});if(e&&e.Bd.length&&e.Fa>1&&!f)return!0;return this.dv(c,b,f)},cancelBBoxRequest:function(c,d,b){var d=this.Ua,c=this.fj(c,b),f=d[c],e=this.vc,a;if(f&&(b=f.Bd,a=b.length,f.Fa--,!f.Fa)){for(;a--;)f=b[a],e[f]===1?(this.zk.cancel(f),e[f]=void 0):e[f]--;delete d[c]}},dv:function(c,d,b){var f=
this.pp(c,d),e=f[0],a=f[1],h=f[2],f=f[3],c=this.fj(c,d),k,l,m,y,s=this.vc,v=[];for(l=e;l<h+1;l++)for(m=a;m<f+1;m++)if(y=this.zk.request(d,l,m,b),b)y&&(v=v.concat(y.data.proxies||this.cn(y)));else if(k=this.Ua[c],y===!0)e=this.zk.createId(d,l,m,!0),y&&k.Bd.indexOf(e)===-1&&(k.Bd.push(e),this.vc[e]?s[e]++:s[e]=1);else if(y!==!1)k.zf=k.zf.concat(y.data.proxies||this.cn(y));if(b)return v;else{if(!k)return!1;return k.Bd.length?!0:(v=k.zf,delete this.Ua[c],v)}},fj:function(c,d){return this.pp(c,d).join("_")},
pp:function(c,d){var b=this.max,f=this.tileSize,e=this.fn,a=e.geoToPixel(c.topLeft),e=e.geoToPixel(c.bottomRight);return[a.y/f>>b-d,a.x/f>>b-d,e.y/f>>b-d,e.x/f>>b-d]},getInvalidations:function(c,d){return c.getInvalidations(d)},cn:function(c){var g=c.data,b,f,h,a,l=[];if(g.TRAFFICITEMS&&g.TRAFFICITEMS.TRAFFICITEM){f=g.TRAFFICITEMS.TRAFFICITEM;for(g=f.length;g--;)if(b=f[g],b.LOCATION&&b.LOCATION.GEOLOC&&b.LOCATION.GEOLOC.ORIGIN)h=new e.geo.Coordinate(b.LOCATION.GEOLOC.ORIGIN.LATITUDE,b.LOCATION.GEOLOC.ORIGIN.LONGITUDE),
a="",b.TRAFFICITEMDESCRIPTION&&(a+=b.TRAFFICITEMDESCRIPTION[1].content+"<br/>"),b.CRITICALITY&&b.CRITICALITY.DESCRIPTION&&(a+=this.Mt.translateToken("ovi.service.map._t90")+": "+b.CRITICALITY.DESCRIPTION),h=new e.map.Marker(h,{icon:this.Dp[b.TRAFFICITEMTYPEDESC]||this.Dp.INCIDENT,anchor:d,isRemote:!0,$content:a}),h.e=this,b=h.Lc(),b[h.CHANGE_SPATIAL]=b[h.CHANGE_VISUAL]=b[h.CHANGE_ZINDEX]=this.kb,l.push(function(a){return{getObject:function(){return a}}}(h))}return c.data.proxies=l},qc:function(){this.update();
return++this.kb},adopt:function(){return!1},orphan:function(){return!1}})})(nokia.maps);ovi.provide("nokia.maps.map.render.p2d.dom.ObjectLayer");
(function(){function e(c){c=c.appendChild(c.ownerDocument.createElement("div"));c.style.position="absolute";c.style.zIndex=0;return c}var l=nokia.maps.map.render.p2d,h=l.dom,d=h.MarkerLayer,c=h.SpatialTileLayer;h.ObjectLayer=new ovi.Class({Extends:l.ObjectLayer,So:function(){this.me=new d(e(this.n),this.e,this.zj,this.rf)},Uo:function(){this.Db=new c(this.Db?this.Db.shutdown():e(this.n),this.vk,this.zj,this.rf)}})})();ovi.provide("nokia.maps.map.render.p2d.canvas.Engine");
(function(){var e=nokia.maps,l=e.util,h=l.requestAnimationFrame,d=[-256,-256,-256,-256],e=e.map.render.p2d,c=e.canvas;c.Engine=new ovi.Class({Extends:e.Engine,initialize:function(c,b,d,e){this.Ea=ovi.bind(this,this.Ea);this.mk=ovi.bind(this,this.mk);this.rn=ovi.bind(this,this.rn);this._super(c,b,d,e)},Statics:{TRANSITION:e.Engine.TRANSITION},hj:c,oe:function(c){if(!this.n)this.n=c.ownerDocument.createElement("canvas"),this.er(c),this.n.style.position="absolute",this.Qd=this.n.getContext("2d"),c.appendChild(this.n);
return this.n},ta:function(){var c=this.zd,b=c.length;this.er(this.s);for(this.mf.ta();b--;)c[b].ta();this.update(!0)},er:function(){var c=this.Va.y;this.n.width=this.Va.x||1;this.n.height=c||1},update:function(c,b){if(!this.$g){this.$g=!0;this.hl(!0);if(c)this.Ea(b);else{if(!this.gd)this.gd=h(this.mk);if(!this.Bf)this.Bf=setTimeout(this.rn,150)}this.$g=!1}},mk:function(){this.Ea(!0);this.gd=h(this.mk)},rn:function(){this.Ea(!1);this.Bf=0},Ea:function(c){var b,f,e=this.zd,a=e.length;f=this.Va;var h=
this.ob;this.Ef("busy");this.Qd.clearRect(0,0,f.x,f.y);this.Bj=this.Ve;(b=this.mf)&&b.render(this.B.zoom,this.lb,this.Z,this.Ad,this.Va,h,this.Vg(d),0,0,0,this.B.zoom,c,this.Zb,this.kb);for(f=0;f<a;)(b=e[f++])&&b.render(this.B.zoom,this.lb,this.Z,this.Ad,this.Va,h,this.Vg(d),0,0,0,void 0,c,this.Zb,this.kb);if(!c)this.Zb.x=h.x,this.Zb.y=h.y},Bb:function(c){this._super(c);this.update(!1,!0);if(!this.Bj)l.cancelAnimationFrame(this.gd),this.gd=0}})})();ovi.provide("nokia.maps.map.Display");
(function(e){var l=e.css,h=e.util,d=h.Point,c=Math,g=c.max,b=e.dom.Page.browser,f=c.round,r=h.Ia,a=h.d,c=e.gfx,q=c.Painter.defaultPainter===c.CanvasPainter,k=e.map,p=k.render.Capabilities.prototype,m=e.geo.Coordinate,y=e.dom,s={add:"attach",remove:"detach"},v=ovi.buildNS(e.config.tileProviders),u=k.Display=new ovi.Class({Extends:k.Container,initialize:function(a,b){var c=this,f,g,b=b||{};g=m.fromObject(b.center||b.view||[0,0]);f=b.view?b.view:g?ovi.extend({zoom:b.zoomLevel||0,altitude:0},g):{latitude:0,
longitude:0,altitude:0,zoom:0};b.center=g;c.default2dRenderMode=b.default2dRenderMode||c.default2dRenderMode;c.mm=0;c.nf=0;c.kf=!0;c.N=new k.Vr;e.util.getRootNameSpace("nokia.maps").Settings.lockLanguage();e.map.js.copyrights.loadCopyright();c.availableBaseMapTypes=new h.OList(v.base);v.constants.PANORAMA&&v.constants.PANORAMA.setBaseUrl();g=b&&b.baseMapType||c.availableBaseMapTypes.get(0);c.availableOverlays=new h.OList(v.overlays);c.overlays=new h.OList;c.Il=new h.OList;c.overlays.addObserver(c.Ju,
c);c.Ns(a);c.f=new d(c.da.offsetWidth,c.da.offsetHeight);c.Xi=c.f.divide(2).round();c.Hm=ovi.bind(c,c.Hm);c.Em=ovi.bind(c,c.Em);c.Gm=ovi.bind(c,c.Gm);c.Fm=ovi.bind(c,c.Fm);c.Dm=ovi.bind(c,c.Dm);c.addObserver("baseMapType",ovi.bind(c,c.ou));c.vd=f;c.copyrightPosition=c.poweredByPosition=new d(0,0);c.fading="fading"in b?b.fading:150;c.components=new h.OList;c.components.addObserver(c.Hs,c);c.set("baseMapType",g);c.components.as=c.components.L;c.components.L=function(a,b,c){for(var d=this.ha,f=d.length,
e=a.getId();f--;)d[f].getId()===e&&h.d('Component instance with ID "'+e+'" already registered');this.as(a,b,c)};g=b.components;delete b.components;b.viewBounds&&(delete b.center,delete b.zoomLevel,delete b.view,delete b.cam);c._super(b);c.Il.add(new k.provider.LocalObjectProvider(this,{min:-8,max:22}));f=c.parentDisplay;c.Ti=(c.tw=f&&f.visibility&&f.width>c.width&&f.height>c.height)?null:e.map.uo&&new e.map.uo(c);c.ad=0;c.qm=0;if(g)c.components.addAll(g),b.components=g;c.addListener("mouseleave",
c.Hn);c.addListener("mousemove",c.Hn);c.addListener("drag",c.Hn);c.gg=ovi.bind(c,c.gg);c.addListener("mapvalueexceeded",c.gg,!1);c.addObserver("bounceEnabled",function(a,b,d){d?c.addListener("mapvalueexceeded",c.gg,!1):c.removeListener("mapvalueexceeded",c.gg,!1)});c.Ao()},destroy:function(){for(var a,b=this.components;b.getLength()>0&&(a=b.get(0));)this.removeComponent(a);this.Ms();this.hn=this.fo=null;try{this.m&&this.m.shutdown()}catch(c){c.toString()!=="Error: Permission denied"&&c.toString()!==
"[object Error]"&&h.d(c)}this.m=null;clearTimeout(this.Ek);clearTimeout(this.qm)},Ju:function(a,b,c,d){var f=this.Il;if(b==="add"){if(f.add(c,d),c==null||a.indexOf(c)!==d)return!0}else f.removeAt(d)},animation:new h.OList(["none","default"]),u:"display",copyrightAlignment:"bottomleft",copyrightWidth:0,copyrightHeight:0,minZoomLevel:0,maxZoomLevel:0,zoomLevel:0,minTilt:0,maxTilt:0,tilt:0,minHeading:0,maxHeading:0,heading:0,padding:{top:0,right:0,bottom:0,left:0},poweredByWidth:0,poweredByHeight:0,
fixedCenter:!0,margin:64,default2dRenderMode:"dom",focus:function(){this.da.focus()},blur:function(){this.da.blur()},setZoomLevel:function(a,b,c,d){this.wc(b);if(this.N.inProgress)return a;this.Qr(a,c,d);this.m.setZoom(h.Ia(a,this.minZoomLevel,this.maxZoomLevel),c,d)},setCenter:function(a,b){this.N.inProgress||(this.wc(b),this.m.setCoord(m.fromObject(a)))},setHeading:function(a,b){this.N.inProgress||(this.wc(b),this.m.setHeading(h.Ia(a,this.minHeading,this.maxHeading)))},setTilt:function(a,b){this.N.inProgress||
(this.wc(b),this.m.setTilt(h.Ia(a,this.minTilt,this.maxTilt)))},setView:function(a,b){if(!this.N.inProgress)return this.wc(b),this.m.setView(a)},setCam:function(a,b){if(!this.N.inProgress&&!this.$v(a.fov))return this.wc(b),this.m.setCam(a)},setPadding:function(a,b,c,d){var f=arguments.length,f=f>3?[a,b,c,d]:f>2?[a,b,c,b]:f>1?[a,b,a,b]:[a,a,a,a];this.set("padding",{top:f[0],right:f[1],bottom:f[2],left:f[3]})},setAttributes:function(a,b,c,d,f){this.N.inProgress||(b!==void 0&&this.set("center",b),c!==
void 0&&this.set("zoomLevel",c),d!==void 0&&this.set("tilt",d),f!==void 0&&this.set("heading",f))},setCopyrightAlignment:function(a){this.set("copyrightAlignment",a)},setBaseMapType:function(a,b,c){if(!this.N.inProgress){this.is=b==="default"?!0:!1;if(c)this.vd=c;this.set("baseMapType",a)}},setTransition:function(a){this.N.inProgress||this.m.setTransition(a)},getZoom:function(a,b){return this.m.getZoom&&this.m.getZoom(a,b)||this.getView().zoom},getView:function(){if(this.N.inProgress&&!this.kf)return this.cu;
return ovi.extend({},this.m.getView())},getCam:function(){if(this.N.inProgress&&!this.kf)return this.Zt;return ovi.extend({},this.m.getCam())},getComponentById:function(a){for(var b=-1,c=this.components.getLength(),d;++b<c;)if((d=this.components.get(b))&&d.getId()===a)return d;return null},addComponent:function(a){var b=this.getComponentById(a.getId());if(b)return b.queryReference();this.components.add(a);return a},removeComponent:function(a){var b=a.releaseReference();b<=0&&this.components.remove(a);
return b},Hs:function(a,b,c){(a=s[b])&&c[a](this);a==="attach"&&this.zo(c)},zo:function(a){a.isCompatible(this.m.type)?a.set("enabled",!0,!0):a.set("enabled",!1,!0)},Ao:function(){for(var a=this.components.asArray(),b=a.length,c;b--;)c=a[b],this.zo(c)},getUIContainer:function(){return this.R},getClippingUIContainer:function(){return this.ib},getHtmlMapContainer:function(){return this.Pc},Ns:function(a){var b=new k.DisplayContainer(this,a);this.da=b.da;this.Pc=b.s;this.yf=b.yf;this.Ui=b.Ui;this.R=
b.R;this.ib=b.ib;this.fo=b.fo;this.hn=b.hn;this.addEvent=function(a){b.addEvent(a)};this.removeEvent=function(a){b.removeEvent(a)};this.Ms=function(){b.containerDestroy()}},eu:function(a){var b=l.oo;a.style.cssText=b?"position:absolute;z-index:0;width:100%;height:100%;overflow:hidden;transition: opacity .5s linear;".replace(/\b(transition|transform)\b/g,b+"$1"):"";a.addEventListener?a.addEventListener(l.Lr,ovi.bind(this,this.uu),!1):this.wd&&this.da.removeChild(this.wd)},Ed:function(a,b){this.St=
!0;this.Xs=a;this.Df(a,b);this.Xs=null;this.St=!1},Cf:function(a,b){this.m.resize(a,b);this.set("width",a);this.set("height",b);this.f=new d(a,b);this.Xi=this.f.divide(2).round()},Gm:function(a,b,c,d){var f=this.m.capabilities.cam.fov,e=this.baseMapType;a&this.m.capabilities.ZOOM&&this.Zi("zoom",b,e.min,e.max);a&p.FOV&&this.Zi("fov",b,f.min,f.max,c,d)},Fm:function(a){this.m&&(a&this.m.TRANSITION_START&&this.gp("start"),a&this.m.TRANSITION&&this.Ck(this.m),a&this.m.TRANSITION_END&&this.gp("end"))},
Zi:function(a,b,c,d,f,e){var g=h.now();if(g-this.qm>1E3)this.dispatch(new w({type:"mapvalueexceeded",target:this.Pc,display:this,valueData:{propertyName:a,value:b,min:c,max:d,x:f,y:e}})),this.qm=g},Mo:function(){this.Ub&&this.Ub.shutdown();this.wd&&this.da.removeChild(this.wd);this.Ub=this.wd=this.vd=void 0},uu:function(a){a.target==this.wd&&a.propertyName==="opacity"&&this.Mo()},bounceEnabled:!0,bounce:function(a,b,c){this.N.inProgress||(this.m.setTransition(this.wa.TRANSITION.AUTO),this.m.bounce(a,
b,c))},gg:function(a){var a=a.valueData,b=a.min,c=a.value;a.propertyName in{zoom:!0,fov:!0}&&this.bounce(c<b?!1:!0,a.x,a.y)},vt:function(a){var b=e.map.render,c=b.p2d[q&&this.default2dRenderMode==="canvas"?"canvas":"dom"].Engine;return a&4?[b.globe.Engine,b.globe.capabilities]:a&2?[b.panorama.Engine,b.panorama.capabilities]:[c,b.p2d.capabilities]},gw:function(a){return"pitch"in a&&"roll"in a&&"yaw"in a},rv:function(a){var b=this.vd,c,d,f,e=this.padding;if(this.N.inProgress)return this.wa;else{this.wa=
a;this.N.start();c=document.createElement("div");this.eu(c);this.cu=(f=this.Ub=this.m)&&f.getView();this.Zt=f&&f.getCam();d=this.wd=this.hh;if(f)c.style.visibility="hidden";this.da.insertBefore(c,d||this.Ui);if(!b)this.Mp=!0,b=f.getView();this.Bl=b;b=this.m=new a(c,this.baseMapType,this.Il,{onViewChange:this.Hm,onStateChange:this.Em,onValueExceeded:this.Gm,onTransition:this.Fm,onReady:this.Dm,fading:this.fading,margin:this.margin});b.setPadding(e.top,e.right,e.bottom,e.left);this.Ao();this.hh=c;return a}},
baseMapTypeSetter:function(b){b instanceof k.provider.Provider||a("baseMapType "+b);this.nu=this.baseMapType;return b},componentsSetter:function(a){var b=this.components;b.getLength()&&b.clear();return b.addAll(a)},paddingSetter:function(a){isNaN(a.top-a.right-a.bottom-a.left)&&h.d();var b=this.padding,c=this.m,d=b.top!=a.top||b.right!=a.right||b.bottom!=a.bottom||b.left!=a.left,b=d?{top:+a.top,right:+a.right,bottom:+a.bottom,left:+a.left}:b;if(d){if(!this.fixedCenter&&this.m.type!=="panorama"&&this.m.type!==
"3d"&&(this.Xi=this.f.add({x:a.left-a.right,y:a.top-a.bottom}).divide(2).round(),a=c.screenToGeo(this.Xi.x,this.Xi.y)))c.setTransition(this.wa.TRANSITION.NONE),c.setCoord(a);this.m.setPadding(b.top,b.right,b.bottom,b.left)}return b},Hn:function(a){var b=a.type==="mouseleave";this.m.setPointer(b?NaN:a.displayX,b?NaN:a.displayY)},centerSetter:function(a){var b=this.m,c=b.type==="panorama";if(this.N.inProgress)return a;this.wc("NONE");this.fe||(a=c?b.setCamCoord(m.fromObject(a)):b.setCoord(m.fromObject(a)),
a=m.fromObject(a));this.fe=0;return a},zoomLevelSetter:function(a){var b=h.Ia(a,this.minZoomLevel,this.maxZoomLevel);if(this.N.inProgress)return b;this.Qr(a);this.wc("NONE");return this.m.setZoom(b)},tiltSetter:function(a){a=h.Ia(a,this.minTilt,this.maxTilt);if(this.N.inProgress)return a;if(!this.fe)this.fe=1,a=this.m.setTilt(a);this.fe=0;return a},headingSetter:function(a){a=h.Ia(a,this.minHeading,this.maxHeading);if(this.N.inProgress)return a;if(!this.fe)this.fe=1,a=this.m.setHeading(a);this.fe=
0;return a},Qr:function(b,c,d){isNaN(b)&&a("zoomLevel");if(!this.N.inProgress&&(b>this.maxZoomLevel||b<this.minZoomLevel))return this.Zi("zoom",b,this.minZoomLevel,this.maxZoomLevel,c,d),!0;return!1},$v:function(a){var b=this.m.capabilities.cam.fov;if(!this.N.inProgress&&(a>b.max||a<b.min))return this.Zi("fov",a,b.min,b.max),!0;return!1},fadingSetter:function(){return this.fading},pixelToGeo:function(a,b){return m.fromObject(this.m.screenToGeo(a,b))},geoToPixel:function(a){return this.m.geoToScreen(a)},
zoomTo:function(a,b,c){a=this.m.viewForBBox(b?a.resizeToCenter(this.center):a);this.wc(c);if(a.zoom>this.maxZoomLevel)a.zoom=this.maxZoomLevel,a.distance=NaN;if(a.zoom<this.minZoomLevel)a.zoom=this.minZoomLevel,a.distance=NaN;this.m.setView(a)},getBestZoomLevel:function(a){var b=this.m,c=this.maxZoomLevel,d,f=a.length;for(isNaN(f)&&h.d();f--;)if((d=b.viewForBBox(a[f]).zoom)<c)c=d;return g(c,this.minZoomLevel)},getViewBounds:function(){return this.m&&this.m.getBBox()||this.Ub&&this.Ub.getBBox()},getObjectsWithin:function(a,
b,c,d){return this.m.getObjectsWithin(a,b,c,d)},getObjectsAt:function(a,b){return this.m.getObjectsAt(a,b)},getObjectAt:function(a,b){return this.m.getObjectAt(a,b)},yv:function(){if(!this.kh)this.df("start",0),this.kh=!0},wc:function(a){a=a==="default"?"auto":a;this.wa.TRANSITION&&this.m.setTransition(this.wa.TRANSITION[a?a.toUpperCase():"NONE"])},df:function(a,b){this.dispatch(new u.MapViewChangeEvent({type:"mapviewchange"+a,target:this.Pc,display:this,data:b}));if(a!=="start")this.nf=0},Ck:function(a){var b,
c,d,f;if(a instanceof this.wa){b=this.ad;c=a.capabilities;d=a.getView();if(b&c.COORD)a.type==="panorama"&&(f=a.getCam()),a=this.center,this.center=m.fromObject(f||d),this.ed("center",this.center,a);if(b&c.ZOOM)d.zoom<this.minZoomLevel||d.zoom>this.maxZoomLevel?this.set("zoomLevel",d.zoom):(a=this.zoomLevel,this.zoomLevel=d.zoom,a!==this.zoomLevel&&this.ed("zoomLevel",this.zoomLevel,a));if(b&c.HEADING)a=this.heading,this.heading=d.heading,this.ed("heading",this.heading,a);if(b&c.TILT)a=this.tilt,this.tilt=
d.tilt,this.ed("tilt",this.tilt,a)}this.ad=0},Hm:function(a,b,c){var d=this,f=h.now(),e=f-d.mm;if(a!==d.Ub){d.ad|=b;d.nf|=b;if(d.kh){if(d.kh&&e>25)d.Ck(a),d.df("",d.nf),d.mm=f}else d.df("start",0),d.Ck(a),d.df("",d.nf),d.mm=f,d.kh=!0;if(c)d.Ck(a),d.Ek&&clearTimeout(d.Ek),d.Ek=setTimeout(function(){d.nf&&d.df("",d.nf);d.df("end",0);d.kh=!1;d.Ek=void 0},250)}},Em:function(a,b){this.qaOnLoad&&b==="idle"&&this.qaOnLoad(this.zoomLevel);(this.Ub||this.m)&&this.Ft(b)},tv:function(){if(this.kf)this.vd=void 0,
this.N.finish(),this.kf=!1},Ft:function(a){var b=this.m,c=this.Ub;if(a==="error"){this.N.finish();this.kf=!0;this.wa=this.m=this.Ub=void 0;b.shutdown();if(c)this.vd=c.getView(),c.shutdown();u.onError&&u.onError(this.vd);this.onError&&this.onError(this.vd);return!0}return!1},Dm:function(a){var b=this,c=b.Ub,d=b.Bl,e=b.N,g,k={old:b.nu,current:b.baseMapType};if(a!==b.Ub){b.is?(c&&c.setTransition(b.wa.TRANSITION.AUTO),a.setTransition(b.wa.TRANSITION.AUTO)):(c&&c.setTransition(b.wa.TRANSITION.NONE),a.setTransition(b.wa.TRANSITION.NONE));
if(b.viewBounds)b.Bl=d=a.viewForBBox(b.viewBounds),delete b.viewBounds;if(c&&c.type==="panorama"&&!b.vd)g=c.getCam(),d.latitude=g.latitude,d.longitude=g.longitude,d.altitude=c.convertAlt(d,"GL"),d.distance=void 0;b.Cl("start",k);if(a.type==="2d"&&d.zoom===+d.zoom)d.zoom=f(d.zoom),d.distance=void 0;a.loadDestinationCam(b.Bl,function(d){var f,g,h;b.hh.style.visibility="";if(c){g=f=e.getHandoverCam(a.type,c.type,d);h=b.Mp?e.getDestinationCam(a.type,c.type,d):d;if(a.type==="panorama")f=ovi.extend({},
g),g.altitude=d.altitude+52.8;a.setHandoverProperties(g);c.exit(f,function(){b.mt();a.enter(h,function(){b.N.finish();b.Mp=!1;b.Cl("end",k)})})}else g=h=d,a.setHandoverProperties(g),a.enter(h,function(){b.Cl("end",k)});a.setPadding(b.padding.top,b.padding.right,b.padding.bottom,b.padding.left);b.Cf(b.hh.offsetWidth,b.hh.offsetHeight)})}},mt:function(){this.hh.style.visibility="visible";b.msie&&b.version<10?this.Mo():this.wd&&y.Fd(this.wd,0)},gp:function(a){this.dispatch(new z({type:"transition"+a,
target:this.Pc,display:this}))},Cl:function(a,b){this.dispatch(new B({type:"basemapchange"+a,target:this.Pc,display:this,baseMapData:b}));this.kf&&a==="end"&&(this.tv(),this.dispatch(new D({type:"displayready",target:this.Pc,display:this})))},update:function(a,b){this.m&&this.m.update(a<=0?!0:!1,b);return this},ou:function(a,b,c){var b=this.vt(c.pType),a=b[0],b=b[1],d=b.view.zoom;this.set("maxZoomLevel",r(c.max,d.min,d.max));this.set("minZoomLevel",r(c.min,d.min,d.max));b.view&&(b.view.tilt&&(this.set("maxTilt",
b.view.tilt.max||0),this.set("minTilt",b.view.tilt.min||0)),b.view.heading&&(this.set("maxHeading",b.view.heading.max||0),this.set("minHeading",b.view.heading.min||0)));this.wa=this.rv(a);c.ps(this.m);this.wa===a&&this.m.setMapProvider&&this.m.setMapProvider(c)},pan:function(a,b,c,d,f){var e=this.m;if(a-c||b-d)this.wc(f),f=this.geoToPixel(this.center),a=this.pixelToGeo(f.x+c-a,f.y+d-b),b=this.getView(),b.latitude=a.latitude,b.longitude=a.longitude,e.setView(b)},getCopyright:function(){var a=this.getViewBounds(),
b=this.zoomLevel,c=[this.baseMapType].concat(this.overlays.asArray()),d=c.length,f=0,e=[];if(a)for(;f<d;f++)c[f].getCopyrights&&(e=e.concat(c[f].getCopyrights(a,b)));for(f=e.length;f--;)a=e[f].label,f!==0&&(a=a.replace(/[0-9]{4}[,\s]+/g,"")),e[f]=a;return e.join(", ")},beginControl:function(a,b,c,d){this.N.inProgress||this.m.beginControl(a,b,c,d)},control:function(a,b,c,d,f,e,g,k){this.N.inProgress||this.m.control(a,b,c,d,f,e,g,k)},endControl:function(a){this.N.inProgress||this.m.endControl(a)},beginInteraction:function(a,
b,c,d,f,e,g){this.N.inProgress||this.m.beginInteraction(a,b,c,d,f,e,g)},interact:function(a,b,c,d,f){this.N.inProgress||this.m.interact(a,b,c,d,f)},endInteraction:function(){this.N.inProgress||this.m.endInteraction()},capture:function(a,b,c,d){var f=this.m,e,g,k;if(f.capabilities.capture){this.Ti&&(e=this.Ti.getCopyrightGfx(),g=e.getWidth(),k=e.getHeight());a=f.capture(a,b,c,d);for(b=this.components.getLength();b--;)this.components.get(b).capture(a);return this.Ti?a.drawGraphics(e,0,0,g,k,0,a.getHeight()-
k,g,k):a}}}),c=k.Display.InteractionModifiers={ZOOM:p.ZOOM,HEADING:p.HEADING,TILT:p.TILT,INCLINE:p.INCLINE,COORD:p.COORD,SIZE:p.SIZE};k.Display.prototype.InteractionModifiers={};h.flatMerge(k.Display.prototype.InteractionModifiers,c);h.flatMerge(k.Display,v.constants);h.flatMerge(k.Display.prototype,v.constants);var c=k.Display.MapViewChangeEvent=function(a){y.Event.call(this,a)},x={MAPVIEWCHANGE_ZOOM:p.ZOOM,MAPVIEWCHANGE_HEADING:p.HEADING,MAPVIEWCHANGE_TILT:p.TILT,MAPVIEWCHANGE_INCLINE:p.INCLINE,
MAPVIEWCHANGE_CENTER:p.COORD,MAPVIEWCHANGE_SIZE:p.SIZE};h.flatMerge(c,x);x.data=0;h.flatMerge(c.prototype=new y.Event,x);var w=k.Display.MapValueExceededEvent=function(a){y.Event.call(this,a)},z=k.Display.TransitionEvent=function(a){y.Event.call(this,a)},B=k.Display.BaseMapChangeEvent=function(a){y.Event.call(this,a)};B.baseMapData={old:void 0,current:void 0};B.prototype=new y.Event;var D=k.Display.DisplayReadyEvent=function(a){y.Event.call(this,a)};x.valueData={value:"",propertyName:"",min:null,
max:null};w.prototype=new y.Event})(nokia.maps);ovi.provide("nokia.maps.map._packaging.package");ovi.provide("nokia.maps.map.render.p2d.dom.Engine");
(function(){var e=nokia.maps,l=e.dom,h=e.util,d=h.Coroutine,c=new h.Matrix3D,g=e.css,b=g.applyMatrix,f=Math,r=f.log,a=f.LN2,q=f.round,k=[-256,-256,-256,-256],e=e.map.render.p2d,f=e.dom;f.Engine=new ovi.Class({Extends:e.Engine,initialize:function(){this.qn={};this.Vq=this.bv(this);this.Cj=c;this._super.apply(this,arguments)},Statics:{TRANSITION:e.Engine.TRANSITION},hj:f,setMapProvider:function(a){var b=this;b._super(a);l.tp(b.ih.ownerDocument,function(a){b.Yv(a,b.Ll)})},shutdown:function(){this._super();
d.kill(this.Vq)},Dr:null,Yv:function(a,b){var c=this.ih.className=this.Vi+"MapLayer",d=null;b>0&&(b/=1E3,d=l.wo(a,"."+c+" ."+this.Vi+"Tile",g.oo+"transition: opacity "+b+"s linear;position: absolute;"));l.Rq(a,this.Dr);this.Dr=d},oe:function(a,b,c,d){var f=a.ownerDocument;d?d=f.createComment("comment"):(d=f.createElement("div"),d.style.position="absolute",d.style.zIndex=0);c?a.replaceChild(d,b):a.insertBefore(d,b||null);return d},update:function(a,b){var c=this,f=c.Vq,e=f.scope;if(c.hs&&!c.$g){c.$g=
!0;c.hl(!0);if(a)e.cacheOnly=b,f.run(!0,!0);else{if(b){var g=function(){e.cacheOnly=!0;d.signal(c.qn);c.gd=h.requestAnimationFrame(g)};!c.gd&&g()}h.cancelAnimationFrame(c.gd);c.gd=0;if(!c.Bf)c.Bf=setTimeout(function(){e.cacheOnly=!1;d.signal(c.qn);c.Bf=0},300)}c.$g=!1}},bv:d.create("nokia.maps.map.render.p2d.Engine#_renderCo",function(f){var e=f.that,g=f.cacheOnly,h,l=f.i,u=e.zd,x=u.length;h=f.wj;var w=e.ob;h&&h.x!==e.lb.x&&h.y!==e.lb.y&&(l=void 0);e.Ef("busy");if(l===void 0&&(e.Bj=e.Ve,h=e.mf))b(h.n,
e.Cj=c.translate(w.x,w.y,0)),h.render(e.B.zoom,e.lb,e.Z,e.Ad,e.Va,w,e.Vg(k),0,0,0,e.B.zoom-q(r(h.e.width/256)/a),g,e.Zb);l=l||0;if(!g&&d.shallYield())return e.dr(f,l),d.yield();for(;l<x;){if(h=u[l++])b(h.n,e.Cj),h.render(e.B.zoom,e.lb,e.Z,e.Ad,e.Va,w,e.Vg(k),0,0,0,void 0,g,e.Zb,e.kb);if(!g&&l!==x&&d.shallYield())return e.dr(f,l),d.yield()}if(!g)e.Zb.x=w.x,e.Zb.y=w.y;f.i=f.wj=void 0;e.$t=e.au=0;return d.wait(e.qn)},"that"),ta:function(a){b(a,this.Cj=this.Cj.translate(this.ob.x,this.ob.y,0))}})})();
ovi.provide("nokia.maps.map._packaging.package-render-display");})();
(function(){ovi.provide("nokia.maps.dom._extractCDATA");nokia.maps.dom.cj=function(e,l){var h,d,c,g;typeof e==="string"&&(e=UIComponent.findElement(e));if(e&&e.nodeType===1){h=e.getElementsByTagName("script");for(d=h.length||0;d--;)(c=h[d]).type==="CDATA"&&(g=/^\s*<!\[CDATA\[\s*([\s\S]*)\s*\]\]>\s*$/.exec(c.text))&&(g=g[1])&&l(c,g,c.getAttribute("charset")||""+d)}};ovi.provide("nokia.maps.ui.nokia_generic.SpaceManager");
(function(e){var l={},h=e.ui.nokia_generic.SpaceManager=new ovi.Class({initialize:function(d){this.om=d;this.ab=ovi.bind(this,this.ab);d.addListener("resizeend",this.ab)},om:null,Ru:0,Qu:0,jb:{},Statics:{getSpaceManager:function(d){l[d.c]||(l[d.c]=new h(d));return l[d.c]}},registerSpace:function(d,c,e,b,f){this.jb[d]||(this.jb[d]={});this.jb[d][c]={topLeft:e,bottomRight:b,flexible:f||!1}},setActiveState:function(d,c){for(var e in this.jb[d])if(this.jb[d][e].active)this.jb[d][e].active=!1,delete this.jb[d][e].active;
this.jb[d]&&this.jb[d][c]&&(this.jb[d][c].active=!0)},removeComponent:function(d){delete this.jb[d]},getDimensionsFor:function(d,c){return c?this.jb[d][c]:this.jb[d]},isSpaceFor:function(){},ab:function(){this.Ru=this.om.da.offsetWidth;this.Qu=this.om.da.offsetHeight}})})(nokia.maps);ovi.provide("nokia.maps.util.ObjectFormatter");
(function(e){var l=/\[\[([^\]]+)\]\]/gi,h=/\{\{([^\}]+)\}\}/gi;e.ObjectFormatter=new ovi.Class({format:function(d,c,e){var b=c.match(l),f,h=0,a;if(b)for(a=b.length;h<a;h++)f=b[h].replace(l,"$1"),valueString=this.Xh(f,d,e,!0),c=c.replace(b[h],valueString);return c=this.Xh(c,d,e)},Xh:function(d,c,g,b){var f=e.un,l=d.match(h),a=!0,q,k=0,p;if(l)for(p=l.length;k<p;k++)q=l[k].replace(h,"$1"),q=g&&g[q]||f(q,c)||"",q=this.ll(q),q.length>0&&(a=!1),d=d.replace(l[k],q!=null?q:"");return b&&a?"":d},ll:function(d){var c=
"",e=typeof d;switch(e){case "object":case "undefined":case "function":c=e;break;case "string":c=d;break;case "number":case "boolean":c+=d}return c}})})(nokia.maps.util);ovi.provide("nokia.maps.ui.common.ColorSet");(function(e){var l="background border stroke fill text".split(" "),h=e.util.proto,d=e.ui.common.ColorSet=function(e,b){var f;if(c)return h(e,b?b instanceof d?b:h(b,c):c);for(f=l.length;f--;)this[l[f]]="#F60"},c=d.ap=new d})(nokia.maps);ovi.provide("nokia.maps.ui.common.ColorScheme");
(function(e){var l=e.ui.common,h="normal disable focus active".split(" "),d=nokia.maps.util.proto,c=l.ColorScheme=function(b,f){var e;if(g)return d(b,f?f instanceof c?f:d(f,g,!0):g,!0);for(e=h.length;e--;)this[h[e]]=l.ColorSet.ap},g=new c})(nokia.maps);ovi.provide("nokia.maps.ui.nokia_generic.UIScaler");
(function(e){e.ui.nokia_generic.UIScaler=ovi.Class({Extends:e.util.OObject,ID_TESTNODE:"ovi_ppitest",scaleFactor:0,$q:{},rescale:function(l){if(this.scaleFactor!==0)return this.scaleFactor;var h=this.scaleFactor;this.$q=l;this.Ev(l);l.parentNode.style.fontSize="10px";this.isMobile()?(l="http://10.225.86.65/rest/deviceinfo?useragent="+navigator.userAgent+"&format=jsonp",(new e.net.Request(1,{callbackKey:"callback"})).send(l,ovi.bind(this,this.dcsResponse))):(h=Math.round(34)/34,this.set("scaleFactor",
h))},dcsResponse:function(e){var h=1,h=0,d=e.response;if(d&&!e.error&&(e=d.DeviceCompatibilityService&&d.DeviceCompatibilityService.DeviceInfoResponse&&d.DeviceCompatibilityService.DeviceInfoResponse.Characteristics?d.DeviceCompatibilityService.DeviceInfoResponse.Characteristics:null,!e||!(h=e["display.dpi"])))e&&(h=this.areaComparison(e));h=Math.round(34*((h||165)/96))/34;this.set("scaleFactor",h)},areaComparison:function(e){try{var h=e["display.size"]||e["display.size.inches"]||(e["display.size.cms"]?
this.mmToInch(e["display.size.cms"]*100):!1),d=e["dimension.length"]-0,c=e["dimension.width"]-0,g=e["display.height"],b=e["display.width"],f;if(h)f=this.calcDiagonal(g,b)/h;else{var r=this.calcDiagonal(this.mmToInch(d),this.mmToInch(c));r*=0.663979;f=this.calcDiagonal(g,b)/r}return f}catch(a){}},scaleFactorSetter:function(e){if(typeof e==="number")return this.$q.style.cssText+=";font-size:"+e+"em;",this.scaleFactor=e},isMobile:function(){var e=ovi.platform,h=!0;if(navigator.userAgent.toLowerCase().indexOf("mobi")>
-1)h=!0;else if(e.windows||e.mac)h=!1;return h},Ev:function(e){if(ovi.browser.msie){var h=ovi.browser.version-0;h<=7?ovi.dom.addClass(e,"IE7"):h<=8&&ovi.dom.addClass(e,"IE8")}},pw:function(e){var h=e.ownerDocument;return this.Iv||(this.Iv=function(){var d=h.createElement("div");d.id="ovi_ppitest";document.body.appendChild(d);return d}())},calcDiagonal:function(e,h){return Math.sqrt(e*e-h*h)},mmToInch:function(e){return e*0.039370079}})})(nokia.maps);ovi.provide("nokia.maps.ui.common.Animator");
(function(){var e=nokia.maps.util,l=e.now,h=Math.min,d=e.Coroutine;nokia.maps.ui.common.Animator=new ovi.Class({initialize:function(c,e,b,f){var r=this;if(ovi.type(f)=="number")r.bg=f;r.Wk=c;r.Jc=e;r.wn=b;r.animatorCoCtx=d.create("nokia.maps.ui.common.Animator",function(){var a=(l()-r.Gd)/1E3/r.Jc,a=r.wn?a%1:h(1,a);r.Wk(a);if(a==1)return r.stop(),d.BLOCKED;return d.sleep(1/r.bg*1E3)})();d.sleep(null,r.animatorCoCtx)},bg:20,kd:!1,start:function(c){ovi.type(c)!="number"&&(c=0);this.Gd=l()-c*this.Jc*
1E3;if(!this.kd)this.kd=!0,d.resume(this.animatorCoCtx)},stop:function(){if(!this.kd)return 1;this.kd=!1;d.sleep(null,this.animatorCoCtx);return(l()-this.Gd)/1E3/this.Jc}})})();ovi.provide("nokia.maps.ui.common.GfxTemplate");
(function(e){function l(b,a){return g[a&&typeof a==="string"?a:0]}var h=e.gfx,d=new h.SvgParser,c=e.util,g,b={background:"#00F",border:"#FF0",stroke:"#0F0",fill:"#FFA500",text:"#000",label:"FF9900"},f={background:/darkgray/g,border:/darkblue/g,stroke:/darkgold/g,fill:/darkaqua/g,text:/darkpink/g,label:/_label(\d*)_/g};e.ui.common.GfxTemplate=new ovi.Class({initialize:function(e,a,h,k){var p,k=c.proto(k,f);g=c.isArray(h)?h:[h||""];a=a||b;for(p in f)e=e.replace(k[p],p==="label"?l:a[p]);this.ji=d.parseSvgInfo(e)},
HORIZONTAL:1,VERTICAL:2,stencil:function(b,a,c){var f=this.ji,e=f.width,f=f.height,g=new h.Graphics;if((b=+b||1)<0||b===1/0)b=1;a=a%360||0;c=c&3||0;g.save();g.beginImage(e*b,f*b,b+"_"+a+"_"+c);g.scale(b,b);a&&(g.translate(e/2,f/2),g.rotate(a),g.translate(e/-2,f/-2));c&1&&(g.translate(e,0),g.scale(-1,1));c&2&&(g.translate(0,f),g.scale(1,-1));d.parseSvgToGraphics(this.ji.document,g);g.restore();return g}})})(nokia.maps);ovi.provide("nokia.maps.ui.common.Bubble");
(function(e){function l(a){a.Qe()}function h(a){a.jc()}function d(a){a.jc()}var c=e.dom.EventTarget,g=e.geo.Coordinate,b=e.dom.Page,f=b.browser.touch?"tap":"click",r=!!(b.browser.msie&&b.browser.version<=8),a=e.dom.findElement,q=e.util.d,k={x:16,y:16},p={x:20,y:16};e.ui.common.Bubble=new ovi.Class({Extends:nokia.maps.util.OObject,initialize:function(b){var e=this;e._super(b);e.addObserver("xAlignment",d);e.addObserver("yAlignment",d);e.addObserver("coordinate",h);e.S=b.S;e.addObserver("backgroundColor",
function(){});e.addObserver("content",l);e.node=c(e.node);e.node.setAttribute("aria-hidden","true");e.node.setAttribute("tabindex","0");e.node.bubble=e;e.contentNode=a(e.S+"bubble_content",e.node);e.sg=function(){e.close();e.Mm()};e.Hb=c(a(e.S+"bubble_control_close",e.node));e.Hb.addListener(f,e.sg);e.Xn=a(e.S+"bubble_tail",e.node);e.Ke="initialized";e.Hg=!1;e.Ra=!1},open:function(a){this.Hg&&q("The info bubble ["+this.id+"] is already destroyed.");if(!this.Ra)this.Ra=!0,a&&this.set("coordinate",
a),this.coordinate||q("The info bubble ["+this.id+"] has no coordinate set."),this.Zd&&(typeof this.Zd=="function"?this.Zd(this.Hb):this.Hb.parentNode.removeChild(this.Hb)),this.Ke="opened",this.Qe(),this.node.setAttribute("aria-hidden","false"),this.jc(),this.Im()},close:function(a){if(this.Ra)this.Ra=!1,this.S==="nm_"?this.node.setAttribute("aria-hidden","true"):ovi.dom.addClass(this.node,"ovi_hidden"),this.Cm(),!a&&this.Al();this.Ke="closed"},Al:function(){this.Hg=!0;this.Hb.removeListener(f,this.sg);
this.node.parentNode.removeChild(this.node);delete this.node},update:function(a,b){a&&this.Cn(a);b&&this.set("coordinate",b);this.Qe();this.jc()},isVisible:function(){return this.po},getState:function(){return this.Ke},Qe:function(){if(this.Ra&&this.Wg()){var a,b=this.node.style,c=this.defaultWidth,d=this.defaultHeight;b.whiteSpace="nowrap";b.width="";if(c!=="auto"&&(b.whiteSpace="normal",a=this.node.offsetWidth,a<=c))b.width=c+"px";b.height="";if(d!=="auto"&&(b.whiteSpace="normal",a=this.node.offsetHeight,
a<=d))b.height=d+"px"}},jc:function(){if(this.Ra){var a=this.Wg(),b=a.width,c=a.height,d=a.padding,a=a.geoToPixel(this.coordinate),f=this.node,e=f.style,g=f.offsetWidth+k.x/2,h=f.offsetHeight+k.y/2,l=this.xAlignment,p=this.yAlignment,q=this.S+"infoBubble "+this.S+"align",r={};l!=="right"&&l!=="left"&&(l="right");p!=="above"&&l!=="below"&&(p="below");var E={};E.left=g-d.left<a.x;E.right=g-d.right<b-a.x;E.above=h-d.top<a.y;E.below=h-d.bottom<c-a.y;this.Pl||(l==="right"&&!E.right&&E.left?l="left":l===
"left"&&!E.left&&E.right&&(l="right"),p==="above"&&!E.above&&E.below?p="below":p==="below"&&!E.below&&E.above&&(p="above"));l==="right"?(e.right="auto",e.left=a.x+"px",r.x=a.x):(e.left="auto",e.right=b-a.x+"px",r.x=a.x-g);p==="below"?(e.bottom="auto",e.top=a.y+"px",r.y=a.y):(e.top="auto",e.bottom=c-a.y+"px",r.y=a.y-h);this.po=r.x+g>0&&r.y+h>0&&r.x<=b&&r.y<=c;q+=l==="left"?"Left":"Right";q+=p==="above"?"Above":"Below";f.className=q;this.Pl||(this.xAlign!==l&&this.set("xAlignment",l),this.yAlign!==
p&&this.set("yAlignment",p));if(this.zm!==q)this.zm=q,this.Ol(l,p)}},Ol:function(a,b){var c=this.Xn,d=c.style,f=this.xAlignment,e=this.yAlignment,g=r?p:k;c.innerHTML="";d.left=f=="right"?"-"+g.x/2+"px":"auto";d.right=f=="left"?(r?"":"-")+g.x/2+"px":"auto";d.top=e=="below"?"-"+g.y/2+"px":"auto";d.bottom=e=="above"?(r?"":"-")+g.y/2+"px":"auto";c.appendChild(this.qb[a+b])},coordinateSetter:function(a){return g.fromObject(a)},Cn:function(a){typeof a=="string"?this.contentNode.innerHTML=a:typeof a=="object"&&
a.nodeType===1&&typeof a.nodeName=="string"?this.contentNode.appendChild(a):q("The content of info bubble ["+this.id+"] has to be a string or a HTML element")},xAlignmentSetter:function(a){a!=="right"&&a!="left"&&q("The value of xAlignment property must be either 'left' or 'right'");return a},yAlignmentSetter:function(a){a!=="above"&&a!="below"&&q("The value of yAlignment property must be either 'above' or 'below'");return a}})})(nokia.maps);ovi.provide("nokia.maps.ui.UIComponent");
(function(e){var l=e.util,h=e.ui.UIComponent=new ovi.Class({Extends:e.map.component.Component,Mixins:[e.dom.EventTarget],initialize:function(d){this._super(d);this.onLanguageChange&&l.getRootNameSpace("nokia.maps").Settings.addObserver("defaultLanguage",this.onLanguageChange,this)},build:function(d){!d&&!this.node&&ovi.error('#build() method of component "'+this.getId()+'" was not implemented (properly).');this.node?this.getRootNode().appendChild(this.node):this.set("node",h.findElement(d,this.getTemplate()))},
attach:function(d){this._super(d);this.node||this.build();this.show()},detach:function(d){this.hide();this._super(d)},hiddenSetter:function(d){if(!this.node)return d;d?ovi.dom.addClass(this.node,"ovi_hidden"):ovi.dom.removeClass(this.node,"ovi_hidden");return d},show:function(){this.set("hidden",!1)},hide:function(){this.set("hidden",!0)},expandedSetter:function(d){return d},expand:function(){this.set("expanded",!0)},collapse:function(){this.set("expanded",!1)},findElement:function(d,c){return h.findElement(d,
c||this.node)},doc:function(){var d=this.mapDisplay.R||null;return d?d.ownerDocument:null},translate:function(d){return h.getTranslation(d)},translateHtml:function(d){return h.translateHtml(d)},tn:function(d,c,e){return d=d.replace(e,function(b,d){return'url("'+c+d+'")'})},getRootNode:function(){return this.getTemplate()},getClippingNode:function(){return this.mapDisplay.ib},getSize:function(d){d=d===void 0?this.mapDisplay.R:d;return{width:d.clientWidth,height:d.clientHeight}},enabledSetter:function(d){d?
!this.hidden&&this.show():this.hide();return d},Statics:{renderTemplate:function(d,c,g){var b=d.R,f=b.ownerDocument,l=f.createElement("style"),a=e.dom.EventTarget(f.createElement("div"));l.type="text/css";a.className="ovi_mp_controls";l.styleSheet?l.styleSheet.cssText=g:l.appendChild(f.createTextNode(g));f.getElementsByTagName("head")[0].appendChild(l);c=c.replace(/(^[\s\S]*\<body\>)([\s\S]+)(<\/body>[\s\S]*)/,"$2");a.innerHTML=c;b.appendChild(a);a.style.zIndex=0;d.yf.addListener("mouseenter",ovi.bind(d,
h.I));d.yf.addListener("mouseleave",ovi.bind(d,h.H));d.addObserver("baseMapType",h.wh,h);h.wh(d,"baseMapType",h.baseMapType,null);return a},findElement:function(d,c){if(c instanceof nokia.maps.map.Display)return h.findElement(d,c.R)||h.findElement(d,c.ib);for(var e=RegExp("(^|\\s)"+d+"($|\\s)"),b=c.getElementsByTagName("*"),f=0;f<b.length;f++)if(e.test(b[f].className))return b[f];return null},i18n:new e.language.Manager,getTranslation:function(d){return h.i18n.translateToken(d,!1)},translateHtml:function(d){return h.i18n.translate(d,
!1,/__i18n_([a-zA-Z0-9_\.]*)__/g)},wh:function(d,c,e){var c=d.R,b=ovi.dom.removeClass,f=ovi.dom.addClass;e===d.NORMAL?(f(c,"ovi_mp_mapScheme_normal"),b(c,"ovi_mp_mapScheme_satellite"),b(c,"ovi_mp_mapScheme_terrain")):e===d.SATELLITE?(b(c,"ovi_mp_mapScheme_normal"),f(c,"ovi_mp_mapScheme_satellite"),b(c,"ovi_mp_mapScheme_terrain")):e===d.TERRAIN&&(b(c,"ovi_mp_mapScheme_normal"),b(c,"ovi_mp_mapScheme_satellite"),f(c,"ovi_mp_mapScheme_terrain"))},I:function(){ovi.dom.addClass(this.R,"ovi_mp_hover")},
H:function(){ovi.dom.removeClass(this.R,"ovi_mp_hover")},hideAll:function(d,c){for(var e=d.ug={},b,f=d.components.asArray(),l=f.length;l--;)if(b=f[l],b instanceof h)e[b.getId()]=b.hidden,b===c?b.show():b.hide()},restoreAll:function(d){var c=d.ug,e;if(c){for(e in c)d.getComponentById(e).set("hidden",c[e]);delete d.ug}}}});e.ui.AbstractUIComponent=e.ui.UIComponent})(nokia.maps);ovi.provide("nokia.maps.ui.nokia_generic.UIComponent");ovi.provide("nokia.maps.resources.ui.nokia_generic.html");
nokia.maps.resources.ui.nokia_generic.html='<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">\r\n<html xmlns="http://www.w3.org/1999/xhtml">\r\n\t<head>\r\n\t\t<title>Nokia Maps - UI Components for Web</title>\r\n\t\t<\!--<link rel="stylesheet" type="text/css" href="ovi_touch.css" />--\>\r\n\t</head>\r\n\t<body>\r\n\t\t<\!-- Icon (actually pictograph) resources are added as SVG comments in faux script tags (<script type="text/foobar">). This hack insures that browsers\r\n\t\twhich are capable of parsing inline SVG do not begin to parse the cdata content, as webkit browsers are prone to do.\r\n\t\t<svg> tags are added to tags which have these been consciously omitted as they measure up to the 34x34 standard dimensions--\>\r\n\t\t<\!-- hiddenListener START --\>\r\n\t\t<div class="nm_hiddenListener nm_hidden">\r\n\t\t</div>\r\n\t\t<\!-- hiddenListener END --\>\r\n\t\t\r\n\t\t<\!--info bubble START --\>\r\n\t\t<div class="nm_infoBubble" role="tooltip" aria-hidden="true">\r\n\t\t\t<div class="nm_bubble">\r\n\t\t\t\t<div class="nm_bubble_bg nm_contentBG"></div>\r\n\t\t\t\t<div class="nm_bubble_controls">\r\n\t\t\t\t\t<span class="nm_bubble_control_close">&times;</span>\r\n\t\t\t\t</div>\r\n\t\t\t\t<div class="nm_bubble_content">\r\n\t\t\t\t</div>\r\n\t\t\t\t<div class="nm_bubble_linksbar"></div>\r\n\t\t\t\t<div  class="nm_bubble_tail">\r\n\t\t\t\t\t<script type="CDATA"  charset="infobubble">\r\n\t\t\t\t\t\t<![CDATA[\r\n\t\t\t\t\t\t\t<svg xmlns=\'http://www.w3.org/2000/svg\' version=\'1.1\' height=\'16\' width=\'20\'>\r\n\t\t\t\t\t\t\t\t<g>\r\n\t\t\t\t\t\t\t\t\t<path style="color:darkpink;fill:darkaqua;fill-opacity:1;fill-rule:nonzero;stroke:none;stroke-width:1;marker:none;visibility:visible;display:inline;overflow:visible;enable-background:accumulate" id="path3069" d="m -35,52 l 10,16 l 0,-2 c 0,-2.216 1.784,-4 4,-4 l 6,0 L -35,52 z" transform="translate(35,-52)" />\r\n\t\t\t\t\t\t\t\t</g>\r\n\t\t\t\t\t\t\t</svg>\r\n\t\t\t\t\t\t]]\>\r\n\t\t\t\t\t<\/script>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t\t<\!-- info bubble END --\>\r\n\t\t\r\n\t\t<\!-- miniman START --\>\r\n\t\t<div class="nm_miniman">\r\n\t\t</div>\r\n\t\t<div class="nm_miniman_point">\r\n\t\t</div>\r\n\t\t<\!-- miniman END --\>\r\n\t\t\r\n\t\t\r\n\t\t<div class="nm_arrangeableAnchor nm_top">\r\n\t\t\t<\!-- Positioning START --\>\r\n\t\t\t<div class="nm_positioningWrap nm_wrap nm_left nm_singleButton" aria-role="button" aria-pressed="false" aria-busy="false"  aria-hidden="true" >\r\n\t\t\t\t<div class="nm_firstBG"></div>\r\n\t\t\t\t<div class="nm_pos_icon_normal">\r\n\t\t\t\t\t<script type="CDATA" charset="positioning_normal">\r\n\t\t\t\t\t\t<![CDATA[\r\n\t\t\t\t\t\t <path style="color:#000000;fill:none;stroke:darkgold;stroke-width:0.75;stroke-miterlimit:4;stroke-dasharray:none;marker:none;visibility:visible;display:inline;overflow:visible;enable-background:accumulate" id="path3988" d="m -21,31  c 0.0000 3.3137 -2.6863 6.0000 -6.0000 6.0000 c -3.3137 0.0000 -6.0000 -2.6863 -6.0000 -6.0000 c -0.0000 -3.3137 2.6863 -6.0000 6.0000 -6.0000 c 3.3137 -0.0000 6.0000 2.6863 6.0000 6.0000 z" transform="matrix(1.4117647,0,0,1.4117647,55.117647,-26.764706)"/>\r\n\t\t\t\t\t\t <path style="color:#000000;fill:darkaqua;fill-opacity:1;fill-rule:nonzero;stroke:none;stroke-width:3;marker:none;visibility:visible;display:inline;overflow:visible;enable-background:accumulate" id="path3218" d="m -21,31  c 0.0000 3.3137 -2.6863 6.0000 -6.0000 6.0000 c -3.3137 0.0000 -6.0000 -2.6863 -6.0000 -6.0000 c -0.0000 -3.3137 2.6863 -6.0000 6.0000 -6.0000 c 3.3137 -0.0000 6.0000 2.6863 6.0000 6.0000 z" transform="translate(44,-14)"/>\r\n\t\t\t\t\t\t]]\>\r\n\t\t\t\t\t<\/script>\r\n\t\t\t\t</div>\r\n\t\t\t\t<div class="nm_pos_icon_pressed">\r\n\t\t\t\t\t<\!-- The pressed icon is the same as above for now but will probably change in the future. --\>\r\n\t\t\t\t\t<script type="CDATA" charset="positioning_pressed">\r\n\t\t\t\t\t\t<![CDATA[\r\n\t\t\t\t\t\t <path style="color:#000000;fill:none;stroke:darkgold;stroke-width:0.75;stroke-miterlimit:4;stroke-dasharray:none;marker:none;visibility:visible;display:inline;overflow:visible;enable-background:accumulate" id="path3988" d="m -21,31  c 0.0000 3.3137 -2.6863 6.0000 -6.0000 6.0000 c -3.3137 0.0000 -6.0000 -2.6863 -6.0000 -6.0000 c -0.0000 -3.3137 2.6863 -6.0000 6.0000 -6.0000 c 3.3137 -0.0000 6.0000 2.6863 6.0000 6.0000 z" transform="matrix(1.4117647,0,0,1.4117647,55.117647,-26.764706)"/>\r\n\t\t\t\t\t\t <path style="color:#000000;fill:darkaqua;fill-opacity:1;fill-rule:nonzero;stroke:none;stroke-width:3;marker:none;visibility:visible;display:inline;overflow:visible;enable-background:accumulate" id="path3218" d="m -21,31  c 0.0000 3.3137 -2.6863 6.0000 -6.0000 6.0000 c -3.3137 0.0000 -6.0000 -2.6863 -6.0000 -6.0000 c -0.0000 -3.3137 2.6863 -6.0000 6.0000 -6.0000 c 3.3137 -0.0000 6.0000 2.6863 6.0000 6.0000 z" transform="translate(44,-14)"\r\n\t\t\t\t\t\t />]]\>\r\n\t\t\t\t\t<\/script>\r\n\t\t\t\t</div>\r\n\t\t\t\t<div class="nm_pos_icon_busy">\r\n\t\t\t\t\t<\!-- The pressed icon is the same as above for now but will probably change in the future. --\>\r\n\t\t\t\t\t<script type="CDATA" charset="positioning_busy">\r\n\t\t\t\t\t\t<![CDATA[\r\n\t\t\t\t\t\t <path style="color:#000000;fill:none;stroke:darkgold;stroke-width:0.75;stroke-miterlimit:4;stroke-dasharray:none;marker:none;visibility:visible;display:inline;overflow:visible;enable-background:accumulate" id="path3988" d="m -21,31  c 0.0000 3.3137 -2.6863 6.0000 -6.0000 6.0000 c -3.3137 0.0000 -6.0000 -2.6863 -6.0000 -6.0000 c -0.0000 -3.3137 2.6863 -6.0000 6.0000 -6.0000 c 3.3137 -0.0000 6.0000 2.6863 6.0000 6.0000 z" transform="matrix(1.4117647,0,0,1.4117647,55.117647,-26.764706)"/>\r\n\t\t\t\t\t\t <path style="color:#000000;fill:darkaqua;fill-opacity:1;fill-rule:nonzero;stroke:none;stroke-width:3;marker:none;visibility:visible;display:inline;overflow:visible;enable-background:accumulate" id="path3218" d="m -21,31  c 0.0000 3.3137 -2.6863 6.0000 -6.0000 6.0000 c -3.3137 0.0000 -6.0000 -2.6863 -6.0000 -6.0000 c -0.0000 -3.3137 2.6863 -6.0000 6.0000 -6.0000 c 3.3137 -0.0000 6.0000 2.6863 6.0000 6.0000 z" transform="translate(44,-14)"\r\n\t\t\t\t\t\t />]]\>\r\n\t\t\t\t\t<\/script>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t\t<\!-- Positioning END --\>\r\n\t\t\t\r\n\t\t\t<\!-- MapSettings START--\>\r\n\t\t\t<ul class="nm_mapSettingsWrap nm_right nm_has3D" aria-role="menubar" aria-expanded="false" >\r\n\t\t\t\t<ul class="nm_wrapperBG">\r\n\t\t\t\t\t<li></li>\r\n\t\t\t\t\t<li></li>\r\n\t\t\t\t\t<li></li>\r\n\t\t\t\t\t<li class="nm_3DBG"></li>\r\n\t\t\t\t</ul>\r\n\t\t\t\t<li class="nm_publicTransport nm_wrap" aria-hidden="true" aria-role="menuitemradio">\r\n\t\t\t\t\t<div class="nm_firstBG"></div>\r\n\t\t\t\t\t\t<script type="CDATA" charset="publicTransport">\r\n\t\t\t\t\t\t\t<![CDATA[\r\n\t\t\t\t\t\t\t<path d="m 20.445561,26 h 2.58417 v -1.292085 h -2.58417 V 26 z" id="path3113" style="fill:darkaqua;stroke:none" />\r\n\t\t\t\t\t\t\t<path d="m 10.970269,26 h 2.58417 v -1.292085 h -2.58417 V 26 z" id="path3111" style="fill:darkaqua;stroke:none" />\r\n\t\t\t\t\t\t\t<path d="m 21.061847,22.26838 c -0.771141,0 -1.396706,-0.628111 -1.396706,-1.401796 c 0,-0.771649 0.625565,-1.401794 1.396706,-1.401794 c 0.77572,0 1.402812,0.627601 1.402812,1.401794 c 0,0.772667 -0.626074,1.401796 -1.402812,1.401796 z m -8.126238,-0.0056 c -0.774194,0 -1.400777,-0.623529 -1.400777,-1.396196 c 0,-0.769103 0.626583,-1.399759 1.400777,-1.399759 c 0.772667,0 1.398741,0.625566 1.398741,1.399759 c 0,0.772667 -0.626074,1.396196 -1.398741,1.396196 z M 11.989901,13.002736 C 11.988506,12.450978 12.271014,12 12.815647,12 l 8.347497,0 C 21.710832,12 21.998605,12.450978 22,13.002736 l 0.0101,3.995546 C 22.011499,17.551567 21.718387,18 21.173244,18 l -8.347498,0 C 12.280095,18 12.001398,17.551567 12,16.998282 z M 13,10 l 8,0 l 0,1 l -8,0 z m 6.584161,-2.0000001 l -5.155636,0 C 11.825325,7.9999999 10,9.4973374 10,10.986027 l 0,11.482166 C 10,23.844028 10.718665,24 11.463846,24 l 11.07129,0 C 23.27879,24 24,23.857495 24,22.481656 L 24,11 C 24,9.4917667 22.149293,7.9999999 19.584161,7.9999999 z" id="path3075" style="fill:darkaqua;stroke:none" />\r\n\t\t\t\t\t\t\t]]\>\r\n\t\t\t\t\t\t<\/script>\r\n\t\t\t\t</li>\r\n\t\t\t\t<li class="nm_trafficIncidents nm_wrap" aria-hidden="true" aria-role="menuitemradio">\r\n\t\t\t\t\t<div class="nm_firstBG"></div>\r\n\t\t\t\t\t\t<script type="CDATA" charset="trafficIncidents">\r\n\t\t\t\t\t\t\t<![CDATA[\r\n\t\t\t\t\t\t\t<path style="fill:darkaqua;stroke:none" d="m 17,10 l 8.5,8.5 l -8.5,8.5 l -8.5,-8.5 z" />\r\n\t\t\t\t\t\t\t<path fill="#ccc" d="m 16,13.5 l 2,0 l 0,6 l -2,0 z" />\r\n\t\t\t\t\t\t\t<path fill="#ccc" d="m 16,21 l 2,0 l 0,2 l -2,0 z" />\r\n\t\t\t\t\t\t\t]]\>\r\n\t\t\t\t\t\t<\/script>\r\n\t\t\t\t</li>\r\n\t\t\t\t<li class="nm_traffic nm_wrap" aria-hidden="true" aria-role="menuitemradio">\r\n\t\t\t\t\t<div class="nm_firstBG"></div>\r\n\t\t\t\t\t\t<script type="CDATA" charset="traffic">\r\n\t\t\t\t\t\t\t<![CDATA[\r\n\t\t\t\t\t\t\t<path d="m 13.999309,24.730567 l 0,1.269433 L 12,26 l 0,-1.590264 c 0.283371,0.201199 0.625954,0.320831 1.002374,0.320831 z" id="path6066" style="fill:darkaqua" />\r\n\t\t\t\t\t\t\t<path d="m 13.126235,18.456519 c 0.129904,-0.381254 0.925036,-2.773294 0.925036,-2.773294 c 0.133529,-0.409652 0.514781,-0.681542 0.947392,-0.681542 l 8.000258,0 c 0.430193,0 0.815675,0.272496 0.951017,0.681542 c 0,0 0.793923,2.39204 0.921409,2.773294 c 0.233827,0.237452 0.835614,0.838029 0.835614,0.838029 C 25.893661,19.478831 26,19.733805 26,20.000258 l 0,3.001079 c 0,0.551639 -0.446507,0.999352 -0.999352,0.999352 l -12.000087,0 c -0.554659,0 -1.00177,-0.447713 -1.00177,-0.999352 l 0,-3.001683 c 0,-0.266454 0.104527,-0.521428 0.29606,-0.705709 c -6.04e-4,0 0.601183,-0.60058 0.831384,-0.837426 z M 22.527038,16 l -7.049847,0 l -0.780631,2.999698 l 8.607484,0 z m 1.301455,6.719778 c 0.734107,0 1.327434,-0.600579 1.327434,-1.338311 c 0,-0.742565 -0.591514,-1.33831 -1.327434,-1.33831 c -0.733504,0 -1.330457,0.59514 -1.330457,1.33831 c 0,0.737732 0.596953,1.338311 1.330457,1.338311 z m -9.656381,0 c 0.732899,0 1.32683,-0.600579 1.32683,-1.338311 c 0,-0.742565 -0.593931,-1.33831 -1.32683,-1.33831 c -0.736525,0 -1.331061,0.59514 -1.331061,1.33831 c 6.04e-4,0.737732 0.592724,1.338311 1.331061,1.338311 z" id="path6058" style="fill:darkaqua" />\r\n\t\t\t\t\t\t\t<path d="m 25.998188,24.409736 l 0,1.590264 l -1.997497,0 l 0,-1.269433 l 0.998144,0 c 0.372794,0 0.717189,-0.119632 0.999353,-0.320831 z" id="path6038" style="fill:darkaqua" />\r\n\t\t\t\t\t\t\t<path d="m 10.1875,16.03125 c 0.732899,0 1.3125,0.601185 1.3125,1.34375 c 0,0.737732 -0.579601,1.34375 -1.3125,1.34375 c -0.738337,0 -1.343146,-0.606018 -1.34375,-1.34375 c 0,-0.74317 0.607225,-1.34375 1.34375,-1.34375 z M 11,11 c -0.432611,0 -0.803971,0.277848 -0.9375,0.6875 c 0,0 -0.807596,2.399996 -0.9375,2.78125 c -0.230201,0.236846 -0.844354,0.8125 -0.84375,0.8125 C 8.089717,15.465531 8,15.733546 8,16 l 0,3 c 0,0.551639 0.445341,1 1,1 l 2.03125,0 c 0,-0.482549 0.17439,-1.002768 0.59375,-1.40625 c 0.0029,-0.0028 -0.0026,-0.02875 0,-0.03125 c 0.0053,-0.005 0.02255,0.0082 0.03125,0 c 0.01731,-0.01633 0.03226,-0.03395 0.0625,-0.0625 c 0.06048,-0.0571 0.12906,-0.13335 0.21875,-0.21875 c 0.121577,-0.11576 0.240203,-0.210852 0.34375,-0.3125 c 0.196435,-0.580002 0.875,-2.59375 0.875,-2.59375 c 0.04476,-0.137321 0.115265,-0.25348 0.1875,-0.375 l -2.65625,0 l 0.78125,-3 l 7.0625,0 l 0.53125,2 l 1.65625,0 C 20.460535,13.223655 19.9375,11.6875 19.9375,11.6875 C 19.802158,11.278454 19.430193,11 19,11 l -8,0 z" id="path6071" style="fill:darkaqua" />\r\n\t\t\t\t\t\t\t<path d="M 8,20.40625 L 8,22 l 2,0 l 0,-1.28125 l -1,0 c -0.37642,0 -0.716629,-0.111301 -1,-0.3125 z" id="path6040" style="fill:darkaqua"/>\r\n\t\t\t\t\t\t\t]]\>\r\n\t\t\t\t\t\t<\/script>\r\n\t\t\t\t</li>\r\n\t\t\t\t<dl class="nm_dropDownMenu  nm_mapSelectorWrap nm_wrap" aria-expanded="false" aria-haspopup="true" aria-role="menu" aria-hidden="true" >\r\n\t\t\t\t    <dt class="nm_menuItemMapType" aria-role="menuitem">\r\n\t\t\t\t        <span class="nm_labelOpen nm_firstBG" aria-role="label" title="__i18n_ovi.service.map._t20__">__i18n_ovi.service.map._t17__<\!--<span class="nm_dropdown_arrow"></span>--\></span>\r\n\t\t\t\t        <span class="nm_labelClose"  aria-role="label">__i18n_ovi.service.map._t61__</span>\r\n\t\t\t\t    </dt>\r\n\t\t\t\t    <dd class="nm_normal nm_first" aria-role="menuitemradio" tabindex="-1">\r\n\t\t\t\t        <span class="nm_secondBG">__i18n_ovi.service.map._t17__</span>\r\n\t\t\t\t        <span class="nm_icon">&#8984;</span>\r\n\t\t\t\t    </dd>\r\n\t\t\t\t    <dd class="nm_satellite" aria-role="menuitemradio" tabindex="-1">\r\n\t\t\t\t        <span class="nm_secondBG">__i18n_ovi.service.map._t18__</span>\r\n\t\t\t\t        <span class="nm_icon">&#8984;</span>\r\n\t\t\t\t    </dd>\r\n\t\t\t\t    <dd class="nm_terrain" aria-role="menuitemradio" tabindex="-1">\r\n\t\t\t\t        <span class="nm_secondBG">__i18n_ovi.service.map._t19__</span>\r\n\t\t\t\t        <span class="nm_icon">&#8984;</span>\r\n\t\t\t\t    </dd>\r\n\t\t\t\t    <dd class="nm_globe nm_last" aria-role="menuitemradio" tabindex="-1">\r\n                        <span class="nm_secondBG">__i18n_typeSelector.globe__</span>\r\n                        <span class="nm_icon">&#8984;</span>\r\n                    </dd>\r\n\t\t\t\t</dl>\r\n\t\t\t</ul>\r\n\t\t\t<\!-- StreetLevel START --\>\r\n            <div class="nm_streetLevelWrap nm_right nm_wrap nm_singleButton" aria-role="button" aria-pressed="false" aria-hidden="true">\r\n                <div class="nm_firstBG">\r\n                    <span class="nm_street_level_leave">\r\n                        __i18n_streetlevel.leave__\r\n                    </span>\r\n                </div>\r\n                <div class="nm_street_level_icon">\r\n                    <script type="CDATA" charset="street_level_normal">\r\n                        <![CDATA[\r\n                        <path\r\n                             d="m 18.404447,12.32586 c -0.64114,-1.317068 -1.724616,-1.858807 -2.340904,-2.137131 -0.621259,-0.2832926 -1.217669,-0.2435326 -1.27234,-0.2435326 -0.02485,0 -2.231562,0 -2.256412,0 -0.05467,0 -0.621259,-0.03977 -1.242518,0.2435326 -0.616288,0.278324 -1.6600041,0.820063 -2.3011441,2.137131 -0.457246,0.944313 -0.487066,2.748451 -0.492035,3.886596 -0.005,0.685871 0.586467,0.964195 0.949282,0.964195 0.367786,0.005 0.8548541,-0.303175 0.8548541,-0.984075 -0.005,-2.857791 0.939343,-2.733539 0.994014,-2.733539 v 8.866609 c 0,0.402574 0.377725,0.725629 0.889642,0.725629 0.472158,0 0.924433,-0.178923 0.924433,-0.725629 l 0.412517,-5.278217 c 0.05964,0.005 0.253473,0.005 0.308143,0 l 0.412517,5.278217 c 0,0.516887 0.467187,0.73557 0.964194,0.74054 0.457247,0 0.839942,-0.337966 0.839942,-0.74054 v -8.866609 c 0.05964,0 0.944314,-0.08946 0.959224,2.773299 0,0.566589 0.526828,0.954254 0.889642,0.949284 0.367786,0 0.989045,-0.283293 0.989045,-0.929402 0.005,-1.138147 -0.02485,-2.982045 -0.482096,-3.926358 z"\r\n                             id="path3125"\r\n                             style="fill:#333333" \r\n                             transform="translate(3,3)"/>\r\n                          <path\r\n                             clip-rule="evenodd"\r\n                             d="m 16.267316,6.3170443 c 0,1.4164701 -1.143117,2.5645561 -2.564558,2.5645561 -1.416471,0 -2.564557,-1.148086 -2.564557,-2.5645561 0,-1.4164705 1.153057,-2.5595866 2.569528,-2.5595866 1.41647,0 2.559587,1.1480857 2.559587,2.5595866 z"\r\n                             id="path3127"\r\n                             style="fill:#333333;fill-rule:evenodd"\r\n                             transform="translate(3,3)"/>\r\n                        />]]\>\r\n                    <\/script>\r\n                </div>\r\n                <div class="nm_street_level_icon_hover">\r\n                    <script type="CDATA" charset="street_level_hover">\r\n                     <![CDATA[\r\n                     <g fill="none" stroke="white">\r\n                        <path\r\n                         clip-rule="evenodd"\r\n                         d="m 19.226644,9.9210099 c 0,1.4150861 -1.14602,2.5611071 -2.561107,2.5611071 -1.415086,0 -2.561107,-1.146021 -2.561107,-2.5611071 0,-1.4150866 1.146021,-2.5611076 2.561107,-2.5611076 1.415087,0 2.561107,1.146021 2.561107,2.5611076 z"\r\n                         id="path3205"\r\n                         style="fill:#0099bb;fill-rule:evenodd" />\r\n                      <path\r\n                         d="m 12.041592,15.810561 c 0.886921,-1.54962 1.659239,-1.823668 2.306991,-2.092733 0.652733,-0.274049 1.669204,-0.199309 1.728995,-0.199309 0.0299,0 1.10616,0.01 1.519724,-0.01 0.518201,-0.02989 0.657716,0.005 1.185883,-0.03986 0.702561,-0.06478 2.04789,-0.632802 2.765398,-1.873495 0.373702,-0.652733 0.42353,-0.921799 0.697578,-1.230726 0.264084,-0.303945 0.712526,-0.5680283 1.190866,-0.318894 0.478339,0.249136 0.478339,0.832111 0.38865,1.131073 -0.154464,0.49827 -0.607889,1.554603 -0.906852,2.017993 -1.998062,3.059379 -3.796816,3.258686 -3.85661,3.258686 v 9.487061 c 0,0.38865 -0.318892,0.717509 -0.857023,0.717509 -0.498271,0 -0.966645,-0.323876 -0.966645,-0.717509 l -0.318892,-5.301592 c -0.05979,0.005 -0.36872,0.005 -0.428512,0 l -0.393634,5.301592 c 0,0.38865 -0.383667,0.717509 -0.906852,0.722492 -0.478339,0.005 -0.916816,-0.333842 -0.916816,-0.722492 v -8.894118 c -0.01993,0 -0.971627,0.01495 -0.971627,2.969688 0,0.353772 -0.104636,1.051349 -0.901868,1.051349 -0.782283,0 -1.036401,-0.722491 -1.031419,-1.101176 0.02991,-1.464914 0.08969,-3.11917 0.672665,-4.155572 z"\r\n                         id="path3207"\r\n                         style="fill:#0099bb" />\r\n                        </g>\r\n                        />]]\>\r\n                    <\/script>\r\n                </div>\r\n                <div class="nm_street_level_icon_pressed">\r\n                    <script type="CDATA" charset="street_level_pressed">\r\n                    <![CDATA[\r\n                     <path\r\n                             d="m 18.404447,12.32586 c -0.64114,-1.317068 -1.724616,-1.858807 -2.340904,-2.137131 -0.621259,-0.2832926 -1.217669,-0.2435326 -1.27234,-0.2435326 -0.02485,0 -2.231562,0 -2.256412,0 -0.05467,0 -0.621259,-0.03977 -1.242518,0.2435326 -0.616288,0.278324 -1.6600041,0.820063 -2.3011441,2.137131 -0.457246,0.944313 -0.487066,2.748451 -0.492035,3.886596 -0.005,0.685871 0.586467,0.964195 0.949282,0.964195 0.367786,0.005 0.8548541,-0.303175 0.8548541,-0.984075 -0.005,-2.857791 0.939343,-2.733539 0.994014,-2.733539 v 8.866609 c 0,0.402574 0.377725,0.725629 0.889642,0.725629 0.472158,0 0.924433,-0.178923 0.924433,-0.725629 l 0.412517,-5.278217 c 0.05964,0.005 0.253473,0.005 0.308143,0 l 0.412517,5.278217 c 0,0.516887 0.467187,0.73557 0.964194,0.74054 0.457247,0 0.839942,-0.337966 0.839942,-0.74054 v -8.866609 c 0.05964,0 0.944314,-0.08946 0.959224,2.773299 0,0.566589 0.526828,0.954254 0.889642,0.949284 0.367786,0 0.989045,-0.283293 0.989045,-0.929402 0.005,-1.138147 -0.02485,-2.982045 -0.482096,-3.926358 z"\r\n                             id="path3125"\r\n                             style="fill:#ffffff" \r\n                             transform="translate(3,3)"/>\r\n                          <path\r\n                             clip-rule="evenodd"\r\n                             d="m 16.267316,6.3170443 c 0,1.4164701 -1.143117,2.5645561 -2.564558,2.5645561 -1.416471,0 -2.564557,-1.148086 -2.564557,-2.5645561 0,-1.4164705 1.153057,-2.5595866 2.569528,-2.5595866 1.41647,0 2.559587,1.1480857 2.559587,2.5595866 z"\r\n                             id="path3127"\r\n                             style="fill:#ffffff;fill-rule:evenodd"\r\n                             transform="translate(3,3)"/>\r\n                    />]]\>\r\n                    <\/script>\r\n                </div>\r\n            </div>\r\n            <\!-- StreetLevel END --\>\r\n\t\t\t\r\n\t\t\t<\!-- MapSettings END --\>\r\n\t\t</div>\r\n\t\t<\!-- Positioning END --\>\r\n\t\t\r\n\t\t<\!-- Zoombar START --\>\r\n\t\t<div class="nm_arrangeableAnchor nm_middle">\r\n\t\t\t<div class="nm_zoomWrap nm_wrap nm_right" aria-expanded="true" aria-hidden="true" >\r\n\t\t\t\t<\!-- Aria-expanded states set to true are required here (both above and below) as measurements are taken based on this state at initialisation--\>\r\n\t\t\t\t\t<div class="nm_zoomButtons nm_buttonPair">\r\n\t\t\t\t\t\t<div class="nm_firstBG nm_background">&nbsp;</div>\r\n\t\t\t\t\t\t<div class="nm_zoomIn" aria-role="button">\r\n\t\t\t\t\t\t\t<script type="CDATA"  charset="zoomin">\r\n\t\t\t\t\t\t\t\t<![CDATA[\r\n\t\t\t\t\t\t\t\t\t<path fill="darkaqua" fill-rule="nonzero" style="enable-background:accumulate;color:#000000;" d="M16,4.875v3h-3v2h3v3h2v-3h3v-2h-3v-3h-2z"/>\r\n\t\t\t\t\t\t\t\t]]\>\r\n\t\t\t\t\t\t\t<\/script>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<div class="nm_zoomOut" aria-role="button">\r\n\t\t\t\t\t\t\t<script type="CDATA" charset="zoomout">\r\n\t\t\t\t\t\t\t\t<![CDATA[\r\n\t\t\t\t\t\t\t\t\t<g transform="translate(0,-1018.3622)" id="layer1" style="display:inline">\r\n\t\t\t\t\t\t\t\t\t\t<rect width="2" height="8" x="517.16022" y="208.91977" transform="matrix(0,1,-1,0,229.9198,523.20198)" id="rect6052" style="color:#000000;fill:darkaqua;fill-opacity:1;fill-rule:nonzero;stroke:none;stroke-width:1;marker:none;visibility:visible;display:inline;overflow:visible;enable-background:accumulate" />\r\n\t\t\t\t\t\t\t\t\t</g>\r\n\t\t\t\t\t\t\t\t]]\>\r\n\t\t\t\t\t\t\t<\/script>\r\n\t\t\t\t\t\t </div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div class="nm_zoomLevels" aria-expanded="false" aria-hidden="false" role="application" aria-valuemin="0" aria-valuemax="20" aria-valuenow="10">\r\n\t\t\t\t\t\t<div class="nm_zoomSlider" aria-role="button">\r\n\t\t\t\t\t\t\t<div class="nm_secondBG nm_background"></div>\r\n\t\t\t\t\t\t\t<div class="nm_zoomSliderTrack">\r\n\t\t\t\t\t\t\t\t<div aria-role="button" class="nm_zoomSliderKnob" title="__i18n_ovi.service.map._t42__" draggable="true" unselectable="on">\r\n\t\t\t\t\t\t\t\t\t<span class="nm_thirdBG"></span>\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t<\!-- Dynamically created according to map zoom levels--\>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<ul class="nm_zoomBookmarks nm_notouch" aria-role="listbox">\r\n\t\t\t\t\t\t\t<li class="nm_zoomBookmark nm_zoomBookmark_street" aria-role="option">\r\n\t\t\t\t\t\t\t\t\t<span class=" nm_secondBG nm_background">__i18n_ovi.service.map._t46__</span>\r\n\t\t\t\t\t\t\t</li>\r\n\t\t\t\t\t\t\t<li class="nm_zoomBookmark nm_zoomBookmark_city" aria-role="option">\r\n\t\t\t\t\t\t\t\t\t<span class="nm_secondBG">__i18n_ovi.service.map._t45__</span>\r\n\t\t\t\t\t\t\t</li>\r\n\t\t\t\t\t\t\t<li class="nm_zoomBookmark nm_zoomBookmark_state" aria-role="option">\r\n\t\t\t\t\t\t\t\t\t<span class="nm_secondBG">__i18n_ovi.service.map._t44__</span>\r\n\t\t\t\t\t\t\t</li>\r\n\t\t\t\t\t\t\t<li class="nm_zoomBookmark nm_zoomBookmark_country" aria-role="option">\r\n\t\t\t\t\t\t\t\t\t<span class="nm_secondBG">__i18n_ovi.service.map._t43__</span>\r\n\t\t\t\t\t\t\t</li>\r\n\t\t\t\t\t\t</ul>\r\n\t\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t\t<\!-- zoomBar END --\>\r\n\t\t\r\n\t\t<div class="nm_arrangeableAnchor nm_bottom">\r\n\t\t\t<\!-- Overview START --\>\r\n\t\t\t<div class="nm_overviewWrap nm_wrap nm_right" aria-expanded="false" unselectable="on" aria-hidden="true" >\r\n\t\t\t\t<div class="nm_overviewMap" unselectable="on"></div>\r\n\t\t\t\t<div class="nm_overviewButton nm_singleButton" aria-role="button" unselectable="on">\r\n\t\t\t\t\t<div class="nm_firstBG"></div>\r\n\t\t\t\t\t<script type="CDATA" charset="overview">\r\n\t\t\t\t\t\t<![CDATA[\r\n\t\t\t\t\t\t\t<path d="m 8,10 l 0,14 l 18,0 l 0,-14 z m 1,1 l 16,0 l 0,12 L 9,23 z" id="rect3114" style="color:#000000;fill:darkaqua;fill-opacity:1;fill-rule:nonzero;stroke:none;stroke-width:1;marker:none;visibility:visible;display:inline;overflow:visible;enable-background:accumulate" />\r\n\t\t\t\t\t\t\t<path d="m 10,12 l 0,10 l 6,0 l 0,-6 l 8,0 l 0,-4 z" id="rect3119" style="color:#000000;fill:darkaqua;fill-opacity:1;fill-rule:nonzero;stroke:none;stroke-width:1;marker:none;visibility:visible;display:inline;overflow:visible;enable-background:accumulate" />\r\n\t\t\t\t\t\t]]\>\r\n\t\t\t\t\t<\/script>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t\t<\!-- Overview END --\>\r\n\r\n\t\t\t<\!-- Distance Measurement START --\>\r\n\t\t\t<div class="nm_rulerWrap nm_wrap nm_right" aria-expanded="false" unselectable="on" aria-hidden="true" >\r\n\t\t\t\t<div class="nm_rulerButton_icon_normal nm_singleButton" aria-role="button" unselectable="on">\r\n\t\t\t\t\t<div class="nm_firstBG"></div>\r\n\t\t\t\t\t<script type="CDATA" charset="ruler_normal">\r\n\t\t\t\t\t\t<![CDATA[\r\n\t\t\t\t\t\t\t<path d="m15,1H2C1.447,1,1,1.448,1,2v5.001C1,7.553,1.447,8,2,8h13c0.553,0,1-0.447,1-1V2C16,1.448,15.553,1,15,1z M15,5.999v0.91v0.09V7H2l0,0V3h1v3h2V5h1v1h2V4h1v2h2V5h1v0.999h2V3h1V5.999z"  transform="translate(8,15)" style="color:#000000;fill:darkaqua;fill-opacity:1;fill-rule:nonzero;stroke:none;stroke-width:1;marker:none;visibility:visible;display:inline;overflow:visible;enable-background:accumulate" />\r\n\t\t\t\t\t\t]]\>\r\n\t\t\t\t\t<\/script>\r\n\t\t\t\t</div>\r\n\t\t\t\t<div class="nm_rulerButton_icon_pressed nm_singleButton" aria-role="button" unselectable="on">\r\n\t\t\t\t\t<div class="nm_firstBG"></div>\r\n\t\t\t\t\t<script type="CDATA" charset="ruler_pressed">\r\n\t\t\t\t\t\t<![CDATA[\r\n\t\t\t\t\t\t\t<path d="m15,1H2C1.447,1,1,1.448,1,2v5.001C1,7.553,1.447,8,2,8h13c0.553,0,1-0.447,1-1V2C16,1.448,15.553,1,15,1z M15,5.999v0.91v0.09V7H2l0,0V3h1v3h2V5h1v1h2V4h1v2h2V5h1v0.999h2V3h1V5.999z"  transform="translate(8,15)" style="color:darkaqua;fill:darkaqua;fill-opacity:1;fill-rule:nonzero;stroke:none;stroke-width:1;marker:none;visibility:visible;display:inline;overflow:visible;enable-background:accumulate" />\r\n\t\t\t\t\t\t]]\>\r\n\t\t\t\t\t<\/script>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\t\r\n\t\t\t<\!-- Distance Measurement END --\>\r\n\r\n\t\t\t<\!-- Zoom rectangle START --\>\r\n\t\t\t<div class="nm_zoomRectWrap nm_wrap nm_right" aria-expanded="false" unselectable="on" aria-hidden="true" >\r\n\t\t\t\t<div class="nm_zoomRectButton_icon_normal nm_singleButton" aria-role="button" unselectable="on">\r\n\t\t\t\t\t<div class="nm_firstBG"></div>\r\n\t\t\t\t\t<script type="CDATA" charset="zoomRect_normal">\r\n\t\t\t\t\t\t<![CDATA[\r\n\t\t\t\t\t\t\t<path d="m 8,10 l 0,14 l 18,0 l 0,-14 z m 1,1 l 16,0 l 0,12 L 9,23 z" id="rect3114" style="color:#000000;fill:darkaqua;fill-opacity:1;fill-rule:nonzero;stroke:none;stroke-width:1;marker:none;visibility:visible;display:inline;overflow:visible;enable-background:accumulate" />\r\n\t\t\t\t\t\t]]\>\r\n\t\t\t\t\t<\/script>\r\n\t\t\t\t</div>\r\n\t\t\t\t<div class="nm_zoomRectButton_icon_pressed nm_singleButton" aria-role="button" unselectable="on">\r\n\t\t\t\t\t<div class="nm_firstBG"></div>\r\n\t\t\t\t\t<script type="CDATA" charset="zoomRect_pressed">\r\n\t\t\t\t\t\t<![CDATA[\r\n\t\t\t\t\t\t\t<path d="m 8,10 l 0,14 l 18,0 l 0,-14 z m 1,1 l 16,0 l 0,12 L 9,23 z" id="rect3114" style="color:darkaqua;fill:darkaqua;fill-opacity:1;fill-rule:nonzero;stroke:none;stroke-width:1;marker:none;visibility:visible;display:inline;overflow:visible;enable-background:accumulate" />\r\n\t\t\t\t\t\t]]\>\r\n\t\t\t\t\t<\/script>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\t\r\n\t\t\t<\!-- Zoom rectangle END --\>\r\n\r\n\t\t\t<\!-- Scalebar START --\>\r\n\t\t\t<\!--<div class="nm_scalebarAnchor" aria-hidden="true">--\>\r\n\t\t\t\t<div class="nm_scalebarWrap nm_wrap nm_metric nm_right"  aria-hidden="true">\r\n\t\t\t\t\t<div class="nm_scalebarTemplate" aria-role="button">\r\n\t\t\t\t\t\t<div class="nm_scaleBarExpandableElement"></div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<span class="nm_scalebarUnitinfo" aria-hidden="true">__i18n_ovi.service.map._t26__</span>\r\n\t\t\t\t\t<\!--Style definition below is here because it reset everything and in CSS file should be easily changed without any warning.--\>\r\n\t\t\t\t\t<span class="nm_scalebarTextTester" style="text-align: left; font-weight: normal; font-size: 10px; font-family: Arial; font-style: normal; font-variant: normal; text-transform: none; text-decoration: none; visibility: hidden;"></span>\r\n\t\t\t\t</div>\r\n\t\t\t<\!--</div>--\>\r\n\t\t\t<\!-- Scalebar END --\>\r\n\t\t</div>\r\n\t\t\r\n\t\t<\!-- RightClick menu START --\>\r\n\t\t<div class="nm_rcMenu nm_wrap" aria-hidden="true" aria-role="menu">\r\n\t\t\t<div class="nm_rcMenuItem"></div>\r\n\t\t\t<div class="nm_rcMenuSeparator"></div>\r\n\t\t\t<div class="nm_rcMenuPin"></div>\r\n\t\t</div>\r\n\t\t<\!-- RightClick menu END --\>\r\n\t</body>\r\n</html>';
ovi.provide("nokia.maps.resources.ui.nokia_generic.css");nokia.maps.resources.ui.nokia_generic.css='.ovi_mp_controls{font-family:Arial,Helvetica,sans-serif;}.ovi_mp_controls ul,.ovi_mp_controls li,.ovi_mp_controls dl,.ovi_mp_controls dd{padding:0;margin:0;list-style:none;font-size:1em;}.nm_crnode a:hover{color:#0BD!important;}.nm_hidden,.ovi_mp_controls [aria-hidden="true"],.nm_infoBubble[aria-hidden="true"],.nm_rcMenu[aria-hidden="true"]{display:none!important;}.nm_conceal{visibility:hidden;}.ovi_mp_controls [aria-role="button"],.ovi_mp_controls [aria-role="option"],.ovi_mp_controls [aria-role="menuitem"],.ovi_mp_controls [aria-role="menuitemradio"]{min-width:3.4em;min-height:3.4em;cursor:pointer;}[aria-role="menuitemradio"] .nm_firstBG{width:3.2em;height:2.6em;margin:.3em 0;}.nm_layout_horizontal [aria-role="menuitemradio"] .nm_firstBG{margin:.3em 0;}.ovi_mp_controls [aria-disabled="true"]{cursor:default;}.nm_gfx{position:absolute;top:0;}.nm_wrap{-webkit-transform:scale(1);}.nm_hover .nm_wrap{opacity:1;}.nm_wrap:hover,.nm_wrap:focus,.nm_wrap[aria-expanded="true"],[aria-role="menuitemradio"]:focus{outline:none;opacity:1;}.nm_wrap:hover .nm_firstBG,.nm_wrap:focus .nm_firstBG{border-color:#FFF;opacity:1;outline:none;}.nm_firstBG{color:#000F1A;border:.1em solid #E6E6E6;background-image:-webkit-gradient(linear,0% 0,0% 100%,from(#ECECEC),to(#CCC));background-image:-webkit-linear-gradient(top,#ECECEC,#CCC);background-image:-moz-linear-gradient(top,#ECECEC,#CCC);background-image:-ms-linear-gradient(top,#ECECEC,#CCC);background-image:-o-linear-gradient(#ececec,#ccc);background-image:linear-gradient(top,#ECECEC,#CCC);background-color:#DBDBDB;-webkit-border-radius:.3em;-moz-border-radius:.3em;-o-border-radius:.3em;-ms-border-radius:.3em;border-radius:.3em;border-radius:0 \\0/;filter:progid:DXImageTransform.Microsoft.gradient(startColorstr=\'#ECECEC\',endColorstr=\'#CCCCCC\');}[aria-disabled="true"] .nm_firstBG,.nm_wrap[aria-disabled="true"]:hover .nm_firstBG,.nm_wrap[aria-disabled="true"]:active .nm_firstBG{background-image:none;background-color:#BFBFBF;filter:none;border-color:#E6E6E6;}.nm_firstBG:hover{color:#0BD;}.nm_notouch .nm_firstBG:focus,.nm_notouch .nm_secondBG:focus,.nm_notouch .nm_secondBG:hover{background-color:#0BD;color:white;}.nm_secondBG{color:#E6E6E6;background-color:#000F1A;-webkit-border-radius:.4em;-moz-border-radius:.4em;-o-border-radius:.4em;border-radius:.4em;white-space:nowrap;}.nm_hover [aria-role="button"]:hover .nm_secondBG,.nm_hover [aria-role="menuitem"]:hover .nm_secondBG,.nm_hover [aria-role="menuitemradio"]:hover .nm_secondBG,.ovi_mp_controls [aria-role="button"]:active .nm_secondBG,.ovi_mp_controls [aria-role="option"]:active .nm_secondBG,.ovi_mp_controls [aria-role="menuitem"]:active .nm_secondBG,.ovi_mp_controls [aria-role="menuitemradio"]:active .nm_secondBG,.ovi_mp_controls [aria-role="button"]:focus .nm_secondBG,.ovi_mp_controls [aria-role="option"]:focus .nm_secondBG,.ovi_mp_controls [aria-role="menuitem"]:focus .nm_secondBG,.ovi_mp_controls [aria-role="menuitemradio"]:focus .nm_secondBG,[aria-role="menuitem"][aria-selected="true"] .nm_secondBG,[aria-role="menuitem"][aria-selected="true"]:focus .nm_secondBG,[aria-role="menuitem"][aria-selected="true"]:hover .nm_secondBG,[aria-role="menuitemradio"][aria-checked="true"] .nm_secondBG,[aria-role="menuitemradio"][aria-checked="true"]:focus .nm_secondBG,[aria-role="menuitemradio"][aria-checked="true"]:hover .nm_secondBG{background-color:#0BD;color:#FFF;}[aria-role="menuitem"][aria-selected="true"] .nm_secondBG,[aria-role="menuitemradio"][aria-checked="true"] .nm_secondBG{font-weight:bold;}.ovi_mp_controls [aria-role="button"]:focus .nm_secondBG,.ovi_mp_controls [aria-role="option"]:focus .nm_secondBG,.ovi_mp_controls [aria-role="menuitem"]:focus .nm_secondBG,.ovi_mp_controls [aria-role="menuitemradio"]:focus .nm_secondBG{border:.1em solid #fff;margin:-0.1em;}.ovi_mp_controls [aria-role="button"]:hover .nm_secondBG,.ovi_mp_controls [aria-role="menuitem"]:hover .nm_secondBG,.ovi_mp_controls [aria-role="menuitemradio"]:hover .nm_secondBG{background-color:#0BD;}.nm_thirdBG{background-image:-webkit-gradient(linear,0% 0,0% 100%,from(#ECECEC),to(#CCC));background-image:-moz-linear-gradient(top,#ECECEC,#CCC);background-image:-o-linear-gradient(#ececec,#ccc);filter:progid:DXImageTransform.Microsoft.gradient(startColorstr=\'#ECECEC\',endColorstr=\'#CCCCCC\');background-color:#DBDBDB;}[aria-disabled="true"] .nm_thirdBG{background-image:none;background-color:#BFBFBF;}.ovi_mp_controls .nm_wrapperBG{background-color:#000F1A;-webkit-border-radius:.5em;-moz-border-radius:.5em;-o-border-radius:.5em;border-radius:.5em;padding:0 .7em;}.nm_wrapperBG li{border-bottom:.1em solid #4E575F;display:block;height:3.2em;}.nm_wrapperBG li:first-child{visibility:hidden;}.nm_contentBG{background-color:#000F1A;-webkit-border-radius:.4em;-moz-border-radius:.4em;-o-border-radius:.4em;border-radius:.4em;}.nm_singleButton{float:inherit;}.nm_singleButton .nm_firstBG{position:relative;width:2.6em;height:2.6em;margin:.3em;}.nm_buttonPair{position:relative;width:1.6em;height:6.8em;overflow:hidden;}.nm_buttonPair .nm_firstBG{width:1.4em;height:6.6em;margin:0 auto;}.nm_buttonPair .nm_zoomIn{margin-top:-6.6em;}.nm_buttonPair .nm_zoomOut{position:absolute;}[aria-expanded="true"] .nm_labelOpen{display:none!important;}[aria-expanded="false"] .nm_labelClose{display:none!important;}[aria-role="menuitemradio"] .nm_gfx{margin:-0.3em 0;}.nm_layout_horizontal [aria-role="menuitemradio"] .nm_gfx{margin:0;}.nm_arrangeableAnchor{position:absolute;width:100%;height:0;}.nm_arrangeableAnchor.nm_top{transition:all .5s;-moz-transition:all .5s;-webkit-transition:all .5s;-o-transition:all .5s;-ms-transition:all .5s;top:0;}.nm_adbar_top .nm_arrangeableAnchor.nm_top{top:28px;}.nm_arrangeableAnchor.nm_middle{top:50%;}.nm_arrangeableAnchor.nm_bottom{transition:all .5s;-moz-transition:all .5s;-webkit-transition:all .5s;-o-transition:all .5s;-ms-transition:all .5s;bottom:0;}.nm_adbar_bottom .nm_arrangeableAnchor.nm_bottom{bottom:28px;}.nm_bottom .nm_wrap{margin-top:-3.4em;}.nm_bottom .nm_gfx{top:auto;bottom:0;}.nm_left{float:left;}.nm_center{margin-left:50%;float:left;}.nm_right{float:right;}.nm_cover{position:absolute;top:0;width:3.4em;height:3.4em;}.nm_zoomHorAnchor{position:absolute;width:100%;top:50%;height:0;}.nm_zoomButtons{position:absolute;top:-3.4em;right:0;width:3.4em;-moz-transition:top 200ms linear,right 200ms linear,height 200ms linear;-webkit-transition:top 200ms linear,right 200ms linear,height 200ms linear;-o-transition:top 200ms linear,right 200ms linear,height 200ms linear;transition:top 200ms linear,right 200ms linear,height 200ms linear;-webkit-transform:scale(1);}.nm_zoomButtons .nm_firstBG{-moz-transition:width 200ms linear,height 200ms linear;-webkit-transition:width 200ms linear,height 200ms linear;-o-transition:width 200ms linear,height 200ms linear;transition:width 200ms linear,height 200ms linear;}.nm_zoomWrap[aria-expanded="false"] .nm_zoomButtons{width:1.7em;height:3.4em;right:-0.2em;top:-1.7em;}.nm_zoomWrap[aria-expanded="false"].nm_left .nm_zoomButtons{left:-0.2em;right:auto;}.nm_zoomWrap[aria-expanded="false"]:active .nm_zoomButtons,.nm_zoomWrap[aria-expanded="false"].nm_active .nm_zoomButtons{top:-1.8em;height:3.6em;}.nm_zoomWrap[aria-expanded="false"]:active .nm_zoomButtons .nm_firstBG,.nm_zoomWrap[aria-expanded="false"].nm_active .nm_zoomButtons .nm_firstBG{height:3.6em;}.nm_zoomWrap[aria-expanded="false"] .nm_zoomButtons .nm_firstBG{width:.7em;height:3.4em;border:none;}.nm_zoomWrap[aria-expanded="false"] .nm_zoomButtons [aria-role="button"]{min-height:1.7em;min-width:1.7em;}.nm_zoomWrap[aria-expanded="false"] .nm_zoomIn{margin-top:-3.4em;}.nm_zoomLevels{position:absolute;display:none;right:2.5em;width:3.4em;-moz-transition:right 200ms ease-out,margin-top 200ms linear;-webkit-transition:right 200ms ease-out,margin-top 200ms linear;-o-transition:right 200ms ease-out,margin-top 200ms linear;transition:right 200ms ease-out,margin-top 200ms linear;-webkit-transform:scale(1);}.nm_zoomWrap[aria-expanded="false"] .nm_zoomLevels{right:0;margin-top:-1.7em;}.nm_zoomLevels[aria-expanded="false"]{margin-top:-3.3em;}.nm_zoomLevels[aria-expanded="true"]{margin-top:-6.7em;}.nm_zoomSlider{-webkit-transform:scale(1);}.nm_zoomSlider .nm_secondBG{position:relative;margin:0 auto;-moz-transition:width 200ms linear,height 200ms linear;-webkit-transition:width 200ms linear,height 200ms linear;-o-transition:width 200ms linear,height 200ms linear;transition:width 200ms linear,height 200ms linear;}.nm_zoomWrap[aria-expanded="false"] .nm_secondBG{width:.4em;height:3.3em;}.nm_zoomWrap[aria-expanded="true"] .nm_zoomLevels[aria-expanded="false"] .nm_secondBG{width:.6em;height:6.8em;}.nm_zoomWrap[aria-expanded="true"] .nm_zoomLevels[aria-expanded="false"]:active .nm_secondBG,.nm_zoomWrap[aria-expanded="true"] .nm_zoomLevels[aria-expanded="false"].nm_active .nm_secondBG{height:6.392em;width:.564em;margin-top:.3em;}.nm_zoomLevels[aria-expanded="true"] .nm_zoomSlider .nm_secondBG{width:1.2em;height:13.4em;}.nm_zoomLevels[aria-expanded="true"]:active .nm_secondBG,.nm_zoomLevels[aria-expanded="true"].nm_active .nm_secondBG{width:1.176em;height:13.132em;margin-top:.134em;}.nm_zoomSliderTrack{position:absolute;left:0;width:100%;background-color:transparent;}.nm_zoomWrap[aria-expanded="false"] .nm_zoomSliderTrack{top:.2em;height:2.8em;}.nm_zoomWrap[aria-expanded="true"] .nm_zoomSliderTrack{top:.4em;height:5.8em;}.nm_zoomLevels[aria-expanded="true"] .nm_zoomSliderTrack{height:11.3em;top:1.05em;}.nm_zoomSliderKnob{position:absolute;margin-top:-1.7em;margin-left:0;cursor:pointer;}.nm_zoomSliderKnob[aria-disabled="true"]{width:.4em;height:.2em;min-width:.4em;min-height:.2em;left:1.5em;margin-top:-0.1em;}.nm_zoomSliderKnob .nm_thirdBG{position:absolute;width:.2em;height:.4em;top:0;left:.1em;-webkit-border-radius:.1em;-moz-border-radius:.1em;-o-border-radius:.1em;border-radius:.1em;-moz-transition:width 200ms linear,height 200ms linear;-webkit-transition:width 200ms linear,height 200ms linear;-o-transition:width 200ms linear,height 200ms linear;transition:width 200ms linear,height 200ms linear;}.nm_zoomWrap[aria-expanded="true"] .nm_zoomSliderKnob[aria-disabled="true"]{margin-top:-0.3em;left:1.4em;min-width:0;min-height:0;}.nm_zoomWrap[aria-expanded="true"] .nm_zoomSliderKnob .nm_thirdBG{width:.4em;height:.8em;top:0;left:.1em;-webkit-border-radius:.2em;-moz-border-radius:.2em;-o-border-radius:.2em;border-radius:.2em;}.nm_zoomLevels[aria-expanded="true"] .nm_zoomSliderKnob .nm_thirdBG{width:.8em;height:1.8em;top:.8em;left:1.3em;-webkit-border-radius:.4em;-moz-border-radius:.4em;-o-border-radius:.4em;border-radius:.4em;}.nm_zoomLevels[aria-expanded="true"] .nm_zoomSliderKnob:active .nm_thirdBG{width:.784em;height:1.72em;background-color:red;}.nm_zoomBookmarks{position:absolute;top:0;list-style:none;margin:0;padding:0;-webkit-transform:scale(1);}.nm_right .nm_zoomBookmarks{text-align:right;right:3.4em;}.nm_zoomLevels[aria-expanded="false"] .nm_zoomBookmarks{display:none;}.nm_zoomBookmark{padding:0;line-height:3.4em;}.nm_zoomBookmark .nm_secondBG{width:100%;padding:.1em .6em;white-space:pre;}.nm_left .nm_zoomButtons{left:0;right:auto;}.nm_left .nm_zoomLevels{left:0;right:auto;margin-left:2.5em;}.nm_left .nm_zoomBookmarks{margin-left:3.4em;}.nm_left[aria-expanded="false"] .nm_zoomLevels{margin-left:0!important;margin-top:-1.6em!important;}.nm_positioningWrap{width:3.4em;overflow:hidden;}.nm_positioningWrap[aria-pressed="true"] .nm_pos_icon_normal{display:none;}.nm_positioningWrap[aria-pressed="false"] .nm_pos_icon_pressed{display:none;}.nm_positioningWrap[aria-busy="false"] .nm_pos_icon_busy{display:none;}.nm_positioningWrap[aria-busy="true"] .nm_pos_icon_normal,.nm_positioningWrap[aria-busy="true"] .nm_pos_icon_pressed{display:none;}.nm_positioningWrap:active .nm_firstBG{background-image:none;filter:none;background-color:#333;}.nm_infoBubble{cursor:default;position:absolute;left:400px;top:100px;white-space:normal;outline:none;margin:8px;color:white;-webkit-transform:scale(1);box-shadow:0 0 1px #ccc;z-index:100;}.nm_bubble{font-family:arial,helvetica,sans;-webkit-border-radius:.4em;-moz-border-radius:.4em;-o-border-radius:.4em;border-radius:.4em;}.nm_infoBubble .nm_bubble_bg{position:absolute;top:0;left:0;width:100%;height:100%;z-index:-1;}.nm_noborder{border:0!important;}.nm_bubble_lp0{padding-left:0!important;}.nm_bubble_content{padding:1.5em;font-size:1em;}.nm_bubble_sidelinks{right:1.5em;position:absolute;text-align:right;}.nm_bubble_sidelinks a{color:#595;text-decoration:none;}.nm_hover .nm_bubble_sidelinks a:hover{text-decoration:underline;}.nm_bubble_content a,.nm_bubble_content a:visited{color:white;}.nm_bubble_content p{margin:0 0 .5em 0;}.nm_bubble_controls{position:absolute;top:-0.3em;right:.3em;}.nm_bubble_control_close{cursor:pointer;}.nm_bubble_controls a,.nm_bubble_control_close{color:#999;text-decoration:none;font-size:2em;}.nm_bubble_linksbar{display:none;margin:0 1.5em;padding:1.0em 0 1.0em 0;border-top:.1em solid #d2d2d2;}.nm_bubble_linksbar a{text-decoration:none;color:#595;padding:0 .7em 0 .5em;border-right:.1em solid #cfcfcf;}.nm_hover .nm_bubble_linksbar a:hover{text-decoration:underline;}.nm_bubble_tail{position:absolute;z-index:-10;}.nm_right[aria-role="menubar"]{margin-right:.3em;}.nm_left[aria-role="menubar"]{margin-left:.3em;}.ovi_mp_controls .nm_mapSelectorWrap{position:relative;}.nm_ie78 .nm_mapSelectorWrap{position:relative;float:right;}.nm_mapSettingsWrap{-webkit-transform:scale(1);}.nm_layout_horizontal[aria-role="menubar"] .nm_wrapperBG{height:2.8em;margin-top:.3em;margin-bottom:-3.1em;}.nm_openVertSelector[aria-role="menubar"] .nm_wrapperBG{height:13.5em;margin-bottom:-13.8em;}.nm_openVertSelector.nm_has3D[aria-role="menubar"] .nm_wrapperBG{height:16.5em;margin-bottom:-16.8em;}.nm_openVertSelector[aria-role="menubar"] .nm_dropDownMenu .nm_globe,.nm_openVertSelector[aria-role="menubar"] .nm_wrapperBG .nm_3DBG,.nm_layout_horizontal[aria-role="menubar"] .nm_wrapperBG li,.nm_layout_horizontal[aria-role="menubar"] .nm_wrapperBG li.nm_3DBG{display:none;visibility:hidden;}.nm_openVertSelector.nm_has3D[aria-role="menubar"] .nm_dropDownMenu .nm_globe,.nm_openVertSelector.nm_has3D[aria-role="menubar"] .nm_wrapperBG .nm_3DBG{display:block;visibility:visible;}[aria-role="menubar"][aria-expanded="false"] .nm_wrapperBG{display:none;visibility:hidden;}[aria-role="menubar"] [aria-role="menuitem"] .nm_firstBG,[aria-role="menubar"] [aria-role="menuitemradio"] .nm_firstBG{-webkit-border-radius:0;-moz-border-radius:0;-o-border-radius:0;border-radius:0;}.nm_left[aria-role="menubar"] [aria-role="menu"]:first-child .nm_firstBG,.nm_left[aria-role="menubar"] [aria-role="menuitem"]:first-child .nm_firstBG,.nm_left[aria-role="menubar"] [aria-role="menuitemradio"]:first-child .nm_firstBG,.nm_right[aria-role="menubar"] [aria-role="menu"]:nth-child(2) .nm_firstBG,.nm_right[aria-role="menubar"] [aria-role="menuitem"]:nth-child(2) .nm_firstBG,.nm_right[aria-role="menubar"] [aria-role="menuitemradio"]:nth-child(2) .nm_firstBG,.nm_right[aria-role="menubar"] .nm_lastInGroup[aria-role="menu"] .nm_firstBG,.nm_right[aria-role="menubar"] .nm_lastInGroup[aria-role="menuitem"] .nm_firstBG,.nm_right[aria-role="menubar"] .nm_lastInGroup[aria-role="menuitemradio"] .nm_firstBG,.nm_left[aria-role="menubar"] .nm_firstInGroup[aria-role="menu"] .nm_firstBG,.nm_left[aria-role="menubar"] .nm_firstInGroup[aria-role="menuitem"] .nm_firstBG,.nm_left[aria-role="menubar"] .nm_firstInGroup[aria-role="menuitemradio"] .nm_firstBG{-webkit-border-top-right-radius:.4em;-webkit-border-bottom-right-radius:.4em;-moz-border-radius-topright:.4em;-moz-border-radius-bottomright:.4em;-o-border-top-right-radius:.4em;-o-border-bottom-right-radius:.4em;border-top-right-radius:.4em;border-bottom-right-radius:.4em;border-radius:0 \\0/;}.nm_left[aria-role="menubar"] [aria-role="menu"]:nth-child(2) .nm_firstBG,.nm_left[aria-role="menubar"] [aria-role="menuitem"]:nth-child(2) .nm_firstBG,.nm_left[aria-role="menubar"] [aria-role="menuitemradio"]:nth-child(2) .nm_firstBG,.nm_right[aria-role="menubar"] [aria-role="menu"]:first-child .nm_firstBG,.nm_right[aria-role="menubar"] [aria-role="menuitem"]:first-child .nm_firstBG,.nm_right[aria-role="menubar"] [aria-role="menuitemradio"]:first-child .nm_firstBG,.nm_right[aria-role="menubar"] [aria-role="menu"]:nth-child(1)+li .nm_firstBG,.nm_right[aria-role="menubar"] [aria-role="menuitem"]:nth-child(1)+li .nm_firstBG,.nm_right[aria-role="menubar"] [aria-role="menuitemradio"]:nth-child(1)+li .nm_firstBG,.nm_right[aria-role="menubar"] .nm_firstInGroup[aria-role="menu"] .nm_firstBG,.nm_right[aria-role="menubar"] .nm_firstInGroup[aria-role="menuitem"] .nm_firstBG,.nm_right[aria-role="menubar"] .nm_firstInGroup[aria-role="menuitemradio"] .nm_firstBG,.nm_left[aria-role="menubar"] .nm_lastInGroup[aria-role="menu"] .nm_firstBG,.nm_left[aria-role="menubar"] .nm_lastInGroup[aria-role="menuitem"] .nm_firstBG,.nm_left[aria-role="menubar"] .nm_lastInGroup[aria-role="menuitemradio"] .nm_firstBG{-webkit-border-top-left-radius:.4em;-webkit-border-bottom-left-radius:.4em;-moz-border-radius-topleft:.4em;-moz-border-radius-bottomleft:.4em;-o-border-top-left-radius:.4em;-o-border-bottom-left-radius:.4em;border-top-left-radius:.4em;border-bottom-left-radius:.4em;border-radius:0 \\0/;}.nm_right>[aria-role="menu"],.nm_right>[aria-role="menuitem"],.nm_right>[aria-role="menuitemradio"]{float:right;}.nm_left>[aria-role="menu"],.nm_left>[aria-role="menuitem"],.nm_left>[aria-role="menuitemradio"]{float:left;}.nm_layout_horizontal[aria-role="menubar"] .nm_dropDownMenu{height:auto;margin:0;}.nm_layout_horizontal[aria-role="menubar"] .nm_dropDownMenu.nm_layout_horizontal{display:inline;float:inherit;height:auto;background:none;margin:0;}.nm_left .nm_ie78.nm_dropDownMenu{float:left;}.nm_right .nm_ie78.nm_dropDownMenu{float:right;}.nm_left [aria-role="menu"].nm_layout_horizontal dt{float:left;text-align:left;}.nm_right [aria-role="menu"].nm_layout_horizontal dt{float:right;text-align:right;}.nm_dropDownMenu{margin:0;}.nm_dropDownMenu dt .nm_firstBG{display:block;line-height:2.6em;margin:.3em 0;padding:0 1em;font-weight:bold;min-height:2.6em;}.nm_dropDownMenu.nm_layout_horizontal [aria-role="menuitemradio"]{display:inline;float:left;}.nm_right .nm_dropDownMenu.nm_layout_horizontal [aria-role="menuitemradio"]{float:right;}.nm_dropDownMenu[aria-expanded="false"] [aria-role="menuitemradio"]{display:none;}.nm_dropDownMenu dd{line-height:3.4em;margin:0 .6em;white-space:nowrap;}.nm_ie78 .nm_layout_horizontal.nm_dropDownMenu dd{margin:0 .6em;}.nm_mapSelectorWrap.nm_layout_horizontal .nm_dropDownMenu dd{border-bottom:none;}.nm_dropDownMenu dd.nm_last{border-bottom:none;}.nm_dropDownMenu dd .nm_secondBG{display:inline;padding:.5em 1em;margin:0;}.nm_dropDownMenu dd .nm_icon{display:none;position:absolute;left:1.3em;color:white;margin:.6em 0 0;width:2.3em;height:2.3em;background-color:orange;*margin:0;}.nm_right .nm_icon{position:relative;float:left;left:0;}.nm_dropDownMenu .nm_labelClose{color:#00BBDC;font-weight:bold;line-height:3.4em;padding:0 1.2em;}.nm_dropDownMenu[aria-expanded="false"]{background:none;}.nm_dropdown_arrow{width:0;height:0;border:0;border-top:.4em solid #333;border-right:.4em solid transparent;border-left:.4em solid transparent;display:inline-block;padding:.1em 0 0 0;margin:0 .4em 0;}.nm_layout_horizontal .nm_dropdown_arrow{border-right:.3em solid #333;border-top:.3em solid transparent;border-bottom:.3em solid transparent;border-left:0;padding:0;}.nm_layout_horizontal .nm_dropDownMenu:focus .nm_dropdown_arrow,.nm_layout_horizontal .nm_dropDownMenu:hover .nm_dropdown_arrow{border-right-color:#00BBDC;}.nm_rcMenu{font-family:arial,helvetica,sans;padding-bottom:8px;background-color:#000F1A;zoom:1;position:absolute;z-index:3;width:158px;-moz-border-radius:.4em;-webkit-border-radius:.4em;-o-border-radius:.4em;border-radius:.4em;}.nm_rcMenu,.nm_rcMenu span{color:#fff;font-weight:normal;}.nm_rcMenu .nm_rcMenuItemHeader{zoom:1;padding:10px!important;-moz-border-radius-topleft:.4em;-moz-border-radius-topright:.4em;-webkit-border-top-left-radius:.4em;-webkit-border-top-right-radius:.4em;-o-border-top-left-radius:.4em;-o-border-top-right-radius:.4em;border-top-left-radius:.4em;border-top-right-radius:.4em;color:#fff!important;}.nm_rcMenu .nm_rcMenuItem.top{margin-top:8px;}.nm_rcMenu .nm_rcMenuItem{overflow:hidden;text-align:left;padding:1px 10px 0 10px;cursor:default;}.clickable:hover,.nm_rcMenu.nm_hover .clickable:hover{background-color:#00BBDC;zoom:1;color:#FFF;cursor:pointer;color:#888;}.nm_rcMenu .nm_rcMenuItem.clickable{color:#fff;}.nm_rcMenu .nm_rcMenuSeparator{height:0;margin:8px 10px;border-top:1px solid #333;border-bottom:1px solid #666;line-height:0;font-size:0;}.nm_rcMenu .nm_rcMenuSeparatorHeader{margin-left:0;margin-right:0;margin-top:0;line-height:0;}.nm_rcMenuPin{width:32px;height:32px;background:url("assets/ovi/mapsapi/ui/images/ovi_web/controls.png") no-repeat -76px -60px;position:absolute;}.nm_overviewAnchor{margin:.4em;margin-right:0;float:right;margin-top:-29px;}.nm_overviewWrap,.nm_rulerWrap,.nm_zoomRectWrap{margin-bottom:.3em;overflow:hidden;bottom:inherit;width:3.4em;height:3.4em;-webkit-transition:width .3s ease-in-out,height .3s ease-in-out,margin-top .3s ease-in-out;-moz-transition:width .3s ease-in-out,height .3s ease-in-out,margin-top .3s ease-in-out;-o-transition:width .3s ease-in-out,height .3s ease-in-out,margin-top .3s ease-in-out;-ms-transition:width .3s ease-in-out,height .3s ease-in-out,margin-top .3s ease-in-out;transition:width .3s ease-in-out,height .3s ease-in-out,margin-top .3s ease-in-out;}.nm_overviewWrap.anim{width:300px;height:200px;}.nm_overviewMap{width:0;height:0;border:.1em solid #333;background-color:#EEE;}.nm_overviewButton,.nm_rulerButton_icon_normal,.nm_rulerButton_icon_pressed,.nm_zoomRectButton_icon_normal,.nm_zoomRectButton_icon_pressed{position:absolute;float:none;bottom:0;}.nm_left .nm_overviewButton{left:0;}.nm_right .nm_overviewButton{right:0;}.nm_ie78 .nm_overviewButton .nm_gfx,.nm_ie78 .nm_rulerButton_icon_normal .nm_gfx,.nm_ie78 .nm_rulerButton_icon_pressed .nm_gfx,.nm_ie78 .nm_zoomRectButton_icon_normal .nm_gfx,.nm_ie78 .nm_zoomRectButton_icon_pressed .nm_gfx{top:0;}.nm_overviewWrap[aria-expanded="false"] .nm_overviewMap{display:none;}.nm_bottom .nm_scalebarTemplate .nm_gfx{margin-top:1.3em;bottom:auto;position:static;}.nm_rulerWrap,.nm_zoomRectWrap{margin-bottom:.3em;}.nm_rulerWrap[aria-pressed="true"] .nm_rulerButton_icon_normal,.nm_zoomRectWrap[aria-pressed="true"] .nm_zoomRectButton_icon_normal{display:none;}.nm_rulerWrap[aria-pressed="false"] .nm_rulerButton_icon_pressed,.nm_zoomRectWrap[aria-pressed="false"] .nm_zoomRectButton_icon_pressed{display:none;}.nm_streetLevelWrap[aria-pressed="true"] .nm_firstBG{background-color:#09b;background-image:none;}.nm_streetLevelWrap[aria-hidden="true"],.nm_streetLevelWrap .nm_street_level_leave,.nm_streetLevelWrap[aria-pressed="false"] .nm_street_level_icon_pressed,.nm_streetLevelWrap[aria-pressed="false"] .nm_street_level_icon_hover,.nm_streetLevelWrap[aria-pressed="true"] .nm_street_level_icon,.nm_streetLevelWrap[aria-pressed="true"] .nm_street_level_icon_hover,.nm_streetLevelWrap[aria-pressed="true"]:hover .nm_street_level_icon_hover,.nm_streetLevelWrap:hover .nm_street_level_icon,.nm_streetLevelWrap.nm_street_level_running .nm_street_level_icon,.nm_streetLevelWrap.nm_street_level_running:hover .nm_street_level_icon_hover{display:none;}.nm_streetLevelWrap[aria-pressed="true"] .nm_street_level_icon_pressed,.nm_streetLevelWrap:hover .nm_street_level_icon_hover,.nm_streetLevelWrap.nm_street_level_running .nm_street_level_leave{display:block;}.nm_streetLevelWrap .nm_street_level_leave{font-weight:bold;margin:6px 0;}.nm_streetLevelWrap.nm_street_level_running .nm_firstBG{width:auto;padding:0 5px;}.nm_miniman,.nm_miniman_point{display:none;width:30px;background-image:url(\'assets/ovi/mapsapi/ui/images/panorama/miniman.png\');position:absolute;pointer-events:none;}.nm_miniman{background-position:0 -37px;height:38px;width:30px;z-index:1000;}.nm_miniman.nm_miniman_moving{background-position:0 0;}.nm_miniman.nm_is_covered{background-position:0 -75px;}.nm_miniman_point{height:14px;background-position:0 -134px;z-index:999;}.nm_miniman_point.nm_miniman_point_animate{transition:opacity .5s ease-out;-webkit-transition:opacity .5s ease-out;-moz-transition:opacity .5s ease-out;-o-transition:opacity .5s ease-out;-ms-transition:opacity .5s ease-out;}';
(function(e){function l(a){var b=v[a];b||g.d("No valid WAI-ARIA name: "+a);return b}var h=e.ui.common,d=e.ui.nokia_generic,c=e.gfx,g=e.util,b=e.dom,f=b.Page,r=e.dom.EventTarget,a=b.cj,q=h.GfxTemplate,k=h.ColorSet,h=h.ColorScheme,p=e.ui.AbstractUIComponent,m=b.contains,y=ovi.bind,s=ovi.dom.addClass,v={disabled:"aria-disabled",expanded:"aria-expanded",hidden:"aria-hidden",pressed:"aria-pressed",selected:"aria-selected",checked:"aria-checked",valuenow:"aria-valuenow",valuemax:"aria-valuemax",valuemin:"aria-valuemin",
busy:"aria-BUSY",role:"aria-role"},u={},x=f.browser.msie,w=!!(f.browser.msie&&f.browser.version<9),z=f.browser.touch,B=z?"touch":"mouse",D=z?"tap":"click",A=z?"dbltap":"dblclick",C=B+(z?"start":"down"),E=B+(z?"end":"up"),M=B+"move",I=B+"enter",K=B+"leave",Q=B+"over";B+="out";var F=f.browser.mobile,L=new c.Painter.defaultPainter,f=new k({background:"#fff0",border:"#fff0",stroke:"#333",fill:"#333",text:"#333"}),ea=new h({normal:f,disable:new k({stroke:"#999",fill:"#999",text:"#999"},f),focus:new k({stroke:"#0BD",
fill:"#0BD",text:"#0BD"},f),active:new k({stroke:"#0BD",fill:"#0BD",text:"#0BD"},f)}),U=d.UIComponent=new ovi.Class({Extends:e.ui.UIComponent,initialize:function(a){var b=this;b.I=y(b,b.I);b.xh=y(b,b.xh);b.H=y(b,b.H);b.Tj=y(b,b.Tj);b._super(a);b.af=["nm_draggable","nm_dragging","nm_pointer","nm_wait"];b.Fc=[];b.mp=[];b.K=[];b.$i=[];b.Me=F?1.5:1;b.$e="vertical";b.Ab=ovi.bind(b,b.Ab);b.Hj=ovi.bind(b,b.Hj);b.Sq=function(){b.kk()}},Statics:{CSS_CONCEAL:"nm_conceal",EVENT_CLICK:D,EVENT_DBLCLICK:A,EVENT_LONGPRESS:"longpress",
EVENT_DOWN:C,EVENT_UP:E,EVENT_MOVE:M,EVENT_ENTER:I,EVENT_LEAVE:K,EVENT_OUT:B,EVENT_OVER:Q,EVENT_DRAGSTART:"dragstart",EVENT_DRAG:"drag",EVENT_DRAGEND:"dragend",EVENT_DROP:"drop",EVENT_FOCUS:"focus",EVENT_BLUR:"blur",EVENT_KEYDOWN:"keydown",LAYOUT_HORIZONTAL:"horizontal",LAYOUT_VERTICAL:"vertical",CSS_CLASS_PREFIX:"nm_",CSS_GFX:"nm_gfx"},attach:function(a){this._super(a);F&&s(this.node,"nm_hover");if(!w&&!this.isCloning)this.node=r(this.node),this.node.addListener(U.EVENT_KEYDOWN,this.Ab),this.node.addListener(U.EVENT_BLUR,
this.Hj),this.node.setAttribute("tabindex",0)},detach:function(a){!w&&!this.isCloning&&(this.node.removeListener(U.EVENT_KEYDOWN,this.Ab),this.node.removeListener(U.EVENT_BLUR,this.Hj));this.Ig();this._super(a)},getTemplate:function(){var a=this.mapDisplay,b;if(!a.$ui)a.$ui=p.renderTemplate(a,nokia.maps.resources.ui.nokia_generic.html,this.tn(nokia.maps.resources.ui.nokia_generic.css,e.loadPath,/url\([\"\']?((\.\.\/)*[a-zA-Z0-9\/\-\_]*[\.][a-zA-Z0-9]{3,})[\"\']?\)/gi)),b=this.getRootNode(),b.style.cssText+=
";font-size:"+this.Me+"em;",b=b.parentNode.parentNode,b.style.cssText+=";font-size:10px !important;",w&&s(b,"nm_ie78");return a.$ui},En:function(a){this.oj?this.Kd(a):(s(this.mapDisplay.R,a),this.mb(a))},setCursorDraggable:function(){this.En("nm_draggable")},setCursorPointer:function(){this.En("nm_pointer")},setCursorWait:function(){this.En("nm_wait")},setCursorDefault:function(){this.oj=0;this.pg();this.Fc.length?this.Fn():this.mb()},setCursorDragging:function(){this.oj=1;s(this.mapDisplay.R,"nm_dragging");
this.mb("nm_dragging");this.Kd("nm_draggable");this.Wi=setTimeout(this.Sq,1E3)},keepCursorDragging:function(){if(!this.oj)this.setCursorDragging(),this.pg(),this.Wi=setTimeout(this.Sq,500)},Kd:function(a){this.Fc.push(a)},Fn:function(){var a=this.Fc.pop();s(this.mapDisplay.R,a);this.mb(a);this.Fc=[]},mb:function(a){for(var b=this.af.length,c=this.mapDisplay.R,d;b--;)(d=this.af[b])!==a&&ovi.dom.removeClass(c,d)},Ab:function(){},Hj:function(){},zq:z?function(a){var b=a.currentTarget,c=this.$i;c[c.length-
1]!==b&&this.$i.push(b);a&&a.preventDefault();this.setCssActive(b,!0)}:g.A,Cu:z?function(){var a;if(a=this.$i[0])this.$i.shift(),this.setCssActive(a,!1)}:g.A,setCssActive:function(a,b){a&&ovi.dom[b?"addClass":"removeClass"](a,"nm_active")},kk:function(){this.oj=0;this.mb()},pg:function(){if(this.Wi)clearTimeout(this.Wi),this.Wi=0},show:function(){this.setAria("hidden",!1)},hide:function(){this.setAria("hidden",!0)},showTooltip:function(a,b){var c=this.mapDisplay.getComponentById("Tooltip");(c||this.mapDisplay.components.add(c=
new d.TooltipComponent))&&c.addTooltip(a,b)},hideTooltip:function(){var a=this.mapDisplay.getComponentById("Tooltip");a&&a.removeTooltip()},hiddenSetter:function(a){this.node&&this.node.setAttribute("aria-hidden",!!a);return a},Sn:function(a){a.preventDefault();a.stopPropagation()},getAria:function(a,b){var c;c=(b||this.node).getAttribute(l(a));return c==="true"||(c?c==="false"?!1:isNaN(c)&&c||+c:null)},hasAria:function(a,b){return this.getAria(a,b)!==null},hasAriaValue:function(a,b,c){return this.getAria(a,
c)===b},setAria:function(a,b,c){(c||this.node).setAttribute(l(a),b)},conceal:function(){this.set("conceal",!0)},reveal:function(){this.set("conceal",!1)},concealSetter:function(a){this.node&&ovi.dom[a?"addClass":"removeClass"](this.node,"nm_conceal");return!!a},isConcealed:function(a){return ovi.dom.hasClass(a||this.node,"nm_conceal")},Fw:function(){ovi.dom.toggleClass(this.node,"nm_conceal")},ow:function(){for(var a=this.mp,b=a.length;b--;)if(this.getAria("expanded",a[b]))break;return b+1},Cw:function(){for(var a=
0,b;b=arguments[a++];)this.mp.push(b)},Hv:g.A,layoutHorizontal:function(){this.$e="horizontal";this.ma&&s(this.ma,"nm_layout_horizontal")},layoutVertical:function(){this.$e="vertical";this.ma&&ovi.dom.removeClass(this.ma,"nm_layout_horizontal")},triggerRedraw:x||F?function(a){var b=this,c=a||null;b.set("conceal",!0);setTimeout(function(){b.set("conceal",!1);c&&c.apply(b,[])},50)}:g.A,ju:function(a){var b=this;return function(c,d,f){b.$u(c,d,f,a)}},$u:function(a,b,c,d){var f=a.parentNode,a=u[c]={Lg:a,
ka:f,Wp:0,Rn:{}},e,g;for(g in d)if((e=d[g])instanceof k)a.Rn[g]={Fv:new q(/<svg/.test(b)?b:"<svg xmlns='http://www.w3.org/2000/svg' version='1.1' height='34' width='34'>"+b+"</svg>",e)};this.setGraphics(c,"normal",this.Me,0,0);this.Us(f)},Us:w?function(a){var b=document.createElement("DIV");this.findElement("nm_gfx",a);b.className="nm_cover";a.appendChild(b)}:g.A,initGraphics:function(b,c){c=c==="default"?ea:c||{normal:new k};a(b,this.ju(c))},setGraphics:function(a,b,d,f,e){var d=d||this.Me,f=f||
0,e=e&3||0,g=u[a],b=b?g.Rn[b]:g.Rn.normal,k=d+"_"+f+"_"+e,h=b[k];h||(h=b[k]=b.Fv.stencil(d,f,e));g.Wp===d?L.updateElement(h.getIDL(),g.Lg):(b=g.Lg.parentNode,b.replaceChild(f=(h=new c.GraphicsImage(h)).createElement(),g.Lg),!b.$init&&this.getAria("role",b)==="button"&&this.dm(b,h.width,h.height),g.Lg=f,g.Wp=d,f.className="nm_gfx nm_gfx_"+a);return g.Lg},dm:!w?function(a,c,d,f){if(!a.$init){var e=a.style;c&&(e.width=c+"px");d&&(e.height=d+"px");f&&(e.position="relative");e.overflow="hidden";b.gb(a,
"div",!1,"width:100%;height:100%;position:absolute;top:0;left:0;opacity:0;background-color: white;")}a.$init=!0}:g.A,sd:function(){for(var a=arguments.length,b;a--;)b=arguments[a],F?b.addListener(U.EVENT_CLICK,this.Tj,!0):(b.addListener(U.EVENT_OVER,this.I,!0),b.addListener(U.EVENT_OUT,this.H,!0),b.addListener(U.EVENT_DOWN,this.xh,!0),b.addListener(U.EVENT_UP,z?this.H:this.I,!0))},Ig:function(){for(var a=arguments.length,b;a--;)b=arguments[a],F?b.removeListener(U.EVENT_CLICK,this.Tj,!0):(b.removeListener(U.EVENT_OVER,
this.I,!0),b.removeListener(U.EVENT_DOWN,this.xh,!0),b.removeListener(U.EVENT_UP,z?this.H:this.I,!0),b.removeListener(U.EVENT_OUT,this.H,!0))},isMouseover:function(a){return!a.relatedTarget||m(a.currentTarget.ownerDocument.documentElement,a.relatedTarget)&&!m(a.currentTarget,a.relatedTarget)},Tj:function(a){a=this.getGraphicsIdByNode(a.currentTarget);this.Np?(a&&this.setGraphics(a,"normal"),this.Np=!1):(a&&this.setGraphics(a,"active"),this.Np=!0)},isMouseout:function(a){return!a.relatedTarget||!m(a.currentTarget,
a.relatedTarget)},I:function(a){this.isMouseover(a)&&(a=this.getGraphicsIdByNode(a.currentTarget))&&this.setGraphics(a,"focus")},H:function(a){this.isMouseout(a)&&(a=this.getGraphicsIdByNode(a.currentTarget))&&this.setGraphics(a,"normal")},xh:function(a){(a=this.getGraphicsIdByNode(a.currentTarget))&&this.setGraphics(a,"active")},getGraphicsIdByNode:function(a){for(var b in u)if(u[b]&&u[b].ka===a)return b},pk:function(){var a=this.getAria("hidden",this.node),b=["menu","menuitem","menuitemradio"],
c=this.node.parentNode.childNodes,d=c.length,f=b.length,e,g=[];e=ovi.dom;var k=e.addClass,h=e.removeClass;if(d==1)k(this.node,"nm_lastInGroup"),k(this.node,"nm_firstInGroup");else{for(;d--;)if(e=c[d],e.nodeType==1){if(e===this.node&&!a)h(e,"nm_lastInGroup"),h(e,"nm_firstInGroup"),g.push(e);else for(;f--;)if(this.hasAriaValue("role",b[f],e)&&!this.getAria("hidden",e)){h(e,"nm_lastInGroup");h(e,"nm_firstInGroup");g.push(e);break}f=b.length}g.length>0&&(k(g[0],"nm_firstInGroup"),k(g.pop(),"nm_lastInGroup"))}}});
e.ui.UIComponent=U})(nokia.maps);ovi.provide("nokia.maps.map.component.Overview");
(function(e){var l=Math,h=l.round,d=l.min;e.map.component.Overview=new ovi.Class({Extends:e.ui.UIComponent,initialize:function(c){this._super(c);this.t=this.PANORAMA|this.GLOBE|this.MAP_2D;this.Ya=ovi.bind(this,this.Ya)},c:"Overview",o:"0.0.0.1",attach:function(c){this._super(c);this.mainBgColor=c.Pc.style.backgroundColor;c.addObserver("center",this.ie,this);c.addObserver("zoomLevel",this.ke,this);c.addListener("resizeend",this.Ya)},detach:function(c){c.removeObserver("center",this.ie,this);c.removeObserver("zoomLevel",
this.ke,this);c.removeListener("resizeend",this.Ya);this._super(c)},showMap:function(c){if(!this.miniMapDisplay)this.Se=3,this.miniMapDisplay=new e.map.Display(c,{draggable:!1,parentDisplay:this.mapDisplay,center:this.mapDisplay.center,zoomLevel:this.mapDisplay.zoomLevel-this.Se})},updateMinimap:function(){this.ie.call(this,null,null,this.mapDisplay.center,null);this.ke.call(this,null,null,this.mapDisplay.zoomLevel,null)},ie:function(c,d,b){this.miniMapDisplay&&this.miniMapDisplay.setCenter(b,"none")},
ke:function(c,d,b){this.miniMapDisplay&&(b=b-this.Se>=this.miniMapDisplay.minZoomLevel?b-this.Se:this.miniMapDisplay.minZoomLevel,this.miniMapDisplay.setZoomLevel(b,"none"))},Ya:function(){var c;this.expanded&&(c=this.getMinimapDimensions(),this.resize(c.width,c.height))},getMinimapDimensions:function(){return{width:d(200,h(this.mapDisplay.da.offsetWidth*0.25)),height:d(150,h(this.mapDisplay.da.offsetHeight*0.33))}}})})(nokia.maps);ovi.provide("nokia.maps.map.component.Traffic");
(function(e){e.map.component.Traffic=new ovi.Class({Extends:e.ui.UIComponent,attach:function(e){this.t=this.MAP_2D;this._super(e)},detach:function(e){this._super(e)},c:"Traffic",o:"0.0.0.1"})})(nokia.maps);ovi.provide("nokia.maps.map.component.PublicTransport");(function(e){e.map.component.PublicTransport=new ovi.Class({Extends:e.ui.UIComponent,attach:function(e){this.t=this.MAP_2D;this._super(e)},detach:function(e){this._super(e)},c:"PublicTransport",o:"0.0.0.1"})})(nokia.maps);ovi.provide("nokia.maps.map.component.TypeSelector");
(function(e){e.map.component.TypeSelector=new ovi.Class({Extends:e.ui.UIComponent,attach:function(e){this.t=this.MAP_2D+this.GLOBE;this._super(e);this.updateType&&this.mapDisplay.addObserver("baseMapType",this.updateType,this)},detach:function(e){this.updateType&&this.mapDisplay.removeObserver("baseMapType",this.updateType,this);this._super(e)},c:"TypeSelector",o:"0.0.0.1"})})(nokia.maps);ovi.provide("nokia.maps.map.component.InfoBubbles");
(function(e){var l=e.util,h=l.d;e.map.component.InfoBubbles=new ovi.Class({Extends:e.ui.UIComponent,ALIGNMENT_LEFT:"left",ALIGNMENT_RIGHT:"right",ALIGNMENT_ABOVE:"above",ALIGNMENT_BELOW:"below",DIMENSION_AUTO:"auto",openBubbleHandles:null,initialize:function(){var d=this;d.t=d.MAP_2D;d._super();d.vh=function(){d.oh()};d.jh=function(c){var e=c.target;e.$locationData?(d.openBubble(e.$locationData),c.preventDefault()):e.metaData&&e.metaData.Search&&(d.openBubble(e.metaData.Search),c.preventDefault())};
d.ja=function(){d.oh()};d.Eh={};d.openBubbleHandles=new l.OList;d.set("options",new l.OObject({defaultXAlignment:"right",defaultYAlignment:"below",defaultWidth:"auto",defaultHeight:"auto",autoClose:!0,backgroundColor:"#000",color:"#fff"}))},c:"InfoBubbles",o:"0.0.0.1",yh:function(d,c,e){if(c==="remove"&&(d=this.Eh[e]))delete this.Eh[e],delete d.Dt},attach:function(d){this._super(d);this.set("openHandlesList",this.openBubbleHandles);e.map.plugin&&d instanceof e.map.plugin.Display?d.addListener("mapviewchangeend",
this.vh):(d.addListener("resize",this.ja,this),d.addListener("resizeend",this.ja,this),d.addObserver("center",this.ja,this),d.addObserver("zoomLevel",this.ja,this),d.addListener("mapviewchange",this.ja));d.addListener("click",this.jh);this.openBubbleHandles.addObserver(this.yh,this)},detach:function(d){e.map.plugin&&d instanceof e.map.plugin.Display?d.removeListener("mapviewchangeend",this.vh):(d.removeListener("resize",this.ja,this),d.removeListener("resizeend",this.ja,this),d.removeObserver("center",
this.ja,this),d.removeObserver("zoomLevel",this.ja,this),d.removeListener("mapviewchangeend",this.ja));d.removeListener("click",this.jh);this.openBubbleHandles.removeObserver(this.yh,this);this.set("openHandlesList",null);this.options.style=null;this._super(d)},closeBubble:function(d){d&&typeof d.close==="function"?d.close():h("The argument needs to be a bubble instance")}})})(nokia.maps);ovi.provide("nokia.maps.map.component.ZoomBar");
(function(e){e.map.component.ZoomBar=new ovi.Class({Extends:e.ui.UIComponent,attach:function(e){this.t=this.MAP_2D|this.GLOBE;this._super(e);this.updateZoomLevel&&this.mapDisplay.addObserver("zoomLevel",this.updateZoomLevel,this)},detach:function(e){this.updateZoomLevel&&this.mapDisplay.removeObserver("zoomLevel",this.updateZoomLevel,this);this._super(e)},c:"ZoomBar",o:"0.0.0.1"})})(nokia.maps);ovi.provide("nokia.maps.map.component.ZoomRectangle");
(function(e){var l=e.dom,h=Math.abs,d=e.map.Display;e.map.component.ZoomRectangle=new ovi.Class({Extends:e.ui.UIComponent,initialize:function(c){this._super(c);this.t=this.MAP_2D|this.GLOBE;this.Wa=ovi.bind(this,this.Wa);this.Hc=ovi.bind(this,this.Hc);this.Ic=ovi.bind(this,this.Ic);this.set("on",!1)},styleSetter:function(c){if(c.hasOwnProperty("opacity"))c.filter="progid:DXImageTransform.Microsoft.Alpha(Opacity="+c.opacity*100+")";return c},c:"ZoomRectangle",o:"0.0.0.1",switchOnOff:function(){this.set("on",
!this.on)},rectNodeSetter:function(c){var d=this.mapDisplay.ib,b=d.ownerDocument;c||(c=l.setStyle(b.createElement("div"),this.Fg));l.setStyle(c,this.style);this.rectNode&&this.rectNode.parentNode&&d.hasChildNodes(this.rectNode)&&d.removeChild(this.rectNode);d.appendChild(c);return c},attach:function(c){this._super(c);this.t=this.MAP_2D;var d=this.rectNode,b=d?{}:this.Fg,f=c.ib,e=f.ownerDocument,d=d||this.set("rectNode",e.createElement("div"))&&this.rectNode;l.setStyle(d,b);l.setStyle(d,this.style);
d.parentNode||f.appendChild(d);c.addListener("dragstart",this.Wa);c.addListener("drag",this.Hc);c.addListener("dragend",this.Ic)},detach:function(c){c.removeListener("dragstart",this.Wa);c.removeListener("drag",this.Hc);c.removeListener("dragend",this.Ic);this._super(c)},Fg:{border:"2px solid black",width:0,height:0,display:"none",position:"absolute",zIndex:"10000",background:"#CCC",opacity:0.5,filter:"progid:DXImageTransform.Microsoft.Alpha(Opacity=50)"},style:{},Wa:function(c){if(c.target instanceof
d&&this.on&&this.enabled){var e=this.rectNode,b=c.displayX,f=c.displayY;c.dataTransfer.lift=!1;this.nd={x:b,y:f};e.style.left=b+"px";e.style.top=f+"px";e.style.width="0px";e.style.height="0px";e.style.display="";c.stopImmediatePropagation()}},Hc:function(c){if(c.target instanceof d&&this.on&&this.enabled){var e=this.rectNode.style,b=this.nd,f=c.displayX-b.x,l=c.displayY-b.y;e.left=b.x+(f<0?f:0)+"px";e.top=b.y+(l<0?l:0)+"px";e.width=h(f)+"px";e.height=h(l)+"px";c.stopImmediatePropagation()}},Ic:function(c){if(c.target instanceof
d&&this.on&&this.enabled)this.Ng={x:c.displayX,y:c.displayY},this.rectNode.style.display="none",this.od(),c.stopImmediatePropagation()},od:function(){var c=this.mapDisplay,d=e.geo.BoundingBox.coverAll([c.pixelToGeo(this.nd.x,this.nd.y),c.pixelToGeo(this.Ng.x,this.Ng.y)]);c.zoomTo(d,!1,"default")}})})(nokia.maps);ovi.provide("nokia.maps.map.component.ContextMenu");
(function(e){function l(b,a){var c="",d=a.street?a.street:"",f=a.houseNumber?a.houseNumber:"",e=a.city?a.city:"",g=a.postalCode?a.postalCode:"",h=a.country?a.country:"";d+f&&(c=d+" "+f+"<br/>");g+e&&(c+=g+" "+e+", ");c+=c?a.country?a.country:"":(h?h+", ":"")+(a.country?a.country:"");b.innerHTML=c;this.nh(this.x,this.y)}function h(b,a){var c=this;nokia.places.search.manager.reverseGeoCode({latitude:a.latitude,longitude:a.longitude,onComplete:function(a,d){a&&d==="OK"&&a.location&&l.call(c,b,a.location.address)}})}
function d(b,a){var c=this,d=new e.advsearch.Manager,f;d.addObserver("state",function(a){a.state==="finished"&&(f=a.locations[0])&&l.call(c,b,f.address)});d.reverseGeocode(a)}var c=nokia.maps.dom.Page.browser.touch,g=c?"tap":"click",b=c?"longpress":"contextmenu",f=e.util;e.map.component.ContextMenu=new ovi.Class({Extends:e.ui.UIComponent,c:"ContextMenu",o:"0.0.0.0",initialize:function(){var b=e.util.getRootNameSpace("nokia");this.t=this.MAP_2D|this.GLOBE;this.Kb=new ovi.Array;this.Yg=new ovi.Array;
this.$c=ovi.bind(this,this.$c);this.addHandler(e.map.component.ContextMenu.zoomHandler);e.Features.getFeatureMap().reporter&&typeof Array.prototype.forEach==="function"&&new e.reporter.ContextMenuHandler(this);(b.places||e.advsearch&&e.advsearch.Manager)&&this.setHeader(e.map.component.ContextMenu.reverseGeocodingHandler);e.routing&&e.routing.component&&this.addHandler(e.routing.component.ContextMenuHandler)},Statics:{Group:new ovi.Class({initialize:function(){this.q=[]},addEntry:function(b,a,c){this.q.push({Tc:b,
ig:a,pi:c})},Ht:function(){return this.q.length}}),zoomHandler:function(b,a){var c;if(!b.target.isRoutingMarker)c=this.mapDisplay.zoomLevel,a.addEntry("__i18n_rightClickMenu.zoomIn__",c<this.mapDisplay.maxZoomLevel?function(){this.mapDisplay.setZoomLevel(c+1,"default")}:null,!0),a.addEntry("__i18n_rightClickMenu.zoomOut__",c>this.mapDisplay.minZoomLevel?function(){this.mapDisplay.setZoomLevel(c-1,"default")}:null,!0)},reverseGeocodingHandler:function(b){var a=e.util.getRootNameSpace("nokia"),c=this.mapDisplay.pixelToGeo(this.x,
this.y);a.places?h.call(this,b,c):e.advsearch.Manager&&d.call(this,b,c)},mapFeedbackHandler:e.util.A,captureHandler:e.util.A},attach:function(c){this._super(c);this.mapDisplay.addListener(b,this.$c);this.mapDisplay.addListener("mapviewchangestart",this.Ma);this.node.addListener(g,this.bd);this.bb.addListener(g,this.bd);this.hide()},detach:function(c){this.mapDisplay.removeListener(b,this.$c);this.mapDisplay.removeListener("mapviewchange",this.Ma);this.node.addListener(g,this.bd);this.bb.addListener(g,
this.bd);this._super(c)},addHandler:function(b){typeof b!=="function"&&f.d();return this.Kb.indexOf(b)<0&&this.Kb.push(b)&&!0},removeHandler:function(b){b=this.Kb.indexOf(b);return b>=0&&this.Kb.splice(b,1)&&!0},setHeader:function(b,a){this.Yl={Tc:b,pi:a}},bd:function(b){(b.button===2||ovi.platform.mac&&b.button===0&&b.ctrlKey)&&b.preventDefault()},$c:function(b){if(this.enabled){this.x=b.displayX;this.y=b.displayY;b.preventDefault();var a=this.Kb,c=a.length,d=this.Yg,f,g=e.map.component.ContextMenu.Group;
for(d.length=0;c--;)a[c].call(this,b,f=new g),f.q.length&&d.push(f);d.length&&this.Kn(b)}}});if(e.routing&&e.routing.component)e.map.component.ContextMenu.routingHandler=e.routing.component.ContextMenuHandler})(nokia.maps);ovi.provide("nokia.maps.ui.nokia_generic.OverviewComponent");
(function(e){var l=e.ui.nokia_generic,h=e.dom.EventTarget,d=l.UIComponent.EVENT_CLICK,c=Math,g=c.pow,b=c.round;l.OverviewComponent=new ovi.Class({Extends:e.map.component.Overview,build:function(){var b=ovi.bind;this._super("nm_overviewWrap");this.F=h(this.findElement("nm_overviewButton",this.node));this.sc=this.findElement("nm_overviewMap");this.kc=ovi.bind(this,this.kc);this.addObserver("expanded",this.kc);this.O=b(this,this.O);this.He=b(this,this.He);this.Uh=new e.ui.common.Animator(this.He,0.6);
this.onLanguageChange()},attach:function(b){this._super(b);b=this.F;this.mainBgColor&&(this.sc.style.backgroundColor=this.mainBgColor);this.initGraphics(b,"default");this.sd(b);b.addListener(d,this.O);this.Dh();this.set("conceal",!1);this.triggerRedraw()},detach:function(b){var c=this.F;this.set("conceal",!1);this.Ig(c);c.removeListener(d,this.O);this._super(b);this.triggerRedraw()},Ab:function(b){b.nativeEvent.keyCode===13&&this.O()},O:function(){this.expanded?this.collapse():this.expand();this.setCursorDefault()},
H:function(b){this.expanded||this._super(b)},expandedSetter:function(b){b?(this.setAria("expanded",!0,this.node),this.showMap(this.sc),this.Jg=this.getMinimapDimensions(),this.Vh=!1,this.resize(this.Jg.width,this.Jg.height)):(this.setAria("expanded",!1,this.node),this.Vh=!0,this.resize(0,0),this.node.removeAttribute("style"),this.sc.removeAttribute("style"));return b},resize:function(b,c){var a=this.sc,d=this.node;a.style.width=d.style.width=b+"px";a.style.height=d.style.height=c+"px";d.style.marginTop=
-c+1+"px"},Zo:0,Xo:0,Yq:function(b,c){this.Wh=!1;this.ur=this.Zo;this.sr=this.Xo;this.et=b-this.ur;this.ct=c-this.sr;this.Uh.stop();this.Uh.start();this.Km()},He:function(c){var d=-2*g(c,3)+3*g(c,2),a=this.ct*d;this.Cf(b(this.ur+this.et*d),b(this.sr+a));if(c==1)this.Wh=!0,this.Jm(),this.updateMinimap()},Cf:function(b,c){var a=this.sc,d=this.node;if(!this.Wh)if(this.Dh(),b+9<=27||c+10<=31){if(this.Vh)a.style.width=a.style.height=d.style.width=d.style.height=d.marginTop="",a.style.top="-29px",this.setAria("expanded",
!1,this.node)}else this.Zo=b,this.Xo=c,a.style.width=d.style.width=b+"px",a.style.height=d.style.height=c+"px",a.style.top=-c+"px",d.style.marginTop=-c+1+"px"},Km:function(){var b=new e.dom.Event;b.type="resizestart";b.target=this;this.dispatch(b)},Dh:function(){var b=new e.dom.Event;b.type="resize";b.target=this;this.dispatch(b)},Jm:function(){var b=new e.dom.Event;b.type="resizeend";b.target=this;this.dispatch(b)},kc:function(){this.node.title=this.translate("ovi.service.map._"+(this.expanded?"t51":
"t50"))},onLanguageChange:function(){this.kc()}});e.map.component.Overview=l.OverviewComponent})(nokia.maps);ovi.provide("nokia.maps.ui.nokia_generic.PublicTransportAndTrafficMixin");
(function(e){var l=e.ui.nokia_generic,h=e.dom.EventTarget,d=l.UIComponent,e=e.dom.Page,c=!!(e.browser.msie&&e.browser.version<9),g=d.EVENT_CLICK;l.PublicTransportAndTrafficMixin=new ovi.Class({initialize:function(){this.dj=!1},build:function(){var b=ovi.bind;this._super(d.CSS_CLASS_PREFIX+this.gj);this.F=h(this.node);this.Vb=b(this,this.Vb);this.ab=b(this,this.ab);this.dm(this.node,void 0,void 0,!0);this.onLanguageChange()},rd:function(){var b=this.mapDisplay;this.initGraphics(this.F,"default");this.qk=
ovi.bind(this,this.qk);this.ub=ovi.bind(this,this.ub);b.addObserver("baseMapType",this.th,this);b.availableBaseMapTypes.addObserver(this.ub,this);b.addObserver("zoomLevel",this.ub,this);b.addListener("resizeend",this.ab);b.addListener("transitionstart",this.qk);b.addListener("transitionend",this.ub);this.ub();this.set("conceal",!1);this.pk();this.Kk()},qk:function(){this.Gp=!0},detach:function(b){var c=this.F,d=this.mapDisplay;this.Gc&&this.Gc(b);d.baseMapType===this.e&&d.set("baseMapType",d.NORMAL);
this.e=null;c.removeListener(g,this.Vb);b.removeObserver("baseMapType",this.th,this);b.availableBaseMapTypes.removeObserver(this.ub,this);b.removeObserver("zoomLevel",this.ub,this);b.removeListener("resizeend",this.ab);b.removeListener("transitionstart",this.qk);b.removeListener("transitionend",this.ub);this.set("conceal",!0);this.setAria("disabled",null,this.node);this._super(b);this.pk();this.dj=!1},th:function(b,c,d,a){this.dj?this.dj=!1:(a===b.SATELLITE||a===b.TERRAIN||a===b.COVERAGE||a===b.GLOBE)&&
d!==b.PANORAMA&&d!==b.GLOBE?(b=this.getAria("pressed",this.F)?!0:!1,c=this.km(),b&&c?this.mapDisplay.set("baseMapType",this.e):this.Mg(c)):d===this.e?(this.setAria("pressed",!0,this.F),this.Mg(!0)):d===b.TRAFFIC||d===b.SMART_PT||d===b.NORMAL?(this.setAria("pressed",!1,this.F),this.Mg(!0),this.Kk()):d===b.GLOBE||d===b.PANORAMA||this.Mg(!1)},ub:function(b){var c=this.mapDisplay,d=this.e,a=this.km();if(b&&b.type==="transitionend")this.Gp=!1;if(!this.Gp){if(!a&&this.getAria("pressed",this.F))this.dj=
!0;c.baseMapType===d&&!a&&c.setBaseMapType(c.NORMAL,"none");c.baseMapType==c.NORMAL&&a&&this.getAria("pressed",this.F)&&c.setBaseMapType(d,"none");this.Mg(a)}},km:function(){var b=this.mapDisplay,c=b.baseMapType;return b.availableBaseMapTypes.indexOf(this.e)>=0&&(c===b.NORMAL||c===b.SMART_PT||c===b.TRAFFIC)},Vb:function(){var b=this.mapDisplay,c=this.e;b.set("baseMapType",b.baseMapType===c?b.NORMAL:c)},Mg:function(b){var d=this.F,e=this.getAria("disabled",d);this.Kk();if(e!==!b)this.setAria("disabled",
!b,this.node),b?(d.addListener(g,this.Vb),this.sd(d),c||this.node.setAttribute("tabindex",0)):b===!1&&(d.removeListener(g,this.Vb),this.Ig(d),c||this.node.removeAttribute("tabindex")),this.enabled=b},Kk:function(){var b=this.km(),c=this.mapDisplay.baseMapType==this.e,d=this.gj;this.setCssActive(this.node,c);b?c?this.setGraphics(d,"active"):this.setGraphics(d,"normal"):this.setGraphics(d,"disable")},H:function(b){this.enabled&&!this.getAria("pressed",this.F)&&this._super(b)},I:function(b){this.enabled&&
this._super(b)},xh:function(b){this.enabled&&this._super(b)},Ab:function(b){b.nativeEvent.keyCode===13&&this.Vb()},ab:function(){var b=this.e,c=this.getRootNode().parentNode.parentNode,d=c.clientWidth/this.Me,b=b===this.mapDisplay.TRAFFIC?312:276;this.$o&&(c.clientHeight/this.Me<356?d<b?this.setAria("hidden",!0):this.setAria("hidden",!1):this.setAria("hidden",!1))},isCompatible:function(b){return this.$o=this._super(b)},onLanguageChange:function(){this.node.title=this.translateHtml("__i18n_ovi.service.map._t"+
(this.gj==="traffic"?"91":"86")+"__")}})})(nokia.maps);ovi.provide("nokia.maps.ui.nokia_generic.TrafficComponent");(function(e){var l=e.ui.nokia_generic,l=l.TrafficComponent=new ovi.Class({Extends:e.map.component.Traffic,Mixins:[l.PublicTransportAndTrafficMixin],initialize:function(e){this._super(e);this.gj="traffic";this.e=null},attach:function(e){this._super(e);this.e=e.TRAFFIC;this.rd()}});e.map.component.Traffic=l})(nokia.maps);ovi.provide("nokia.maps.ui.nokia_generic.PublicTransportComponent");
(function(e){var l=e.ui.nokia_generic;l.PublicTransportComponent=new ovi.Class({Extends:e.map.component.PublicTransport,Mixins:[l.PublicTransportAndTrafficMixin],initialize:function(e){this._super(e);this.gj="publicTransport";this.e=null},attach:function(e){this._super(e);this.e=e.SMART_PT;this.rd()}});e.map.component.PublicTransport=l.PublicTransportComponent})(nokia.maps);ovi.provide("nokia.maps.ui.nokia_generic.MapSelectorComponent");
(function(e){var l=e.ui.nokia_generic,h=e.util,d=e.dom,c=d.EventTarget,g=l.UIComponent,b=d.Page,f=h.Point,r=l.SpaceManager,a=ovi.dom.addClass,q=ovi.dom.removeClass,k=ovi.browser.msie&&ovi.browser.version<9?"innerText":"textContent",p=g.EVENT_CLICK,m=g.EVENT_BLUR,y=g.LAYOUT_VERTICAL,s=!!(b.browser.msie&&b.browser.version<9),v=ovi.Array.indexOf,u="DIV DD DT DL LI UL".split(" ");l.MapSelectorComponent=new ovi.Class({Extends:e.map.component.TypeSelector,Je:null,width:0,build:function(){this._super("nm_mapSelectorWrap");
var b=this.mapDisplay,d=ovi.bind,f=this.ma=this.node,g=this.fq=c(this.findElement("nm_menuItemMapType",this.node)),h=this.vs=c(this.findElement("nm_labelOpen nm_firstBG",this.node)),l=this.je=[{node:c(this.findElement("nm_normal",this.node)),type:b.NORMAL},{node:c(this.findElement("nm_satellite",this.node)),type:b.SATELLITE},{node:c(this.findElement("nm_terrain",this.node)),type:b.TERRAIN}],m=l.length;if(this.findElement("nm_globe"))l.push({node:c(this.findElement("nm_globe",this.node)),type:b.GLOBE}),
m=l.length;b.GLOBE&&e.map.render.globe?a(f.parentNode,"nm_has3D"):((b=this.findElement("nm_globe"))&&b.parentNode.removeChild(b),(b=this.findElement("nm_3DBG"))&&b.parentNode.removeChild(b),q(f.parentNode,"nm_has3D"));this.contract=d(this,this.contract);this.Ij=d(this,this.Ij);for(h.i18n={title:h.getAttribute("title")};m--;)f=l[m],f.onClick=d(this,this.oq,f),f.textNode=this.findElement("nm_secondBG",f.node),f.i18n=f.textNode.innerHTML;c(this.node).disableUserSelect();this.Vb=d(this,this.Vb);this.ab=
d(this,this.ab);d=this.findElement("nm_labelOpen",g);this.gq={node:d,i18n:d[k]};d=this.findElement("nm_labelClose",g);this.iu={node:d,i18n:d[k]};this.hide();this.onLanguageChange();this.ab();this.contract()},attach:function(a){this._super(a);var b=this.mapDisplay,c=this.je,d=c.length;this.fq.addListener(p,this.Vb);for(b.addObserver("baseMapType",this.Vn,this);d--;)c[d].node.addListener(p,c[d].onClick);this.Vn(a,"baseMapType",a.baseMapType);this.Je=r.getSpaceManager(a);this.qv();b.addListener("resizestart",
this.contract);b.addListener("resizeend",this.ab);this.show();this.set("conceal",!1);this.pk()},detach:function(a){var b=this.mapDisplay,c=this.ma,d=this.je,f=d.length;this.fq.removeListener(p,this.Vb);c.removeListener(m,this.contract);b.removeObserver("baseMapType",this.Vn,this);b.removeListener("resizestart",this.contract);for(b.removeListener("resizeend",this.ab);f--;)d[f].node.removeListener(p,d[f].onClick);this.Je.removeComponent(this.getId());this.hide();this._super(a);this.pk()},expand:function(){var b=
this.Je,d=this.node,f=d.parentNode,e=window.document;b&&b.setActiveState(this.getId(),"1");this.setAria("expanded",!0,d);this.setAria("expanded",!0,f);this.$e===y&&a(f,"nm_openVertSelector");e=c(e);e.addListener(p,this.Ij);this.triggerRedraw()},contract:function(){var a=this.Je,b=this.node,c=b.parentNode,d=window.document;a&&a.setActiveState(this.getId(),"0");this.setAria("expanded",!1,b);this.setAria("expanded",!1,c);this.$e===y&&q(c,"nm_openVertSelector");d.removeListener&&d.removeListener(p,this.Ij);
this.triggerRedraw()},Vn:function(a,b,c){a=this.je;for(b=a.length;b--;)a[b].type===c&&this.ir(a[b])},ir:function(a){var b=this.gq.node,c=this.ds;c&&this.setAria("checked",!1,c.node);this.ds=a;this.setAria("checked",!0,a.node);s?b[k]=a.textNode.innerHTML:b.firstChild[k]=a.textNode.innerHTML},Ij:function(a){d.contains(this.node,a.target)||(this.getAria("expanded",this.node)&&this.contract(),this.gf())},Ab:function(a){var b=a.target,c=a.nativeEvent.keyCode,d=this.$e,f=g.LAYOUT_HORIZONTAL,e=g.LAYOUT_VERTICAL,
k=this.je,h,l;if(b===this.ma)switch(c){case 40:k[0].node.focus();break;case 38:k[k.length-1].node.focus();break;case 37:k[0].node.focus();break;case 39:k[k.length-1].node.focus();break;case 13:this.getAria("expanded",this.node)?this.contract():this.expand();this.gf();break;case 9:this.gf()}else{for(l=h=this.je.length;l--;)if(k[l].node===b)break;switch(c){case 40:if(d===f)break;l+=1;l===h?k[0].node.focus():k[l].node.focus();break;case 38:if(d===f)break;l-=1;l<0?k[h-1].node.focus():k[l].node.focus();
break;case 37:if(d===e)break;l+=1;l===h?k[0].node.focus():k[l].node.focus();break;case 39:if(d===e)break;l-=1;l<0?k[h-1].node.focus():k[l].node.focus();break;case 13:this.oq(k[l],a);break;case 9:this.gf()}}},Vb:function(){this.getAria("expanded",this.node)?this.contract():this.expand();this.gf()},oq:function(a){this.mapDisplay.setBaseMapType(a.type,"default");this.ir(a)},onLanguageChange:function(){var a;a=this.vs;var b=this.gq,c=this.iu,d=this.je,f=d.length;a.title=this.translateHtml(a.i18n.title);
b.node.innerHTML=this.translateHtml(b.i18n);c.node.innerHTML=this.translateHtml(c.i18n);s?b.node[k]=this.translateHtml(b.i18n):b.node.firstChild[k]=this.translateHtml(b.i18n);for(c.node[k]=this.translateHtml(c.i18n);f--;)a=d[f].textNode,a.innerHTML=this.translateHtml(d[f].i18n);this.gf()},gf:s?function(){var a=this.node,b=a.parentNode,c=b.childNodes,d=0,f,e=a.childNodes,k=e.length,h;h=this.getAria("expanded",a);var a=this.$e===g.LAYOUT_VERTICAL,l=0;if(h){for(;k--;)f=e[k],v(u,f.nodeName)>0&&!this.getAria("hidden",
f)&&(h=f.currentStyle||window.getComputedStyle(f),f=f.offsetWidth-0,f+=h&&(h.marginLeft.slice(0,-2)-0)*10||0,f+=h&&(h.marginRight.slice(0,-2)-0)*10||0,a?d=l=f>l?f+3:l:(d+=f,d+=3));for(k=c.length;k--;)if(f=c[k],f.nodeName==="LI")e=f.offsetWidth,d+=e;b.style.width=d/10+"em"}else b.style.width="auto"}:h.A,qv:function(){var a=this.Je,b=this.ma,c=this.mapDisplay,d=ovi.dom.offset(b,c.da),e;a.registerSpace(this.getId(),"0",e=new f(d.left,d.top),e.add(new f(b.offsetWidth,b.offsetHeight)));this.expand();d=
ovi.dom.offset(b,c.da);a.registerSpace(this.getId(),"1",e=new f(d.left,d.top),e.add(new f(b.offsetWidth,b.offsetHeight)));this.contract()},layoutHorizontal:function(){this._super();this.ma&&ovi.dom.addClass(this.ma.parentNode,"nm_layout_horizontal")},layoutVertical:function(){this._super();this.ma&&ovi.dom.removeClass(this.ma.parentNode,"nm_layout_horizontal")},ab:function(){var a=this.getRootNode().parentNode.parentNode,c=a.clientHeight/this.Me,a=a.clientWidth/this.Me,d=this.je[2].node,f=b.platform.ipad||
b.platform.iphone,e=b.browser.fullVersion.replace(".","").substring(0,2),e=f&&e>=51;c<413?(this.layoutHorizontal(),a<368?this.setAria("hidden",!0,d):this.setAria("hidden",!1,d)):(!e&&f?this.layoutHorizontal():this.layoutVertical(),this.setAria("hidden",!1,d));this.triggerRedraw()}});e.map.component.TypeSelector=l.MapSelectorComponent})(nokia.maps);ovi.provide("nokia.maps.ui.nokia_generic.ContextMenuComponent");
(function(e){var l=nokia.maps.ui.nokia_generic,h=e.util,d=e.dom,c=d.EventTarget,g=l.UIComponent,b=e.map.component.ContextMenu,f=ovi.dom.addClass,d=e.dom;nokia.maps.ui.nokia_generic.ContextMenuComponent=new ovi.Class({Extends:b,Statics:{zoomHandler:b.zoomHandler,reverseGeocodingHandler:b.reverseGeocodingHandler,routingHandler:b.routingHandler,Group:b.Group},$m:32,Zm:32,build:function(){var b,a;this._super("nm_rcMenu");b=this.node.parentNode;a=this.node=c(this.node.cloneNode(!0));c(a.ownerDocument);
b.appendChild(a);this.Og=a.removeChild(this.findElement("nm_rcMenuItem"),a);this.ci=a.removeChild(this.findElement("nm_rcMenuSeparator"),a);this.bb=c(a.parentNode.appendChild(this.findElement("nm_rcMenuPin"),a));this.bb.addListener("contextmenu",function(a){a.preventDefault()});this.Ma=ovi.bind(this,this.Ma);this.hide=ovi.bind(this,this.hide)},Kn:function(b){var a=this,c=a.node,e=c.ownerDocument,h=a.Yg,l,y=h.length,s,v,u,x;d.ac(c);if((s=a.Yl)&&!b.target.isRoutingMarker&&!(b.target instanceof nokia.maps.map.Marker))u=
a.Og.cloneNode(!0),f(u,"nm_rcMenuItemHeader"),a.Pg(u,s,e,!0),c.appendChild(u),f(c.appendChild(a.ci.cloneNode(!0)),"seperator-header");for(;y--;){l=h[y];l=l.q;for(x=0;x<l.length;x++)v=l[x],u=a.Og.cloneNode(!0),!s&&y===h.length-1&&x===0&&f(u,"top"),b.target.isRoutingMarker&&b.target instanceof nokia.maps.map.Marker&&h.length===1&&l.length==1&&f(u,"top"),a.Pg(u,v,e),v.ig&&this.Mk(u,v),c.appendChild(u);y&&c.appendChild(a.ci.cloneNode(!0))}e.addListener(g.EVENT_DOWN,function(b){a.Yn(b.target)||a.Ma()},
!0);a.show();a.nh(b.displayX,b.displayY)},Pg:function(b,a,c,d){var f=a.Tc;switch(typeof a.Tc){case "string":b.appendChild(c.createTextNode(a.pi?this.translateHtml(f):f));break;case "function":a.Tc.call(this,b);break;default:h.Lv("ContextMenu.Group."+(d?"header":"entry")+" label must be either a string or a function")}},Mk:function(b,a){var d=this;c(b).addListener(g.EVENT_CLICK,function(b){d.Ma();a.ig.call(d,b)});f(b,"clickable")},Yn:function(b){for(var a=this.node,c;c=b.parentNode;){if(c==a)return!0;
b=b.parentNode}return!1},nh:function(b,a){var c=this.node,d=c.offsetWidth,f=c.offsetHeight,e=this.mapDisplay,g=e.width,e=e.height;this.bb.style.left=b-this.$m/2+"px";this.bb.style.top=a-this.Zm/2+"px";c.style.left=g-b<d?b-d+"px":b+"px";c.style.top=e-a<f?a-f+"px":a+"px"},Ma:function(){this.node.ownerDocument.removeListener("mousedown",this.Ma,!0);this.qg();this.Oc=setTimeout(this.hide,150)},hide:function(){this._super();this.Oc=!1;this.bb.style.display="none";this.triggerRedraw();this.set("hidden",
!0)},show:function(){this.qg();this._super();this.bb.style.display="";this.triggerRedraw();this.set("hidden",!1)},qg:function(){this.Oc&&clearTimeout(this.Oc);this.Oc=null}});e.map.component.ContextMenu=l.ContextMenuComponent})(nokia.maps);ovi.provide("nokia.maps.ui.nokia_generic.ZoomBarComponent");
(function(e){var l=e.ui.nokia_generic,h=e.dom.EventTarget,d=l.UIComponent,c=l.SpaceManager,g=e.util.Ia,b=ovi.bind,f=Math.floor,r=Math.ceil,a=d.EVENT_DOWN,q=d.EVENT_UP,k=d.EVENT_OUT;l.ZoomBarComponent=new ovi.Class({Extends:e.map.component.ZoomBar,build:function(){this._super("nm_zoomWrap");this.disableUserSelect();this.Iw=this.node;this.Vf=h(this.findElement("nm_zoomIn"),this.node);this.Yf=h(this.findElement("nm_zoomOut"),this.node);this.Uf=b(this,this.Uf);this.Xf=b(this,this.Xf);this.xc=b(this,this.xc);
this.hide();this.Hv();this.onLanguageChange()},attach:function(d){this._super(d);var f=this.Vf,e=b(f,f.addListener),g=this.Yf,h=b(g,g.addListener);b(d,d.addObserver);this.initGraphics(f,"default");this.initGraphics(g,"default");this.sd(f,g);e(a,this.Uf);e(q,this.xc);e(k,this.xc);h(a,this.Xf);h(q,this.xc);h(k,this.xc);this.Je=c.getSpaceManager(d);this.show();this.set("conceal",!1)},detach:function(b){var c=this.Vf,d=this.Yf;this._super(b);c.removeListener(a,this.Uf);c.removeListener(q,this.xc);d.removeListener(a,
this.Xf);d.removeListener(q,this.xc);this.Ig(c,d);this.Je.removeComponent(this.getId());this.hide();this.set("conceal",!0)},show:function(){this._super()},ng:function(a,b){var c=this.mapDisplay,d=(b?f:r)(a);c&&(d=g(d+(d===a)*(b?-1:1),c.minZoomLevel,c.maxZoomLevel),c.setZoomLevel(d,"default"))},vr:function(a,b){this.pc=window.setInterval(b?this.Xf:this.Uf,1E3,a)},xc:function(a){var b=this.pc;if(b)window.clearInterval(b),this.pc=null;this.Cu(a)},Uf:function(a){this.zq(a);this.ng(this.mapDisplay.zoomLevel);
this.pc||this.vr(a)},Xf:function(a){this.zq(a);this.ng(this.mapDisplay.zoomLevel,!0);this.pc||this.vr(a,!0)},Ab:function(a){var b=a.nativeEvent.keyCode;if(b===38||b===43||b===107)this.Uf(a),this.xc(a);else if(b===40||b===45||b===109)this.Xf(a),this.xc(a)},onLanguageChange:function(){this.Vf.title=this.translateHtml("__i18n_ovi.service.map._t41__");this.Yf.title=this.translateHtml("__i18n_ovi.service.map._t40__")}});e.map.component.ZoomBar=l.ZoomBarComponent})(nokia.maps);ovi.provide("nokia.maps.ui.nokia_generic.ZoomRectangleComponent");
(function(e){var l=e.ui,h=l.common,l=l.nokia_generic,d=e.dom.EventTarget,c=l.UIComponent.EVENT_CLICK,g=h.ColorSet,b=e.dom.Page.browser.mobile,f=new h.ColorScheme({normal:new g({stroke:"#333",fill:"#00BBDC"}),focus:new g({stroke:"#333",fill:"#333"}),active:new g({stroke:"#FFF",fill:"#FFF"})});l.ZoomRectangleComponent=new ovi.Class({Extends:e.map.component.ZoomRectangle,build:function(){this._super("nm_zoomRectWrap");this.F=d(this.node);this.qe=d(this.findElement("nm_zoomRectButton_icon_normal"));this.Kh=
d(this.findElement("nm_zoomRectButton_icon_pressed"));this.O=ovi.bind(this,this.O);this.hide();this.setAria("pressed","false",this.node)},attach:function(b){this._super(b);var b=this.F,a=this.qe,d=this.Kh;this.initGraphics(a,"default");this.initGraphics(d,f);this.sd(a,d);b.addListener(c,this.O);this.kc();this.set("conceal",!1)},detach:function(b){this._super(b);this.sd(this.qe,this.Kh);this.F.removeListener(c,this.O)},onLanguageChange:function(){this.kc()},O:function(){this.switchOnOff();this.na?
(this.na=!1,!b&&this.setAria("pressed","false",this.node)):(this.na=!0,!b&&this.setAria("pressed","true",this.node));this.kc()},kc:function(){this.node.title=this.translate("ovi.service.map._"+(this.na?"t96":"t95"))}});e.map.component.ZoomRectangle=l.ZoomRectangleComponent})(nokia.maps);ovi.provide("nokia.maps.positioning.component.Positioning");
(function(e){e.positioning.component.Positioning=new ovi.Class({Extends:e.ui.UIComponent,initialize:function(e){this._super(e);this.t=this.MAP_2D;this.responseHandler=ovi.bind(this,this.responseHandler);this.DEFAULT_SVG_MARKER_SRC='<svg xmlns="http://www.w3.org/2000/svg" width="34" version="1.1" height="34" baseProfile="tiny" xmlns:xlink="http://www.w3.org/1999/xlink" id="svg2"><path d="m 25.489083,17 c 0,4.688377 -3.800705,8.489083 -8.489083,8.489083 C 12.311621,25.489083 8.510917,21.688377 8.510917,17 c 0,-4.688377 3.800704,-8.489083 8.489083,-8.489083 c 4.688378,0 8.489083,3.800706 8.489083,8.489083 z" id="path3761" style="color:#000000;fill:#ffffff;fill-opacity:0.50196078;stroke:none;stroke-width:1.02183414;marker:none;visibility:visible;display:inline;overflow:visible;enable-background:accumulate" /><path d="m 25.489083,17 c 0,4.688377 -3.800705,8.489083 -8.489083,8.489083 C 12.311621,25.489083 8.5109169,21.688377 8.5109169,17 C 8.5109169,12.311623 12.311621,8.510917 17,8.510917 c 4.688378,0 8.489083,3.800706 8.489083,8.489083 z" id="path5230" style="color:#000000;fill:none;stroke:#00bbdc;stroke-width:1.02183414;stroke-linecap:butt;stroke-miterlimit:4;stroke-opacity:1;stroke-dasharray:none;stroke-dashoffset:0;marker:none;visibility:visible;display:inline;overflow:visible;enable-background:accumulate" /><path d="m 22,17 c 0,2.761417 -2.238583,5 -5,5 c -2.761417,0 -5,-2.238583 -5,-5 c 0,-2.761417 2.238583,-5 5,-5 c 2.761417,0 5,2.238583 5,5 z" id="path3218" style="color:#000000;fill:#00bbdc;fill-opacity:1;fill-rule:nonzero;stroke:none;stroke-width:1;marker:none;visibility:visible;display:inline;overflow:visible;enable-background:accumulate" /></svg>'},
c:"Positioning",o:"0.0.0.1",accuracyCircle:null,build:function(e){e&&this._super(e)},removeCircle:function(){this.accuracyCircle&&this.mapDisplay.objects.remove(this.accuracyCircle);this.accuracyCircle=null;this.positionMarker&&this.mapDisplay.objects.remove(this.positionMarker);this.positionMarker=null},detach:function(e){this.removeCircle();this._super(e)},requestPosition:function(l,h){var d=this,c;e.positioning.Manager&&(c=new e.positioning.Manager,c.getCurrentPosition(function(c){d.responseHandler(c);
l(c)},h))},responseHandler:function(l){var h=l.coords,l=new e.map.Circle(h,h.accuracy,this.Lo||{}),d=new e.gfx.SvgParser,d=new e.gfx.GraphicsImage(d.parseSvg(this.DEFAULT_SVG_MARKER_SRC)),h=new e.map.Marker(h,{icon:d,anchor:[d.width/2,d.height/2]});this.removeCircle();this.showPosition(l,h);this.accuracyCircle=l;this.positionMarker=h},showPosition:function(e,h){this.mapDisplay.objects.addAll([e,h]);this.mapDisplay.zoomTo(e.getBoundingBox(),!1)}})})(nokia.maps);ovi.provide("nokia.maps.ui.common.InfoBubbleComponent");
(function(e){var l=e.ui.common,h=e.util,d=e.geo.Coordinate,c=e.ui.common.Bubble,g=h.d,b=e.dom.findElement,f=new nokia.maps.ui.common.ColorSet({background:"#000F1A",text:"#FFFFFF",border:"#000F1A",fill:"#000F1A",stroke:"#000F1A"}),r={backgroundColor:"fill",color:"text"},a=l.InfoBubbleComponent=new ovi.Class({Extends:e.map.component.InfoBubbles,Statics:{createTails:function(a,c,d){var f={};e.dom.cj(b(d+"bubble_tail",a),function(a,b){var d=new e.ui.common.GfxTemplate(b,c);f.rightbelow=(new e.gfx.GraphicsImage(d.stencil(1,
0,0))).createElement();f.rightabove=(new e.gfx.GraphicsImage(d.stencil(1,0,2))).createElement();f.leftbelow=(new e.gfx.GraphicsImage(d.stencil(1,0,1))).createElement();f.leftabove=(new e.gfx.GraphicsImage(d.stencil(1,0,3))).createElement()});return f}},initialize:function(a){this.S=a.cssPrefix||"nm_";this.Ka=a.colorSet||f;this._super();this.hg={};this.openBubbleHandles=new nokia.maps.util.OList},$l:0,isCloning:!0,build:function(){this._super(this.S+"infoBubble");this.al=this.findElement(this.S+"bubble_bg",
this.node);this.Ec=ovi.bind(this,this.Ec);this.options.addObserver("backgroundColor",this.Ec);this.options.addObserver("color",this.Ec);this.options.backgroundColor=this.Ka.fill;this.options.color=this.Ka.text;this.cg()},cg:function(){this.al.style.backgroundColor=this.Ka.fill||"";this.node.style.color=this.Ka.text||"";this.qb=a.createTails(this.node,this.Ka,this.S)},Ec:function(a,b,c){a=r[b];c?this.Ka[a]=c:delete this.Ka[a];this.cg()},detach:function(a){this.closeAll();this._super(a)},openBubble:function(a,
b,c,f){(b=d.fromObject(b))||g("Not a valid coordinate");a||g("No content specified");c=this.initBubble(c,f);c.update(a,b);c.open();return c},initBubble:function(a,b){var d=this,f=d.options,f=new c({id:d.$l++,node:e.dom.cloneNode(d.node,!0),Ra:!1,Cm:function(){d.openBubbleHandles.remove(this)},Im:function(){d.options.autoClose&&d.closeAll();d.openBubbleHandles.add(this)},Wg:function(){return d.mapDisplay},Mm:a||nokia.maps.util.A,qb:d.ml(),Zd:b,S:d.S,defaultWidth:f.defaultWidth,defaultHeight:f.defaultHeight,
xAlignment:f.defaultXAlignment,yAlignment:f.defaultYAlignment});d.hg[f.id]=f;d.mapDisplay.ib.appendChild(f.node);return f},closeAll:function(){for(var a=this.openBubbleHandles.getLength();a--;)this.openBubbleHandles.get(a).close()},ml:function(){var a=nokia.maps.dom.cloneNode;return{rightbelow:a(this.qb.rightbelow,1),rightabove:a(this.qb.rightabove,1),leftbelow:a(this.qb.leftbelow,1),leftabove:a(this.qb.leftabove,1)}},kt:h.A,lt:h.A,show:h.A,hide:h.A,oh:function(){var a,b=this.hg;for(a in b)b[a].jc()}})})(nokia.maps);
ovi.provide("nokia.maps.map.component.ScaleBar");
(function(e){e.map.component.ScaleBar=new ovi.Class({Extends:e.ui.UIComponent,c:"ScaleBar",o:"0.0.0.1",initialize:function(e){this._super(e);this.t=this.MAP_2D},attach:function(e){this._super(e);this.updateScale&&this.mapDisplay.addObserver("zoomLevel",this.updateScale,this).addObserver("center",this.updateScale,this).addObserver("copyrightWidth",this.updateScale,this)},detach:function(e){this.updateScale&&this.mapDisplay.removeObserver("zoomLevel",this.updateScale,this).removeObserver("center",this.updateScale,
this).removeObserver("copyrightWidth",this.updateScale,this);this._super(e)},showImperialUnits:!1,showImperialUnitsSetter:function(e){this.switchUnit(e);return e},calculateMPP:function(){var e=this.mapDisplay,h=e.center,d=e.geoToPixel(h),c=0;h.latitude==90&&(c=1);h.longitude==-90&&(c=-1);return e.pixelToGeo(d.x-1,d.y+c).distance(e.pixelToGeo(d.x+1,d.y+c))/2}})})(nokia.maps);ovi.provide("nokia.maps.ui.nokia_generic.PositioningComponent");
(function(e){var l=e.ui.common,h=e.ui.nokia_generic,d=e.dom.EventTarget,c=h.UIComponent.EVENT_CLICK,g=l.ColorSet,l=l.ColorScheme,b=new l({normal:new g({stroke:"#333",fill:"#333"}),disable:new g({stroke:"#D6D6D6",fill:"#D6D6D6"}),focus:new g({stroke:"#333",fill:"#00BBDC"}),active:new g({stroke:"#FFF",fill:"#FFF"})}),f=new l({normal:new g({stroke:"#333",fill:"#00BBDC"}),focus:new g({stroke:"#333",fill:"#333"}),active:new g({stroke:"#FFF",fill:"#FFF"})}),r=new l({normal:new g({stroke:"#0099BB",fill:"#0099BB"}),
focus:new g({stroke:"#333",fill:"#333"}),active:new g({stroke:"#333",fill:"#333"})});h.PositioningComponent=new ovi.Class({Extends:e.positioning.component.Positioning,build:function(){this._super("nm_positioningWrap");this.ma=d(this.node);this.dl=d(this.findElement("nm_pos_icon_normal"),this.ma);this.fl=d(this.findElement("nm_pos_icon_pressed"),this.ma);this.cl=d(this.findElement("nm_pos_icon_busy"),this.ma);this.Ch=ovi.bind(this,this.Ch);this.dm(this.node,void 0,void 0,!0);this.onLanguageChange()},
attach:function(a){this._super(a);a=this.ma;this.initGraphics(this.dl,b);this.initGraphics(this.fl,f);this.initGraphics(this.cl,r);e.positioning.Manager?(a.addListener(c,this.Ch),this.sd(this.dl,this.fl,this.cl)):(this.setAria("disabled",!0,a),this.setGraphics("positioning_normal","disable"));this.set("conceal",!1)},detach:function(a){nokia.maps.positioning.Manager&&this.ma.removeListener(c,this.Ch);this.Ig(this.dl,this.fl,this.cl);this._super(a)},Ch:function(){var a=this,b=a.ma;a.getAria("pressed",
b)?(a.removeCircle(),a.setAria("pressed",!1,b)):(a.setAria("pressed",!0,b),a.setAria("busy",!0,b),a.Lo={pen:{strokeColor:"#00BBDC",lineWidth:2},brush:{color:"#FFFFFF99"}},a.requestPosition(function(){a.setAria("busy",!1,b)},function(){setTimeout(function(){a.setAria("pressed",!1,b);a.setAria("busy",!1,b)},8E3)}))},Ab:function(a){!this.getAria("disabled",this.node)&&a.nativeEvent.keyCode===13&&this.Ch()},onLanguageChange:function(){this.node.title=this.translateHtml("__i18n_ovi.service.map._t72__")}});
e.positioning.component.Positioning=h.PositioningComponent})(nokia.maps);ovi.provide("nokia.maps.ui.nokia_generic.InfoBubbleComponent");(function(e){var l=e.ui.nokia_generic,h=new nokia.maps.ui.common.ColorSet({background:"#000F1A",text:"#FFF",border:"#000F1A",fill:"#000F1A",stroke:"#000F1A"});l.InfoBubbleComponent=new ovi.Class({Extends:e.ui.common.InfoBubbleComponent,initialize:function(){this._super({colorSet:h,cssPrefix:"nm_"})}});e.map.component.InfoBubbles=l.InfoBubbleComponent})(nokia.maps);
ovi.provide("nokia.maps.ui.nokia_generic.ScaleBarComponent");
(function(e){var l=e.ui.common,h=e.ui.nokia_generic,d=e.gfx,c=e.dom.EventTarget,g=h.UIComponent,b=g.EVENT_CLICK,f=g.EVENT_OVER,r=g.EVENT_OUT,a=g.EVENT_FOCUS,q=g.EVENT_BLUR,k=g.CSS_GFX,p=100,m=Math,y=m.floor,s=d.GraphicsImage,v=d.Color.parseCss,d=l.ColorSet,u=new l.ColorScheme({normal:new d({stroke:"#DDD",fill:"#000"}),focus:new d({stroke:"#FFF",fill:"#0bd"})}),x=h.ScaleBarComponent=new ovi.Class({Extends:e.map.component.ScaleBar,Statics:{Hk:0.3048006,Zf:1609.344},build:function(){var a=ovi.bind;this._super("nm_scalebarWrap");
this.ma=this.node;this.Kl=this.yc=c(this.findElement("nm_scaleBarExpandableElement"));this.Oe=this.findElement("nm_scalebarUnitinfo");this.Cr=this.findElement("nm_scalebarTextTester");this.Nr=this.Oe.innerHTML;this.Cr.style.font="bold 10px Arial";this.Pe=a(this,this.xk);this.tb=a(this,this.tb);this.sb=a(this,this.sb);this.la=a(this,this.la);this.Dg=u.normal;this.ai=null;this.pj=!1;this.onLanguageChange()},attach:function(c){this._super(c);c=this.yc;this.mapDisplay.addListener("mapviewchangeend",this.la);
c.addListener(b,this.Pe);c.addListener(f,this.tb);c.addListener(r,this.sb);c.addListener(a,this.tb);c.addListener(q,this.sb);this.show();this.la();this.hb=!0;this.set("conceal",!1)},detach:function(c){var d=this.yc;this.mapDisplay.removeListener("mapviewchangeend",this.la);d.removeListener(b,this.Pe);d.removeListener(f,this.tb);d.removeListener(r,this.sb);d.removeListener(a,this.tb);d.removeListener(q,this.sb);this.Uq();this.ai=null;this._super(c);this.hide();this.set("conceal",!0)},show:function(){this._super()},
I:function(){this.setCursorPointer();this.Dg=u.focus;this.la()},H:function(){this.setCursorDefault();this.Dg=u.normal;this.la()},Ab:function(a){a.nativeEvent.keyCode===13&&this.xk(a)},xk:function(a){a&&(a.preventDefault(),a.stopPropagation());this.Dg=u.normal;this.set("showImperialUnits",!this.xa)},switchUnit:function(a){this.xa=a;this.hb&&(a?(ovi.dom.removeClass(this.yc,"nm_metric"),ovi.dom.addClass(this.yc,"nm_imperial")):(ovi.dom.removeClass(this.yc,"nm_imperial"),ovi.dom.addClass(this.yc,"nm_metric")),
this.la())},tb:function(a){if(!this.pj){if(this.isMouseover(a))this.I(),this.Kl.title=this.translate("ovi.service.map._"+(this.xa?"t30":"t29"));this.pj=!0}},sb:function(a){if(this.pj)this.isMouseout(a)&&this.H(),this.pj=!1},la:function(){if(this.enabled){var a=this.calculateMPP();if(this.Zs!=a)this.Ys=a,this.calculateDistance(a),this.rt(y(this.$h/this.vl*p),this.$h)}},rt:function(a,b){function c(a,b){a.beginPath();a.moveTo(2,8);a.lineTo(2,16);a.lineTo(b-2,16);a.lineTo(b-2,8);a.lineTo(b-4,8);a.lineTo(b-
4,14);a.lineTo(4,14);a.lineTo(4,8);a.lineTo(2,8);a.closePath();return a}var d=this,f=b+" "+d.xl,e=new s(function(b){var e=a+4+2,g=e+2,k=d.Cr,h=0;k.innerHTML=f;h=g-k.offsetWidth-4-2-2;b.beginImage(g,20,"ScaleBar");d.ma.style.width=g+"px";d.ma.style.height="20px";b.set("strokeColor",v(d.Dg.stroke));b.set("fillColor",v(d.Dg.fill));b.set("lineWidth",2.5);b.set("lineJoin","round");b.set("font","bold 10px Arial");b.strokeText(f,h+0.5,10);b.fillText(f,h,10);b.set("lineWidth",4);b=c(b,e);b.stroke();b.set("lineWidth",
0);b=c(b,e);b.fill()});d.Uq();d.ai=e.createElement();d.mv=e;d.ai.className=k;d.Kl.style.cssText="-webkit-touch-callout: none; -webkit-user-select: none; -khtml-user-select: none; -moz-user-select: none; -ms-user-select: none; user-select: none;";d.Kl.appendChild(d.ai)},Uq:function(){var a=this.ai;a&&a.parentNode&&a.parentNode.removeChild(a)},calculateDistance:function(a){a*=p;var b;this.xa?a<x.Zf?(a/=x.Hk,b=this.translate("ovi.service.map._t23")):(a/=x.Zf,b=this.translate("ovi.service.map._t24")):
a<1E3?b=this.translate("ovi.service.map._t25"):(a/=1E3,b=this.translate("ovi.service.map._t26"));this.xl=b;this.vl=a;b=m.pow(10,y(m.log(a)/m.LN10));a>=5*b?b*=5:a>=2*b&&(b*=2);this.$h=b},onLanguageChange:function(){p=e.util.getRootNameSpace("nokia.maps").Language.language.iso639_1=="zh"?140:100;this.la()},capture:function(a){var b=this.mv,c=b.width,d=b.height;a.drawGraphics(new e.gfx.Graphics(b.getIDL()),0,0,c,d,a.getWidth()-c,a.getHeight()-d,c,d)}});e.map.component.ScaleBar=h.ScaleBarComponent})(nokia.maps);
ovi.provide("nokia.maps.map.component.DistanceMeasurement");
(function(e){var l=e.dom.Page,h=l.browser.touch,d=h?"touch":"mouse",c=h?"tap":"click",g=h?"dbltap":"dblclick",b=d+"enter",f=d+"leave",r=new ovi.Class({Extends:e.map.Marker,initialize:function(a,b){b=b||{};b.draggable=!0;this._super(a,b)}});e.map.component.DistanceMeasurement=new ovi.Class({Extends:e.map.component.Component,initialize:function(a){this._super(a);this.clickListener=ovi.bind(this,this.clickListener);this.dragListener=ovi.bind(this,this.dragListener);this.dragStartListener=ovi.bind(this,
this.dragStartListener);this.enterListener=ovi.bind(this,this.enterListener);this.leaveListener=ovi.bind(this,this.leaveListener);this.dblClickListener=ovi.bind(this,this.dblClickListener);this.container=new e.map.Container},c:"DistanceMeasurement",o:"0.0.0.1",container:null,coordinates:new ovi.Array,markers:new ovi.Array,lines:new ovi.Array,labels:void 0,hovered:!1,hb:!1,Ud:0,startMarkerOptions:{},middleMarkerOptions:{},endMarkerOptions:{},normalPen:{strokeColor:"#C22A",lineWidth:6},hoverPen:{strokeColor:"#614A",
lineWidth:8},textLabelOnFirstMarker:!0,attach:function(a){this._super(a)},rd:function(){var a=this.mapDisplay;if(!this.hb)a.addListener(c,this.clickListener),a.addListener("drag",this.dragListener),a.addListener("dragend",this.dragListener,!0),a.addListener("dragstart",this.dragStartListener,!0),a.addListener(b,this.enterListener),a.addListener(f,this.leaveListener),a.addListener(g,this.dblClickListener),this.hb=!0},detach:function(a){this.disable();this.Gc();this._super(a)},Gc:function(){var a=this.mapDisplay;
if(this.hb)a.removeListener(c,this.clickListener),a.removeListener("drag",this.dragListener),a.removeListener("dragend",this.dragListener,!0),a.removeListener("dragstart",this.dragStartListener,!0),a.removeListener(b,this.enterListener),a.removeListener(f,this.leaveListener),a.removeListener(g,this.dblClickListener),this.hb=!1},enable:function(){this.mapDisplay&&(this.mapDisplay.objects.add(this.container),this.rd())},disable:function(){if(this.mapDisplay)this.Gc(),this.mapDisplay.objects.remove(this.container),
this.container.objects.clear(),this.coordinates.length=0,this.markers.length=0,this.lines.length=0,this.labels=void 0,this.hovered=!1,this.updateMap()},addCoordinate:function(a){var b=this.coordinates,c=this.markers,d=this.container.objects,f=b.length,e;b.push(a);f>1&&(e=c.pop(),d.remove(e),e=this.createMarker(c.length,c.length+1,e.coordinate),c.push(e),d.add(e));marker=this.createMarker(c.length,f,a);this.markers.push(marker);this.container.objects.add(marker);f>=1&&this.addLine(b[f-1],b[f]);this.hovered=
!0;this.showLabels()},addLine:function(a,b){var c=this.createLine(a,b);this.lines.push(c);this.container.objects.add(c)},createLine:function(a,b){var c=new e.map.Polyline([a,b],{pen:this.normalPen});c.enableDrag();return c},clickListener:function(a){if(!(a.type=="click"&&a.button!==0)){var b=a.target,c=this.lines.indexOf(b),d=this.markers.indexOf(b),f=this.labels?this.labels.indexOf(b):-1,e=this.mapDisplay.pixelToGeo(a.displayX,a.displayY);if(f<0)if(c<0)if(d<0)this.addCoordinate(e),this.hideLabels(),
this.showLabels();else{if(l.platform.mac?a.metaKey:a.ctrlKey)this.hideLabels(),this.removeMarker(b,d),--this.Ud}else b.set("pen",this.normalPen),this.splitLine(b,e,c);this.updateMap()}},dblClickListener:function(){},removeMarker:function(a,b){var c=this.lines,d,f=this.container.objects,e=this.markers.length,g=b===e-1;b>0&&!g&&c[b-1].path.set(1,this.coordinates[b+1]);f.remove(a);f.remove(c[b]);this.coordinates.splice(b,1);this.markers.splice(b,1);c.splice(b,1);if(b===0&&(d=this.markers.shift()))f.remove(d),
d=this.createMarker(b,e,d.coordinate),this.markers.unshift(d),f.add(d);g&&b>1&&(d=this.markers.pop(),f.remove(d),d=this.createMarker(e,e,d.coordinate),this.markers.push(d),f.add(d));g&&this.container.objects.remove(c.pop());this.updateMap()},splitLine:function(a,b,c){var d;this.coordinates.splice(c+1,0,b);d=this.createMarker(c+1,this.markers.length,b);this.markers.splice(c+1,0,d);this.container.objects.add(d);d=a.path.get(1);a.path.set(1,b);a=this.createLine(b,d);this.lines.splice(c+1,0,a);this.container.objects.add(a)},
createMarker:function(a,b,c){b=a>=b;return a===0?new r(c,this.startMarkerOptions):b?new r(c,this.endMarkerOptions):new r(c,this.middleMarkerOptions)},dragListener:function(a){var b=a.target,c,d=this.markers.indexOf(b),f=this.lines;d<0||(c=this.getEventCoordinate(a),this.coordinates[d]=c,b.set("coordinate",c),d>0&&f[d-1].path.set(1,c),d<f.length&&f[d].path.set(0,c),this.isOwnElement(a.target)&&(this.hideLabels(),this.showLabels()),this.updateMap())},dragStartListener:function(a){var b=a.target,c=this.lines,
d=this.normalPen,f=this.lines.indexOf(b);if(f>-1)this.clickListener(a),a.preventDefault(),b.set("pen",d);else if((f=this.markers.indexOf(b))>-1)a.dataTransfer.lift=!1,c[f-1]&&c[f-1].set("pen",d),c[f]&&c[f].set("pen",d)},updateMap:function(){this.mapDisplay.update(0)},getEventCoordinate:function(a){var b=a.target.anchor,c=a.dataTransfer.getData("application/map-drag-object-offset");return this.mapDisplay.pixelToGeo(a.displayX-c.x+b.x,a.displayY-c.y+b.y)},enterListener:function(a){var b=a.target,c=
this.lines.indexOf(b);if(this.isOwnElement(a.target))this.Ud++,this.hovered=!0,this.showLabels();c<0||(b.set("pen",this.hoverPen),this.updateMap())},leaveListener:function(a){var b=this,c=a.target,d=b.lines.indexOf(c);if(b.isOwnElement(a.target)&&!--b.Ud)b.hovered=!1,setTimeout(function(){b.hovered||b.hideLabels()},200);d<0||(c.set("pen",b.normalPen),b.updateMap())},getDistance:function(a){var b=0,c=this.coordinates,a=a===void 0?c.length-1:a;ovi.each(c,function(d,f){f===0||f>a||(b+=d.distance(c[f-
1]))});return this.formatLength(b)},getSegmentDistance:function(a){if(a=this.lines[a])return this.formatLength(a.path.get(0).distance(a.path.get(1)))},isOwnElement:function(a){return a.s==this.container},formatLength:function(a){return a},showLabels:function(){var a=this;if(!(a.labels||a.lines.length===0))a.labels=new ovi.Array,a.markers.map(function(b,c){(a.textLabelOnFirstMarker||c>0)&&a.labels.push(a.createLabel(b.coordinate,a.getDistance(c),!1))}),a.lines.map(function(b,c){a.labels.push(a.createLabel(b.getBoundingBox().getCenter(),
a.getSegmentDistance(c),!0))}),a.container.objects.addAll(a.labels),a.updateMap()},hideLabels:function(){var a=this;if(a.labels)a.labels.map(function(b){a.container.objects.remove(b)}),a.labels=void 0,a.updateMap()},createLabel:function(a,b,c){var d=(b+"").length*9,f={x:-11,y:8};c&&(f={x:d*0.4,y:8});return new e.map.Marker(a,{icon:new e.gfx.GraphicsImage(function(a){a.beginImage(d,15);a.set("font","12px sans-serif");a.set("strokeColor",e.gfx.Color.parseCss("white"));a.set("lineWidth",4);a.strokeText(b,
2,12);a.fillText(b,2,12)}),anchor:f,zIndex:100,width:d,height:15})}})})(nokia.maps);ovi.provide("nokia.maps.ui.nokia_generic.DistanceMeasurement");
(function(e){var l=e.ui.common,h=e.ui.nokia_generic,d=e.map.component.DistanceMeasurement,c=e.dom.EventTarget,g=h.UIComponent,b=g.EVENT_CLICK,f=e.dom.Page.browser.mobile,r={icon:new e.gfx.GraphicsImage(function(a){a.beginImage(22,22);a.set("fillColor","#661144");a.drawEllipse(0,0,22,22);a.fill();a.set("fillColor","#ffffff");a.drawEllipse(5,5,12,12);a.fill()}),anchor:new nokia.maps.util.Point(11,11)},e=l.ColorSet,a=new l.ColorScheme({normal:new e({stroke:"#333",fill:"#00BBDC"}),focus:new e({stroke:"#333",
fill:"#333"}),active:new e({stroke:"#FFF",fill:"#FFF"})}),q={"2d":"MAP_2D","3d":"GLOBE",panorama:"PANORAMA"};h.DistanceMeasurement=new ovi.Class({Extends:g,initialize:function(a){this._super(a);a=a||{};a.startMarkerOptions=r;a.middleMarkerOptions=r;a.endMarkerOptions=r;a.normalPen=a.normalPen||{};a.normalPen.strokeColor="614A";a.normalPen.lineWidth=6;a.hoverPen=a.hoverPen||{};a.hoverPen.strokeColor="614F";a.hoverPen.lineWidth=8;a.textLabelOnFirstMarker=!1;this.va=new d(a);this.va.formatLength=ovi.bind(this,
this.Ql);this.c=this.va.c;this.o=this.va.o;this.t=this.MAP_2D},va:null,na:!1,xa:!1,build:function(){this._super("nm_rulerWrap");this.F=c(this.node);this.qe=c(this.findElement("nm_rulerButton_icon_normal"));this.Kh=c(this.findElement("nm_rulerButton_icon_pressed"));this.O=ovi.bind(this,this.O);this.hide();this.setAria("pressed","false",this.node);this.onLanguageChange()},attach:function(c){this._super(c);var d=this.F,f=c.getComponentById("ScaleBar"),e=this.qe,g=this.Kh;this.initGraphics(e,"default");
this.initGraphics(g,a);this.sd(e,g);d.addListener(b,this.O);this.va.attach(c);if(f)this.xa=f.showImperialUnit,this.fd(f,1);c.components.addObserver(this.ud,this);this.set("conceal",0)},detach:function(a){var c=this.F,d=a.getComponentById("ScaleBar");this.sd(this.qe,this.Kh);c.removeListener(b,this.O);this._super(a);this.va.detach(a);d&&this.fd(d,0);a.components.removeObserver(this.ud,this);this.set("conceal",0)},ud:function(a,b,c){c.getId()==="ScaleBar"&&(b=="add"?this.fd(c,1):this.fd(c,0))},fd:function(a,
b){a[(b?"add":"remove")+"Observer"]("showImperialUnits",this.jl,this)},jl:function(a,b,c){if(b=="showImperialUnits")this.xa=c},O:function(){var a=this.va;this.na?(a.disable(),this.na=0,f||this.setAria("pressed","false",this.node)):(a.enable(),this.na=1,f||this.setAria("pressed","true",this.node));this.kc()},hide:function(){var a=this.va;this._super();a.disable();this.na=0;this.setAria("pressed","false",this.node)},Ab:function(a){a.nativeEvent.keyCode===13&&this.O()},Ql:function(a){var b=0;this.xa?
a<1609.344?(a/=0.3048006,unitStr=this.translate("ovi.service.map._t23"),b=1):(a/=1609.344,unitStr=this.translate("ovi.service.map._t24")):a<1E3?(unitStr=this.translate("ovi.service.map._t25"),b=1):(a/=1E3,unitStr=this.translate("ovi.service.map._t26"));a=Math.round(a*10)/10;b&&(a=Math.round(a));a+=" "+unitStr;return a},kc:function(){this.node.title=this.translate("ovi.service.map._"+(this.na?"t93":"t92"))},onLanguageChange:function(){this.kc()},MAP_2D:1,PANORAMA:2,GLOBE:4,t:0,isCompatible:function(a){return this.t&
this[q[a]]}});nokia.maps.map.component.DistanceMeasurement=nokia.maps.ui.nokia_generic.DistanceMeasurement})(nokia.maps);ovi.provide("nokia.maps.ui._packaging.package-nokia_generic");})();
(function(){ovi.provide("nokia.maps.positioning.Manager");(function(e){var l=e.positioning.Manager=new ovi.Class({Extends:e.util.OObject,initialize:function(e){e=e||{};if(this.constructor===l)return new l.bf(e)},Statics:{setDefImpl:function(e){return this.bf?!0:(this.bf=e)&&!1}}})})(nokia.maps);ovi.provide("nokia.maps.positioning.w3c.Manager");
(function(e){var l,h=nokia.maps.util.d,d=e.w3c.Manager=new ovi.Class({Extends:e.Manager,initialize:function(){(!navigator||!("geolocation"in navigator)||!navigator.geolocation.getCurrentPosition)&&h("w3c positioning is not available in the environment");l=navigator.geolocation;this._super()},getCurrentPosition:function(c,d,b){l.getCurrentPosition(c,d,b)},watchPosition:function(c,d,b){return l.watchPosition(c,d,b)},clearWatch:function(c){l.clearWatch(c)}});e.Manager.setDefImpl(d)})(nokia.maps.positioning);
ovi.provide("nokia.maps.positioning._packaging.package-w3c");(function(e){var l=e.positioning;l.component=l.component||{};l.component.Positioning=l.component.Positioning||function(){ovi.warn("There is no UI defined for the display. Are you missing the UI package?");var h=new e.map.component.Component;h.c="PositioningDummy";h.o="0";return h}})(nokia.maps);})();
(function(){ovi.provide("nokia.maps.util.ColorHelper");
(function(e){function l(a){var b;if(a.charAt(0)==="#")b=f[a.length]?a:null;else if(a.substr(0,3)==="rgb"){b=a.match(/\d+(\.\d+)?/g);var c=b.length;b=c>2&&c<5?["#",d(+b[0]),d(+b[1]),d(+b[2]),c>3?d(+b[3]*255):"ff"].join(""):null}b||e.d("Invalid color definition: "+a);return b}function h(a){return!/^(#|rgb).*/.test(a)}function d(a){return a<16?"0"+g(a).toString(16):g(a).toString(16)}function c(a){a=b(a,16);return(a<<4)+a}var g=Math.round,b=parseInt,f={4:function(a){return["#",a.charAt(1),a.charAt(1),
a.charAt(2),a.charAt(2),a.charAt(3),a.charAt(3),"ff"].join("")},5:function(a){return["#",a.charAt(1),a.charAt(1),a.charAt(2),a.charAt(2),a.charAt(3),a.charAt(3),a.charAt(4),a.charAt(4)].join("")},7:function(a){return a+"ff"},9:function(a){return a}},r={4:function(a){return[c(a.charAt(1)),c(a.charAt(2)),c(a.charAt(3)),255]},5:function(a){return[c(a.charAt(1)),c(a.charAt(2)),c(a.charAt(3)),c(a.charAt(4))]},7:function(a){a=b(a.substring(1),16);return[a>>16&255,a>>8&255,a&255,255]},9:function(a){a=b(a.substring(1),
16);return[a>>24&255,a>>16&255,a>>8&255,a&255]}};e.ColorHelper={toInternal:function(a){return h(a)?a:(a=l(a),f[a.length]?f[a.length](a):a)},toRGBA:function(a,b){return h(a)?[0,0,0,255]:(b||(a=l(a)),r[a.length](a))},getHex3:function(a,b){return h(a)?a:(b||(a=l(a),a=f[a.length]?f[a.length](a):a),a.substr(0,7))},getAlpha:function(a,c){return h(a)?1:(c||(a=l(a),a=f[a.length]?f[a.length](a):a),b(a.substr(7,2),16)/255)},toRandomRGBA:function(a,b){if(h(a))return"000000ff";else{for(var a=this.toRGBA(a,b),
c=0;c<4;c++)a[c]=""+d(c<3?Math.floor(Math.random()*(a[c]-0+1))+0:a[c]);return a.join("")}}}})(nokia.maps.util);ovi.provide("nokia.maps.util.Cache");
(function(e){function l(a,b,c,f){this.c=a;this.G=b;if(this.f!==f)this.f=f;if(c)(c.X=this).V=c}function h(a,c){b.G=a;b.f=c===void 0?1:c;return b}function d(a){return a===void 0?1:isNaN(a=+a)||a<0||a===r?e.d():a}var c={},g={},b={},f={},r=1/0;e.Cache=new ovi.Class({initialize:function(a,b,c,f){this.Sb=d(a);if(b)this.Ld=b;if(c)this.se=c;if(f)this.W=f;this.q={}},Statics:{DONT:c,NEXT:g,NOT_ENOUGH_SPACE:f,change:h},f:0,change:h,add:function(a,e,k){var p=this.Ld,m=this.W,h=this.q,r=h[a],v;if(p){if((p=p(e))===
g)return r&&this.remove(a,1),m?m.add(a,e,k):g;if(p===c)return r&&this.remove(a),c;p===b?(e=p.G,k=p.f):e=p}if((k=d(k))>this.Sb)return m?m.add(a,e,k):f;if(r)this.f+=k-r.f,r.G=e,r.f=k,this.Tb(r);else{r=h[a]=this.U=new l(a,e,this.U,k);if(!this.fa)this.fa=r;this.f+=k}for(;this.f>this.Sb;)this.Y((v=this.fa).c,v),m&&m.add(v.c,v.G,v.f)},get:function(a,b){var c=this.q[a],f;c&&(b||this.Tb(c));return c?c.G:(f=this.W)?f.get(a,b):void 0},remove:function(a,b){var c=this.q[a],f,d;c&&this.Y(a,c);if(!b&&(f=this.W))d=
f.remove(a,b);return c?c.G:d},removeAll:function(a){var b=this.q,c,f;for(c in b)b.hasOwnProperty(c)&&!c.indexOf(a)&&this.Y(c,b[c]);(f=this.W)&&f.removeAll(a)},destroy:function(){var a=this.q,b,c;for(c in a)(b=a[c]).V=0,b.X=0;this.fa=this.U=0;this.W&&this.W.destroy()},Y:function(a,b,c){var f=b.X,d=b.V,g;f?d?(f.V=d).X=f:(this.fa=f).V=void 0:(this.U=d)?d.X=void 0:this.fa=void 0;if(!c)delete this.q[a],this.f-=b.f,(g=this.se)&&g(b.G);return b.G},Tb:function(a){var b=this.U;if((b=this.U)!==a){this.Y(a.c,
a,1);if(b)(b.X=a).V=b;(this.U=a).X=void 0}}});l.prototype.f=1})(nokia.maps.util);ovi.provide("nokia.maps.map.provider.IData");ovi.provide("nokia.maps.map.provider.IObjectProvider");ovi.provide("nokia.maps.util.proto");
(function(){var e={}.toString,l=nokia.maps.util.proto=function(h,d,c,g){var b=Function(),f,r;b.prototype=d;b=new b;for(f in h)h.hasOwnProperty(f)&&(b[f]=c&&f in d&&e.call(r=h[f])==="[object Object]"?l(r,d[f],c):h[f]);if(c&&!g)for(f in d)if(d.hasOwnProperty(f)&&(r=d[f])===b[f]&&e.call(r)==="[object Object]")b[f]=l(0,r,c);return b}})();ovi.provide("nokia.maps.map.HitArea");
(function(){var e=Math,l=e.PI/180,h=e.ceil,d=e.min,c=e.sin,g=e.cos,b=nokia.maps.util,f=b.Point,r=nokia.maps.map.HitArea=new ovi.Class({initialize:function(a,f){var e=(f=[].concat(f)).length,p=e,m,r,s,v,u;this.values=f;for(this.type=a;p--;)isNaN(f[p]=f[p])&&b.d("Given argument is not the array of numbers");a==="rect"&&e>3&&(f=[+f[0],+f[1],+f[2],+f[1],+f[2],+f[3],+f[0],+f[3]],a="poly");if(a==="circle"&&e>2&&(s=+f[2])>0){m=+f[0];r=+f[1];p=d(h(s)*2,40);v=360/p;for(f=[];p--;)u=v*p*l,f.push(m+c(u)*s,r+
g(u)*s);a="poly"}if(a==="poly"&&e&&!(f.length%2))this.Yb=f;!this.Yb&&b.d("bad polygon")},Statics:{from:function(a){return a instanceof r?a:new r(a.type,a.values?a.values:a.coords)}},hitTest:function(a,b,c){return f.isCoveredBy(a,b,this.Yb,c,!0)}})})();ovi.provide("nokia.maps.map.provider.NullObjectProvider");
(function(e){e.map.provider.NullObjectProvider=new ovi.Class({$f:function(){},Sh:function(){},qc:function(){},requestBBox:function(){return[]},cancelBBoxRequest:function(){},adopt:function(e){if(e.e)return!1;e.e=this;return e},orphan:function(e){if(e.e!==this)return!1;e.e=null;return e}})})(nokia.maps);ovi.provide("nokia.maps.map.component.panning.Click");
(function(e){var l=e.map.component;l.panning.Click=new ovi.Class({Extends:l.Component,c:"panning.Click",o:"0.0.0.1",initialize:function(e){function d(f){c.enabled&&b.setCenter(b.pixelToGeo(f.targetX,f.targetY),"default")}var c=this,g=l.Component.prototype,b;c._super(ovi.extend({enabled:!0,useKineticPanning:!0},e));c.attach=function(f){g.attach.call(c,f);b=f;b.addListener("click",d)};c.detach=function(f){g.detach.call(c,f);b.removeListener("click",d)}}})})(nokia.maps);ovi.provide("nokia.maps.map.component.panning.panorama.Click");
(function(e){var l=e.map.component;l.panning.panorama.Click=new ovi.Class({Extends:l.Component,c:"panning.panorama.Click",o:"0.0.0.1",initialize:function(e){function d(f){c.enabled&&f.button===0&&b.setView(b.m.viewForXY(f.targetX,f.targetY),"default")}var c=this,g=l.Component.prototype,b;c.t=c.PANORAMA;c._super(ovi.extend({enabled:!0,useKineticPanning:!0},e));c.attach=function(f){g.attach.call(c,f);b=f;b.addListener("click",d)};c.detach=function(f){g.detach.call(c,f);b.removeListener("click",d)}}})})(nokia.maps);
ovi.provide("nokia.maps.map.component.panning.Kinetic");(function(e){var l=e.map.component,h=l.panning;if(!e.util.getConstructor(h.Kinetic))h.Kinetic=new ovi.Class({Extends:l.Component,c:"panning.Kinetic",o:"0.0.0.1",initialize:function(d){this._super(ovi.extend({current:null},d))},attach:function(d){this._super(d);d.Zg=!0},detach:function(d){this._super(d);d.Zg=!1}})})(nokia.maps);ovi.provide("nokia.maps.map.render.Capabilities");
(function(){if(!nokia.maps.util.getConstructor(nokia.maps.map.render.Capabilities))var e=nokia.maps,l={min:0,max:0},h=(e.map.render.Capabilities=function(d){return e.util.proto(d,h,!0,!0)}).prototype={view:{heading:l,tilt:l,incline:l,distance:l,zoom:{min:-1/0,max:1/0}},cam:{fov:{min:70,max:70}},altMode:{GL:!0,OL:!1,SL:!1,SB:!1,WE:!1,WG:!1},provider:{tile:{bmp:!0,gfx:!1,mesh:!1},object:{spatial:!0,marker:!0,decal:!1}},ui:17,capture:!1,ZOOM:1,HEADING:2,TILT:4,INCLINE:8,COORD:16,FOV:32,SIZE:64}})();
ovi.provide("nokia.maps.map.component.panning.Tap");
(function(e){var l=e.map.component;l.panning.Tap=new ovi.Class({Extends:l.Component,c:"panning.Tap",o:"0.0.0.1",initialize:function(e){function d(f){c.enabled&&b.setCenter(b.pixelToGeo(f.targetX,f.targetY),"default")}var c=this,g=l.Component.prototype,b;c.t=c.MAP_2D;c._super(ovi.extend({enabled:!0,useKineticPanning:!0},e));c.attach=function(f){g.attach.call(c,f);b=f;b.addListener("tap",d)};c.detach=function(f){g.detach.call(c,f);b.removeListener("tap",d)}}})})(nokia.maps);ovi.provide("nokia.maps.map.component.zoom.DoubleClick");
(function(e){var l=e.map.component;l.zoom.DoubleClick=new ovi.Class({Extends:l.Component,c:"zoom.DoubleClick",o:"0.0.0.1",initialize:function(){function e(b){var a=g.getZoom(b.displayX,b.displayY);if(c.enabled){var d=b.button===2;(f=g.getComponentById("panning.Kinetic"))&&f.set("current",null);g.setZoomLevel(Math[d?"floor":"ceil"](a+(d?-1:1)),"default",b.displayX,b.displayY);b.cancel()}}function d(b){c.enabled&&b.preventDefault()}var c=this,g,b=l.Component.prototype,f;c.t=c.MAP_2D|c.GLOBE;c._super({enabled:!0});
c.attach=function(f){b.attach.call(c,f);g=f;g.addListener("dblclick",e);g.addListener("contextmenu",d)};c.detach=function(f){b.detach.call(c,f);g.removeListener("dblclick",e);g.removeListener("contextmenu",d)}}})})(nokia.maps);ovi.provide("nokia.maps.map.component.zoom.DoubleTap");
(function(e){var l=e.map.component;l.zoom.DoubleTap=new ovi.Class({Extends:l.Component,c:"zoom.DoubleTap",o:"0.0.0.1",initialize:function(){function e(b){var h=c.getZoom(b.displayX,b.displayY);d.enabled&&((g=c.getComponentById("panning.Kinetic"))&&g.set("current",null),c.pixelToGeo(b.displayX,b.displayY),c.setZoomLevel(h+1,"default",b.displayX,b.displayY),b.cancel())}var d=this,c,g,b=l.Component.prototype;d.t=d.MAP_2D;d._super({enabled:!0});d.attach=function(f){b.attach.call(d,f);c=f;c.addListener("dbltap",
e)};d.detach=function(f){b.detach.call(d,f);c.removeListener("dbltap",e)}}})})(nokia.maps);ovi.provide("nokia.maps.map.component.zoom.GestureEvent");
(function(e){var e=e.map.component,l,h,d=ovi.Array.forEach,c=ovi.Array.indexOf,g=e.Component.prototype,b=["gesturestart","gestureend","gesturechange","touchstart","touchmove","touchend"];e.zoom.GestureEvent=new ovi.Class({Extends:e.Component,c:"zoom.GestureEvent",o:"0.0.0.1",initialize:function(){h=this;h.t=h.MAP_2D;h._super();h.attach=function(c){g.attach.call(h,c);l=c;d(b,function(b){l.addEvent(b)})};h.detach=function(c){g.detach.call(h,c);d(b,function(b){l.removeEvent(b)})}},addListener:function(f,
d){if(c(b,f)>=0)return l.addListener(f,d),!0;return!1},removeListener:function(f,d){if(c(b,f)>=0)return l.removeListener(f,d),!0;return!1}})})(nokia.maps);ovi.provide("nokia.maps.map.component.zoom.MouseWheel");
(function(e){var l={1:Math.floor,"-1":Math.ceil};e.map.component.zoom.MouseWheel=new ovi.Class({Extends:e.map.component.Component,c:"zoom.MouseWheel",o:"0.0.0.1",initialize:function(){this.bk=ovi.bind(this,this.bk);this.t=this.MAP_2D|this.GLOBE|this.PANORAMA;this._super({enabled:!0})},bk:function(e){var d=e.display,c=d.baseMapType.pType,g=e.timeStamp,b,f;if(this.enabled){b=e.deltaY<0?-1:1;if(c===this.PANORAMA)c=d.getCam(),c.fov+=b,d.setCam(c);else if(g-this.Jq>=200)this.Jq=g,c=d.getZoom(g=e.displayX,
f=e.displayY),d.setZoomLevel(e.shiftKey?c-b/20:l[b](c-b),"default",g,f);e.cancel()}},Jq:0,attach:function(e){this._super(e);e.addListener("wheel",this.bk)},detach:function(e){this._super(e);e.removeListener("wheel",this.bk)}})})(nokia.maps);ovi.provide("nokia.maps.map.component.zoom.Gesture");
(function(e){var l=e.map.component;l.zoom.Gesture=new ovi.Class({Extends:l.Component,c:"zoom.Gesture",o:"0.0.0.1",initialize:function(){this.t=this.MAP_2D;this.onGestureStart=ovi.bind(this,this.onGestureStart);this.onGestureEnd=ovi.bind(this,this.onGestureEnd);this.onTouch=ovi.bind(this,this.onTouch);this._super({enabled:!0})},Kc:!1,Qc:!1,onGestureStart:function(e){if(this.enabled)this.Kc=!0,e.preventDefault()},onGestureEnd:function(e){if(this.enabled)this.Qc=this.Kc=!1,this.mapDisplay.m.endInteraction(),
e.preventDefault()},onTouch:function(e){if(this.enabled&&this.Kc){var d=this.mapDisplay.m,c=e.touches,g=c.length>1,e=e.timeStamp,b=c[0].pageX,f=c[0].pageY,l=g?c[1].pageX:void 0,c=g?c[1].pageY:void 0;this.Qc?d.interact(e,b,f,l,c):(d.beginInteraction(d.capabilities.ZOOM|d.capabilities.COORD,null,e,b,f,l,c),this.Qc=!0)}},attach:function(e){var d;this._super(this,e);this.mapDisplay=e;this.Ug=d=new l.zoom.GestureEvent;e.addComponent(d);d.addListener("gesturestart",this.onGestureStart);d.addListener("gestureend",
this.onGestureEnd);d.addListener("touchstart",this.onTouch);d.addListener("touchmove",this.onTouch)},detach:function(e){var d=this.Ug;this._super(this,e);this.mapDispay=null;e.removeComponent(d);d.removeListener("gesturestart",this.onGestureStart);d.removeListener("gestureend",this.onGestureEnd);d.removeListener("touchstart",this.onTouch);d.removeListener("touchmove",this.onTouch);this.Ug=null;this.Qc=this.Kc=!1},enableRotation:function(){},disableRotation:function(){this.fv=!1},enableZoom:function(){this.to=
!0},disableZoom:function(){this.to=!1}})})(nokia.maps);ovi.provide("nokia.maps.map.Object");
(function(e){if(!e.util.getConstructor(e.map.Object)){var l=0,h=0,d=function(c,b){var f=c.Na(),d=b.Na(),a,e,k,p=0,m;if(!f||!d)return 0;a=f.length;e=d.length;for(k=a<e?a:e;p<k;p++)if(m=d[p]-f[p])return h?-m:m;return h?a-e:e-a},c={rev:0,sort:function(c,b,f){var e=[],a,q,k=c.length;for(q=0;q<k;q++)((a=c[q]).getIconForRendering||a.drawToTile)&&(b||a.isVisible())&&e.push(a);h=f;e.sort(d);return e},create:function(c){var b=c.s,f;f=null;b&&(f=(f=b.Na())?f.slice():[],f.push(c.zIndex,b.objects.indexOf(c)));
return f}};nokia.maps.map.Object=new ovi.Class({Extends:e.util.OObject,Mixins:e.dom.EventTarget,Statics:{sortByZInfo:c.sort,CHANGE_SPATIAL:1,CHANGE_VISUAL:2,CHANGE_ZINDEX:4},dispatch:function(c){c.display=this.getDisplay();return e.dom.EventTarget.prototype.dispatch.call(this,c)},initialize:function(c){this.e=new e.map.provider.NullObjectProvider;this.id=l++;c&&"draggable"in c?(c.isDraggable=c.draggable,delete c.draggable,this._super(c),c.draggable=c.isDraggable,delete c.isDraggable):this._super(c);
this.addObserver("*",this.$b,this)},s:null,CHANGE_SPATIAL:1,CHANGE_VISUAL:2,CHANGE_ZINDEX:4,isEventTarget:!0,zIndex:0,visibility:!0,u:"object",Lc:function(){return this.Nb||(this.Nb={})},destroy:function(){var c=this.s;c&&c.objects.remove(this);this.removeAllListeners();this.e=null;this.removeObserver("*",this.$b,this)},getInvalidations:function(c){var b=this.Nb;return b?(b[1]>c)*1|(b[2]>c)*2|(b[4]>c)*4:0},$b:function(c,b){this.ia(b,0)},getProvider:function(){return this.e},getParent:function(){return this.s},
getRoot:function(){for(var c=this,b;b=c.s;)c=b;return c},getDisplay:function(){var c=this.getRoot();return c.u==="display"?c:null},isVisible:function(){var c=this,b=!1;do b=c.visibility;while(b&&(c=c.s));return b},ia:function(c,b){var f;f=this.e;var d;b|=c==="zIndex"?4:c==="visibility"?2:0;d=f.qc(this,b);f=this.Lc();b&1&&(f[1]=d);b&2&&(f[2]=d);b&4&&(f[4]=d)},zIndexSetter:function(c){this.Ob();return c},eventListenerSetter:function(c){var b=0,f,d;if(c)for(d in this.removeAllListeners(),c)if((b=ovi.type(f=
c[d]))==="array")for(b=0;b<f.length;b+=3)this.addListenerNS(f[b+2],d,f[b],f[b+1]);else b==="function"&&this.addListenerNS(null,d,f,!1)},Na:function(){var d;if(!(d=this.oc))d=this.oc=c.create(this);return d},Ob:function(){this.oc=void 0},adopt:function(c){return c.adopt(this)},orphan:function(){return this.e.orphan(this)}})}})(nokia.maps);ovi.provide("nokia.maps.map._MarkerIcon");
(function(){function e(c){return new b(typeof c==="object"?c.strokeColor?{strokeColor:a(c.strokeColor)}:void 0:{strokeColor:c})}var l=nokia.maps,h=l.map.HitArea,d=l.util,c=d.proto,g=d.Point,b=d.Pen,f=new b({strokeColor:"#FFF"}),r=d.Brush,a=d.ColorHelper.getHex3,q=l.gfx,k=q.GraphicsImage,p=q.IDL,m=q.Color.parseCss,y=[4207599104,4207599105,4207599106,"$Text$"],s=new l.gfx.SvgParser,v=d.Yc("shape text textPen pen brush effect"),u=d.flatMerge(d.Yc("anchor hitArea"),v),x=new d.Cache(50),w=nokia.maps.map.Gb=
new ovi.Class({Extends:nokia.maps.util.OObject,initialize:function(a){var b;a&&a.shape&&a.shape!==this.shape?(this.shape=this.shapeSetter(b=a.shape),delete a.shape,this._super(a),a.shape=b):(this.shapeSetter(this.shape),this._super(a));this.addObserver("*",this.$d)},Statics:{gn:u,Sa:function(a){return a in u},pe:function(a){return!(a in v)},ec:{balloon:['<path style="opacity:0.4;fill:#353535" d="m 19,31 c 0,1.67 -2.69,3 -6,3 c -3.31,0 -6,-1.33 -6,-3 c 0,-1.67 2.69,-3 6,-3 c 3.31,0 6,1.33 6,3 z" /><path style="fill:#Facade01" d="m 13,0 c -3.47,0 -6.73,1.32 -9.19,3.75 C 1.36,7.82 0,9.41 0,12.84 c 0,3.43 1.36,6.64 3.81,9.06 L 13,31 l 9.19,-9.094 c 2.46,-2.43 3.81,-5.63 3.81,-9.06 c 0,-3.43 -1.36,-6.67 -3.81,-9.09 C 19.73,1.32 16.47,0 13,0 z"/><path style="fill:#ffffff" d="m 13,1 c -3.21,0 -6.23,1.23 -8.5,3.47 c -2.26,2.24 -3.5,5.22 -3.5,8.38 c 0,3.16 1.24,6.14 3.5,8.38 l 8.5,8.38 l 8.5,-8.38 c 2.26,-2.24 3.5,-5.22 3.5,-8.38 c 0,-3.16 -1.24,-6.14 -3.5,-8.38 C 19.23,2.23 16.2,1 13,1 z"/><path style="fill:#Facade00;fill-opacity:1" d="m 13,2.19 c -7,0 -10.74,4.96 -10.81,10.65 c 0,3.27 0.95,5.61 3.03,7.66 l 7.79,7.69 l 7.79,-7.69 c 2.07,-2.05 3.02,-4.27 3.03,-7.66 C 23.58,7.07 19.98,2.19 13,2.19 z"/><text x="13" y="18" font-size="10pt" font-family="arial" font-weight="bold" text-anchor="middle" fill="#Facade02">$Text$</text>',
28,36,13,31,"poly",[0,16,0,7,8,0,18,0,26,7,26,16,18,34,8,34]]}},text:"",pen:c({},f),textPen:c({},f),brush:c({},new r({color:"#1080DD"})),shape:"balloon",effect:"none",$d:function(a,b){if(b in v)a.c="",a.Oa=0},shapeSetter:function(a){var b=w.ec[a]||d.d("shape");this.f=new g(b[1],b[2]);this.anchor=new g(b[3],b[4]);this.hitArea=b[5]?new h(b[5],b[6]):void 0;return a},brushSetter:function(b){return new r(typeof b==="object"?b.color?{color:a(b.color)}:void 0:{color:b})},penSetter:e,textPenSetter:e,textSetter:function(a){return d.sanitizeText(a)},
Yd:function(){var a=w.ec[this.shape],b,c,f,d;if(a&&typeof a[0]==="string"){b=y.length;for(c=a[0]=ovi.Array(s.parseSvg('<svg version="1.1" width="'+(f=a[1])+'" height="'+(d=a[2])+'" viewBox="0 0 '+f+" "+d+'">'+a[0]+"</svg>").data);b--;){d=[];for(f=-1;(f=c.indexOf(y[b],f+1))!==-1;)d.push(f);d.length&&(a[7+b]=d)}}return a},Fe:function(a){for(var b=[m(this.brush.color,1),m(this.pen.strokeColor,1),m(this.textPen.strokeColor,1),this.text],c=b.length,f=a[0].slice(),d,g;c--;)if(d=a[7+c])for(g=d.length;g--;)f[d[g]]=
b[c];return f},getIcon:function(){var a,b;if(!this.Oa){if(!(b=x.get(a=this.ea())))x.add(a,b=new k(new p(this.Fe(this.Yd()))));this.Oa=b}return this.Oa},ea:function(){return this.c||(this.c=(this.hasOwnProperty("shape")?this.shape:"").concat(this.text,this.textPen.ea(),"P",this.pen.ea(),"B",this.brush.ea()))}})})();ovi.provide("nokia.maps.map.Marker");
(function(){var e=nokia.maps,l=e.util,h=e.dom,d=e.map,c=e.gfx,g=l.Point,b=l.Strip,f=new g(0,0),r=l.Rectangle,a=d.Gb,q=e.geo,k=d.HitArea,p=q.Coordinate,e=new ovi.Class({Extends:d.Object,initialize:function(b,c){var f;if(this.u==="marker"&&(!c||!("icon"in c)))f=new a,this.set("icon",f.getIcon()),this.set("anchor",f.anchor),this.set("hitArea",f.hitArea);this.Pa={};this._super(c);this.set("coordinate",b,1)},u:"marker",anchor:f,f:f,coordinateSetter:function(a){(a=p.fromObject(a))||l.d("coord");this.Pa=
{};return a},hitAreaSetter:function(a){return!a?a:k.from(a)},anchorSetter:function(a){(a=g.fromObject(a))||l.d("you have to set util.Point");return a},Ja:function(a){this.f=new g(a.width,a.height);this.fc=1},iconSetter:function(a){ovi.type(a);a instanceof c.Image||(a=c.Image.fromObject(a));a instanceof c.Image||l.d("icon");this.icon=a.C===document?a:a.clone(document);a.state===1?this.Ja(a):this.fc=0;return this.icon},getBoundingBox:function(){return q.BoundingBox.coverAll([this.coordinate])},getDisplayBoundingBox:function(a){a=
a.geoToPixel(this.coordinate).sub(this.anchor);return new r([a,a.add(this.f)])},hitTest:function(a,b,c,f){var a=this.getDisplayBoundingBox(a),d=new g(b,c),e=this.hitArea;return a.contains(d)&&(!e||e.hitTest(b-a.topLeft.x,c-a.topLeft.y,f))},getDisplayOffset:function(a,b,c){return(new g(b,c)).sub(a.geoToPixel(this.coordinate))},ia:function(a,b){a!=="zIndex"&&(b|=a==="coordinate"?1:2);this._super(a,b)},ae:function(a){var b="error";a.state===1&&(this.Ja(a),this.ia("icon",2),b="load");this.dispatch(new h.Event({type:b,
target:this,relatedTarget:a}))},getIconForRendering:function(a){var b=this.icon;a!==document&&(b=b.clone(a));b.state?this.fc||b.state===1&&this.Ja(b):b.prepare(this.ae,this);return b},project:function(a){return this.Pa[a.id]||(this.Pa[a.id]=a.geoToMapPoints(b.stencil(b.LAT_LNG,[this.coordinate.latitude,this.coordinate.longitude])))}});if(d.Marker.isNs)d.Marker=e})();ovi.provide("nokia.maps.map.StandardMarker");
(function(){function e(c,d,b){c.T.set(d,b);if(d==="shape")c.f=c.T.f,c.set("anchor",c.T.anchor),c.set("hitArea",c.T.hitArea);return c.T[d]}var l=nokia.maps,h=l.util,d=l.map.Gb,l=nokia.maps.map.StandardMarker=new ovi.Class({Extends:nokia.maps.map.Marker,initialize:function(c,g){var b=this.T=new d(h.flatMerge({},g,1,d.Sa));h.flatMerge(this,b,1,d.Sa);this.f=b.f;this._super(c,h.flatMerge({},g,1,d.pe))},u:"standardmarker",shapeSetter:function(c){return e(this,"shape",c)},textSetter:function(c){return e(this,
"text",c)},textPenSetter:function(c){return e(this,"textPen",c)},penSetter:function(c){return e(this,"pen",c)},brushSetter:function(c){return e(this,"brush",c)},getIconForRendering:function(c){this.set("icon",this.T.getIcon());return this._super(c)}});h.flatMerge(l.prototype,d.prototype,!0,d.Sa)})();ovi.provide("nokia.maps.map.component.panning.Drag");
(function(e){function l(b){return 1*b.altKey+2*b.ctrlKey+4*b.metaKey+8*(b.button===2||b.button===0&&(b.shiftKey||h&&b.ctrlKey))}var h=e.dom.Page.platform.mac,d=e.map,c=d.component,g=new d.render.Capabilities,b={duration:function(){return 600},ease:e.util.animation.easeFunctions.LINEAR,power:function(){return 1}};c.panning.Drag=new ovi.Class({Extends:c.Component,c:"panning.Drag",o:"0.0.0.1",initialize:function(f){function d(b){k.enabled&&(a(b),m.endInteraction(),m.setTransition(m.wa.TRANSITION.AUTO))}
function a(a){var b=a.dataTransfer;if(k.enabled&&b&&b.getData("application/map-drag-type")==="map"){var b=a.deltaX,c=a.deltaY;l(a)!==h?e(a):((b||c)&&m.interact(a.timeStamp,a.displayX,a.displayY),a.stopImmediatePropagation())}}function e(c){var f;if(k.enabled)f=c.dataTransfer,h=l(c),f.cursor=h&8?"move":"hand",f.lift=!1,f.setData("application/map-drag-type","map"),f.setData("application/map-drag-object",m),f.setData("application/map-drag-object-offset",void 0),m.setTransition(m.wa.TRANSITION.NONE),
m.beginInteraction(h&8?g.HEADING|g.TILT:g.COORD,m.Zg?b:"",c.timeStamp,c.displayX,c.displayY),a(c)}var k=this,p=c.Component.prototype,m,h;k.t=k.PANORAMA|k.MAP_2D|k.GLOBE;k._super(ovi.extend({enabled:!0,useKineticPanning:!0},f));k.attach=function(b){p.attach.call(k,b);m=b;m.addListener("dragstart",e);m.addListener("drag",a);m.addListener("dragend",d)};k.detach=function(b){p.detach.call(k,b);m.removeListener("dragstart",e);m.removeListener("drag",a);m.removeListener("dragend",d)}}})})(nokia.maps);ovi.provide("nokia.maps.map.component.objects.DragMarker");
(function(e){var l=e.util.Point,e=e.map,h=e.component,d=e.Marker,c=d.prototype.u,g=e.StandardMarker.prototype.u;h.objects.DragMarker=new ovi.Class({Extends:h.Component,c:"objects.DragMarker",o:"0.0.0.1",dragSourceOpacity:1,dragIconOpacity:0.5,initialize:function(b){function f(a){var b=a.dataTransfer,f=b&&b.getData("application/map-drag-type"),e=b&&b.getData("application/map-drag-object");if((f===c||f===g)&&e instanceof d){if(e.s)b.dropEffect="none";else if(b.allows("move"))b.dropEffect="move";else{b.dropEffect=
"none";a.cancel();return}f=b.getData("application/map-drag-object-offset")||new l(0,0);e.set("coordinate",s.pixelToGeo(a.displayX-f.x+e.anchor.x,a.displayY-f.y+e.anchor.y));b.dropEffect!=="none"&&s.objects.add(e);a.cancel()}else b.dropEffect="none"}function e(a){var b=a.dataTransfer,f=b&&b.getData("application/map-drag-type"),d=b&&b.getData("application/map-drag-object");if(f===c||f===g)b.dropEffect=d.s?"move":"copy",a.cancel()}function a(a){var b=a.dataTransfer,f=b&&b.getData("application/map-drag-type"),
d=b&&b.getData("application/map-drag-object");if(f===c||f===g)b.dropEffect=d.s?"move":"copy",a.cancel()}function q(a){var b=a.dataTransfer,f=b&&b.getData("application/map-drag-type"),d=b&&b.getData("application/map-drag-object");b&&b.getData("application/map-drag-object-display");if(f===c||f===g){d.removeListener("dragend",q,!0);if(b.dropEffect==="move"&&!s.contains(d))dragMarkerParent=d.s,dragMarkerParent.objects.remove(d);d.icon.opacity=1;d.ia("icon",2);a.stopImmediatePropagation()}}function k(a){var b=
a.dataTransfer,b=b&&b.getData("application/map-drag-type");(b===c||b===g)&&a.stopImmediatePropagation()}function p(a){if(m.enabled){var b,c,f,g=a.target,e=a.dataTransfer;if(g instanceof d&&g.isDraggable)c=g.getDisplayBoundingBox(s),b=a.displayX-c.topLeft.x,c=a.displayY-c.topLeft.y,f=g.getIconForRendering(document),e.setDragImage(f.createElement(m.dragIconOpacity),-b,-c),g.icon.opacity=m.dragSourceOpacity,g.ia("icon",2),e.setData("application/map-drag-type",g.u),e.setData("application/map-drag-object",
g),e.setData("application/map-drag-object-offset",new l(b,c)),e.effectAllowed="all",e.setData("application/map-drag-object-display",s),g.insertListener("dragend",q,!0),a.stopImmediatePropagation()}}var m=this,y=h.Component.prototype,s;m.t=m.MAP_2D|m.GLOBE;m._super(ovi.extend({enabled:!0,useKineticPanning:!0},b));m.attach=function(b){y.attach.call(m,b);s=b;s.addListener("dragstart",p);s.addListener("drag",k);s.addListener("dragend",q);s.addListener("dragenter",a);s.addListener("dragover",e);s.addListener("drop",
f)};m.detach=function(b){y.detach.call(m,b);s.removeListener("dragstart",p);s.removeListener("drag",k);s.removeListener("dragend",q);s.removeListener("dragenter",a);s.removeListener("dragover",e);s.removeListener("drop",f)}}})})(nokia.maps);ovi.provide("nokia.maps.map.component.Behavior");
(function(e){var l=e.map.component;l.Behavior=new ovi.Class({Extends:l.Component,c:"Behavior",o:"0.0.0.1",initialize:function(){var e=this,d=ovi.bind,c,g,b,f,r,a,q,k,p;e.t=e.PANORAMA|e.MAP_2D;e.attach=function(m){e.mapDisplay=c=m;var m=d(c,c.addComponent),y=l.zoom,s=l.panning;g=y.MouseWheel&&m(new y.MouseWheel);b=y.DoubleClick&&m(new y.DoubleClick);f=y.DoubleTap&&m(new y.DoubleTap);r=y.Gesture&&m(new y.Gesture);a=s.Drag&&m(new s.Drag);q=s.Kinetic&&m(new s.Kinetic);p=l.objects.DragMarker&&m(new l.objects.DragMarker);
k=s.panorama.Click&&m(new s.panorama.Click)};e.detach=function(){delete e.mapDisplay;var m=d(c,c.removeComponent);g&&m(g);b&&m(b);f&&m(f);r&&m(r);a&&m(a);q&&m(q);p&&m(p);k&&m(k);c=null}}})})(nokia.maps);ovi.provide("nokia.maps.behavior._packaging.package-all");})();
exports.jsla = this.nokia;
